function generateCameraZoomSteps(){for(var t=config.zla,e=0,n=config.nna(t),i=0;t<=config.ima;){if(i=config.nna(t),i>n){var r=Math.floor(n);config.ona[r]={min:e,max:t},e=t,n=i}t+=.1}config.ona[Math.floor(i)]={min:e,max:1/0}}function hitp(t,e,n,i,r){return t[r]+e-n[r]>i[r]/2}function hitn(t,e,n,i,r){return t[r]-e-n[r]<-i[r]/2}function hitxp(t,e,n,i){return hitp(t,e,n,i,"x")}function hitxn(t,e,n,i){return hitn(t,e,n,i,"x")}function hityp(t,e,n,i){return hitp(t,e,n,i,"y")}function hityn(t,e,n,i){return hitn(t,e,n,i,"y")}function hitzp(t,e,n,i){return hitp(t,e,n,i,"z")}function hitzn(t,e,n,i){return hitn(t,e,n,i,"z")}function startGame(t){var e,n;try{if(e=new THREE.hG,n=_.chain(config.gna).map(e.extensions.get).some(_.hf).value(),e=void 0,n)throw new Error("missing WebGL extensions")}catch(t){return console.error("Failed to init game.  Possible WebGL failure.  Original error below."),console.error(t.message),void ZOR.wra.state(ZOR.wra.asa.Gra)}isMobile.k9&&ZOR.vsa.xsa(),config.vna&&ZOR.pra.vra.background.play(),playerType=t,ZOR.wra.state(ZOR.wra.asa.Cra);var i=localStorage.rsa=UTIL.ipa(ZOR.wra.psa.get("player_name")),r=localStorage.qsa=ZOR.wra.psa.get("alpha_key"),o=UTIL.Joa(0,config.pna.length-1),a=config.pna[o];document.querySelector("meta[name=theme-color]").content=a,console.log("Player color",a),ZOR.wra.psa.set("player_size",{color:o,Iqa:50});var s=localStorage.getItem("skin")||"default";sendEnterGame(playerType,i,o,s,r)}function respawnPlayer(){console.log("Respawning player: ",player.ysa()),ZOR.wra.state(ZOR.wra.asa.Cra),sendRespawn()}function createScene(){function t(){canvas=document.getElementById("render-canvas"),scene=new THREE.$A,config.u&&(scene.qB=new THREE.qD(config.$ma,config.Zma,config.t)),ZOR.vsa.dK=new THREE.hG({jG:!0,canvas:canvas}),ZOR.vsa.dK.kH(config.$ma),ZOR.vsa.dK.dH(window.devicePixelRatio),ZOR.vsa.dK.eH(window.innerWidth,window.innerHeight),camera=new THREE.sq(config.bna,window.innerWidth/window.innerHeight,1,config.Kla+100),camera.position.set(0,0,0),foodController=new FoodController(zorbioModel,camera.position,scene),foodController.zsa(scene),foodController.Asa(zorbioModel.spa),drawPlayers();for(var t,n=[],i=0;i<6;i++)t=(new THREE.A).load("textures/skybox_grid_black.png"),t.Dy=t.Ey=THREE.zh,t.repeat.set(config.ana,config.ana),n.push(new THREE.MB({map:t})),n[i].Hz=THREE.yg,n[i].D=!0,n[i].hA=.5,n[i].map.wx=THREE.Ah,n[i].map.xx=THREE.Dh;var r=new THREE.oK(n),o=new THREE.qN(zorbioModel.npa.x,zorbioModel.npa.y,zorbioModel.npa.z,1,1,1),a=new THREE.jq(o,r);a.Mq=-1,scene.add(a);var s=new THREE.ey(2236962);scene.add(s),window.addEventListener("resize",e,!1)}function e(){camera.Lx=window.innerWidth/window.innerHeight,camera.Fx(),ZOR.vsa.dK.eH(window.innerWidth,window.innerHeight)}function n(){requestAnimationFrame(n);var t=ZOR.wra.state();0!==t.indexOf("menu")&&t!==ZOR.wra.asa.Ira||(camera.rotation.y-=config.hna*ZOR.Foa.get());var e;updateActors(),gameStart&&!player.Bsa?(e=player.view.Csa.position,throttledSendPlayerUpdate(),player.Dsa(),handleKeysDown(),ZOR.Foa.update(),player.update(scene,camera,camera_controls,ZOR.Foa.get()),foodController.Esa(player,captureFood),camera_controls.update(),raycaster.set(player.view.Csa.position,camera.jr().normalize()),updatePlayerSizeUI(),updateTargetLock()):e=0===ZOR.wra.state().indexOf("menu")?camera.position:player&&player.Bsa?player.q.p.position:{x:0,y:0,z:0},playerFogCenter.Di(e),foodController.update(e),ZOR.wra.update(),i()}function i(){ZOR.vsa.dK.Dx(scene,camera),r()}var r=_.sc(4,function(){canvas.classList.add("active")});try{t(),n()}catch(t){throw console.error("Failed to init game.  Possible WebGL failure.  Original error below."),ZOR.wra.state(ZOR.wra.asa.Gra),t}}function initCameraAndPlayer(){player.Fsa(scene),camera=new THREE.sq(config.bna,window.innerWidth/window.innerHeight,1,config.Kla+100),"FOLLOW"===config.vma.qma?(camera_controls=new THREE.xoa(camera,ZOR.vsa.dK.lG),camera_controls.voa=!0,camera_controls.roa=!1,camera_controls.toa=!0,camera_controls.woa=0,camera_controls.Wna=config.vma.rma,camera_controls.target=player.view.Csa.position):"DRAG"===config.vma.qma&&(camera_controls=new THREE.Sna(camera,ZOR.vsa.dK.lG),camera_controls.Fna=!0,camera_controls.Gna=.25,camera_controls.Tna=!1,camera_controls.target=player.view.Csa),camera_controls.Ana=config._ma,camera_controls.maxDistance=config._ma,camera.position.Di(player.q.p.position.clone().Xi(1.2)),player.Gsa(camera_controls),player.view.Hsa(player.N()),playerFogCenter.Di(player.view.Csa.position)}function drawPlayers(){zorbioModel.lpa.forEach(function(t){if(t.type!=ZOR.Rpa.Ipa){var e=t.id;player&&e===player.ysa()||(ZOR.vsa.lpa[e]=new ZOR.Isa(t,scene),ZOR.vsa.lpa[e].setAlpha(1))}})}function updateActors(){zorbioModel.kpa.forEach(function(t){if(t.type===ZOR.Cpa.Epa)if(player&&t.id===player.Jsa())player.Lsa(t.scale),player.Msa(t.Opa);else{var e=ZOR.vsa.lpa[t.Bpa];e&&e.view&&(e.Ksa(t.position),e.Lsa(t.scale),e.Msa(t.Opa))}})}function updatePlayerSizeUI(){ZOR.wra.data.Osa.Iqa=player.oqa()}function updateTargetLock(){var t=raycaster.vq(ZOR.vsa.wsa);if(t&&t.length>0){var e=t[0].object,n=e.Hqa===player.q.id,i=player.Psa()!==e.Hqa;if(i&&!n){player.Qsa(e.Hqa);var r=ZOR.vsa.lpa[e.Hqa];ZOR.wra.data.target={name:r.q.name,Iqa:r.q.oqa(),color:r.q.p.color},clearTimeout(ZOR.wra.Rsa),console.log("Set target lock: ",ZOR.wra.data.target)}}else player.Psa()&&(player.Qsa(0),ZOR.wra.Rsa=setTimeout(ZOR.wra.nH,4e3),console.log("clearing target lock"))}function captureFood(t){player.Ssa(t),foodController.Tsa(t)}function handleKeydown(t){var e,n;gameStart&&!player.Bsa&&(e=ListenForKeys.indexOf(t.keyCode+"")!==-1,e&&(n=KeysDown[KeyCodes[t.keyCode]],n||keyJustPressed(KeyCodes[t.keyCode]),KeysDown[KeyCodes[t.keyCode]]=!0))}function handleKeyup(t){if(gameStart&&!player.Bsa){var e=ListenForKeys.indexOf(t.keyCode+"")!==-1;e&&(keyReleased(KeyCodes[t.keyCode]),KeysDown[KeyCodes[t.keyCode]]=!1)}}function handleMouseDown(t){gameStart&&!player.Bsa&&0===t.button&&config.Gla&&!isMobile.k9&&player.Usa()&&sendSpeedBoostStart()}function handleMouseUp(t){gameStart&&!player.Bsa&&0===t.button&&config.Gla&&!isMobile.k9&&(player.Vsa(),sendSpeedBoostStop())}function handleKeysDown(){for(var t in KeysDown)KeysDown[t]&&keyDown(t)}function keyDown(t){"w"!==t||config.Gla?"s"===t&&player.Xsa(camera):player.Wsa(camera)}function keyJustPressed(t){"w"===t&&config.Gla&&player.Usa()&&sendSpeedBoostStart()}function keyReleased(t){"w"===t&&config.Gla&&player.Ysa()&&(player.Vsa(),sendSpeedBoostStop())}function removePlayerFromGame(t){var e=ZOR.vsa.lpa[t];zorbioModel.Apa(t),e&&e&&e.view&&(e.Zsa(scene),delete ZOR.vsa.lpa[t]),console.log("Removed player: ",t)}function handleServerTick(t){if(gameStart){t.mpa.forEach(function(t){var e=ZOR.vsa.lpa[t.Hqa];t.name=e.q.name,t.color=e.q.p.color}),ZOR.wra.psa.set("leaders",t.mpa),ZOR.wra.data.mpa=t.mpa;for(var e=0,n=t.fr.length;e<n;++e)foodController.$sa(t.fr[e]);ZOR.wra.psa.set("server_message",t.Jqa),ZOR.Dqa()}}function handleSuccessfulPlayerCapture(t){player.m4(config.lma(t.N())),ZOR.pra.qra.ura.play()}function handleDeath(t){var e=t.Xqa;console.log("YOU DIED! You were alive for "+t._qa+" seconds. Killed by: ",e),setDeadState();var n=zorbioModel.zpa(e);n.Iqa=config.nma(n.p.scale);var i={aqa:t.$qa,$pa:t.Yqa,_pa:t.Zqa,Iqa:t.Iqa};ZOR.wra.psa.set("attacker",n),ZOR.wra.psa.set("player",i),ZOR.wra.state(ZOR.wra.asa.Era),ga("send",{msa:"event",nsa:"StateChange",osa:"death"})}function handlePlayerKick(t){ZOR.wra.state(ZOR.wra.asa.Fra),ZOR.wra.psa.set("kicked_message",t)}function setDeadState(){player._sa=!1,player.Bsa=!0,clearIntervalMethods(),KeysDown={}}function connectToServer(){var t=new URI("ws://"+config.Cla+":"+config.Nla);ws=new WebSocket(t.toString()),ws.binaryType="arraybuffer",ws.onopen=function(){console.log("WebSocket connection established and ready."),setupSocket(ws)}}function sendEnterGame(t,e,n,i,r){ws.readyState===WebSocket.OPEN&&ws.send(JSON.stringify({cua:"enter_game",type:t,name:e,color:n,QC:i,key:r}))}function setupSocket(t){function e(t){return JSON.parse(t)}function n(t){t.q.kpa.forEach(function(t){UTIL.hn(t,"position"),UTIL.hn(t,"velocity")}),NB_SRVID=t.Lqa,_.assign(zorbioModel,t.q),ZOR.wra.ET("init",createScene),console.log("Game initialzed")}function i(e){console.log("Welcome: ",e.Mqa.name),player=new ZOR.Isa(e.Mqa,null,!0),t.send(JSON.stringify({cua:"player_ready"}))}function r(){ZOR.vsa.lpa[player.ysa()]=player,zorbioModel.vpa(player.q.p),initCameraAndPlayer(),gameStart=!0,setIntervalMethods(),console.log("Game started!")}function o(t){var e=t.Mqa;player&&e.id===player.ysa()||(ZOR.vsa.lpa[e.id]||(ZOR.vsa.lpa[e.id]=new ZOR.Isa(e,scene),ZOR.vsa.lpa[e.id].setAlpha(1),UTIL.hn(e.p,"position"),UTIL.hn(e.p,"velocity"),zorbioModel.lpa.push(e),zorbioModel.vpa(e.p)),console.log("Player joined: ",e.id,e.name))}function a(){zorPingDuration=Date.now()-zorPingStart,console.log("Ping: "+zorPingDuration+"ms")}function s(t){if(player){var e=Date.now();actorUpdateGap=e-player.q.mqa.tqa,player.q.mqa.tqa=e}t.kpa.forEach(function(t){var e=zorbioModel.ypa(t.id);if(e&&(e.position.Di(t.position),e.scale=t.scale,e.type===ZOR.Cpa.Epa)){e.Opa=t.Opa;var n=ZOR.vsa.lpa[e.Bpa];n&&n.uta(t.Ppa)}})}function h(t){if(gameStart){var e=t.dua;console.log("YOU CAPTURED PLAYER! ",e);var n=ZOR.vsa.lpa[e];handleSuccessfulPlayerCapture(n),removePlayerFromGame(e)}}function u(t){gameStart&&handleDeath(t)}function c(t){var e=t.eua,n=t.dua;player&&e===player.ysa()||(console.log("Player died:  ",n),removePlayerFromGame(n))}function f(t){foodController&&foodController.yta()&&foodController.Tsa(t.Kqa)}function l(t){gameStart&&handleServerTick(t.ara)}function p(t){console.log("Server said: ",t.reason),setDeadState(),handlePlayerKick(t.reason)}function d(t){console.log("received remove_player",t.Bpa),removePlayerFromGame(t.Bpa)}function E(){gameStart&&console.log("WARNING! You are speeding!")}function v(t){console.log("speed boost is valid:",t.fua),player.tta()}function g(){console.log("Received speed boost STOP"),player.Vsa(),sendSpeedBoostStop()}t.onmessage=function(t){if("string"==typeof t.data){var m=e(t.data);switch(m.cua){case"welcome":i(m);break;case"game_setup":r();break;case"player_join":o(m);break;case"zor_pong":a();break;case"captured_player":h(m);break;case"player_died":c(m);break;case"food_captured":f(m);break;case"kick":p(m);break;case"remove_player":d(m);break;case"speeding_warning":E();break;case"speed_boost_res":v(m);break;case"speed_boost_stop":g()}}else{var y=UTIL.gpa(t.data);switch(y){case ZOR.Gqa.hra.bra:n(ZOR.Gqa.ira.decode(t.data));break;case ZOR.Gqa.hra.cra:s(ZOR.Gqa.jra.decode(t.data));break;case ZOR.Gqa.hra.era:l(ZOR.Gqa.lra.decode(t.data));break;case ZOR.Gqa.hra.fra:u(ZOR.Gqa.mra.decode(t.data));break;case ZOR.Gqa.hra.gra:i(ZOR.Gqa.nra.decode(t.data));break;default:console.error("Error: Unknown binary op code: ",y)}}},t.onclose=function(t){t.code!=config.Zla&&handleNetworkTermination(),disconnected=!0,console.log("Connection closed:",t.code,t.reason)},t.onerror=function(t){console.error("Websocket error occured",t)}}function handleNetworkTermination(){setTimeout(location.reload.bind(location),500)}function sendRespawn(){gameStart=!1,ws.send(JSON.stringify({cua:"respawn"}))}function sendPing(){zorPingStart=Date.now();var t=Math.round(ZOR.Foa.ora());ws.send(JSON.stringify({cua:"zor_ping",gua:zorPingDuration,ru:t}))}function setIntervalMethods(){interval_id_heartbeat=window.setInterval(sendPing,config.Rla)}function sendPlayerUpdate(){var t=Date.now(),e=t-player.q.kqa.tqa;player.q.kqa.tqa=t;var n=ws.bufferedAmount;player.qta();for(var i=player.q.p;i.Kpa.length<4;)player.sta();var r={0:ZOR.Gqa.hra.dra,Hqa:player.ysa(),Nqa:i.id,Oqa:e,Pqa:actorUpdateGap,Qqa:n,Rqa:i.Kpa[i.Kpa.length-1],Sqa:i.Kpa[i.Kpa.length-2],Tqa:i.Kpa[i.Kpa.length-3],Uqa:i.Kpa[i.Kpa.length-4],Vqa:i.Kpa[0],Wqa:player.Wqa},o=ZOR.Gqa.kra.encode(r);player.Wqa=[],ws.send(o)}function sendSpeedBoostStart(){ws.send(JSON.stringify({cua:"speed_boost_start"}))}function sendSpeedBoostStop(){ws.send(JSON.stringify({cua:"speed_boost_stop"}))}function clearIntervalMethods(){window.clearInterval(interval_id_heartbeat)}var ZOR=ZOR||{};ZOR.g=ZOR.g||{},ZOR.g.h=function(t){var e=t.i?.2:.6;return{j:{},k:{l:{c:{type:"f",value:1.41803},m:{type:"f",value:2.71828},o:{type:"v3",value:t.q.p.position},s:{type:"v3",value:playerFogCenter},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u},v:{type:"t",value:(new THREE.A).load("skins/earth/earth-sphere-map.jpg")}},B:document.getElementById("skin-earth-vertex-shader").textContent,C:document.getElementById("skin-earth-fragment-shader").textContent,D:!0},F:{group:{scale:Math.max(window.innerWidth,window.innerHeight),G:{value:(new THREE.A).load("skins/earth/trail.png")},H:800},I:{J:{value:8},position:{value:new THREE.K(0,0,0),L:new THREE.K(0,0,0),M:new THREE.K(0,0,0),N:5,O:SPE.R.P},opacity:{value:[e,0]},angle:{value:[0],L:[8,0]},S:{value:8},color:{value:new THREE.T("#B9D5EB")},size:{value:[6,0]},U:800,V:.1}}}},ZOR.g.h.W={X:"Planet Earth",name:"earth",Y:"skins/earth/thumb.jpg",sort:2};var ZOR=ZOR||{};ZOR.g=ZOR.g||{},ZOR.g.default=function(t){var e=t.i?.4:.8,n=new THREE.T(t.Z);return{j:{},k:{l:{c:{type:"f",value:1.41803},m:{type:"f",value:2.71828},color:{type:"c",value:n},$:{type:"v3",value:n._()},o:{type:"v3",value:t.q.p.position},s:{type:"v3",value:playerFogCenter},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u}},B:document.getElementById("skin-default-vertex-shader").textContent,C:document.getElementById("skin-default-fragment-shader").textContent,D:!0},F:{aa:.5,group:{scale:Math.max(window.innerWidth,window.innerHeight),G:{value:(new THREE.A).load("skins/default/trail.png")},H:800},I:{J:{value:20},position:{value:new THREE.K(0,0,0),L:new THREE.K(0,0,0),M:new THREE.K(0,0,0),N:5,O:SPE.R.P},opacity:{value:[e,0]},S:{value:1},color:{value:new THREE.T(t.Z)},size:{value:[90,60,30,0]},U:800,V:.1}}}},ZOR.g.default.W={X:"Smooth Shade",name:"default",Y:"skins/default/thumb.jpg",sort:1};var ZOR=ZOR||{};ZOR.g=ZOR.g||{},ZOR.g.ba=function(t){var e=t.i?.1:.4;new THREE.T("#ffffff");return{j:{ca:20,da:10},k:{l:{c:{type:"f",value:1.41803},m:{type:"f",value:2.71828},o:{type:"v3",value:t.q.p.position},s:{type:"v3",value:playerFogCenter},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u},v:{type:"t",value:(new THREE.A).load("skins/techno/texture.jpg")}},B:document.getElementById("skin-techno-vertex-shader").textContent,C:document.getElementById("skin-techno-fragment-shader").textContent,D:!0},F:{group:{scale:Math.max(window.innerWidth,window.innerHeight),G:{value:(new THREE.A).load("skins/techno/trail.png"),frames:new THREE.ea(2,1),loop:4},H:800},I:{J:{value:4},position:{value:new THREE.K(0,0,0)},opacity:{value:[e,0]},S:{value:8},color:{value:new THREE.T("#B9D5EB")},size:{value:[100,0]},U:800,V:.1}}}},ZOR.g.ba.W={X:"Techno",name:"techno",Y:"skins/techno/thumb.jpg",sort:3};var ZOR=ZOR||{};ZOR.g=ZOR.g||{},ZOR.g.fa=function(t){var e=t.i?.1:.4;new THREE.T("#ffffff");return{j:{ca:20,da:10},k:{l:{c:{type:"f",value:1.41803},m:{type:"f",value:2.71828},o:{type:"v3",value:t.q.p.position},s:{type:"v3",value:playerFogCenter},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u},v:{type:"t",value:(new THREE.A).load("skins/boing/texture.jpg")}},B:document.getElementById("skin-boing-vertex-shader").textContent,C:document.getElementById("skin-boing-fragment-shader").textContent,D:!0},F:{group:{scale:Math.max(window.innerWidth,window.innerHeight),G:{value:(new THREE.A).load("skins/boing/trail.png"),frames:new THREE.ea(2,1),loop:4},H:800},I:{J:{value:8},position:{value:new THREE.K(0,0,0),L:new THREE.K(0,0,0),M:new THREE.K(0,0,0),N:5,O:SPE.R.P},opacity:{value:[e,0]},color:{value:new THREE.T("#B9D5EB")},size:{value:[100,0]},U:800,V:.1}}}},ZOR.g.fa.W={X:"Boing",name:"boing",Y:"skins/boing/thumb.jpg",sort:3};var ZOR=ZOR||{};ZOR.g=ZOR.g||{},ZOR.g.ga=function(t){var e=t.i?.2:.6;return{j:{ha:{y:.001}},k:{l:{c:{type:"f",value:1.41803},m:{type:"f",value:2.71828},o:{type:"v3",value:t.q.p.position},s:{type:"v3",value:playerFogCenter},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u},v:{type:"t",value:(new THREE.A).load("skins/reddit/texture.jpg")}},B:document.getElementById("skin-reddit-vertex-shader").textContent,C:document.getElementById("skin-reddit-fragment-shader").textContent,D:!0},F:{group:{scale:Math.max(window.innerWidth,window.innerHeight),G:{value:(new THREE.A).load("skins/reddit/trail.png")},H:800},I:{J:{value:8},position:{value:new THREE.K(0,0,0),L:new THREE.K(0,0,0),M:new THREE.K(0,0,0),N:5,O:SPE.R.P},opacity:{value:[e,0]},angle:{value:[0],L:[8,0]},S:{value:8},color:{value:new THREE.T("#B9D5EB")},size:{value:[6,0]},U:800,V:.1}}}},ZOR.g.ga.W={X:"Reddit",name:"reddit",Y:"skins/reddit/thumb.png",ia:"?reddit",sort:0},function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,n){var i=n?n.length:0;switch(i){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,i=t.length,r=-1,o=e.length,a=Array(i+o);++n<i;)a[n]=t[n];for(;++r<o;)a[n++]=e[r];return a}function r(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function o(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function a(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function s(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[++r]=a)}return o}function h(t,e){return!!t.length&&m(t,e,0)>-1}function u(t,e,n){for(var i=-1,r=t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function c(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function f(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function l(t,e,n,i){var r=-1,o=t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function p(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function d(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function E(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],a=e(o);if(null!=a&&(s===K?a===a:n(a,s)))var s=a,h=o}return h}function v(t,e,n,i){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=i?n:t,!1}),r}function g(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function m(t,e,n){if(e!==e)return P(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function y(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function T(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function R(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==K&&(n=n===K?o:n+o)}return n}function w(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function H(t,e){return c(e,function(e){return[e,t[e]]})}function b(t){return function(e){return t(e)}}function x(t,e){return c(e,function(e){return t[e]})}function A(t,e){for(var n=-1,i=t.length;++n<i&&m(e,t[n],0)>-1;);return n}function M(t,e){for(var n=t.length;n--&&m(e,t[n],0)>-1;);return n}function U(t){return t&&t.Object===Object?t:null}function O(t,e){if(t!==e){var n=null===t,i=t===K,r=t===t,o=null===e,a=e===K,s=e===e;if(t>e&&!o||!r||n&&!a&&s||i&&s)return 1;if(t<e&&!n||!s||o&&!i&&r||a&&r)return-1}return 0}function S(t,e,n){for(var i=-1,r=t.Lb,o=e.Lb,a=r.length,s=n.length;++i<a;){var h=O(r[i],o[i]);if(h){if(i>=s)return h;var u=n[i];return h*("desc"==u?-1:1)}}return t.index-e.index}function D(t){return vn[t]}function C(t){return gn[t]}function L(t){return"\\"+Tn[t]}function P(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!==o)return r}return-1}function N(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function I(t,e){return t="number"==typeof t||Re.test(t)?+t:-1,e=null==e?gt:e,t>-1&&t%1==0&&t<e}function z(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function B(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function j(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;)t[n]===e&&(t[n]=Ht,o[++r]=n);return o}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function G(t){if(!t||!hn.test(t))return t.length;for(var e=sn.lastIndex=0;sn.test(t);)e++;return e}function F(t){return t.match(sn)}function k(t){return mn[t]}function V(U){function zt(t){if(Ha(t)&&!tc(t)&&!(t instanceof Ae)){if(t instanceof xe)return t;if(xh.call(t,"__wrapped__"))return Rr(t)}return new xe(t)}function Re(){}function xe(t,e){this.Qb=t,this.Rb=[],this.Sb=!!e,this.Tb=0,this.Ub=K}function Ae(t){this.Qb=t,this.Rb=[],this.Yb=1,this.Zb=!1,this.$b=[],this._b=Tt,this.ac=[]}function _e(){var t=new Ae(this.Qb);return t.Rb=Ai(this.Rb),t.Yb=this.Yb,t.Zb=this.Zb,t.$b=Ai(this.$b),t._b=this._b,t.ac=Ai(this.ac),t}function Me(){if(this.Zb){var t=new Ae(this);t.Yb=-1,t.Zb=!0}else t=this.clone(),t.Yb*=-1;return t}function Ue(){var t=this.Qb.value(),e=this.Yb,n=tc(t),i=e<0,r=n?t.length:0,o=nr(0,r,this.ac),a=o.start,s=o.end,h=s-a,u=i?s:a-1,c=this.$b,f=c.length,l=0,p=Zh(h,this._b);if(!n||r<ct||r==h&&p==h)return vi(t,this.Rb);var d=[];t:for(;h--&&l<p;){u+=e;for(var E=-1,v=t[u];++E<f;){var g=c[E],m=g.bc,y=g.type,T=m(v);if(y==lt)v=T;else if(!T){if(y==ft)continue t;break t}}d[l++]=v}return d}function Oe(){}function Se(t,e){return Ce(t,e)&&delete t[e]}function De(t,e){if(eu){var n=t[e];return n===Et?K:n}return xh.call(t,e)?t[e]:K}function Ce(t,e){return eu?t[e]!==K:xh.call(t,e)}function Le(t,e,n){t[e]=eu&&n===K?Et:n}function Pe(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ne(){this.cc={hash:new Oe,map:Qh?new Qh:[],dc:new Oe}}function Ie(t){var e=this.cc;return cr(t)?Se("string"==typeof t?e.dc:e.hash,t):Qh?e.map.delete(t):Ye(e.map,t)}function ze(t){var e=this.cc;return cr(t)?De("string"==typeof t?e.dc:e.hash,t):Qh?e.map.get(t):Je(e.map,t)}function Be(t){var e=this.cc;return cr(t)?Ce("string"==typeof t?e.dc:e.hash,t):Qh?e.map.has(t):Qe(e.map,t)}function je(t,e){var n=this.cc;return cr(t)?Le("string"==typeof t?n.dc:n.hash,t,e):Qh?n.map.set(t,e):tn(n.map,t,e),this}function qe(t){var e=-1,n=t?t.length:0;for(this.cc=new Pe;++e<n;)this.push(t[e])}function Ge(t,e){var n=t.cc;if(cr(e)){var i=n.cc,r="string"==typeof e?i.dc:i.hash;return r[e]===Et}return n.has(e)}function Fe(t){var e=this.cc;if(cr(t)){var n=e.cc,i="string"==typeof t?n.dc:n.hash;i[t]=Et}else e.set(t,Et)}function ke(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ve(){this.cc={ec:[],map:null}}function Ke(t){var e=this.cc,n=e.ec;return n?Ye(n,t):e.map.delete(t)}function We(t){var e=this.cc,n=e.ec;return n?Je(n,t):e.map.get(t)}function Ze(t){var e=this.cc,n=e.ec;return n?Qe(n,t):e.map.has(t)}function Xe(t,e){var n=this.cc,i=n.ec;i&&(i.length<ct-1?tn(i,t,e):(n.ec=null,n.map=new Pe(i)));var r=n.map;return r&&r.set(t,e),this}function Ye(t,e){var n=$e(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():qh.call(t,n,1),!0}function Je(t,e){var n=$e(t,e);return n<0?K:t[n][1]}function Qe(t,e){return $e(t,e)>-1}function $e(t,e){for(var n=t.length;n--;)if(oa(t[n][0],e))return n;return-1}function tn(t,e,n){var i=$e(t,e);i<0?t.push([e,n]):t[i][1]=n}function en(t,e,n,i){return t===K||oa(t,Hh[n])&&!xh.call(i,n)?e:t}function nn(t,e,n){(n===K||oa(t[e],n))&&("number"!=typeof e||n!==K||e in t)||(t[e]=n)}function rn(t,e,n){var i=t[e];oa(i,n)&&(!oa(i,Hh[e])||xh.call(t,e))&&(n!==K||e in t)||(t[e]=n)}function on(t,e){return t&&_i(e,as(e),t)}function sn(t,e){for(var n=-1,i=null==t,r=e.length,o=Array(r);++n<r;)o[n]=i?K:ns(t,e[n]);return o}function vn(t,e,n){return t===t&&(n!==K&&(t=t<=n?t:n),e!==K&&(t=t>=e?t:e)),t}function gn(t,e,n,i,o,a){var s;if(n&&(s=o?n(t,i,o,a):n(t)),s!==K)return s;if(!wa(t))return t;var h=tc(t);if(h){if(s=rr(t),!e)return Ai(t,s)}else{var u=er(t),c=u==Ut||u==Ot;if(u!=Ct&&u!=bt&&(!c||o))return En[u]?ar(t,u,e):o?t:{};if(N(t))return o?t:{};if(s=or(c?{}:t),!e)return Ui(t,on(s,t))}a||(a=new ke);var f=a.get(t);return f?f:(a.set(t,s),(h?r:Mn)(t,function(i,r){rn(s,r,gn(i,e,n,r,t,a))}),h?s:Ui(t,s))}function mn(t){var e=as(t),n=e.length;return function(i){if(null==i)return!n;for(var r=n;r--;){var o=e[r],a=t[o],s=i[o];if(s===K&&!(o in Object(i))||!a(s))return!1}return!0}}function yn(t,e,n){if("function"!=typeof t)throw new Rh(dt);return jh(function(){t.apply(K,n)},e)}function Tn(t,e,n,i){var r=-1,o=h,a=!0,s=t.length,f=[],l=e.length;if(!s)return f;n&&(e=c(e,b(n))),i?(o=u,a=!1):e.length>=ct&&(o=Ge,a=!1,e=new qe(e));t:for(;++r<s;){var p=t[r],d=n?n(p):p;if(a&&d===d){for(var E=l;E--;)if(e[E]===d)continue t;f.push(p)}else o(e,d,i)||f.push(p)}return f}function Hn(t,e){var n=!0;return cu(t,function(t,i,r){return n=!!e(t,i,r)}),n}function bn(t,e,n,i){var r=t.length;for(n=qa(n),n<0&&(n=-n>r?0:r+n),i=i===K||i>r?r:qa(i),i<0&&(i+=r),i=n>i?0:Ga(i);n<i;)t[n++]=e;return t}function xn(t,e){var n=[];return cu(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function An(t,e,n,i){i||(i=[]);for(var r=-1,o=t.length;++r<o;){var a=t[r];ca(a)&&(n||tc(a)||ha(a))?e?An(a,e,n,i):f(i,a):n||(i[i.length]=a)}return i}function _n(t,e){return null==t?t:lu(t,e,ss)}function Mn(t,e){return t&&lu(t,e,as)}function Un(t,e){return t&&pu(t,e,as)}function Sn(t,e){return s(e,function(e){return ya(t[e])})}function Dn(t,e){e=ur(e,t)?[e+""]:li(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[e[n++]];return n&&n==i?t:K}function Cn(t,e){return xh.call(t,e)||"object"==typeof t&&e in t&&null===Nh(t)}function Ln(t,e){return e in Object(t)}function Pn(t,e,n){return t>=Zh(e,n)&&t<Wh(e,n)}function Nn(t,e,n){for(var i=n?u:h,r=t.length,o=r,a=Array(r),s=[];o--;){var f=t[o];o&&e&&(f=c(f,b(e))),a[o]=!n&&(e||f.length>=120)?new qe(o&&f):K}f=t[0];var l=-1,p=f.length,d=a[0];t:for(;++l<p;){var E=f[l],v=e?e(E):E;if(!(d?Ge(d,v):i(s,v,n))){for(var o=r;--o;){var g=a[o];if(!(g?Ge(g,v):i(t[o],v,n)))continue t}d&&d.push(v),s.push(E)}}return s}function In(t,e,i){ur(e,t)||(e=li(e),t=vr(t,e),e=Br(e));var r=null==t?t:t[e];return null==r?K:n(r,t,i)}function zn(t,e,n,i,r){return t===e||(null==t||null==e||!wa(t)&&!Ha(e)?t!==t&&e!==e:Bn(t,e,zn,n,i,r))}function Bn(t,e,n,i,r,o){var a=tc(t),s=tc(e),h=xt,u=xt;a||(h=er(t),h==bt?h=Ct:h!=Ct&&(a=Na(t))),s||(u=er(e),u==bt?u=Ct:u!=Ct&&(s=Na(e)));var c=h==Ct&&!N(t),f=u==Ct&&!N(e),l=h==u;if(l&&!a&&!c)return Xi(t,e,h,n,i,r);var p=r&ot;if(!p){var d=c&&xh.call(t,"__wrapped__"),E=f&&xh.call(e,"__wrapped__");if(d||E)return n(d?t.value():t,E?e.value():e,i,r,o)}return!!l&&(o||(o=new ke),(a?Zi:Yi)(t,e,n,i,r,o))}function jn(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var h=s[0],u=t[h],c=s[1];if(a&&s[2]){if(u===K&&!(h in t))return!1}else{var f=new ke,l=i?i(u,c,h,t,e,f):K;if(!(l===K?zn(c,u,i,rt|ot,f):l))return!1}}return!0}function qn(t){var e=typeof t;return"function"==e?t:null==t?Xs:"object"==e?tc(t)?Kn(t[0],t[1]):Vn(t):ih(t)}function Gn(t){return Kh(Object(t))}function Fn(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function kn(t,e){var n=-1,i=ua(t)?Array(t.length):[];return cu(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Vn(t){var e=$i(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&&(t[n]===i&&(i!==K||n in Object(t)))}}return function(n){return n===t||jn(n,t,e)}}function Kn(t,e){return function(n){var i=ns(n,t);return i===K&&i===e?rs(n,t):zn(e,i,K,rt|ot)}}function Wn(t,e,n,i,o){if(t!==e){var a=tc(e)||Na(e)?K:ss(e);r(a||e,function(r,s){if(a&&(s=r,r=e[s]),wa(r))o||(o=new ke),Zn(t,e,s,n,Wn,i,o);else{var h=i?i(t[s],r,s+"",t,e,o):K;h===K&&(h=r),nn(t,s,h)}})}}function Zn(t,e,n,i,r,o,a){var s=t[n],h=e[n],u=a.get(h)||a.get(s);if(u)return void nn(t,n,u);var c=o?o(s,h,n+"",t,e,a):K,f=c===K;f&&(c=h,tc(h)||Na(h)?c=tc(s)?i?Ai(s):s:ca(s)?Ai(s):gn(h):Sa(h)||ha(h)?c=ha(s)?ka(s):!wa(s)||i&&ya(s)?gn(h):i?gn(s):s:f=!1),a.set(h,c),f&&r(c,h,i,o,a),nn(t,n,c)}function Xn(t,e,n){var i=-1,r=Qi();e=c(e.length?e:Array(1),function(t){return r(t)});var o=kn(t,function(t,n,r){var o=c(e,function(e){return e(t)});return{Lb:o,index:++i,value:t}});return T(o,function(t,e){return S(t,e,n)})}function Yn(t,e){return t=Object(t),l(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Jn(t,e){var n={};return _n(t,function(t,i){e(t,i)&&(n[i]=t)}),n}function Qn(t){return function(e){return null==e?K:e[t]}}function $n(t){return function(e){return Dn(e,t)}}function ti(t,e){return ei(t,e)}function ei(t,e,n){var i=-1,r=e.length,o=t;for(n&&(o=c(t,function(t){return n(t)}));++i<r;)for(var a=0,s=e[i],h=n?n(s):s;(a=m(o,h,a))>-1;)o!==t&&qh.call(o,a,1),qh.call(t,a,1);return t}function ni(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(i==n||r!=o){var o=r;if(I(r))qh.call(t,r,1);else if(ur(r,t))delete t[r];else{var a=li(r),s=vr(t,a);null!=s&&delete s[Br(a)]}}}return t}function ii(t,e){return t+Fh(Yh()*(e-t+1))}function ri(t,e,n,i){for(var r=-1,o=Wh(Gh((e-t)/(n||1)),0),a=Array(o);o--;)a[i?o:++r]=t,t+=n;return a}function oi(t,e,n,i){e=ur(e,t)?[e+""]:li(e);for(var r=-1,o=e.length,a=o-1,s=t;null!=s&&++r<o;){var h=e[r];if(wa(s)){var u=n;if(r!=a){var c=s[h];u=i?i(c,h,s):K,u===K&&(u=null==c?I(e[r+1])?[]:{}:c)}rn(s,h,u)}s=s[h]}return t}function ai(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}function si(t,e){var n;return cu(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function hi(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&r<=wt){for(;i<r;){var o=i+r>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?i=o+1:r=o}return r}return ui(t,e,Xs,n)}function ui(t,e,n,i){e=n(e);for(var r=0,o=t?t.length:0,a=e!==e,s=null===e,h=e===K;r<o;){var u=Fh((r+o)/2),c=n(t[u]),f=c!==K,l=c===c;if(a)var p=l||i;else p=s?l&&f&&(i||null!=c):h?l&&(i||f):null!=c&&(i?c<=e:c<e);p?r=u+1:o=u}return Zh(o,Rt)}function ci(t){return fi(t)}function fi(t,e){for(var n=0,i=t.length,r=t[0],o=e?e(r):r,a=o,s=0,h=[r];++n<i;)r=t[n],o=e?e(r):r,oa(o,a)||(a=o,h[++s]=r);return h}function li(t){return tc(t)?t:mr(t)}function pi(t,e,n){var i=-1,r=h,o=t.length,a=!0,s=[],c=s;if(n)a=!1,r=u;else if(o>=ct){var f=e?null:Eu(t);if(f)return q(f);a=!1,r=Ge,c=new qe}else c=e?[]:s;t:for(;++i<o;){var l=t[i],p=e?e(l):l;if(a&&p===p){for(var d=c.length;d--;)if(c[d]===p)continue t;e&&c.push(p),s.push(l)}else r(c,p,n)||(c!==s&&c.push(p),s.push(l))}return s}function di(t,e){e=ur(e,t)?[e+""]:li(e),t=vr(t,e);var n=Br(e);return null==t||!is(t,n)||delete t[n]}function Ei(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?ai(t,i?0:o,i?o+1:r):ai(t,i?o+1:0,i?r:o)}function vi(t,e){var n=t;return n instanceof Ae&&(n=n.value()),l(e,function(t,e){return e.fc.apply(e.gc,f([t],e.hc))},n)}function gi(t,e,n){for(var i=-1,r=t.length;++i<r;)var o=o?f(Tn(o,t[i],e,n),Tn(t[i],o,e,n)):t[i];return o&&o.length?pi(o,e,n):[]}function mi(t){var e=t.constructor,n=new e(t.byteLength),i=new Ch(n);return i.set(new Ch(t)),n}function yi(e){var n=e.constructor;return l(B(e),t,new n)}function Ti(t){var e=t.constructor,n=new e(t.source,Ee.exec(t));return n.lastIndex=t.lastIndex,n}function Ri(t){var n=t.constructor;return l(q(t),e,new n)}function wi(t){return Dh?Object(au.call(t)):{}}function Hi(t,e){var n=t.buffer,i=t.constructor;return new i(e?mi(n):n,t.byteOffset,t.length)}function bi(t,e,n){for(var i=n.length,r=-1,o=Wh(t.length-i,0),a=-1,s=e.length,h=Array(s+o);++a<s;)h[a]=e[a];for(;++r<i;)h[n[r]]=t[r];for(;o--;)h[a++]=t[r++];return h}function xi(t,e,n){for(var i=-1,r=n.length,o=-1,a=Wh(t.length-r,0),s=-1,h=e.length,u=Array(a+h);++o<a;)u[o]=t[o];for(var c=o;++s<h;)u[c+s]=e[s];for(;++i<r;)u[c+n[i]]=t[o++];return u}function Ai(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function _i(t,e,n){return Mi(t,e,n)}function Mi(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var a=e[r],s=i?i(n[a],t[a],a,n,t):t[a];rn(n,a,s)}return n}function Ui(t,e){return _i(t,mu(t),e)}function Oi(t,e){return function(n,i){var r=e?e():{};if(i=Qi(i),tc(n))for(var o=-1,a=n.length;++o<a;){var s=n[o];t(r,s,i(s),n)}else cu(n,function(e,n,o){t(r,e,i(e),o)});return r}}function Si(t){
return Yo(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:K,a=r>2?n[2]:K;for(o="function"==typeof o?(r--,o):K,a&&hr(n[0],n[1],a)&&(o=r<3?K:o,r=1),e=Object(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e})}function Di(t,e){return function(n,i){if(null==n)return n;if(!ua(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Object(n);(e?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function Ci(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var h=a[t?s:++r];if(n(o[h],h,o)===!1)break}return e}}function Li(t,e,n){function i(){var e=this&&this!==On&&this instanceof i?o:t;return e.apply(r?n:this,arguments)}var r=e&Z,o=Ii(t);return i}function Pi(t){return function(e){e=Ka(e);var n=hn.test(e)?F(e):K,i=n?n[0]:e.charAt(0),r=n?n.slice(1).join(""):e.slice(1);return i[t]()+r}}function Ni(t){return function(e){return l(Vs(xs(e)),t,"")}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=uu(t.prototype),i=t.apply(n,e);return wa(i)?i:n}}function zi(t,e,i){function r(){for(var a=arguments.length,s=a,h=Array(a),u=this&&this!==On&&this instanceof r?o:t,c=r.placeholder;s--;)h[s]=arguments[s];var f=a<3&&h[0]!==c&&h[a-1]!==c?[]:j(h,c);return a-=f.length,a<i?Vi(t,e,ji,c,K,h,f,K,K,i-a):n(u,this,h)}var o=Ii(t);return r}function Bi(t){return Yo(function(e){e=An(e);var n=e.length,i=n,r=xe.prototype.ic;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new Rh(dt);if(r&&!a&&"wrapper"==Ji(o))var a=new xe([],!0)}for(i=a?i:n;++i<n;){o=e[i];var s=Ji(o),h="wrapper"==s?vu(o):K;a=h&&fr(h[0])&&h[1]==(et|J|$|nt)&&!h[4].length&&1==h[9]?a[Ji(h[0])].apply(a,h[3]):1==o.length&&fr(o)?a[s]():a.ic(o)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&tc(i)&&i.length>=ct)return a.jc(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function ji(t,e,n,i,r,o,a,s,h,u){function c(){for(var m=arguments.length,y=m,T=Array(m);y--;)T[y]=arguments[y];if(i&&(T=bi(T,i,r)),o&&(T=xi(T,o,a)),d||E){var R=c.placeholder,w=j(T,R);if(m-=w.length,m<u)return Vi(t,e,ji,R,n,T,w,s,h,u-m)}var H=l?n:this,b=p?H[t]:t;return s?T=gr(T,s):v&&T.length>1&&T.reverse(),f&&h<T.length&&(T.length=h),this&&this!==On&&this instanceof c&&(b=g||Ii(b)),b.apply(H,T)}var f=e&et,l=e&Z,p=e&X,d=e&J,E=e&Q,v=e&it,g=p?K:Ii(t);return c}function qi(t){return Yo(function(e){return e=c(An(e),Qi()),Yo(function(i){var r=this;return t(e,function(t){return n(t,r,i)})})})}function Gi(t,e,n){e=qa(e);var i=G(t);if(!e||i>=e)return"";var r=e-i;n=n===K?" ":n+"";var o=Cs(n,Gh(r/G(n)));return hn.test(n)?F(o).slice(0,r).join(""):o.slice(0,r)}function Fi(t,e,i,r){function o(){for(var e=-1,h=arguments.length,u=-1,c=r.length,f=Array(c+h),l=this&&this!==On&&this instanceof o?s:t;++u<c;)f[u]=r[u];for(;h--;)f[u++]=arguments[++e];return n(l,a?i:this,f)}var a=e&Z,s=Ii(t);return o}function ki(t){return function(e,n,i){return i&&"number"!=typeof i&&hr(e,n,i)&&(n=i=K),e=Fa(e),e=e===e?e:0,n===K?(n=e,e=0):n=Fa(n)||0,i=i===K?e<n?1:-1:Fa(i)||0,ri(e,n,i,t)}}function Vi(t,e,n,i,r,o,a,s,h,u){var c=e&J,f=s?Ai(s):K,l=c?a:K,p=c?K:a,d=c?o:K,E=c?K:o;e|=c?$:tt,e&=~(c?tt:$),e&Y||(e&=~(Z|X));var v=[t,e,r,d,l,E,p,f,h,u],g=n.apply(K,v);return fr(t)&&yu(g,v),g.placeholder=i,g}function Ki(t){var e=yh[t];return function(t,n){if(t=Fa(t),n=qa(n)){var i=(Ka(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Ka(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function Wi(t,e,n,i,r,o,a,s){var h=e&X;if(!h&&"function"!=typeof t)throw new Rh(dt);var u=i?i.length:0;if(u||(e&=~($|tt),i=r=K),a=a===K?a:Wh(qa(a),0),s=s===K?s:qa(s),u-=r?r.length:0,e&tt){var c=i,f=r;i=r=K}var l=h?K:vu(t),p=[t,e,n,i,r,c,f,o,a,s];if(l&&dr(p,l),t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],s=p[9]=null==p[9]?h?0:t.length:Wh(p[9]-u,0),!s&&e&(J|Q)&&(e&=~(J|Q)),e&&e!=Z)d=e==J||e==Q?zi(t,e,s):e!=$&&e!=(Z|$)||r.length?ji.apply(K,p):Fi(t,e,n,i);else var d=Li(t,e,n);var E=l?du:yu;return E(d,p)}function Zi(t,e,n,i,r,o){var a=-1,s=r&ot,h=r&rt,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var f=o.get(t);if(f)return f==e;var l=!0;for(o.set(t,e);++a<u;){var p=t[a],E=e[a];if(i)var v=s?i(E,p,a,e,t,o):i(p,E,a,t,e,o);if(v!==K){if(v)continue;l=!1;break}if(h){if(!d(e,function(t){return p===t||n(p,t,i,r,o)})){l=!1;break}}else if(p!==E&&!n(p,E,i,r,o)){l=!1;break}}return o.delete(t),l}function Xi(t,e,n,i,r,o){switch(n){case Bt:return!(t.byteLength!=e.byteLength||!i(new Ch(t),new Ch(e)));case At:case _t:return+t==+e;case Mt:return t.name==e.name&&t.message==e.message;case Dt:return t!=+t?e!=+e:t==+e;case Lt:case Nt:return t==e+"";case St:var a=B;case Pt:var s=o&ot;return a||(a=q),(s||t.size==e.size)&&i(a(t),a(e),r,o|rt);case It:return!!Dh&&au.call(t)==au.call(e)}return!1}function Yi(t,e,n,i,r,o){var a=r&ot,s=as(t),h=s.length,u=as(e),c=u.length;if(h!=c&&!a)return!1;for(var f=h;f--;){var l=s[f];if(!(a?l in e:Cn(e,l)))return!1}var p=o.get(t);if(p)return p==e;var d=!0;o.set(t,e);for(var E=a;++f<h;){l=s[f];var v=t[l],g=e[l];if(i)var m=a?i(g,v,l,e,t,o):i(v,g,l,t,e,o);if(!(m===K?v===g||n(v,g,i,r,o):m)){d=!1;break}E||(E="constructor"==l)}if(d&&!E){var y=t.constructor,T=e.constructor;y!=T&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof T&&T instanceof T)&&(d=!1)}return o.delete(t),d}function Ji(t){for(var e=t.name+"",n=hu[e],i=xh.call(hu,e)?n.length:0;i--;){var r=n[i],o=r.fc;if(null==o||o==t)return r.name}return e}function Qi(){var t=zt.bc||Ys;return t=t===Ys?qn:t,arguments.length?t(arguments[0],arguments[1]):t}function $i(t){for(var e=Es(t),n=e.length;n--;)e[n][2]=pr(e[n][1]);return e}function tr(t,e){var n=null==t?K:t[e];return _a(n)?n:K}function er(t){return Mh.call(t)}function nr(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Zh(e,t+a);break;case"takeRight":t=Wh(t,e-a)}}return{start:t,end:e}}function ir(t,e,n){if(null==t)return!1;var i=n(t,e);return i||ur(e)||(e=li(e),t=vr(t,e),null!=t&&(e=Br(e),i=n(t,e))),i||Ra(t&&t.length)&&I(e,t.length)&&(tc(t)||La(t)||ha(t))}function rr(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&xh.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function or(t){var e=t.constructor;return uu(ya(e)?e.prototype:K)}function ar(t,e,n){var i=t.constructor;switch(e){case Bt:return mi(t);case At:case _t:return new i(+t);case jt:case qt:case Gt:case Ft:case kt:case Vt:case Kt:case Wt:case Zt:return Hi(t,n);case St:return yi(t);case Dt:case Nt:return new i(t);case Lt:return Ti(t);case Pt:return Ri(t);case It:return wi(t)}}function sr(t){var e=t?t.length:K;return Ra(e)&&(tc(t)||La(t)||ha(t))?w(e,String):null}function hr(t,e,n){if(!wa(n))return!1;var i=typeof e;return!!("number"==i?ua(n)&&I(e,n.length):"string"==i&&e in n)&&oa(n[e],t)}function ur(t,e){return"number"==typeof t||!tc(t)&&(ae.test(t)||!oe.test(t)||null!=e&&t in Object(e))}function cr(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!==t||null==t}function fr(t){var e=Ji(t),n=zt[e];if("function"!=typeof n||!(e in Ae.prototype))return!1;if(t===n)return!0;var i=vu(n);return!!i&&t===i[0]}function lr(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Hh;return t===n}function pr(t){return t===t&&!wa(t)}function dr(t,e){var n=t[1],i=e[1],r=n|i,o=r<(Z|X|et),a=i==et&&n==J||i==et&&n==nt&&t[7].length<=e[8]||i==(et|nt)&&e[7].length<=e[8]&&n==J;if(!o&&!a)return t;i&Z&&(t[2]=e[2],r|=n&Z?0:Y);var s=e[3];if(s){var h=t[3];t[3]=h?bi(h,s,e[4]):Ai(s),t[4]=h?j(t[3],Ht):Ai(e[4])}return s=e[5],s&&(h=t[5],t[5]=h?xi(h,s,e[6]):Ai(s),t[6]=h?j(t[5],Ht):Ai(e[6])),s=e[7],s&&(t[7]=Ai(s)),i&et&&(t[8]=null==t[8]?e[8]:Zh(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Er(t,e,n,i,r,o){return wa(t)&&wa(e)&&(o.set(e,t),Wn(t,e,K,Er,o)),t}function vr(t,e){return 1==e.length?t:ns(t,ai(e,0,-1))}function gr(t,e){for(var n=t.length,i=Zh(e.length,n),r=Ai(t);i--;){var o=e[i];t[i]=I(o,n)?r[o]:K}return t}function mr(t){var e=[];return Ka(t).replace(se,function(t,n,i,r){e.push(i?r.replace(pe,"$1"):n||t)}),e}function yr(t){return ca(t)?t:[]}function Tr(t){return"function"==typeof t?t:Xs}function Rr(t){if(t instanceof Ae)return t.clone();var e=new xe(t.Qb,t.Sb);return e.Rb=Ai(t.Rb),e.Tb=t.Tb,e.Ub=t.Ub,e}function wr(t,e){e=Wh(qa(e),0);var n=t?t.length:0;if(!n||e<1)return[];for(var i=0,r=-1,o=Array(Gh(n/e));i<n;)o[++r]=ai(t,i,i+=e);return o}function Hr(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var o=t[e];o&&(r[++i]=o)}return r}function br(t,e,n){var i=t?t.length:0;return i?(e=n||e===K?1:qa(e),ai(t,e<0?0:e,i)):[]}function xr(t,e,n){var i=t?t.length:0;return i?(e=n||e===K?1:qa(e),e=i-e,ai(t,0,e<0?0:e)):[]}function Ar(t,e){return t&&t.length?Ei(t,Qi(e,3),!0,!0):[]}function _r(t,e){return t&&t.length?Ei(t,Qi(e,3),!0):[]}function Mr(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&hr(t,e,n)&&(n=0,i=r),bn(t,e,n,i)):[]}function Ur(t,e){return t&&t.length?g(t,Qi(e,3)):-1}function Or(t,e){return t&&t.length?g(t,Qi(e,3),!0):-1}function Sr(t,e){var n=t?t.length:0;return n?An(c(t,Qi(e,3))):[]}function Dr(t){var e=t?t.length:0;return e?An(t):[]}function Cr(t){var e=t?t.length:0;return e?An(t,!0):[]}function Lr(t){for(var e=-1,n=t?t.length:0,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function Pr(t){return t?t[0]:K}function Nr(t,e,n){var i=t?t.length:0;return i?(n=qa(n),n<0&&(n=Wh(i+n,0)),m(t,e,n)):-1}function Ir(t){return xr(t,1)}function zr(t,e){return t?Vh.call(t,e):""}function Br(t){var e=t?t.length:0;return e?t[e-1]:K}function jr(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if(n!==K&&(r=qa(n),r=(r<0?Wh(i+r,0):Zh(r,i-1))+1),e!==e)return P(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function qr(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function Gr(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,Qi(n)):t}function Fr(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Qi(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return ni(t,r),n}function kr(t){return t?Jh.call(t):t}function Vr(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&hr(t,e,n)?(e=0,n=i):(e=null==e?0:qa(e),n=n===K?i:qa(n)),ai(t,e,n)):[]}function Kr(t,e){return hi(t,e)}function Wr(t,e,n){return ui(t,e,Qi(n))}function Zr(t,e){var n=t?t.length:0;if(n){var i=hi(t,e);if(i<n&&oa(t[i],e))return i}return-1}function Xr(t,e){return hi(t,e,!0)}function Yr(t,e,n){return ui(t,e,Qi(n),!0)}function Jr(t,e){var n=t?t.length:0;if(n){var i=hi(t,e,!0)-1;if(oa(t[i],e))return i}return-1}function Qr(t){return t&&t.length?ci(t):[]}function $r(t,e){return t&&t.length?fi(t,Qi(e)):[]}function to(t){return br(t,1)}function eo(t,e,n){return t&&t.length?(e=n||e===K?1:qa(e),ai(t,0,e<0?0:e)):[]}function no(t,e,n){var i=t?t.length:0;return i?(e=n||e===K?1:qa(e),e=i-e,ai(t,e<0?0:e,i)):[]}function io(t,e){return t&&t.length?Ei(t,Qi(e,3),!1,!0):[]}function ro(t,e){return t&&t.length?Ei(t,Qi(e,3)):[]}function oo(t){return t&&t.length?pi(t):[]}function ao(t,e){return t&&t.length?pi(t,Qi(e)):[]}function so(t,e){return t&&t.length?pi(t,K,e):[]}function ho(t){if(!t||!t.length)return[];var e=0;return t=s(t,function(t){if(ca(t))return e=Wh(t.length,e),!0}),w(e,function(e){return c(t,Qn(e))})}function uo(t,e){if(!t||!t.length)return[];var i=ho(t);return null==e?i:c(i,function(t){return n(e,K,t)})}function co(t,e){for(var n=-1,i=t?t.length:0,r=e?e.length:0,o={};++n<i;)oi(o,t[n],n<r?e[n]:K);return o}function fo(t){var e=zt(t);return e.Sb=!0,e}function lo(t,e){return e(t),t}function po(t,e){return e(t)}function Eo(){return fo(this)}function vo(){return new xe(this.value(),this.Sb)}function go(t){return this.map(t).kc()}function mo(){this.Ub===K&&(this.Ub=ja(this.value()));var t=this.Tb>=this.Ub.length,e=t?K:this.Ub[this.Tb++];return{done:t,value:e}}function yo(){return this}function To(t){for(var e,n=this;n instanceof Re;){var i=Rr(n);i.Tb=0,i.Ub=K,e?r.Qb=i:e=i;var r=i;n=n.Qb}return r.Qb=t,e}function Ro(){var t=this.Qb;if(t instanceof Ae){var e=t;return this.Rb.length&&(e=new Ae(this)),e=e.reverse(),e.Rb.push({fc:po,hc:[kr],gc:K}),new xe(e,this.Sb)}return this.ic(kr)}function wo(){return vi(this.Qb,this.Rb)}function Ho(t,e,n){var i=tc(t)?a:Hn;return n&&hr(t,e,n)&&(e=K),i(t,Qi(e,3))}function bo(t,e){var n=tc(t)?s:xn;return n(t,Qi(e,3))}function xo(t,e){if(e=Qi(e,3),tc(t)){var n=g(t,e);return n>-1?t[n]:K}return v(t,e,cu)}function Ao(t,e){if(e=Qi(e,3),tc(t)){var n=g(t,e,!0);return n>-1?t[n]:K}return v(t,e,fu)}function _o(t,e){return"function"==typeof e&&tc(t)?r(t,e):cu(t,Tr(e))}function Mo(t,e){return"function"==typeof e&&tc(t)?o(t,e):fu(t,Tr(e))}function Uo(t,e,n,i){t=ua(t)?t:ys(t),n=n&&!i?qa(n):0;var r=t.length;return n<0&&(n=Wh(r+n,0)),La(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&m(t,e,n)>-1}function Oo(t,e){var n=tc(t)?c:kn;return n(t,Qi(e,3))}function So(t,e,n,i){return null==t?[]:(tc(e)||(e=null==e?[]:[e]),n=i?K:n,tc(n)||(n=null==n?[]:[n]),Xn(t,e,n))}function Do(t,e,n){var i=tc(t)?l:y,r=arguments.length<3;return i(t,Qi(e,4),n,r,cu)}function Co(t,e,n){var i=tc(t)?p:y,r=arguments.length<3;return i(t,Qi(e,4),n,r,fu)}function Lo(t,e){var n=tc(t)?s:xn;return e=Qi(e,3),n(t,function(t,n,i){return!e(t,n,i)})}function Po(t){var e=ua(t)?t:ys(t),n=e.length;return n>0?e[ii(0,n-1)]:K}function No(t,e){var n=-1,i=ja(t),r=i.length,o=r-1;for(e=vn(qa(e),0,r);++n<e;){var a=ii(n,o),s=i[a];i[a]=i[n],i[n]=s}return i.length=e,i}function Io(t){return No(t,Tt)}function zo(t){if(null==t)return 0;if(ua(t)){var e=t.length;return e&&La(t)?G(t):e}return as(t).length}function Bo(t,e,n){var i=tc(t)?d:si;return n&&hr(t,e,n)&&(e=K),i(t,Qi(e,3))}function jo(t,e){if("function"!=typeof e)throw new Rh(dt);return t=qa(t),function(){if(--t<1)return e.apply(this,arguments)}}function qo(t,e,n){return e=n?K:e,e=t&&null==e?t.length:e,Wi(t,et,K,K,K,K,e)}function Go(t,e){var n;if("function"!=typeof e)throw new Rh(dt);return t=qa(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=K),n}}function Fo(t,e,n){e=n?K:e;var i=Wi(t,J,K,K,K,K,K,e);return i.placeholder=Fo.placeholder,i}function ko(t,e,n){e=n?K:e;var i=Wi(t,Q,K,K,K,K,K,e);return i.placeholder=ko.placeholder,i}function Vo(t,e,n){function i(){d&&Lh(d),c&&Lh(c),v=0,u=c=p=d=E=K}function r(e,n){n&&Lh(n),c=d=E=K,e&&(v=Vu(),f=t.apply(p,u),d||c||(u=p=K))}function o(){var t=e-(Vu()-l);t<=0||t>e?r(E,c):d=jh(o,t)}function a(){return(d&&E||c&&y)&&(f=t.apply(p,u)),i(),f}function s(){r(y,d)}function h(){if(u=arguments,l=Vu(),p=this,E=y&&(d||!g),m===!1)var n=g&&!d;else{c||g||(v=l);var i=m-(l-v),r=i<=0||i>m;r?(c&&(c=Lh(c)),v=l,f=t.apply(p,u)):c||(c=jh(s,i))}return r&&d?d=Lh(d):d||e===m||(d=jh(o,e)),n&&(r=!0,f=t.apply(p,u)),!r||d||c||(u=p=K),f}var u,c,f,l,p,d,E,v=0,g=!1,m=!1,y=!0;if("function"!=typeof t)throw new Rh(dt);return e=Fa(e)||0,wa(n)&&(g=!!n.lc,m="maxWait"in n&&Wh(Fa(n.mc)||0,e),y="trailing"in n?!!n.nc:y),h.cancel=i,h.flush=a,h}function Ko(t){return Wi(t,it)}function Wo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Rh(dt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.oc;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.oc=o.set(r,a),a};return n.oc=new Wo.pc,n}function Zo(t){if("function"!=typeof t)throw new Rh(dt);return function(){return!t.apply(this,arguments)}}function Xo(t){return Go(2,t)}function Yo(t,e){if("function"!=typeof t)throw new Rh(dt);return e=Wh(e===K?t.length-1:qa(e),0),function(){for(var i=arguments,r=-1,o=Wh(i.length-e,0),a=Array(o);++r<o;)a[r]=i[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,i[0],a);case 2:return t.call(this,i[0],i[1],a)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=i[r];return s[e]=a,n(t,this,s)}}function Jo(t){if("function"!=typeof t)throw new Rh(dt);return function(e){return n(t,this,e)}}function Qo(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Rh(dt);return wa(n)&&(i="leading"in n?!!n.lc:i,r="trailing"in n?!!n.nc:r),Vo(t,e,{lc:i,mc:e,nc:r})}function $o(t){return qo(t,1)}function ta(t,e){return e=null==e?Xs:e,Ju(e,t)}function ea(t){return gn(t)}function na(t,e){return gn(t,!1,e)}function ia(t){return gn(t,!0)}function ra(t,e){return gn(t,!0,e)}function oa(t,e){return t===e||t!==t&&e!==e}function aa(t,e){return t>e}function sa(t,e){return t>=e}function ha(t){return ca(t)&&xh.call(t,"callee")&&(!Bh.call(t,"callee")||Mh.call(t)==bt)}function ua(t){return null!=t&&!("function"==typeof t&&ya(t))&&Ra(gu(t))}function ca(t){return Ha(t)&&ua(t)}function fa(t){return t===!0||t===!1||Ha(t)&&Mh.call(t)==At}function la(t){return Ha(t)&&Mh.call(t)==_t}function pa(t){return!!t&&1===t.nodeType&&Ha(t)&&!Sa(t)}function da(t){return!Ha(t)||ya(t.splice)?!zo(t):!as(t).length}function Ea(t,e){return zn(t,e)}function va(t,e,n){n="function"==typeof n?n:K;var i=n?n(t,e):K;return i===K?zn(t,e,n):!!i}function ga(t){return Ha(t)&&"string"==typeof t.message&&Mh.call(t)==Mt}function ma(t){return"number"==typeof t&&kh(t)}function ya(t){var e=wa(t)?Mh.call(t):"";return e==Ut||e==Ot}function Ta(t){return"number"==typeof t&&t==qa(t)}function Ra(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gt}function wa(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ha(t){return!!t&&"object"==typeof t}function ba(t,e){return t===e||jn(t,e,$i(e))}function xa(t,e,n){return n="function"==typeof n?n:K,jn(t,e,$i(e),n)}function Aa(t){return Oa(t)&&t!=+t}function _a(t){return null!=t&&(ya(t)?Oh.test(bh.call(t)):Ha(t)&&(N(t)?Oh:ye).test(t))}function Ma(t){return null===t}function Ua(t){return null==t}function Oa(t){return"number"==typeof t||Ha(t)&&Mh.call(t)==Dt}function Sa(t){if(!Ha(t)||Mh.call(t)!=Ct||N(t))return!1;var e=Hh;if("function"==typeof t.constructor&&(e=Nh(t)),null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&bh.call(n)==_h}function Da(t){return wa(t)&&Mh.call(t)==Lt}function Ca(t){return Ta(t)&&t>=-gt&&t<=gt}function La(t){return"string"==typeof t||!tc(t)&&Ha(t)&&Mh.call(t)==Nt}function Pa(t){return"symbol"==typeof t||Ha(t)&&Mh.call(t)==It}function Na(t){return Ha(t)&&Ra(t.length)&&!!dn[Mh.call(t)]}function Ia(t){return t===K}function za(t,e){return t<e}function Ba(t,e){return t<=e}function ja(t){if(!t)return[];if(ua(t))return La(t)?F(t):Ai(t);if(zh&&t[zh])return z(t[zh]());var e=er(t),n=e==St?B:e==Pt?q:ys;return n(t)}function qa(t){if(!t)return 0===t?t:0;if(t=Fa(t),t===vt||t===-vt){var e=t<0?-1:1;return e*mt}var n=t%1;return t===t?n?t-n:t:0}function Ga(t){return t?vn(qa(t),0,Tt):0}function Fa(t){if(wa(t)){var e=ya(t.valueOf)?t.valueOf():t;t=wa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ce,"");var n=me.test(t);return n||Te.test(t)?wn(t.slice(2),n?2:8):ge.test(t)?yt:+t}function ka(t){return _i(t,ss(t))}function Va(t){return vn(qa(t),-gt,gt)}function Ka(t){if("string"==typeof t)return t;if(null==t)return"";if(Pa(t))return Dh?su.call(t):"";var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function Wa(t,e){var n=uu(t);return e?on(n,e):n}function Za(t,e){return v(t,Qi(e,3),Mn,!0)}function Xa(t,e){return v(t,Qi(e,3),Un,!0)}function Ya(t,e){return null==t?t:lu(t,Tr(e),ss)}function Ja(t,e){return null==t?t:pu(t,Tr(e),ss)}function Qa(t,e){return t&&Mn(t,Tr(e))}function $a(t,e){return t&&Un(t,Tr(e))}function ts(t){return null==t?[]:Sn(t,as(t))}function es(t){return null==t?[]:Sn(t,ss(t))}function ns(t,e,n){var i=null==t?K:Dn(t,e);return i===K?n:i}function is(t,e){return ir(t,e,Cn)}function rs(t,e){return ir(t,e,Ln)}function os(t,e,n){return l(as(t),function(i,r){var o=t[r];return e&&!n?xh.call(i,o)?i[o].push(r):i[o]=[r]:i[o]=r,i},{})}function as(t){var e=lr(t);if(!e&&!ua(t))return Gn(t);var n=sr(t),i=!!n,r=n||[],o=r.length;for(var a in t)!Cn(t,a)||i&&("length"==a||I(a,o))||e&&"constructor"==a||r.push(a);return r}function ss(t){for(var e=-1,n=lr(t),i=Fn(t),r=i.length,o=sr(t),a=!!o,s=o||[],h=s.length;++e<r;){var u=i[e];a&&("length"==u||I(u,h))||"constructor"==u&&(n||!xh.call(t,u))||s.push(u)}return s}function hs(t,e){var n={};return e=Qi(e,3),Mn(t,function(t,i,r){n[e(t,i,r)]=t}),n}function us(t,e){var n={};return e=Qi(e,3),Mn(t,function(t,i,r){n[i]=e(t,i,r)}),n}function cs(t,e){return e=Qi(e,2),Jn(t,function(t,n){return!e(t,n)})}function fs(t,e){return null==t?{}:Jn(t,Qi(e,2))}function ls(t,e,n){if(ur(e,t))i=null==t?K:t[e];else{e=li(e);var i=ns(t,e);t=vr(t,e)}return i===K&&(i=n),ya(i)?i.call(t):i}function ps(t,e,n){return null==t?t:oi(t,e,n)}function ds(t,e,n,i){return i="function"==typeof i?i:K,null==t?t:oi(t,e,n,i)}function Es(t){return H(t,as(t))}function vs(t){return H(t,ss(t))}function gs(t,e,n){var i=tc(t)||Na(t);if(e=Qi(e,4),null==n)if(i||wa(t)){var o=t.constructor;n=i?tc(t)?new o:[]:uu(ya(o)?o.prototype:K)}else n={};return(i?r:Mn)(t,function(t,i,r){return e(n,t,i,r)}),n}function ms(t,e){return null==t||di(t,e)}function ys(t){return t?x(t,as(t)):[]}function Ts(t){return null==t?x(t,ss(t)):[]}function Rs(t,e,n){return n===K&&(n=e,e=K),n!==K&&(n=Fa(n),n=n===n?n:0),e!==K&&(e=Fa(e),e=e===e?e:0),vn(Fa(t),e,n)}function ws(t,e,n){return e=Fa(e)||0,n===K?(n=e,e=0):n=Fa(n)||0,t=Fa(t),Pn(t,e,n)}function Hs(t,e,n){if(n&&"boolean"!=typeof n&&hr(t,e,n)&&(e=n=K),n===K&&("boolean"==typeof e?(n=e,e=K):"boolean"==typeof t&&(n=t,t=K)),t===K&&e===K?(t=0,e=1):(t=Fa(t)||0,e===K?(e=t,t=0):e=Fa(e)||0),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Yh();return Zh(t+r*(e-t+Rn("1e-"+((r+"").length-1))),e)}return ii(t,e)}function bs(t){return gc(Ka(t).toLowerCase())}function xs(t){return t=Ka(t),t&&t.replace(we,D).replace(an,"")}function As(t,e,n){t=Ka(t),e="string"==typeof e?e:e+"";var i=t.length;return n=n===K?i:vn(qa(n),0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function _s(t){return t=Ka(t),t&&ee.test(t)?t.replace($t,C):t}function Ms(t){return t=Ka(t),t&&ue.test(t)?t.replace(he,"\\$&"):t}function Us(t,e,n){t=Ka(t),e=qa(e);var i=G(t);if(!e||i>=e)return t;var r=(e-i)/2,o=Fh(r),a=Gh(r);return Gi("",o,n)+t+Gi("",a,n)}function Os(t,e,n){return t=Ka(t),t+Gi(t,e,n)}function Ss(t,e,n){return t=Ka(t),Gi(t,e,n)+t}function Ds(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ka(t).replace(ce,""),Xh(t,e||(ve.test(t)?16:10))}function Cs(t,e){t=Ka(t),e=qa(e);var n="";if(!t||e<1||e>gt)return n;do e%2&&(n+=t),e=Fh(e/2),t+=t;while(e);return n}function Ls(){var t=arguments,e=Ka(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function Ps(t,e,n){return Ka(t).split(e,n)}function Ns(t,e,n){return t=Ka(t),n=vn(qa(n),0,t.length),t.lastIndexOf(e,n)==n}function Is(t,e,n){var i=zt.Vb;n&&hr(t,e,n)&&(e=K),t=Ka(t),e=ic({},e,i,en);var r,o,a=ic({},e.imports,i.imports,en),s=as(a),h=x(a,s),u=0,c=e.Wb||He,f="__p += '",l=Th((e.escape||He).source+"|"+c.source+"|"+(c===re?de:He).source+"|"+(e.evaluate||He).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.qc:"lodash.templateSources["+ ++pn+"]")+"\n";t.replace(l,function(e,n,i,a,s,h){return i||(i=a),f+=t.slice(u,h).replace(be,L),n&&(r=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=h+e.length,e}),f+="';\n";var d=e.Xb;d||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(Xt,""):f).replace(Yt,"$1").replace(Jt,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var E=Rc(function(){return Function(s,p+"return "+f).apply(K,h)});if(E.source=f,ga(E))throw E;return E}function zs(t){return Ka(t).toLowerCase()}function Bs(t){return Ka(t).toUpperCase()}function js(t,e,n){if(t=Ka(t),!t)return t;if(n||e===K)return t.replace(ce,"");if(e+="",!e)return t;var i=F(t),r=F(e);return i.slice(A(i,r),M(i,r)+1).join("")}function qs(t,e,n){if(t=Ka(t),!t)return t;if(n||e===K)return t.replace(le,"");if(e+="",!e)return t;var i=F(t);return i.slice(0,M(i,F(e))+1).join("")}function Gs(t,e,n){if(t=Ka(t),!t)return t;if(n||e===K)return t.replace(fe,"");if(e+="",!e)return t;var i=F(t);return i.slice(A(i,F(e))).join("")}function Fs(t,e){var n=at,i=st;if(wa(e)){var r="separator"in e?e.separator:r;n="length"in e?qa(e.length):n,i="omission"in e?Ka(e.rc):i}t=Ka(t);var o=t.length;if(hn.test(t)){var a=F(t);o=a.length}if(n>=o)return t;var s=n-G(i);if(s<1)return i;var h=a?a.slice(0,s).join(""):t.slice(0,s);if(r===K)return h+i;if(a&&(s+=h.length-s),Da(r)){if(t.slice(s).search(r)){var u,c=h;for(r.global||(r=Th(r.source,Ka(Ee.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var f=u.index;h=h.slice(0,f===K?s:f)}}else if(t.indexOf(r,s)!=s){var l=h.lastIndexOf(r);l>-1&&(h=h.slice(0,l))}return h+i}function ks(t){return t=Ka(t),t&&te.test(t)?t.replace(Qt,k):t}function Vs(t,e,n){return t=Ka(t),e=n?K:e,e===K&&(e=fn.test(t)?cn:un),t.match(e)||[]}function Ks(t){var e=t?t.length:0,i=Qi();return t=e?c(t,function(t){if("function"!=typeof t[1])throw new Rh(dt);return[i(t[0]),t[1]]}):[],Yo(function(i){for(var r=-1;++r<e;){var o=t[r];if(n(o[0],this,i))return n(o[1],this,i)}})}function Ws(t){return mn(gn(t,!0))}function Zs(t){return function(){return t}}function Xs(t){return t}function Ys(t){return Ha(t)&&!tc(t)?Js(t):qn(t)}function Js(t){return Vn(gn(t,!0))}function Qs(t,e){return Kn(t,gn(e,!0))}function $s(t,e,n){var i=as(e),o=Sn(e,i);null!=n||wa(e)&&(o.length||!i.length)||(n=e,e=t,t=this,o=Sn(e,as(e)));var a=!(wa(n)&&"chain"in n)||n.chain,s=ya(t);return r(o,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.Sb;if(a||e){var n=t(this.Qb),r=n.Rb=Ai(this.Rb);return r.push({fc:i,hc:arguments,gc:t}),n.Sb=e,n}return i.apply(t,f([this.value()],arguments))})}),t}function th(){return On.Ob===this&&(On.Ob=Uh),this}function eh(){}function nh(t){return t=qa(t),function(){return arguments[t]}}function ih(t){return ur(t)?Qn(t):$n(t)}function rh(t){return function(e){return null==t?K:Dn(t,e)}}function oh(t,e){if(t=qa(t),t<1||t>gt)return[];var n=Tt,i=Zh(t,Tt);e=Tr(e),t-=Tt;for(var r=w(i,e);++n<t;)e(n);return r}function ah(t){return tc(t)?c(t,String):mr(t)}function sh(t){var e=++Ah;return Ka(t)+e}function hh(t,e){var n;return t!==K&&(n=t),e!==K&&(n=n===K?e:n+e),n}function uh(t){return t&&t.length?E(t,Xs,aa):K}function ch(t,e){return t&&t.length?E(t,Qi(e),aa):K}function fh(t){return Eh(t)/(t?t.length:0)}function lh(t){return t&&t.length?E(t,Xs,za):K}function ph(t,e){return t&&t.length?E(t,Qi(e),za):K}function dh(t,e){var n;return t!==K&&(n=t),e!==K&&(n=n===K?e:n-e),n}function Eh(t){return t&&t.length?R(t,Xs):K}function vh(t,e){return t&&t.length?R(t,Qi(e)):K}U=U?_.Mb({},U,_.Nb(On,ln)):On;var gh=U.Date,mh=U.Error,yh=U.Math,Th=U.RegExp,Rh=U.TypeError,wh=U.Array.prototype,Hh=U.Object.prototype,bh=U.Function.prototype.toString,xh=Hh.hasOwnProperty,Ah=0,_h=bh.call(Object),Mh=Hh.toString,Uh=On.Ob,Oh=Th("^"+bh.call(xh).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sh=U.Pb,Dh=U.Symbol,Ch=U.Uint8Array,Lh=U.clearTimeout,Ph=Sh?Sh.enumerate:K,Nh=Object.getPrototypeOf,Ih=Object.getOwnPropertySymbols,zh="symbol"==typeof(zh=Dh&&Dh.iterator)?zh:K,Bh=Hh.propertyIsEnumerable,jh=U.setTimeout,qh=wh.splice,Gh=yh.ceil,Fh=yh.floor,kh=U.isFinite,Vh=wh.join,Kh=Object.keys,Wh=yh.max,Zh=yh.min,Xh=U.parseInt,Yh=yh.random,Jh=wh.reverse,Qh=tr(U,"Map"),$h=tr(U,"Set"),tu=tr(U,"WeakMap"),eu=tr(Object,"create"),nu=tu&&new tu,iu=Qh?bh.call(Qh):"",ru=$h?bh.call($h):"",ou=Dh?Dh.prototype:K,au=Dh?ou.valueOf:K,su=Dh?ou.toString:K,hu={};zt.Vb={escape:ne,evaluate:ie,Wb:re,Xb:"",imports:{Ob:zt}};var uu=function(){function t(){}return function(e){if(wa(e)){t.prototype=e;var n=new t;t.prototype=K}return n||{}}}(),cu=Di(Mn),fu=Di(Un,!0),lu=Ci(),pu=Ci(!0);Ph&&!Bh.call({valueOf:1},"valueOf")&&(Fn=function(t){return z(Ph(t))});var du=nu?function(t,e){return nu.set(t,e),t}:Xs,Eu=$h&&2===new $h([1,2]).size?function(t){return new $h(t)}:eh,vu=nu?function(t){return nu.get(t)}:eh,gu=Qn("length"),mu=Ih||function(){return[]};(Qh&&er(new Qh)!=St||$h&&er(new $h)!=Pt)&&(er=function(t){var e=Mh.call(t),n=e==Ct?t.constructor:null,i="function"==typeof n?bh.call(n):"";if(i){if(i==iu)return St;if(i==ru)return Pt}return e});var yu=function(){var t=0,e=0;return function(n,i){var r=Vu(),o=ut-(r-e);if(e=r,o>0){if(++t>=ht)return n}else t=0;return du(n,i)}}(),Tu=Yo(function(t,e){return tc(t)||(t=null==t?[]:[Object(t)]),e=An(e),i(t,e)}),Ru=Yo(function(t,e){return ca(t)?Tn(t,An(e,!1,!0)):[]}),wu=Yo(function(t,e){var n=Br(e);return ca(n)&&(n=K),ca(t)?Tn(t,An(e,!1,!0),Qi(n)):[]}),Hu=Yo(function(t,e){var n=Br(e);return ca(n)&&(n=K),ca(t)?Tn(t,An(e,!1,!0),K,n):[]}),bu=Yo(function(t){var e=c(t,yr);return e.length&&e[0]===t[0]?Nn(e):[]}),xu=Yo(function(t){var e=Br(t),n=c(t,yr);return e===Br(n)?e=K:n.pop(),n.length&&n[0]===t[0]?Nn(n,Qi(e)):[]}),Au=Yo(function(t){var e=Br(t),n=c(t,yr);return e===Br(n)?e=K:n.pop(),n.length&&n[0]===t[0]?Nn(n,K,e):[]}),_u=Yo(qr),Mu=Yo(function(t,e){e=c(An(e),String);var n=sn(t,e);return ni(t,e.sort(O)),n}),Uu=Yo(function(t){return pi(An(t,!1,!0))}),Ou=Yo(function(t){var e=Br(t);return ca(e)&&(e=K),pi(An(t,!1,!0),Qi(e))}),Su=Yo(function(t){var e=Br(t);return ca(e)&&(e=K),pi(An(t,!1,!0),K,e)}),Du=Yo(function(t,e){return ca(t)?Tn(t,e):[]}),Cu=Yo(function(t){return gi(s(t,ca))}),Lu=Yo(function(t){var e=Br(t);return ca(e)&&(e=K),gi(s(t,ca),Qi(e))}),Pu=Yo(function(t){var e=Br(t);return ca(e)&&(e=K),gi(s(t,ca),K,e)}),Nu=Yo(ho),Iu=Yo(function(t){var e=t.length,n=e>1?t[e-1]:K;return n="function"==typeof n?(t.pop(),n):K,uo(t,n)}),zu=Yo(function(t){t=An(t);var e=t.length,n=e?t[0]:0,i=this.Qb,r=function(e){return sn(e,t)};return!(e>1||this.Rb.length)&&i instanceof Ae&&I(n)?(i=i.slice(n,+n+(e?1:0)),i.Rb.push({fc:po,hc:[r],gc:K}),new xe(i,this.Sb).ic(function(t){return e&&!t.length&&t.push(K),t})):this.ic(r)}),Bu=Oi(function(t,e,n){xh.call(t,n)?++t[n]:t[n]=1}),ju=Oi(function(t,e,n){xh.call(t,n)?t[n].push(e):t[n]=[e]}),qu=Yo(function(t,e,i){var r=-1,o="function"==typeof e,a=ur(e),s=ua(t)?Array(t.length):[];return cu(t,function(t){var h=o?e:a&&null!=t?t[e]:K;s[++r]=h?n(h,t,i):In(t,e,i)}),s}),Gu=Oi(function(t,e,n){t[n]=e}),Fu=Oi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ku=Yo(function(t,e){if(null==t)return[];var n=e.length;return n>1&&hr(t,e[0],e[1])?e=[]:n>2&&hr(e[0],e[1],e[2])&&(e.length=1),Xn(t,An(e),[])}),Vu=gh.now,Ku=Yo(function(t,e,n){var i=Z;if(n.length){var r=j(n,Ku.placeholder);i|=$}return Wi(t,i,e,n,r)}),Wu=Yo(function(t,e,n){var i=Z|X;if(n.length){var r=j(n,Wu.placeholder);i|=$}return Wi(e,i,t,n,r)}),Zu=Yo(function(t,e){return yn(t,1,e)}),Xu=Yo(function(t,e,n){return yn(t,Fa(e)||0,n)}),Yu=Yo(function(t,e){e=c(An(e),Qi());var i=e.length;return Yo(function(r){for(var o=-1,a=Zh(r.length,i);++o<a;)r[o]=e[o].call(this,r[o]);return n(t,this,r)})}),Ju=Yo(function(t,e){var n=j(e,Ju.placeholder);return Wi(t,$,K,e,n)}),Qu=Yo(function(t,e){var n=j(e,Qu.placeholder);return Wi(t,tt,K,e,n)}),$u=Yo(function(t,e){return Wi(t,nt,K,K,K,An(e))}),tc=Array.isArray,ec=Si(function(t,e){_i(e,as(e),t)}),nc=Si(function(t,e){_i(e,ss(e),t)}),ic=Si(function(t,e,n,i){Mi(e,ss(e),t,i)}),rc=Si(function(t,e,n,i){Mi(e,as(e),t,i)}),oc=Yo(function(t,e){return sn(t,An(e))}),ac=Yo(function(t){return t.push(K,en),n(ic,K,t)}),sc=Yo(function(t){return t.push(K,Er),n(cc,K,t)}),hc=Yo(In),uc=Si(function(t,e,n){Wn(t,e,n)}),cc=Si(function(t,e,n,i){Wn(t,e,n,i)}),fc=Yo(function(t,e){return null==t?{}:(e=c(An(e),String),Yn(t,Tn(ss(t),e)))}),lc=Yo(function(t,e){return null==t?{}:Yn(t,An(e))}),pc=Ni(function(t,e,n){return e=e.toLowerCase(),t+(n?bs(e):e)}),dc=Ni(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ec=Ni(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),vc=Pi("toLowerCase"),gc=Pi("toUpperCase"),mc=Ni(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),yc=Ni(function(t,e,n){return t+(n?" ":"")+bs(e)}),Tc=Ni(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Rc=Yo(function(t,e){try{return n(t,K,e)}catch(t){return ga(t)?t:new mh(t)}}),wc=Yo(function(t,e){return r(An(e),function(e){t[e]=Ku(t[e],t)}),t}),Hc=Bi(),bc=Bi(!0),xc=Yo(function(t,e){return function(n){return In(n,t,e)}}),Ac=Yo(function(t,e){return function(n){
return In(t,n,e)}}),_c=qi(c),Mc=qi(a),Uc=qi(d),Oc=ki(),Sc=ki(!0),Dc=Ki("ceil"),Cc=Ki("floor"),Lc=Ki("round");return zt.prototype=Re.prototype,xe.prototype=uu(Re.prototype),xe.prototype.constructor=xe,Ae.prototype=uu(Re.prototype),Ae.prototype.constructor=Ae,Oe.prototype=eu?eu(null):Hh,Pe.prototype.clear=Ne,Pe.prototype.delete=Ie,Pe.prototype.get=ze,Pe.prototype.has=Be,Pe.prototype.set=je,qe.prototype.push=Fe,ke.prototype.clear=Ve,ke.prototype.delete=Ke,ke.prototype.get=We,ke.prototype.has=Ze,ke.prototype.set=Xe,Wo.pc=Pe,zt.sc=jo,zt.tc=qo,zt.assign=ec,zt.uc=nc,zt.vc=ic,zt.wc=rc,zt.xc=oc,zt.yc=Go,zt.bind=Ku,zt.zc=wc,zt.Ac=Wu,zt.chain=fo,zt.Bc=wr,zt.compact=Hr,zt.concat=Tu,zt.Cc=Ks,zt.Dc=Ws,zt.Ec=Zs,zt.Fc=Bu,zt.create=Wa,zt.Gc=Fo,zt.Hc=ko,zt.Ic=Vo,zt.Mb=ac,zt.Jc=sc,zt.defer=Zu,zt.Kc=Xu,zt.Lc=Ru,zt.Mc=wu,zt.Nc=Hu,zt.Oc=br,zt.Pc=xr,zt.Qc=Ar,zt.Rc=_r,zt.fill=Mr,zt.filter=bo,zt.Sc=Sr,zt.kc=Dr,zt.Tc=Cr,zt.Uc=Ko,zt.Vc=Hc,zt.Wc=bc,zt.Xc=Lr,zt.Yc=ts,zt.Zc=es,zt.$c=ju,zt._c=Ir,zt.ad=bu,zt.bd=xu,zt.dd=Au,zt.ed=os,zt.fd=qu,zt.bc=Ys,zt.gd=Gu,zt.keys=as,zt.hd=ss,zt.map=Oo,zt.jd=hs,zt.kd=us,zt.matches=Js,zt.ld=Qs,zt.md=Wo,zt.nd=uc,zt.od=cc,zt.method=xc,zt.pd=Ac,zt.qd=$s,zt.rd=Zo,zt.sd=nh,zt.td=fc,zt.ud=cs,zt.vd=Xo,zt.wd=So,zt.xd=_c,zt.yd=Yu,zt.zd=Mc,zt.Ad=Uc,zt.Bd=Ju,zt.Cd=Qu,zt.Dd=Fu,zt.Nb=lc,zt.Ed=fs,zt.Fd=ih,zt.Gd=rh,zt.Hd=_u,zt.Id=qr,zt.Jd=Gr,zt.Kd=Mu,zt.range=Oc,zt.Ld=Sc,zt.Md=$u,zt.reject=Lo,zt.remove=Fr,zt.Nd=Yo,zt.reverse=kr,zt.Od=No,zt.set=ps,zt.Pd=ds,zt.Qd=Io,zt.slice=Vr,zt.Rd=ku,zt.Sd=Qr,zt.Td=$r,zt.split=Ps,zt.L=Jo,zt.Ud=to,zt.Vd=eo,zt.Wd=no,zt.Xd=io,zt.Yd=ro,zt.Zd=lo,zt.$d=Qo,zt.ic=po,zt.toArray=ja,zt._d=Es,zt.ae=vs,zt.be=ah,zt.ce=ka,zt.transform=gs,zt.de=$o,zt.ee=Uu,zt.fe=Ou,zt.ge=Su,zt.he=oo,zt.ie=ao,zt.je=so,zt.ke=ms,zt.le=ho,zt.me=uo,zt.values=ys,zt.ne=Ts,zt.oe=Du,zt.pe=Vs,zt.wrap=ta,zt.qe=Cu,zt.re=Lu,zt.se=Pu,zt.te=Nu,zt.ue=co,zt.ve=Iu,zt.extend=nc,zt.we=ic,$s(zt,zt),zt.add=hh,zt.xe=Rc,zt.ye=pc,zt.ze=bs,zt.ceil=Dc,zt.Ae=Rs,zt.clone=ea,zt.Be=ia,zt.Ce=ra,zt.De=na,zt.Ee=xs,zt.endsWith=As,zt.Fe=oa,zt.escape=_s,zt.Ge=Ms,zt.every=Ho,zt.find=xo,zt.findIndex=Ur,zt.He=Za,zt.Ie=Ao,zt.Je=Or,zt.Ke=Xa,zt.floor=Cc,zt.forEach=_o,zt.Le=Mo,zt.Me=Ya,zt.Ne=Ja,zt.Oe=Qa,zt.Pe=$a,zt.get=ns,zt.Qe=aa,zt.Re=sa,zt.has=is,zt.Se=rs,zt.head=Pr,zt.identity=Xs,zt.includes=Uo,zt.indexOf=Nr,zt.inRange=ws,zt.Te=hc,zt.Ue=ha,zt.isArray=tc,zt.Ve=ua,zt.We=ca,zt.Xe=fa,zt.Ye=la,zt.Ze=pa,zt.$e=da,zt.isEqual=Ea,zt._e=va,zt.af=ga,zt.isFinite=ma,zt.bf=ya,zt.isInteger=Ta,zt.cf=Ra,zt.df=ba,zt.ef=xa,zt.isNaN=Aa,zt.ff=_a,zt.gf=Ua,zt.hf=Ma,zt.if=Oa,zt.jf=wa,zt.kf=Ha,zt.lf=Sa,zt.mf=Da,zt.isSafeInteger=Ca,zt.nf=La,zt.pf=Pa,zt.qf=Na,zt.rf=Ia,zt.join=zr,zt.sf=dc,zt.tf=Br,zt.lastIndexOf=jr,zt.uf=Ec,zt.vf=vc,zt.wf=za,zt.xf=Ba,zt.max=uh,zt.yf=ch,zt.zf=fh,zt.min=lh,zt.Af=ph,zt.Bf=th,zt.Cf=eh,zt.now=Vu,zt.pad=Us,zt.Df=Os,zt.Ef=Ss,zt.parseInt=Ds,zt.random=Hs,zt.reduce=Do,zt.reduceRight=Co,zt.repeat=Cs,zt.replace=Ls,zt.result=ls,zt.round=Lc,zt.Ff=V,zt.Gf=Po,zt.size=zo,zt.Hf=mc,zt.some=Bo,zt.If=Kr,zt.Jf=Wr,zt.Kf=Zr,zt.Lf=Xr,zt.Mf=Yr,zt.Nf=Jr,zt.Of=yc,zt.startsWith=Ns,zt.Pf=dh,zt.Qf=Eh,zt.Rf=vh,zt.Sf=Is,zt.Tf=oh,zt.Uf=qa,zt.Vf=Ga,zt.Wf=zs,zt.Xf=Fa,zt.Yf=Va,zt.toString=Ka,zt.Zf=Bs,zt.trim=js,zt.$f=qs,zt._f=Gs,zt.truncate=Fs,zt.unescape=ks,zt.ag=sh,zt.bg=Tc,zt.cg=gc,zt.dg=_o,zt.eg=Mo,zt.fg=Pr,$s(zt,function(){var t={};return Mn(zt,function(e,n){xh.call(zt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),zt.VERSION=W,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){zt[t].placeholder=zt}),r(["drop","take"],function(t,e){Ae.prototype[t]=function(n){var i=this.Zb;if(i&&!e)return new Ae(this);n=n===K?1:Wh(qa(n),0);var r=this.clone();return i?r._b=Zh(n,r._b):r.ac.push({size:Zh(n,Tt),type:t+(r.Yb<0?"Right":"")}),r},Ae.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),r(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==ft||n==pt;Ae.prototype[t]=function(t){var e=this.clone();return e.$b.push({bc:Qi(t,3),type:n}),e.Zb=e.Zb||i,e}}),r(["head","last"],function(t,e){var n="take"+(e?"Right":"");Ae.prototype[t]=function(){return this[n](1).value()[0]}}),r(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Ae.prototype[t]=function(){return this.Zb?new Ae(this):this[n](1)}}),Ae.prototype.compact=function(){return this.filter(Xs)},Ae.prototype.find=function(t){return this.filter(t).head()},Ae.prototype.Ie=function(t){return this.reverse().find(t)},Ae.prototype.fd=Yo(function(t,e){return"function"==typeof t?new Ae(this):this.map(function(n){return In(n,t,e)})}),Ae.prototype.reject=function(t){return t=Qi(t,3),this.filter(function(e){return!t(e)})},Ae.prototype.slice=function(t,e){t=qa(t);var n=this;return n.Zb&&(t>0||e<0)?new Ae(n):(t<0?n=n.Wd(-t):t&&(n=n.Oc(t)),e!==K&&(e=qa(e),n=e<0?n.Pc(-e):n.Vd(e-t)),n)},Ae.prototype.Xd=function(t){return this.reverse().Yd(t).reverse()},Ae.prototype.toArray=function(){return this.Vd(Tt)},Mn(Ae.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=zt[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(zt.prototype[e]=function(){var e=this.Qb,a=i?[1]:arguments,s=e instanceof Ae,h=a[0],u=s||tc(e),c=function(t){var e=r.apply(zt,f([t],a));return i&&l?e[0]:e};u&&n&&"function"==typeof h&&1!=h.length&&(s=u=!1);var l=this.Sb,p=!!this.Rb.length,d=o&&!l,E=s&&!p;if(!o&&u){e=E?e:new Ae(this);var v=t.apply(e,a);return v.Rb.push({fc:po,hc:[c],gc:K}),new xe(v,l)}return d&&E?t.apply(this,a):(v=this.ic(c),d?i?v.value()[0]:v.value():v)})}),r(["pop","push","shift","sort","splice","unshift"],function(t){var e=wh[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);zt.prototype[t]=function(){var t=arguments;return i&&!this.Sb?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),Mn(Ae.prototype,function(t,e){var n=zt[e];if(n){var i=n.name+"",r=hu[i]||(hu[i]=[]);r.push({name:e,fc:n})}}),hu[ji(K,X).name]=[{name:"wrapper",fc:K}],Ae.prototype.clone=_e,Ae.prototype.reverse=Me,Ae.prototype.value=Ue,zt.prototype.xc=zu,zt.prototype.chain=Eo,zt.prototype.gg=vo,zt.prototype.Sc=go,zt.prototype.next=mo,zt.prototype.jc=To,zt.prototype.reverse=Ro,zt.prototype.toJSON=zt.prototype.valueOf=zt.prototype.value=wo,zh&&(zt.prototype[zh]=yo),zt}var K,W="4.0.1",Z=1,X=2,Y=4,J=8,Q=16,$=32,tt=64,et=128,nt=256,it=512,rt=1,ot=2,at=30,st="...",ht=150,ut=16,ct=200,ft=1,lt=2,pt=3,dt="Expected a function",Et="__lodash_hash_undefined__",vt=1/0,gt=9007199254740991,mt=1.7976931348623157e308,yt=NaN,Tt=4294967295,Rt=Tt-1,wt=Tt>>>1,Ht="__lodash_placeholder__",bt="[object Arguments]",xt="[object Array]",At="[object Boolean]",_t="[object Date]",Mt="[object Error]",Ut="[object Function]",Ot="[object GeneratorFunction]",St="[object Map]",Dt="[object Number]",Ct="[object Object]",Lt="[object RegExp]",Pt="[object Set]",Nt="[object String]",It="[object Symbol]",zt="[object WeakMap]",Bt="[object ArrayBuffer]",jt="[object Float32Array]",qt="[object Float64Array]",Gt="[object Int8Array]",Ft="[object Int16Array]",kt="[object Int32Array]",Vt="[object Uint8Array]",Kt="[object Uint8ClampedArray]",Wt="[object Uint16Array]",Zt="[object Uint32Array]",Xt=/\b__p \+= '';/g,Yt=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qt=/&(?:amp|lt|gt|quot|#39|#96);/g,$t=/[&<>"'`]/g,te=RegExp(Qt.source),ee=RegExp($t.source),ne=/<%-([\s\S]+?)%>/g,ie=/<%([\s\S]+?)%>/g,re=/<%=([\s\S]+?)%>/g,oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ae=/^\w*$/,se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,he=/[\\^$.*+?()[\]{}|]/g,ue=RegExp(he.source),ce=/^\s+|\s+$/g,fe=/^\s+/,le=/\s+$/,pe=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,ve=/^0x/i,ge=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,He=/($^)/,be=/['\n\r\u2028\u2029\\]/g,xe="\\ud800-\\udfff",Ae="\\u0300-\\u036f\\ufe20-\\ufe23",_e="\\u20d0-\\u20f0",Me="\\u2700-\\u27bf",Ue="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="\\xac\\xb1\\xd7\\xf7",Se="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",De="\\u2018\\u2019\\u201c\\u201d",Ce=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",Ne=Oe+Se+De+Ce,Ie="["+xe+"]",ze="["+Ne+"]",Be="["+Ae+_e+"]",je="\\d+",qe="["+Me+"]",Ge="["+Ue+"]",Fe="[^"+xe+Ne+je+Me+Ue+Le+"]",ke="\\ud83c[\\udffb-\\udfff]",Ve="(?:"+Be+"|"+ke+")",Ke="[^"+xe+"]",We="(?:\\ud83c[\\udde6-\\uddff]){2}",Ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+Le+"]",Ye="\\u200d",Je="(?:"+Ge+"|"+Fe+")",Qe="(?:"+Xe+"|"+Fe+")",$e=Ve+"?",tn="["+Pe+"]?",en="(?:"+Ye+"(?:"+[Ke,We,Ze].join("|")+")"+tn+$e+")*",nn=tn+$e+en,rn="(?:"+[qe,We,Ze].join("|")+")"+nn,on="(?:"+[Ke+Be+"?",Be,We,Ze,Ie].join("|")+")",an=RegExp(Be,"g"),sn=RegExp(ke+"(?="+ke+")|"+on+nn,"g"),hn=RegExp("["+Ye+xe+Ae+_e+Pe+"]"),un=/[a-zA-Z0-9]+/g,cn=RegExp([Xe+"?"+Ge+"+(?="+[ze,Xe,"$"].join("|")+")",Qe+"+(?="+[ze,Xe+Je,"$"].join("|")+")",Xe+"?"+Je+"+",Xe+"+",je,rn].join("|"),"g"),fn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ln=["Array","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pn=-1,dn={};dn[jt]=dn[qt]=dn[Gt]=dn[Ft]=dn[kt]=dn[Vt]=dn[Kt]=dn[Wt]=dn[Zt]=!0,dn[bt]=dn[xt]=dn[Bt]=dn[At]=dn[_t]=dn[Mt]=dn[Ut]=dn[St]=dn[Dt]=dn[Ct]=dn[Lt]=dn[Pt]=dn[Nt]=dn[zt]=!1;var En={};En[bt]=En[xt]=En[Bt]=En[At]=En[_t]=En[jt]=En[qt]=En[Gt]=En[Ft]=En[kt]=En[St]=En[Dt]=En[Ct]=En[Lt]=En[Pt]=En[Nt]=En[It]=En[Vt]=En[Kt]=En[Wt]=En[Zt]=!0,En[Mt]=En[Ut]=En[zt]=!1;var vn={ja:"A",ka:"A",la:"A",ma:"A",na:"A",oa:"A",pa:"a",qa:"a",ra:"a",sa:"a",ta:"a",ua:"a",va:"C",wa:"c",xa:"D",ya:"d",za:"E",Aa:"E",Ba:"E",Ca:"E",Da:"e",Ea:"e",Fa:"e",Ga:"e",Ha:"I",Ia:"I",Ja:"I",Ka:"I",La:"i",Ma:"i",Na:"i",Oa:"i",Pa:"N",Qa:"n",Ra:"O",Sa:"O",Ta:"O",Ua:"O",Va:"O",Wa:"O",Xa:"o",Ya:"o",Za:"o",$a:"o",_a:"o",ab:"o",bb:"U",cb:"U",eb:"U",fb:"U",gb:"u",hb:"u",ib:"u",jb:"u",kb:"Y",lb:"y",mb:"y",nb:"Ae",ob:"ae",pb:"Th",qb:"th",rb:"ss"},gn={sb:"&amp;",tb:"&lt;",ub:"&gt;",vb:"&quot;",wb:"&#39;",xb:"&#96;"},mn={yb:"&",zb:"<",Ab:">",Bb:'"',Cb:"'",Db:"`"},yn={Eb:!0,object:!0},Tn={Fb:"\\",wb:"'",Gb:"n",Hb:"r",Ib:"u2028",Jb:"u2029"},Rn=parseFloat,wn=parseInt,Hn=yn[typeof exports]&&exports&&!exports.nodeType?exports:null,bn=yn[typeof module]&&module&&!module.nodeType?module:null,xn=U(Hn&&bn&&"object"==typeof global&&global),An=U(yn[typeof self]&&self),_n=U(yn[typeof window]&&window),Mn=bn&&bn.Kb===Hn?Hn:null,Un=U(yn[typeof this]&&this),On=xn||_n!==(Un&&Un.window)&&_n||An||Un||Function("return this")(),_=V();(_n||An||{}).Ob=_,"function"==typeof define&&"object"==typeof define.hg&&define.hg?define(function(){return _}):Hn&&bn?(Mn&&((bn.Kb=_).Ob=_),Hn.Ob=_):On.Ob=_}.call(this);var THREE={ig:"79"};"function"==typeof define&&define.hg?define("three",THREE):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.Kb=THREE),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(THREE,{jg:{kg:0,lg:1,mg:2},ng:0,og:1,pg:2,qg:3,rg:0,sg:1,tg:0,ug:1,vg:2,wg:0,xg:1,yg:2,zg:1,Ag:2,Bg:0,Cg:1,Dg:2,Eg:0,Fg:1,Gg:2,Hg:3,Ig:4,Jg:5,Kg:100,Lg:101,Mg:102,Ng:103,Og:104,Pg:200,Qg:201,Rg:202,Sg:203,Tg:204,Ug:205,Vg:206,Wg:207,Xg:208,Yg:209,Zg:210,$g:0,_g:1,ah:2,bh:3,dh:4,eh:5,fh:6,gh:7,hh:0,ih:1,jh:2,kh:0,lh:1,mh:2,nh:3,oh:4,ph:300,qh:301,rh:302,sh:303,th:304,uh:305,vh:306,wh:307,xh:1e3,yh:1001,zh:1002,Ah:1003,Bh:1004,Ch:1005,Dh:1006,Eh:1007,Fh:1008,Gh:1009,Hh:1010,Ih:1011,Jh:1012,Kh:1013,Lh:1014,Mh:1015,Nh:1025,Oh:1016,Ph:1017,Qh:1018,Rh:1019,Sh:1020,Th:1021,Uh:1022,Vh:1023,Wh:THREE.Th,Xh:1026,Yh:2001,Zh:2002,$h:2003,_h:2004,ai:2100,bi:2101,ci:2102,di:2103,ei:2151,fi:2200,gi:2201,hi:2202,ii:2300,ji:2301,ki:2302,li:2400,mi:2401,ni:2402,oi:0,pi:1,qi:2,ri:3e3,si:3001,ti:3007,ui:3002,vi:3003,wi:3004,xi:3005,yi:3006,zi:3200,Ai:3201}),THREE.T=function(t,e,n){return void 0===e&&void 0===n?this.set(t):this.Bi(t,e,n)},THREE.T.prototype={constructor:THREE.T,r:1,Ci:1,b:1,set:function(t){return t instanceof THREE.T?this.Di(t):"number"==typeof t?this.Ei(t):"string"==typeof t&&this.Fi(t),this},Gi:function(t){this.r=t,this.Ci=t,this.b=t},Ei:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.Ci=(t>>8&255)/255,this.b=(255&t)/255,this},Bi:function(t,e,n){return this.r=t,this.Ci=e,this.b=n,this},Hi:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=THREE.Math.Ii(e,1),n=THREE.Math.Ae(n,0,1),i=THREE.Math.Ae(i,0,1),0===n)this.r=this.Ci=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.Ci=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),Fi:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.Ci=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.Ci=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return e(i[5]),this.Hi(a,s,h)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.Ci=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.Ci=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(t&&t.length>0){var u=THREE.Ji[t];void 0!==u?this.Ei(u):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.Ci,this.b)},Di:function(t){return this.r=t.r,this.Ci=t.Ci,this.b=t.b,this},Ki:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.Ci=Math.pow(t.Ci,e),this.b=Math.pow(t.b,e),this},Li:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.Ci=Math.pow(t.Ci,n),this.b=Math.pow(t.b,n),this},Mi:function(){var t=this.r,e=this.Ci,n=this.b;return this.r=t*t,this.Ci=e*e,this.b=n*n,this},Ni:function(){return this.r=Math.sqrt(this.r),this.Ci=Math.sqrt(this.Ci),this.b=Math.sqrt(this.b),this},Oi:function(){return 255*this.r<<16^255*this.Ci<<8^255*this.b<<0},Pi:function(){return("000000"+this.Oi().toString(16)).slice(-6)},_:function(t){var e,n,i=t||{Qi:0,Ri:0,Si:0},r=this.r,o=this.Ci,a=this.b,s=Math.max(r,o,a),h=Math.min(r,o,a),u=(h+s)/2;if(h===s)e=0,n=0;else{var c=s-h;switch(n=u<=.5?c/(s+h):c/(2-s-h),s){case r:e=(o-a)/c+(o<a?6:0);break;case o:e=(a-r)/c+2;break;case a:e=(r-o)/c+4}e/=6}return i.Qi=e,i.Ri=n,i.Si=u,i},Ti:function(){return"rgb("+(255*this.r|0)+","+(255*this.Ci|0)+","+(255*this.b|0)+")"},Ui:function(t,e,n){var i=this._();return i.Qi+=t,i.Ri+=e,i.Si+=n,this.Hi(i.Qi,i.Ri,i.Si),this},add:function(t){return this.r+=t.r,this.Ci+=t.Ci,this.b+=t.b,this},Vi:function(t,e){return this.r=t.r+e.r,this.Ci=t.Ci+e.Ci,this.b=t.b+e.b,this},Wi:function(t){return this.r+=t,this.Ci+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.Ci=Math.max(0,this.Ci-t.Ci),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.Ci*=t.Ci,this.b*=t.b,this},Xi:function(t){return this.r*=t,this.Ci*=t,this.b*=t,this},Yi:function(t,e){return this.r+=(t.r-this.r)*e,this.Ci+=(t.Ci-this.Ci)*e,this.b+=(t.b-this.b)*e,this},Zi:function(t){return t.r===this.r&&t.Ci===this.Ci&&t.b===this.b},$i:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.Ci=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.Ci,t[e+2]=this.b,t}},THREE.Ji={_i:15792383,aj:16444375,bj:65535,cj:8388564,dj:15794175,ej:16119260,fj:16770244,gj:0,hj:16772045,blue:255,ij:9055202,jj:10824234,kj:14596231,lj:6266528,mj:8388352,nj:13789470,oj:16744272,pj:6591981,qj:16775388,rj:14423100,sj:65535,tj:139,uj:35723,vj:12092939,wj:11119017,xj:25600,yj:11119017,zj:12433259,Aj:9109643,Bj:5597999,Cj:16747520,Dj:10040012,Ej:9109504,Fj:15308410,Gj:9419919,Hj:4734347,Ij:3100495,Jj:3100495,Kj:52945,Lj:9699539,Mj:16716947,Nj:49151,Oj:6908265,Pj:6908265,Qj:2003199,Rj:11674146,Sj:16775920,Tj:2263842,Uj:16711935,Vj:14474460,Wj:16316671,Xj:16766720,Yj:14329120,Zj:8421504,green:32768,$j:11403055,_j:8421504,ak:15794160,bk:16738740,ck:13458524,dk:4915330,ek:16777200,fk:15787660,gk:15132410,hk:16773365,ik:8190976,jk:16775885,kk:11393254,lk:15761536,mk:14745599,nk:16448210,pk:13882323,qk:9498256,rk:13882323,sk:16758465,tk:16752762,uk:2142890,vk:8900346,wk:7833753,xk:7833753,yk:11584734,zk:16777184,Ak:65280,Bk:3329330,Ck:16445670,Dk:16711935,Ek:8388608,Fk:6737322,Gk:205,Hk:12211667,Ik:9662683,Jk:3978097,Kk:8087790,Lk:64154,Mk:4772300,Nk:13047173,Ok:1644912,Pk:16121850,Qk:16770273,Rk:16770229,Sk:16768685,Tk:128,Uk:16643558,Vk:8421376,Wk:7048739,Xk:16753920,Yk:16729344,Zk:14315734,$k:15657130,_k:10025880,al:11529966,bl:14381203,cl:16773077,dl:16767673,el:13468991,fl:16761035,gl:14524637,hl:11591910,il:8388736,red:16711680,jl:12357519,kl:4286945,ll:9127187,ml:16416882,nl:16032864,ol:3050327,pl:16774638,ql:10506797,rl:12632256,sl:8900331,tl:6970061,ul:7372944,vl:7372944,wl:16775930,xl:65407,yl:4620980,tan:13808780,zl:32896,Al:14204888,Bl:16737095,Cl:4251856,Dl:15631086,El:16113331,Fl:16777215,Gl:16119285,Hl:16776960,Il:10145074},THREE.Jl=function(t,e,n,i){this.Kl=t||0,this.Ll=e||0,this.Ml=n||0,this.Nl=void 0!==i?i:1},THREE.Jl.prototype={constructor:THREE.Jl,get x(){return this.Kl},set x(t){this.Kl=t,this.Ol()},get y(){return this.Ll},set y(t){this.Ll=t,this.Ol()},get z(){return this.Ml},set z(t){this.Ml=t,this.Ol()},get w(){return this.Nl},set w(t){this.Nl=t,this.Ol()},set:function(t,e,n,i){return this.Kl=t,this.Ll=e,this.Ml=n,this.Nl=i,this.Ol(),this},clone:function(){return new this.constructor(this.Kl,this.Ll,this.Ml,this.Nl)},Di:function(t){return this.Kl=t.x,this.Ll=t.y,this.Ml=t.z,this.Nl=t.w,this.Ol(),this},Pl:function(t,e){if(t instanceof THREE.Ql==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t.Kl/2),i=Math.cos(t.Ll/2),r=Math.cos(t.Ml/2),o=Math.sin(t.Kl/2),a=Math.sin(t.Ll/2),s=Math.sin(t.Ml/2),h=t.order;return"XYZ"===h?(this.Kl=o*i*r+n*a*s,this.Ll=n*a*r-o*i*s,this.Ml=n*i*s+o*a*r,this.Nl=n*i*r-o*a*s):"YXZ"===h?(this.Kl=o*i*r+n*a*s,this.Ll=n*a*r-o*i*s,this.Ml=n*i*s-o*a*r,this.Nl=n*i*r+o*a*s):"ZXY"===h?(this.Kl=o*i*r-n*a*s,this.Ll=n*a*r+o*i*s,this.Ml=n*i*s+o*a*r,this.Nl=n*i*r-o*a*s):"ZYX"===h?(this.Kl=o*i*r-n*a*s,this.Ll=n*a*r+o*i*s,this.Ml=n*i*s-o*a*r,this.Nl=n*i*r+o*a*s):"YZX"===h?(this.Kl=o*i*r+n*a*s,this.Ll=n*a*r+o*i*s,this.Ml=n*i*s-o*a*r,this.Nl=n*i*r-o*a*s):"XZY"===h&&(this.Kl=o*i*r-n*a*s,this.Ll=n*a*r-o*i*s,this.Ml=n*i*s+o*a*r,this.Nl=n*i*r+o*a*s),e!==!1&&this.Ol(),this},Rl:function(t,e){var n=e/2,i=Math.sin(n);return this.Kl=t.x*i,this.Ll=t.y*i,this.Ml=t.z*i,this.Nl=Math.cos(n),this.Ol(),this},Sl:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],h=n[9],u=n[2],c=n[6],f=n[10],l=i+s+f;return l>0?(e=.5/Math.sqrt(l+1),this.Nl=.25/e,this.Kl=(c-h)*e,this.Ll=(o-u)*e,this.Ml=(a-r)*e):i>s&&i>f?(e=2*Math.sqrt(1+i-s-f),this.Nl=(c-h)/e,this.Kl=.25*e,this.Ll=(r+a)/e,this.Ml=(o+u)/e):s>f?(e=2*Math.sqrt(1+s-i-f),this.Nl=(o-u)/e,this.Kl=(r+a)/e,this.Ll=.25*e,this.Ml=(h+c)/e):(e=2*Math.sqrt(1+f-i-s),this.Nl=(a-r)/e,this.Kl=(o+u)/e,this.Ll=(h+c)/e,this.Ml=.25*e),this.Ol(),this},Tl:function(){var t,e,n=1e-6;return function(i,r){return void 0===t&&(t=new THREE.K),e=i.Ul(r)+1,e<n?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.Vl(i,r),this.Kl=t.x,this.Ll=t.y,this.Ml=t.z,this.Nl=e,this.normalize()}}(),inverse:function(){return this.Wl().normalize()},Wl:function(){return this.Kl*=-1,this.Ll*=-1,this.Ml*=-1,this.Ol(),this},Ul:function(t){return this.Kl*t.Kl+this.Ll*t.Ll+this.Ml*t.Ml+this.Nl*t.Nl},Xl:function(){return this.Kl*this.Kl+this.Ll*this.Ll+this.Ml*this.Ml+this.Nl*this.Nl},length:function(){return Math.sqrt(this.Kl*this.Kl+this.Ll*this.Ll+this.Ml*this.Ml+this.Nl*this.Nl)},normalize:function(){var t=this.length();return 0===t?(this.Kl=0,this.Ll=0,this.Ml=0,this.Nl=1):(t=1/t,this.Kl=this.Kl*t,this.Ll=this.Ll*t,this.Ml=this.Ml*t,this.Nl=this.Nl*t),this.Ol(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.Yl(t,e)):this.Yl(this,t)},Zl:function(t){return this.Yl(t,this)},Yl:function(t,e){var n=t.Kl,i=t.Ll,r=t.Ml,o=t.Nl,a=e.Kl,s=e.Ll,h=e.Ml,u=e.Nl;return this.Kl=n*u+o*a+i*h-r*s,this.Ll=i*u+o*s+r*a-n*h,this.Ml=r*u+o*h+n*s-i*a,this.Nl=o*u-n*a-i*s-r*h,this.Ol(),this},$l:function(t,e){if(0===e)return this;if(1===e)return this.Di(t);var n=this.Kl,i=this.Ll,r=this.Ml,o=this.Nl,a=o*t.Nl+n*t.Kl+i*t.Ll+r*t.Ml;if(a<0?(this.Nl=-t.Nl,this.Kl=-t.Kl,this.Ll=-t.Ll,this.Ml=-t.Ml,a=-a):this.Di(t),a>=1)return this.Nl=o,this.Kl=n,this.Ll=i,this.Ml=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this.Nl=.5*(o+this.Nl),this.Kl=.5*(n+this.Kl),this.Ll=.5*(i+this.Ll),this.Ml=.5*(r+this.Ml),this;var h=Math.atan2(s,a),u=Math.sin((1-e)*h)/s,c=Math.sin(e*h)/s;return this.Nl=o*u+this.Nl*c,this.Kl=n*u+this.Kl*c,this.Ll=i*u+this.Ll*c,this.Ml=r*u+this.Ml*c,this.Ol(),this},Zi:function(t){return t.Kl===this.Kl&&t.Ll===this.Ll&&t.Ml===this.Ml&&t.Nl===this.Nl},$i:function(t,e){return void 0===e&&(e=0),this.Kl=t[e],this.Ll=t[e+1],this.Ml=t[e+2],this.Nl=t[e+3],this.Ol(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.Kl,t[e+1]=this.Ll,t[e+2]=this.Ml,t[e+3]=this.Nl,t},_l:function(t){return this.Ol=t,this},Ol:function(){}},Object.assign(THREE.Jl,{$l:function(t,e,n,i){return n.Di(t).$l(e,i)},am:function(t,e,n,i,r,o,a){var s=n[i+0],h=n[i+1],u=n[i+2],c=n[i+3],f=r[o+0],l=r[o+1],p=r[o+2],d=r[o+3];if(c!==d||s!==f||h!==l||u!==p){var E=1-a,v=s*f+h*l+u*p+c*d,g=v>=0?1:-1,m=1-v*v;if(m>Number.EPSILON){var y=Math.sqrt(m),T=Math.atan2(y,v*g);E=Math.sin(E*T)/y,a=Math.sin(a*T)/y}var R=a*g;if(s=s*E+f*R,h=h*E+l*R,u=u*E+p*R,c=c*E+d*R,E===1-a){var w=1/Math.sqrt(s*s+h*h+u*u+c*c);s*=w,h*=w,u*=w,c*=w}}t[e]=s,t[e+1]=h,t[e+2]=u,t[e+3]=c}}),THREE.ea=function(t,e){this.x=t||0,this.y=e||0},THREE.ea.prototype={constructor:THREE.ea,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},Gi:function(t){return this.x=t,this.y=t,this},bm:function(t){return this.x=t,this},cm:function(t){return this.y=t,this},dm:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},em:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},Di:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.fm(t,e)):(this.x+=t.x,this.y+=t.y,this)},Wi:function(t){return this.x+=t,this.y+=t,this},fm:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},gm:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.hm(t,e)):(this.x-=t.x,this.y-=t.y,this)},im:function(t){return this.x-=t,this.y-=t,this},hm:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},Xi:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},jm:function(t){return this.x/=t.x,this.y/=t.y,this},km:function(t){return this.Xi(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},Ae:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},lm:function(){var t,e;return function(n,i){return void 0===t&&(t=new THREE.ea,e=new THREE.ea),t.set(n,n),e.set(i,i),this.Ae(t,e)}}(),mm:function(t,e){var n=this.length();return this.Xi(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},nm:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},rd:function(){return this.x=-this.x,this.y=-this.y,this},Ul:function(t){return this.x*t.x+this.y*t.y},Xl:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},om:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.km(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},pm:function(t){return Math.sqrt(this.qm(t))},qm:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},rm:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},sm:function(t){return this.Xi(t/this.length())},Yi:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},tm:function(t,e,n){return this.hm(e,t).Xi(n).add(t)},Zi:function(t){return t.x===this.x&&t.y===this.y},$i:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},um:function(t,e,n){return void 0===n&&(n=0),e=e*t.vm+n,this.x=t.ec[e],this.y=t.ec[e+1],this},wm:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}},THREE.K=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},THREE.K.prototype={constructor:THREE.K,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},Gi:function(t){return this.x=t,this.y=t,this.z=t,this},bm:function(t){return this.x=t,this},cm:function(t){return this.y=t,this},xm:function(t){return this.z=t,this},dm:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},em:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},Di:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.fm(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},Wi:function(t){return this.x+=t,this.y+=t,this.z+=t,this},fm:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},gm:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.hm(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},im:function(t){return this.x-=t,this.y-=t,this.z-=t,this},hm:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.ym(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},Xi:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},ym:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},zm:function(){var t;return function(e){return e instanceof THREE.Ql==!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new THREE.Jl),this.Am(t.Pl(e))}}(),Bm:function(){var t;return function(e,n){return void 0===t&&(t=new THREE.Jl),this.Am(t.Rl(e,n))}}(),Cm:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},Dm:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12],this.y=r[1]*e+r[5]*n+r[9]*i+r[13],this.z=r[2]*e+r[6]*n+r[10]*i+r[14],this},Em:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},Am:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,h=s*e+o*i-a*n,u=s*n+a*e-r*i,c=s*i+r*n-o*e,f=-r*e-o*n-a*i;return this.x=h*s+f*-r+u*-a-c*-o,this.y=u*s+f*-o+c*-r-h*-a,this.z=c*s+f*-a+h*-o-u*-r,this},Fm:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.Hm(e.Im,t.Jm(e.Km)),this.Em(t)}}(),Lm:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.Hm(e.Km,t.Jm(e.Im)),this.Em(t)}}(),Mm:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},jm:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},km:function(t){return this.Xi(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},Ae:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},lm:function(){var t,e;return function(n,i){return void 0===t&&(t=new THREE.K,e=new THREE.K),t.set(n,n,n),e.set(i,i,i),this.Ae(t,e)}}(),mm:function(t,e){var n=this.length();return this.Xi(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},nm:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},rd:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},Ul:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Xl:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},om:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.km(this.length());
},sm:function(t){return this.Xi(t/this.length())},Yi:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},tm:function(t,e,n){return this.hm(e,t).Xi(n).add(t)},Nm:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.Vl(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},Vl:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},Om:function(t){var e=t.Ul(this)/t.Xl();return this.Di(t).Xi(e)},Pm:function(){var t;return function(e){return void 0===t&&(t=new THREE.K),t.Di(this).Om(e),this.sub(t)}}(),Qm:function(){var t;return function(e){return void 0===t&&(t=new THREE.K),this.sub(t.Di(e).Xi(2*this.Ul(e)))}}(),Rm:function(t){var e=this.Ul(t)/Math.sqrt(this.Xl()*t.Xl());return Math.acos(THREE.Math.Ae(e,-1,1))},pm:function(t){return Math.sqrt(this.qm(t))},qm:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},rm:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},Sm:function(t){var e=Math.sin(t.Tm)*t.N;return this.x=e*Math.sin(t.Um),this.y=Math.cos(t.Tm)*t.N,this.z=e*Math.cos(t.Um),this},Vm:function(t){return this.Wm(t,3)},Xm:function(t){var e=this.Wm(t,0).length(),n=this.Wm(t,1).length(),i=this.Wm(t,2).length();return this.x=e,this.y=n,this.z=i,this},Wm:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.$i(t.elements,4*e)},Zi:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},$i:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},um:function(t,e,n){return void 0===n&&(n=0),e=e*t.vm+n,this.x=t.ec[e],this.y=t.ec[e+1],this.z=t.ec[e+2],this}},THREE.Ym=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1},THREE.Ym.prototype={constructor:THREE.Ym,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},Gi:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},bm:function(t){return this.x=t,this},cm:function(t){return this.y=t,this},xm:function(t){return this.z=t,this},Zm:function(t){return this.w=t,this},dm:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},em:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},Di:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.fm(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},Wi:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},fm:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},gm:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.hm(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},im:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},hm:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},Xi:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},Dm:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},km:function(t){return this.Xi(1/t)},$m:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},_m:function(t){var e,n,i,r,o=.01,a=.1,s=t.elements,h=s[0],u=s[4],c=s[8],f=s[1],l=s[5],p=s[9],d=s[2],E=s[6],v=s[10];if(Math.abs(u-f)<o&&Math.abs(c-d)<o&&Math.abs(p-E)<o){if(Math.abs(u+f)<a&&Math.abs(c+d)<a&&Math.abs(p+E)<a&&Math.abs(h+l+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var g=(h+1)/2,m=(l+1)/2,y=(v+1)/2,T=(u+f)/4,R=(c+d)/4,w=(p+E)/4;return g>m&&g>y?g<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=T/n,r=R/n):m>y?m<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(m),n=T/i,r=w/i):y<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=R/r,i=w/r),this.set(n,i,r,e),this}var H=Math.sqrt((E-p)*(E-p)+(c-d)*(c-d)+(f-u)*(f-u));return Math.abs(H)<.001&&(H=1),this.x=(E-p)/H,this.y=(c-d)/H,this.z=(f-u)/H,this.w=Math.acos((h+l+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},Ae:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},lm:function(){var t,e;return function(n,i){return void 0===t&&(t=new THREE.Ym,e=new THREE.Ym),t.set(n,n,n,n),e.set(i,i,i,i),this.Ae(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},nm:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},rd:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},Ul:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},Xl:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},om:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.km(this.length())},sm:function(t){return this.Xi(t/this.length())},Yi:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},tm:function(t,e,n){return this.hm(e,t).Xi(n).add(t)},Zi:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},$i:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},um:function(t,e,n){return void 0===n&&(n=0),e=e*t.vm+n,this.x=t.ec[e],this.y=t.ec[e+1],this.z=t.ec[e+2],this.w=t.ec[e+3],this}},THREE.Ql=function(t,e,n,i){this.Kl=t||0,this.Ll=e||0,this.Ml=n||0,this.an=i||THREE.Ql.bn},THREE.Ql.cn=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Ql.bn="XYZ",THREE.Ql.prototype={constructor:THREE.Ql,get x(){return this.Kl},set x(t){this.Kl=t,this.Ol()},get y(){return this.Ll},set y(t){this.Ll=t,this.Ol()},get z(){return this.Ml},set z(t){this.Ml=t,this.Ol()},get order(){return this.an},set order(t){this.an=t,this.Ol()},set:function(t,e,n,i){return this.Kl=t,this.Ll=e,this.Ml=n,this.an=i||this.an,this.Ol(),this},clone:function(){return new this.constructor(this.Kl,this.Ll,this.Ml,this.an)},Di:function(t){return this.Kl=t.Kl,this.Ll=t.Ll,this.Ml=t.Ml,this.an=t.an,this.Ol(),this},Sl:function(t,e,n){var i=THREE.Math.Ae,r=t.elements,o=r[0],a=r[4],s=r[8],h=r[1],u=r[5],c=r[9],f=r[2],l=r[6],p=r[10];return e=e||this.an,"XYZ"===e?(this.Ll=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this.Kl=Math.atan2(-c,p),this.Ml=Math.atan2(-a,o)):(this.Kl=Math.atan2(l,u),this.Ml=0)):"YXZ"===e?(this.Kl=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this.Ll=Math.atan2(s,p),this.Ml=Math.atan2(h,u)):(this.Ll=Math.atan2(-f,o),this.Ml=0)):"ZXY"===e?(this.Kl=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this.Ll=Math.atan2(-f,p),this.Ml=Math.atan2(-a,u)):(this.Ll=0,this.Ml=Math.atan2(h,o))):"ZYX"===e?(this.Ll=Math.asin(-i(f,-1,1)),Math.abs(f)<.99999?(this.Kl=Math.atan2(l,p),this.Ml=Math.atan2(h,o)):(this.Kl=0,this.Ml=Math.atan2(-a,u))):"YZX"===e?(this.Ml=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this.Kl=Math.atan2(-c,u),this.Ll=Math.atan2(-f,o)):(this.Kl=0,this.Ll=Math.atan2(s,p))):"XZY"===e?(this.Ml=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this.Kl=Math.atan2(l,u),this.Ll=Math.atan2(s,o)):(this.Kl=Math.atan2(-c,p),this.Ll=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this.an=e,n!==!1&&this.Ol(),this},dn:function(){var t;return function(e,n,i){return void 0===t&&(t=new THREE.Gm),t.en(e),this.Sl(t,n,i)}}(),fn:function(t,e){return this.set(t.x,t.y,t.z,e||this.an)},gn:function(){var t=new THREE.Jl;return function(e){return t.Pl(this),this.dn(t,e)}}(),Zi:function(t){return t.Kl===this.Kl&&t.Ll===this.Ll&&t.Ml===this.Ml&&t.an===this.an},$i:function(t){return this.Kl=t[0],this.Ll=t[1],this.Ml=t[2],void 0!==t[3]&&(this.an=t[3]),this.Ol(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.Kl,t[e+1]=this.Ll,t[e+2]=this.Ml,t[e+3]=this.an,t},hn:function(t){return t?t.set(this.Kl,this.Ll,this.Ml):new THREE.K(this.Kl,this.Ll,this.Ml)},_l:function(t){return this.Ol=t,this},Ol:function(){}},THREE.in=function(t,e){this.start=void 0!==t?t:new THREE.K,this.end=void 0!==e?e:new THREE.K},THREE.in.prototype={constructor:THREE.in,set:function(t,e){return this.start.Di(t),this.end.Di(e),this},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.start.Di(t.start),this.end.Di(t.end),this},jn:function(t){var e=t||new THREE.K;return e.fm(this.start,this.end).Xi(.5)},delta:function(t){var e=t||new THREE.K;return e.hm(this.end,this.start)},kn:function(){return this.start.qm(this.end)},ln:function(){return this.start.pm(this.end)},xc:function(t,e){var n=e||new THREE.K;return this.delta(n).Xi(t).add(this.start)},mn:function(){var t=new THREE.K,e=new THREE.K;return function(n,i){t.hm(n,this.start),e.hm(this.end,this.start);var r=e.Ul(e),o=e.Ul(t),a=o/r;return i&&(a=THREE.Math.Ae(a,0,1)),a}}(),nn:function(t,e,n){var i=this.mn(t,e),r=n||new THREE.K;return this.delta(r).Xi(i).add(this.start)},Dm:function(t){return this.start.Dm(t),this.end.Dm(t),this},Zi:function(t){return t.start.Zi(this.start)&&t.end.Zi(this.end)}},THREE.on=function(t,e){this.min=void 0!==t?t:new THREE.ea(+(1/0),+(1/0)),this.max=void 0!==e?e:new THREE.ea(-(1/0),-(1/0))},THREE.on.prototype={constructor:THREE.on,set:function(t,e){return this.min.Di(t),this.max.Di(e),this},pn:function(t){this.qn();for(var e=0,n=t.length;e<n;e++)this.rn(t[e]);return this},sn:function(){var t=new THREE.ea;return function(e,n){var i=t.Di(n).Xi(.5);return this.min.Di(e).sub(i),this.max.Di(e).add(i),this}}(),clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.min.Di(t.min),this.max.Di(t.max),this},qn:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},$e:function(){return this.max.x<this.min.x||this.max.y<this.min.y},jn:function(t){var e=t||new THREE.ea;return e.fm(this.min,this.max).Xi(.5)},size:function(t){var e=t||new THREE.ea;return e.hm(this.max,this.min)},rn:function(t){return this.min.min(t),this.max.max(t),this},tn:function(t){return this.min.sub(t),this.max.add(t),this},un:function(t){return this.min.Wi(-t),this.max.Wi(t),this},vn:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},wn:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new THREE.ea;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},xn:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},yn:function(t,e){var n=e||new THREE.ea;return n.Di(t).Ae(this.min,this.max)},zn:function(){var t=new THREE.ea;return function(e){var n=t.Di(e).Ae(this.min,this.max);return n.sub(e).length()}}(),An:function(t){return this.min.max(t.min),this.max.min(t.max),this},ee:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},Zi:function(t){return t.min.Zi(this.min)&&t.max.Zi(this.max)}},THREE.Bn=function(t,e){this.min=void 0!==t?t:new THREE.K(+(1/0),+(1/0),+(1/0)),this.max=void 0!==e?e:new THREE.K(-(1/0),-(1/0),-(1/0))},THREE.Bn.prototype={constructor:THREE.Bn,set:function(t,e){return this.min.Di(t),this.max.Di(e),this},Cn:function(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),o=-(1/0),a=-(1/0),s=0,h=t.length;s<h;s+=3){var u=t[s],c=t[s+1],f=t[s+2];u<e&&(e=u),c<n&&(n=c),f<i&&(i=f),u>r&&(r=u),c>o&&(o=c),f>a&&(a=f)}this.min.set(e,n,i),this.max.set(r,o,a)},pn:function(t){this.qn();for(var e=0,n=t.length;e<n;e++)this.rn(t[e]);return this},sn:function(){var t=new THREE.K;return function(e,n){var i=t.Di(n).Xi(.5);return this.min.Di(e).sub(i),this.max.Di(e).add(i),this}}(),Dn:function(){var t=new THREE.K;return function(e){var n=this;return e.En(!0),this.qn(),e.Fn(function(e){var i=e.j;if(void 0!==i)if(i instanceof THREE.Gn)for(var r=i.Hn,o=0,a=r.length;o<a;o++)t.Di(r[o]),t.Dm(e.Km),n.rn(t);else if(i instanceof THREE.In){var s=i.attributes.position;if(void 0!==s){var h,u,c;s instanceof THREE.Jn?(h=s.data.ec,u=s.offset,c=s.data.Kn):(h=s.ec,u=0,c=3);for(var o=u,a=h.length;o<a;o+=c)t.$i(h,o),t.Dm(e.Km),n.rn(t)}}}),this}}(),clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.min.Di(t.min),this.max.Di(t.max),this},qn:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},$e:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},jn:function(t){var e=t||new THREE.K;return e.fm(this.min,this.max).Xi(.5)},size:function(t){var e=t||new THREE.K;return e.hm(this.max,this.min)},rn:function(t){return this.min.min(t),this.max.max(t),this},tn:function(t){return this.min.sub(t),this.max.add(t),this},un:function(t){return this.min.Wi(-t),this.max.Wi(t),this},vn:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},wn:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new THREE.K;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},xn:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},Ln:function(){var t;return function(e){return void 0===t&&(t=new THREE.K),this.yn(e.jn,t),t.qm(e.jn)<=e.N*e.N}}(),Mn:function(t){var e,n;return t.Nn.x>0?(e=t.Nn.x*this.min.x,n=t.Nn.x*this.max.x):(e=t.Nn.x*this.max.x,n=t.Nn.x*this.min.x),t.Nn.y>0?(e+=t.Nn.y*this.min.y,n+=t.Nn.y*this.max.y):(e+=t.Nn.y*this.max.y,n+=t.Nn.y*this.min.y),t.Nn.z>0?(e+=t.Nn.z*this.min.z,n+=t.Nn.z*this.max.z):(e+=t.Nn.z*this.max.z,n+=t.Nn.z*this.min.z),e<=t.Ec&&n>=t.Ec},yn:function(t,e){var n=e||new THREE.K;return n.Di(t).Ae(this.min,this.max)},zn:function(){var t=new THREE.K;return function(e){var n=t.Di(e).Ae(this.min,this.max);return n.sub(e).length()}}(),On:function(){var t=new THREE.K;return function(e){var n=e||new THREE.Pn;return n.jn=this.jn(),n.N=.5*this.size(t).length(),n}}(),An:function(t){return this.min.max(t.min),this.max.min(t.max),this.$e()&&this.qn(),this},ee:function(t){return this.min.min(t.min),this.max.max(t.max),this},Dm:function(){var t=[new THREE.K,new THREE.K,new THREE.K,new THREE.K,new THREE.K,new THREE.K,new THREE.K,new THREE.K];return function(e){return this.$e()?this:(t[0].set(this.min.x,this.min.y,this.min.z).Dm(e),t[1].set(this.min.x,this.min.y,this.max.z).Dm(e),t[2].set(this.min.x,this.max.y,this.min.z).Dm(e),t[3].set(this.min.x,this.max.y,this.max.z).Dm(e),t[4].set(this.max.x,this.min.y,this.min.z).Dm(e),t[5].set(this.max.x,this.min.y,this.max.z).Dm(e),t[6].set(this.max.x,this.max.y,this.min.z).Dm(e),t[7].set(this.max.x,this.max.y,this.max.z).Dm(e),this.pn(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},Zi:function(t){return t.min.Zi(this.min)&&t.max.Zi(this.max)}},THREE.Qn=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Qn.prototype={constructor:THREE.Qn,set:function(t,e,n,i,r,o,a,s,h){var u=this.elements;return u[0]=t,u[1]=i,u[2]=a,u[3]=e,u[4]=r,u[5]=s,u[6]=n,u[7]=o,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).$i(this.elements)},Di:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},Rn:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},Sn:function(){var t;return function(e,n,i){void 0===t&&(t=new THREE.K),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0,o=n;r<i;r+=3,o+=3)t.$i(e,o),t.Cm(this),t.toArray(e,o);return e}}(),Tn:function(){var t;return function(e,n,i){void 0===t&&(t=new THREE.K),void 0===n&&(n=0),void 0===i&&(i=e.length/e.vm);for(var r=0,o=n;r<i;r++,o++)t.x=e.Un(o),t.y=e.Vn(o),t.z=e.Wn(o),t.Cm(this),e.Xn(t.x,t.y,t.z);return e}}(),Xi:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},Yn:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7],u=t[8];return e*o*u-e*a*h-n*r*u+n*a*s+i*r*h-i*o*s},Jm:function(t,e){t instanceof THREE.Gm&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],h=n[4],u=n[5],c=n[6],f=n[7],l=n[8],p=l*h-u*f,d=u*c-l*s,E=f*s-h*c,v=r*p+o*d+a*E;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(g);return console.warn(g),this.identity()}var m=1/v;return i[0]=p*m,i[1]=(a*f-l*o)*m,i[2]=(u*o-a*h)*m,i[3]=d*m,i[4]=(l*r-a*c)*m,i[5]=(a*s-u*r)*m,i[6]=E*m,i[7]=(o*c-f*r)*m,i[8]=(h*r-o*s)*m,this},Zn:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},$n:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},_n:function(t){return this.Rn(t).Jm(this).Zn()},ao:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},$i:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},THREE.Gm=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Gm.prototype={constructor:THREE.Gm,set:function(t,e,n,i,r,o,a,s,h,u,c,f,l,p,d,E){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=h,v[6]=u,v[10]=c,v[14]=f,v[3]=l,v[7]=p,v[11]=d,v[15]=E,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Gm).$i(this.elements)},Di:function(t){return this.elements.set(t.elements),this},bo:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},co:function(t,e,n){return t.Wm(this,0),e.Wm(this,1),n.Wm(this,2),this},do:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},eo:function(){var t;return function(e){void 0===t&&(t=new THREE.K);var n=this.elements,i=e.elements,r=1/t.Wm(e,0).length(),o=1/t.Wm(e,1).length(),a=1/t.Wm(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this}}(),fo:function(t){t instanceof THREE.Ql==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),h=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var f=o*u,l=o*c,p=a*u,d=a*c;e[0]=s*u,e[4]=-s*c,e[8]=h,e[1]=l+p*h,e[5]=f-d*h,e[9]=-a*s,e[2]=d-f*h,e[6]=p+l*h,e[10]=o*s}else if("YXZ"===t.order){var E=s*u,v=s*c,g=h*u,m=h*c;e[0]=E+m*a,e[4]=g*a-v,e[8]=o*h,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=v*a-g,e[6]=m+E*a,e[10]=o*s}else if("ZXY"===t.order){var E=s*u,v=s*c,g=h*u,m=h*c;e[0]=E-m*a,e[4]=-o*c,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*u,e[9]=m-E*a,e[2]=-o*h,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var f=o*u,l=o*c,p=a*u,d=a*c;e[0]=s*u,e[4]=p*h-l,e[8]=f*h+d,e[1]=s*c,e[5]=d*h+f,e[9]=l*h-p,e[2]=-h,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var y=o*s,T=o*h,R=a*s,w=a*h;e[0]=s*u,e[4]=w-y*c,e[8]=R*c+T,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-h*u,e[6]=T*c+R,e[10]=y-w*c}else if("XZY"===t.order){var y=o*s,T=o*h,R=a*s,w=a*h;e[0]=s*u,e[4]=-c,e[8]=h*u,e[1]=y*c+w,e[5]=o*u,e[9]=T*c-R,e[2]=R*c-T,e[6]=a*u,e[10]=w*c+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},en:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z,o=t.w,a=n+n,s=i+i,h=r+r,u=n*a,c=n*s,f=n*h,l=i*s,p=i*h,d=r*h,E=o*a,v=o*s,g=o*h;return e[0]=1-(l+d),e[4]=c-g,e[8]=f+v,e[1]=c+g,e[5]=1-(u+d),e[9]=p-E,e[2]=f-v,e[6]=p+E,e[10]=1-(u+l),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},ho:function(){var t,e,n;return function(i,r,o){void 0===t&&(t=new THREE.K,e=new THREE.K,n=new THREE.K);var a=this.elements;return n.hm(i,r).normalize(),0===n.Xl()&&(n.z=1),t.Vl(o,n).normalize(),0===t.Xl()&&(n.z+=1e-4,t.Vl(o,n).normalize()),e.Vl(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.Hm(t,e)):this.Hm(this,t)},Zl:function(t){return this.Hm(t,this)},Hm:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],h=n[12],u=n[1],c=n[5],f=n[9],l=n[13],p=n[2],d=n[6],E=n[10],v=n[14],g=n[3],m=n[7],y=n[11],T=n[15],R=i[0],w=i[4],H=i[8],b=i[12],x=i[1],A=i[5],M=i[9],U=i[13],O=i[2],S=i[6],D=i[10],C=i[14],L=i[3],P=i[7],N=i[11],I=i[15];return r[0]=o*R+a*x+s*O+h*L,r[4]=o*w+a*A+s*S+h*P,r[8]=o*H+a*M+s*D+h*N,r[12]=o*b+a*U+s*C+h*I,r[1]=u*R+c*x+f*O+l*L,r[5]=u*w+c*A+f*S+l*P,r[9]=u*H+c*M+f*D+l*N,r[13]=u*b+c*U+f*C+l*I,r[2]=p*R+d*x+E*O+v*L,r[6]=p*w+d*A+E*S+v*P,r[10]=p*H+d*M+E*D+v*N,r[14]=p*b+d*U+E*C+v*I,r[3]=g*R+m*x+y*O+T*L,r[7]=g*w+m*A+y*S+T*P,r[11]=g*H+m*M+y*D+T*N,r[15]=g*b+m*U+y*C+T*I,this},io:function(t,e,n){var i=this.elements;return this.Hm(t,e),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},Xi:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},Sn:function(){var t;return function(e,n,i){void 0===t&&(t=new THREE.K),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0,o=n;r<i;r+=3,o+=3)t.$i(e,o),t.Dm(this),t.toArray(e,o);return e}}(),Tn:function(){var t;return function(e,n,i){void 0===t&&(t=new THREE.K),void 0===n&&(n=0),void 0===i&&(i=e.length/e.vm);for(var r=0,o=n;r<i;r++,o++)t.x=e.Un(o),t.y=e.Vn(o),t.z=e.Wn(o),t.Dm(this),e.Xn(t.x,t.y,t.z);return e}}(),Yn:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],h=t[13],u=t[2],c=t[6],f=t[10],l=t[14],p=t[3],d=t[7],E=t[11],v=t[15];return p*(+r*s*c-i*h*c-r*a*f+n*h*f+i*a*l-n*s*l)+d*(+e*s*l-e*h*f+r*o*f-i*o*l+i*h*u-r*s*u)+E*(+e*h*c-e*a*l-r*o*c+n*o*l+r*a*u-n*h*u)+v*(-i*a*u-e*s*c+e*a*f+i*o*c-n*o*f+n*s*u)},Zn:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},$n:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},jo:function(){var t;return function(){return void 0===t&&(t=new THREE.K),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.Wm(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},Jm:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],h=i[4],u=i[5],c=i[6],f=i[7],l=i[8],p=i[9],d=i[10],E=i[11],v=i[12],g=i[13],m=i[14],y=i[15],T=p*m*f-g*d*f+g*c*E-u*m*E-p*c*y+u*d*y,R=v*d*f-l*m*f-v*c*E+h*m*E+l*c*y-h*d*y,w=l*g*f-v*p*f+v*u*E-h*g*E-l*u*y+h*p*y,H=v*p*c-l*g*c-v*u*d+h*g*d+l*u*m-h*p*m,b=r*T+o*R+a*w+s*H;if(0===b){var x="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(x);return console.warn(x),this.identity()}var A=1/b;return n[0]=T*A,n[1]=(g*d*s-p*m*s-g*a*E+o*m*E+p*a*y-o*d*y)*A,n[2]=(u*m*s-g*c*s+g*a*f-o*m*f-u*a*y+o*c*y)*A,n[3]=(p*c*s-u*d*s-p*a*f+o*d*f+u*a*E-o*c*E)*A,n[4]=R*A,n[5]=(l*m*s-v*d*s+v*a*E-r*m*E-l*a*y+r*d*y)*A,n[6]=(v*c*s-h*m*s-v*a*f+r*m*f+h*a*y-r*c*y)*A,n[7]=(h*d*s-l*c*s+l*a*f-r*d*f-h*a*E+r*c*E)*A,n[8]=w*A,n[9]=(v*p*s-l*g*s-v*o*E+r*g*E+l*o*y-r*p*y)*A,n[10]=(h*g*s-v*u*s+v*o*f-r*g*f-h*o*y+r*u*y)*A,n[11]=(l*u*s-h*p*s-l*o*f+r*p*f+h*o*E-r*u*E)*A,n[12]=H*A,n[13]=(l*g*a-v*p*a+v*o*d-r*g*d-l*o*m+r*p*m)*A,n[14]=(v*u*a-h*g*a-v*o*c+r*g*c+h*o*m-r*u*m)*A,n[15]=(h*p*a-l*u*a+l*o*c-r*p*c-h*o*d+r*u*d)*A,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},ko:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},lo:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},mo:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},no:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},oo:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},po:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,h=r*o,u=r*a;return this.set(h*o+n,h*a-i*s,h*s+i*a,0,h*a+i*s,u*a+n,u*s-i*o,0,h*s-i*a,u*s+i*o,r*s*s+n,0,0,0,0,1),this},qo:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},ro:function(t,e,n){return this.en(e),this.scale(n),this.setPosition(t),this},so:function(){var t,e;return function(n,i,r){void 0===t&&(t=new THREE.K,e=new THREE.Gm);var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),h=t.set(o[8],o[9],o[10]).length(),u=this.Yn();u<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.elements.set(this.elements);var c=1/a,f=1/s,l=1/h;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,i.Sl(e),r.x=a,r.y=s,r.z=h,this}}(),to:function(t,e,n,i,r,o){var a=this.elements,s=2*r/(e-t),h=2*r/(i-n),u=(e+t)/(e-t),c=(i+n)/(i-n),f=-(o+r)/(o-r),l=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=l,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},uo:function(t,e,n,i){var r=n*Math.tan(THREE.Math.vo*t*.5),o=-r,a=o*e,s=r*e;return this.to(a,s,o,r,n,i)},wo:function(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),h=1/(n-i),u=1/(o-r),c=(e+t)*s,f=(n+i)*h,l=(o+r)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-l,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},Zi:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},$i:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},THREE.xo=function(t,e){this.origin=void 0!==t?t:new THREE.K,this.direction=void 0!==e?e:new THREE.K},THREE.xo.prototype={constructor:THREE.xo,set:function(t,e){return this.origin.Di(t),this.direction.Di(e),this},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.origin.Di(t.origin),this.direction.Di(t.direction),this},xc:function(t,e){var n=e||new THREE.K;return n.Di(this.direction).Xi(t).add(this.origin)},ho:function(t){return this.direction.Di(t).sub(this.origin).normalize(),this},yo:function(){var t=new THREE.K;return function(e){return this.origin.Di(this.xc(e,t)),this}}(),nn:function(t,e){var n=e||new THREE.K;n.hm(t,this.origin);var i=n.Ul(this.direction);return i<0?n.Di(this.origin):n.Di(this.direction).Xi(i).add(this.origin)},zn:function(t){return Math.sqrt(this.zo(t))},zo:function(){var t=new THREE.K;return function(e){var n=t.hm(e,this.origin).Ul(this.direction);return n<0?this.origin.qm(e):(t.Di(this.direction).Xi(n).add(this.origin),t.qm(e))}}(),Ao:function(){var t=new THREE.K,e=new THREE.K,n=new THREE.K;return function(i,r,o,a){t.Di(i).add(r).Xi(.5),e.Di(r).sub(i).normalize(),n.Di(this.origin).sub(t);var s,h,u,c,f=.5*i.pm(r),l=-this.direction.Ul(e),p=n.Ul(this.direction),d=-n.Ul(e),E=n.Xl(),v=Math.abs(1-l*l);if(v>0)if(s=l*d-p,h=l*p-d,c=f*v,s>=0)if(h>=-c)if(h<=c){var g=1/v;s*=g,h*=g,u=s*(s+l*h+2*p)+h*(l*s+h+2*d)+E}else h=f,s=Math.max(0,-(l*h+p)),u=-s*s+h*(h+2*d)+E;else h=-f,s=Math.max(0,-(l*h+p)),u=-s*s+h*(h+2*d)+E;else h<=-c?(s=Math.max(0,-(-l*f+p)),h=s>0?-f:Math.min(Math.max(-f,-d),f),u=-s*s+h*(h+2*d)+E):h<=c?(s=0,h=Math.min(Math.max(-f,-d),f),u=h*(h+2*d)+E):(s=Math.max(0,-(l*f+p)),h=s>0?f:Math.min(Math.max(-f,-d),f),u=-s*s+h*(h+2*d)+E);else h=l>0?-f:f,s=Math.max(0,-(l*h+p)),u=-s*s+h*(h+2*d)+E;return o&&o.Di(this.direction).Xi(s).add(this.origin),a&&a.Di(e).Xi(h).add(t),u}}(),Bo:function(){var t=new THREE.K;return function(e,n){t.hm(e.jn,this.origin);var i=t.Ul(this.direction),r=t.Ul(t)-i*i,o=e.N*e.N;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,h=i+a;return s<0&&h<0?null:s<0?this.xc(h,n):this.xc(s,n)}}(),Ln:function(t){return this.zn(t.jn)<=t.N},Co:function(t){var e=t.Nn.Ul(this.direction);if(0===e)return 0===t.zn(this.origin)?0:null;var n=-(this.origin.Ul(t.Nn)+t.Ec)/e;return n>=0?n:null},Do:function(t,e){var n=this.Co(t);return null===n?null:this.xc(n,e)},Mn:function(t){var e=t.zn(this.origin);if(0===e)return!0;var n=t.Nn.Ul(this.direction);return n*e<0},Eo:function(t,e){var n,i,r,o,a,s,h=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return h>=0?(n=(t.min.x-f.x)*h,i=(t.max.x-f.x)*h):(n=(t.max.x-f.x)*h,i=(t.min.x-f.x)*h),u>=0?(r=(t.min.y-f.y)*u,o=(t.max.y-f.y)*u):(r=(t.max.y-f.y)*u,o=(t.min.y-f.y)*u),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),c>=0?(a=(t.min.z-f.z)*c,s=(t.max.z-f.z)*c):(a=(t.max.z-f.z)*c,s=(t.min.z-f.z)*c),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.xc(n>=0?n:i,e)))},xn:function(){var t=new THREE.K;return function(e){return null!==this.Eo(e,t);
}}(),Fo:function(){var t=new THREE.K,e=new THREE.K,n=new THREE.K,i=new THREE.K;return function(r,o,a,s,h){e.hm(o,r),n.hm(a,r),i.Vl(e,n);var u,c=this.direction.Ul(i);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}t.hm(this.origin,r);var f=u*this.direction.Ul(n.Vl(t,n));if(f<0)return null;var l=u*this.direction.Ul(e.Nm(t));if(l<0)return null;if(f+l>c)return null;var p=-u*t.Ul(i);return p<0?null:this.xc(p/c,h)}}(),Dm:function(t){return this.direction.add(this.origin).Dm(t),this.origin.Dm(t),this.direction.sub(this.origin),this.direction.normalize(),this},Zi:function(t){return t.origin.Zi(this.origin)&&t.direction.Zi(this.direction)}},THREE.Pn=function(t,e){this.jn=void 0!==t?t:new THREE.K,this.N=void 0!==e?e:0},THREE.Pn.prototype={constructor:THREE.Pn,set:function(t,e){return this.jn.Di(t),this.N=e,this},pn:function(){var t=new THREE.Bn;return function(e,n){var i=this.jn;void 0!==n?i.Di(n):t.pn(e).jn(i);for(var r=0,o=0,a=e.length;o<a;o++)r=Math.max(r,i.qm(e[o]));return this.N=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.jn.Di(t.jn),this.N=t.N,this},empty:function(){return this.N<=0},vn:function(t){return t.qm(this.jn)<=this.N*this.N},zn:function(t){return t.pm(this.jn)-this.N},Ln:function(t){var e=this.N+t.N;return t.jn.qm(this.jn)<=e*e},xn:function(t){return t.Ln(this)},Mn:function(t){return Math.abs(this.jn.Ul(t.Nn)-t.Ec)<=this.N},yn:function(t,e){var n=this.jn.qm(t),i=e||new THREE.K;return i.Di(t),n>this.N*this.N&&(i.sub(this.jn).normalize(),i.Xi(this.N).add(this.jn)),i},Go:function(t){var e=t||new THREE.Bn;return e.set(this.jn,this.jn),e.un(this.N),e},Dm:function(t){return this.jn.Dm(t),this.N=this.N*t.ko(),this},translate:function(t){return this.jn.add(t),this},Zi:function(t){return t.jn.Zi(this.jn)&&t.N===this.N}},THREE.Ho=function(t,e,n,i,r,o){this.Io=[void 0!==t?t:new THREE.Jo,void 0!==e?e:new THREE.Jo,void 0!==n?n:new THREE.Jo,void 0!==i?i:new THREE.Jo,void 0!==r?r:new THREE.Jo,void 0!==o?o:new THREE.Jo]},THREE.Ho.prototype={constructor:THREE.Ho,set:function(t,e,n,i,r,o){var a=this.Io;return a[0].Di(t),a[1].Di(e),a[2].Di(n),a[3].Di(i),a[4].Di(r),a[5].Di(o),this},clone:function(){return(new this.constructor).Di(this)},Di:function(t){for(var e=this.Io,n=0;n<6;n++)e[n].Di(t.Io[n]);return this},Ko:function(t){var e=this.Io,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],h=n[5],u=n[6],c=n[7],f=n[8],l=n[9],p=n[10],d=n[11],E=n[12],v=n[13],g=n[14],m=n[15];return e[0].Lo(a-i,c-s,d-f,m-E).normalize(),e[1].Lo(a+i,c+s,d+f,m+E).normalize(),e[2].Lo(a+r,c+h,d+l,m+v).normalize(),e[3].Lo(a-r,c-h,d-l,m-v).normalize(),e[4].Lo(a-o,c-u,d-p,m-g).normalize(),e[5].Lo(a+o,c+u,d+p,m+g).normalize(),this},Mo:function(){var t=new THREE.Pn;return function(e){var n=e.j;return null===n.No&&n.Oo(),t.Di(n.No).Dm(e.Km),this.Ln(t)}}(),Po:function(){var t=new THREE.Pn;return function(e){return t.jn.set(0,0,0),t.N=.7071067811865476,t.Dm(e.Km),this.Ln(t)}}(),Ln:function(t){for(var e=this.Io,n=t.jn,i=-t.N,r=0;r<6;r++){var o=e[r].zn(n);if(o<i)return!1}return!0},xn:function(){var t=new THREE.K,e=new THREE.K;return function(n){for(var i=this.Io,r=0;r<6;r++){var o=i[r];t.x=o.Nn.x>0?n.min.x:n.max.x,e.x=o.Nn.x>0?n.max.x:n.min.x,t.y=o.Nn.y>0?n.min.y:n.max.y,e.y=o.Nn.y>0?n.max.y:n.min.y,t.z=o.Nn.z>0?n.min.z:n.max.z,e.z=o.Nn.z>0?n.max.z:n.min.z;var a=o.zn(t),s=o.zn(e);if(a<0&&s<0)return!1}return!0}}(),vn:function(t){for(var e=this.Io,n=0;n<6;n++)if(e[n].zn(t)<0)return!1;return!0}},THREE.Jo=function(t,e){this.Nn=void 0!==t?t:new THREE.K(1,0,0),this.Ec=void 0!==e?e:0},THREE.Jo.prototype={constructor:THREE.Jo,set:function(t,e){return this.Nn.Di(t),this.Ec=e,this},Lo:function(t,e,n,i){return this.Nn.set(t,e,n),this.Ec=i,this},Qo:function(t,e){return this.Nn.Di(t),this.Ec=-e.Ul(this.Nn),this},Ro:function(){var t=new THREE.K,e=new THREE.K;return function(n,i,r){var o=t.hm(r,i).Nm(e.hm(n,i)).normalize();return this.Qo(o,n),this}}(),clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.Nn.Di(t.Nn),this.Ec=t.Ec,this},normalize:function(){var t=1/this.Nn.length();return this.Nn.Xi(t),this.Ec*=t,this},rd:function(){return this.Ec*=-1,this.Nn.rd(),this},zn:function(t){return this.Nn.Ul(t)+this.Ec},So:function(t){return this.zn(t.jn)-t.N},To:function(t,e){return this.Uo(t,e).sub(t).rd()},Uo:function(t,e){var n=this.zn(t),i=e||new THREE.K;return i.Di(this.Nn).Xi(n)},Vo:function(){var t=new THREE.K;return function(e,n){var i=n||new THREE.K,r=e.delta(t),o=this.Nn.Ul(r);if(0!==o){var a=-(e.start.Ul(this.Nn)+this.Ec)/o;if(!(a<0||a>1))return i.Di(r).Xi(a).add(e.start)}else if(0===this.zn(e.start))return i.Di(e.start)}}(),Wo:function(t){var e=this.zn(t.start),n=this.zn(t.end);return e<0&&n>0||n<0&&e>0},xn:function(t){return t.Mn(this)},Ln:function(t){return t.Mn(this)},Xo:function(t){var e=t||new THREE.K;return e.Di(this.Nn).Xi(-this.Ec)},Dm:function(){var t=new THREE.K,e=new THREE.Qn;return function(n,i){var r=this.Xo(t).Dm(n),o=i||e._n(n),a=this.Nn.Cm(o).normalize();return this.Ec=-r.Ul(a),this}}(),translate:function(t){return this.Ec=this.Ec-t.Ul(this.Nn),this},Zi:function(t){return t.Nn.Zi(this.Nn)&&t.Ec===this.Ec}},THREE.Yo=function(t,e,n){return this.N=void 0!==t?t:1,this.Tm=void 0!==e?e:0,this.Um=void 0!==n?n:0,this},THREE.Yo.prototype={constructor:THREE.Yo,set:function(t,e,n){return this.N=t,this.Tm=e,this.Um=n,this},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.N.Di(t.N),this.Tm.Di(t.Tm),this.Um.Di(t.Um),this},Zo:function(){var t=1e-6;return this.Tm=Math.max(t,Math.min(Math.PI-t,this.Tm)),this},fn:function(t){return this.N=t.length(),0===this.N?(this.Um=0,this.Tm=0):(this.Um=Math.atan2(t.x,t.z),this.Tm=Math.acos(THREE.Math.Ae(t.y/this.N,-1,1))),this}},THREE.Math={vo:Math.PI/180,$o:180/Math.PI,_o:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),i=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19===r?3&t|8:t]);return n.join("")}}(),Ae:function(t,e,n){return Math.max(e,Math.min(n,t))},Ii:function(t,e){return(t%e+e)%e},ap:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},bp:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},cp:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},dp:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},ep:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},fp:function(t,e){return t+Math.random()*(e-t)},gp:function(t){return t*(.5-Math.random())},hp:function(t){return t*THREE.Math.vo},ip:function(t){return t*THREE.Math.$o},jp:function(t){return 0===(t&t-1)&&0!==t},kp:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},lp:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},THREE.mp=function(t){function e(t,e,n,i,r,o,a){var s=.5*(n-t),h=.5*(i-e);return(2*(e-n)+s+h)*a+(-3*(e-n)-2*s-h)*o+s*r+e}this.points=t;var n,i,r,o,a,s,h,u,c,f=[],l={x:0,y:0,z:0};this.np=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.op=function(t){return n=(this.points.length-1)*t,i=Math.floor(n),r=n-i,f[0]=0===i?i:i-1,f[1]=i,f[2]=i>this.points.length-2?this.points.length-1:i+1,f[3]=i>this.points.length-3?this.points.length-1:i+2,s=this.points[f[0]],h=this.points[f[1]],u=this.points[f[2]],c=this.points[f[3]],o=r*r,a=r*o,l.x=e(s.x,h.x,u.x,c.x,r,o,a),l.y=e(s.y,h.y,u.y,c.y,r,o,a),l.z=e(s.z,h.z,u.z,c.z,r,o,a),l},this.pp=function(){var t,e,n=this.points.length,i=[];for(t=0;t<n;t++)e=this.points[t],i[t]=[e.x,e.y,e.z];return i},this.qp=function(t){var e,n,i,r,o=0,a=0,s=0,h=new THREE.K,u=new THREE.K,c=[],f=0;for(c[0]=0,t||(t=100),i=this.points.length*t,h.Di(this.points[0]),e=1;e<i;e++)n=e/i,r=this.op(n),u.Di(r),f+=u.pm(h),h.Di(r),o=(this.points.length-1)*n,a=Math.floor(o),a!==s&&(c[a]=f,s=a);return c[c.length]=f,{rp:c,total:f}},this.sp=function(t){var e,n,i,r,o,a,s,h,u=[],c=new THREE.K,f=this.qp();for(u.push(c.Di(this.points[0]).clone()),e=1;e<this.points.length;e++){for(a=f.rp[e]-f.rp[e-1],s=Math.ceil(t*a/f.total),r=(e-1)/(this.points.length-1),o=e/(this.points.length-1),n=1;n<s-1;n++)i=r+n*(1/s)*(o-r),h=this.op(i),u.push(c.Di(h).clone());u.push(c.Di(this.points[e]).clone())}this.points=u}},THREE.tp=function(t,e,n){this.a=void 0!==t?t:new THREE.K,this.b=void 0!==e?e:new THREE.K,this.c=void 0!==n?n:new THREE.K},THREE.tp.Nn=function(){var t=new THREE.K;return function(e,n,i,r){var o=r||new THREE.K;o.hm(i,n),t.hm(e,n),o.Nm(t);var a=o.Xl();return a>0?o.Xi(1/Math.sqrt(a)):o.set(0,0,0)}}(),THREE.tp.up=function(){var t=new THREE.K,e=new THREE.K,n=new THREE.K;return function(i,r,o,a,s){t.hm(a,r),e.hm(o,r),n.hm(i,r);var h=t.Ul(t),u=t.Ul(e),c=t.Ul(n),f=e.Ul(e),l=e.Ul(n),p=h*f-u*u,d=s||new THREE.K;if(0===p)return d.set(-2,-1,-1);var E=1/p,v=(f*c-u*l)*E,g=(h*l-u*c)*E;return d.set(1-v-g,g,v)}}(),THREE.tp.vn=function(){var t=new THREE.K;return function(e,n,i,r){var o=THREE.tp.up(e,n,i,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),THREE.tp.prototype={constructor:THREE.tp,set:function(t,e,n){return this.a.Di(t),this.b.Di(e),this.c.Di(n),this},vp:function(t,e,n,i){return this.a.Di(t[e]),this.b.Di(t[n]),this.c.Di(t[i]),this},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.a.Di(t.a),this.b.Di(t.b),this.c.Di(t.c),this},wp:function(){var t=new THREE.K,e=new THREE.K;return function(){return t.hm(this.c,this.b),e.hm(this.a,this.b),.5*t.Nm(e).length()}}(),xp:function(t){var e=t||new THREE.K;return e.fm(this.a,this.b).add(this.c).Xi(1/3)},Nn:function(t){return THREE.tp.Nn(this.a,this.b,this.c,t)},yp:function(t){var e=t||new THREE.Jo;return e.Ro(this.a,this.b,this.c)},up:function(t,e){return THREE.tp.up(t,this.a,this.b,this.c,e)},vn:function(t){return THREE.tp.vn(t,this.a,this.b,this.c)},nn:function(){var t,e,n,i;return function(r,o){void 0===t&&(t=new THREE.Jo,e=[new THREE.in,new THREE.in,new THREE.in],n=new THREE.K,i=new THREE.K);var a=o||new THREE.K,s=1/0;if(t.Ro(this.a,this.b,this.c),t.To(r,n),this.vn(n)===!0)a.Di(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var h=0;h<e.length;h++){e[h].nn(n,!0,i);var u=n.qm(i);u<s&&(s=u,a.Di(i))}}return a}}(),Zi:function(t){return t.a.Zi(this.a)&&t.b.Zi(this.b)&&t.c.Zi(this.c)}},THREE.zp=function(t,e,n,i){this.Ap=t,this.Bp=0,this.Cp=void 0!==i?i:new e.constructor(n),this.Dp=e,this.Ep=n},THREE.zp.prototype={constructor:THREE.zp,evaluate:function(t){var e=this.Ap,n=this.Bp,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this.Bp=n,this.Fp(n-1,t,r)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}{if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var a=n-2;;){if(void 0===r)return this.Bp=0,this.Gp(0,t,i);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}for(;n<o;){var h=n+o>>>1;t<e[h]?o=h:n=h+1}if(i=e[n],r=e[n-1],void 0===r)return this.Bp=0,this.Gp(0,t,i);if(void 0===i)return n=e.length,this.Bp=n,this.Fp(n-1,r,t)}this.Bp=n,this.Hp(n,r,i)}return this.Ip(n,r,t,i)},Jp:null,Kp:{},Lp:function(){return this.Jp||this.Kp},Mp:function(t){for(var e=this.Cp,n=this.Dp,i=this.Ep,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},Ip:function(t,e,n,i){throw new Error("call to abstract method")},Hp:function(t,e,n){}},Object.assign(THREE.zp.prototype,{Gp:THREE.zp.prototype.Mp,Fp:THREE.zp.prototype.Mp}),THREE.Np=function(t,e,n,i){THREE.zp.call(this,t,e,n,i),this.Op=-0,this.Pp=-0,this.Qp=-0,this.Rp=-0},THREE.Np.prototype=Object.assign(Object.create(THREE.zp.prototype),{constructor:THREE.Np,Kp:{Sp:THREE.li,Tp:THREE.li},Hp:function(t,e,n){var i=this.Ap,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.Lp().Sp){case THREE.mi:r=t,a=2*e-n;break;case THREE.ni:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.Lp().Tp){case THREE.mi:o=t,s=2*n-e;break;case THREE.ni:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}var h=.5*(n-e),u=this.Ep;this.Op=h/(e-a),this.Qp=h/(s-n),this.Pp=r*u,this.Rp=o*u},Ip:function(t,e,n,i){for(var r=this.Cp,o=this.Dp,a=this.Ep,s=t*a,h=s-a,u=this.Pp,c=this.Rp,f=this.Op,l=this.Qp,p=(n-e)/(i-e),d=p*p,E=d*p,v=-f*E+2*f*d-f*p,g=(1+f)*E+(-1.5-2*f)*d+(-.5+f)*p+1,m=(-1-l)*E+(1.5+l)*d+.5*p,y=l*E-l*d,T=0;T!==a;++T)r[T]=v*o[u+T]+g*o[h+T]+m*o[s+T]+y*o[c+T];return r}}),THREE.Up=function(t,e,n,i){THREE.zp.call(this,t,e,n,i)},THREE.Up.prototype=Object.assign(Object.create(THREE.zp.prototype),{constructor:THREE.Up,Ip:function(t,e,n,i){return this.Mp(t-1)}}),THREE.Vp=function(t,e,n,i){THREE.zp.call(this,t,e,n,i)},THREE.Vp.prototype=Object.assign(Object.create(THREE.zp.prototype),{constructor:THREE.Vp,Ip:function(t,e,n,i){for(var r=this.Cp,o=this.Dp,a=this.Ep,s=t*a,h=s-a,u=(n-e)/(i-e),c=1-u,f=0;f!==a;++f)r[f]=o[h+f]*c+o[s+f]*u;return r}}),THREE.Wp=function(t,e,n,i){THREE.zp.call(this,t,e,n,i)},THREE.Wp.prototype=Object.assign(Object.create(THREE.zp.prototype),{constructor:THREE.Wp,Ip:function(t,e,n,i){for(var r=this.Cp,o=this.Dp,a=this.Ep,s=t*a,h=(n-e)/(i-e),u=s+a;s!==u;s+=4)THREE.Jl.am(r,0,o,s-a,o,s,h);return r}}),THREE.Xp=function(t){this.Yp=void 0===t||t,this.startTime=0,this.Zp=0,this.elapsedTime=0,this.$p=!1},THREE.Xp.prototype={constructor:THREE.Xp,start:function(){this.startTime=(performance||Date).now(),this.Zp=this.startTime,this.$p=!0},stop:function(){this._p(),this.$p=!1},_p:function(){return this.aq(),this.elapsedTime},aq:function(){var t=0;if(this.Yp&&!this.$p&&this.start(),this.$p){var e=(performance||Date).now();t=(e-this.Zp)/1e3,this.Zp=e,this.elapsedTime+=t}return t}},THREE.bq=function(){},Object.assign(THREE.bq.prototype,{addEventListener:function(t,e){void 0===this.cq&&(this.cq={});var n=this.cq;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},dq:function(t,e){if(void 0===this.cq)return!1;var n=this.cq;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this.cq){var n=this.cq,i=n[t];if(void 0!==i){var r=i.indexOf(e);r!==-1&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this.cq){var e=this.cq,n=e[t.type];if(void 0!==n){t.target=this;var i=[],r=0,o=n.length;for(r=0;r<o;r++)i[r]=n[r];for(r=0;r<o;r++)i[r].call(this,t)}}}}),THREE.eq=function(){this.mask=1},THREE.eq.prototype={constructor:THREE.eq,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},function(THREE){function t(t,e){return t.ln-e.ln}function e(t,n,i,r){if(t.visible!==!1&&(t.pq(n,i),r===!0))for(var o=t.children,a=0,s=o.length;a<s;a++)e(o[a],n,i,!0)}THREE.fq=function(t,e,n,i){this.gq=new THREE.xo(t,e),this.near=n||0,this.hq=i||1/0,this.iq={jq:{},kq:{},lq:{},mq:{threshold:1},nq:{}},Object.defineProperties(this.iq,{oq:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.mq}}})},THREE.fq.prototype={constructor:THREE.fq,qq:1,set:function(t,e){this.gq.set(t,e)},rq:function(t,e){e instanceof THREE.sq?(this.gq.origin.Vm(e.Km),this.gq.direction.set(t.x,t.y,.5).Lm(e).sub(this.gq.origin).normalize()):e instanceof THREE.tq?(this.gq.origin.set(t.x,t.y,(e.near+e.hq)/(e.near-e.hq)).Lm(e),this.gq.direction.set(0,0,-1).Mm(e.Km)):console.error("THREE.Raycaster: Unsupported camera type.")},uq:function(n,i){var r=[];return e(n,this,r,i),r.sort(t),r},vq:function(n,i){var r=[];if(Array.isArray(n)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var o=0,a=n.length;o<a;o++)e(n[o],this,r,i);return r.sort(t),r}}}(THREE),THREE.wq=function(){function t(){r.Pl(i,!1)}function e(){i.dn(r,void 0,!1)}Object.defineProperty(this,"id",{value:THREE.xq++}),this.yq=THREE.Math._o(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.zq=THREE.wq.Aq.clone();var n=new THREE.K,i=new THREE.Ql,r=new THREE.Jl,o=new THREE.K(1,1,1);i._l(t),r._l(e),Object.defineProperties(this,{position:{Bq:!0,value:n},rotation:{Bq:!0,value:i},Cq:{Bq:!0,value:r},scale:{Bq:!0,value:o},Dq:{value:new THREE.Gm},Eq:{value:new THREE.Qn}}),this.matrix=new THREE.Gm,this.Km=new THREE.Gm,this.Fq=THREE.wq.Gq,this.Hq=!1,this.Iq=new THREE.eq,this.visible=!0,this.Jq=!1,this.Kq=!1,this.Lq=!0,this.Mq=0,this.Nq={}},THREE.wq.Aq=new THREE.K(0,1,0),THREE.wq.Gq=!0,Object.assign(THREE.wq.prototype,THREE.bq.prototype,{Oq:function(t){this.matrix.Hm(t,this.matrix),this.matrix.so(this.position,this.Cq,this.scale)},Pq:function(t,e){this.Cq.Rl(t,e)},Qq:function(t){this.Cq.Pl(t,!0)},Rq:function(t){this.Cq.Sl(t)},Sq:function(t){this.Cq.Di(t)},Tq:function(){var t=new THREE.Jl;return function(e,n){return t.Rl(e,n),this.Cq.multiply(t),this}}(),Uq:function(){var t=new THREE.K(1,0,0);return function(e){return this.Tq(t,e)}}(),Vq:function(){var t=new THREE.K(0,1,0);return function(e){return this.Tq(t,e)}}(),Wq:function(){var t=new THREE.K(0,0,1);return function(e){return this.Tq(t,e)}}(),Xq:function(){var t=new THREE.K;return function(e,n){return t.Di(e).Am(this.Cq),this.position.add(t.Xi(n)),this}}(),Yq:function(){var t=new THREE.K(1,0,0);return function(e){return this.Xq(t,e)}}(),Zq:function(){var t=new THREE.K(0,1,0);return function(e){return this.Xq(t,e)}}(),$q:function(){var t=new THREE.K(0,0,1);return function(e){return this.Xq(t,e)}}(),_q:function(t){return t.Dm(this.Km)},ar:function(){var t=new THREE.Gm;return function(e){return e.Dm(t.Jm(this.Km))}}(),ho:function(){var t=new THREE.Gm;return function(e){t.ho(e,this.position,this.zq),this.Cq.Sl(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof THREE.wq?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},br:function(t){return this.cr("id",t)},dr:function(t){return this.cr("name",t)},cr:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.cr(t,e);if(void 0!==o)return o}},er:function(t){var e=t||new THREE.K;return this.En(!0),e.Vm(this.Km)},gr:function(){var t=new THREE.K,e=new THREE.K;return function(n){var i=n||new THREE.Jl;return this.En(!0),this.Km.so(t,i,e),i}}(),hr:function(){var t=new THREE.Jl;return function(e){var n=e||new THREE.Ql;return this.gr(t),n.dn(t,this.rotation.order,!1)}}(),ir:function(){var t=new THREE.K,e=new THREE.Jl;return function(n){var i=n||new THREE.K;return this.En(!0),this.Km.so(t,e,i),i}}(),jr:function(){var t=new THREE.Jl;return function(e){var n=e||new THREE.K;return this.gr(t),n.set(0,0,1).Am(t)}}(),pq:function(){},Fn:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].Fn(t)},kr:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].kr(t)}},lr:function(t){var e=this.parent;null!==e&&(t(e),e.lr(t))},mr:function(){this.matrix.ro(this.position,this.Cq,this.scale),this.Hq=!0},En:function(t){this.Fq===!0&&this.mr(),this.Hq!==!0&&t!==!0||(null===this.parent?this.Km.Di(this.matrix):this.Km.Hm(this.parent.Km,this.matrix),this.Hq=!1,t=!0);for(var e=0,n=this.children.length;e<n;e++)this.children[e].En(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.qr,e.push(i)}return e}var n=void 0===t||""===t,i={};n&&(t={nr:{},or:{},pr:{},images:{}},i.qr={version:4.4,type:"Object",rr:"Object3D.toJSON"});var r={};if(r.yq=this.yq,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.Nq)&&(r.Nq=this.Nq),this.Jq===!0&&(r.Jq=!0),this.Kq===!0&&(r.Kq=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.j&&(void 0===t.nr[this.j.yq]&&(t.nr[this.j.yq]=this.j.toJSON(t)),r.j=this.j.yq),void 0!==this.k&&(void 0===t.or[this.k.yq]&&(t.or[this.k.yq]=this.k.toJSON(t)),r.k=this.k.yq),this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(n){var a=e(t.nr),s=e(t.or),h=e(t.pr),u=e(t.images);a.length>0&&(i.nr=a),s.length>0&&(i.or=s),h.length>0&&(i.pr=h),u.length>0&&(i.images=u)}return i.object=r,i},clone:function(t){return(new this.constructor).Di(this,t)},Di:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.zq.Di(t.zq),this.position.Di(t.position),this.Cq.Di(t.Cq),this.scale.Di(t.scale),this.matrix.Di(t.matrix),this.Km.Di(t.Km),this.Fq=t.Fq,this.Hq=t.Hq,this.visible=t.visible,this.Jq=t.Jq,this.Kq=t.Kq,this.Lq=t.Lq,this.Mq=t.Mq,this.Nq=JSON.parse(JSON.stringify(t.Nq)),e===!0)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),THREE.xq=0,THREE.sr=function(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.Nn=i instanceof THREE.K?i:new THREE.K,this.tr=Array.isArray(i)?i:[],this.color=r instanceof THREE.T?r:new THREE.T,this.ur=Array.isArray(r)?r:[],this.vr=void 0!==o?o:0},THREE.sr.prototype={constructor:THREE.sr,clone:function(){return(new this.constructor).Di(this)},Di:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.Nn.Di(t.Nn),this.color.Di(t.color),this.vr=t.vr;for(var e=0,n=t.tr.length;e<n;e++)this.tr[e]=t.tr[e].clone();for(var e=0,n=t.ur.length;e<n;e++)this.ur[e]=t.ur[e].clone();return this}},THREE.wr=function(t,e,n){this.yq=THREE.Math._o(),this.ec=t,this.vm=e,this.xr=!1,this.yr={offset:0,count:-1},this.version=0,this.zr=n===!0},THREE.wr.prototype={constructor:THREE.wr,get count(){return this.ec.length/this.vm},set Ar(t){t===!0&&this.version++},Br:function(t){return this.xr=t,this},Di:function(t){return this.ec=new t.ec.constructor(t.ec),this.vm=t.vm,this.xr=t.xr,this},Cr:function(t,e,n){t*=this.vm,n*=e.vm;for(var i=0,r=this.vm;i<r;i++)this.ec[t+i]=e.ec[n+i];return this},Dr:function(t){return this.ec.set(t),this},Er:function(t){for(var e=this.ec,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new THREE.T),e[n++]=o.r,e[n++]=o.Ci,e[n++]=o.b}return this},Fr:function(t){for(var e=this.ec,n=0,i=0,r=t.length;i<r;i++){var o=t[i];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c}return this},Gr:function(t){for(var e=this.ec,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new THREE.ea),e[n++]=o.x,e[n++]=o.y}return this},Hr:function(t){for(var e=this.ec,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new THREE.K),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},Ir:function(t){for(var e=this.ec,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new THREE.Ym),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.ec.set(t,e),this},Un:function(t){return this.ec[t*this.vm]},bm:function(t,e){return this.ec[t*this.vm]=e,this},Vn:function(t){return this.ec[t*this.vm+1]},cm:function(t,e){return this.ec[t*this.vm+1]=e,this},Wn:function(t){return this.ec[t*this.vm+2]},xm:function(t,e){return this.ec[t*this.vm+2]=e,this},Jr:function(t){return this.ec[t*this.vm+3]},Zm:function(t,e){return this.ec[t*this.vm+3]=e,this},Kr:function(t,e,n){return t*=this.vm,this.ec[t+0]=e,this.ec[t+1]=n,this},Xn:function(t,e,n,i){return t*=this.vm,this.ec[t+0]=e,this.ec[t+1]=n,this.ec[t+2]=i,this},Lr:function(t,e,n,i,r){return t*=this.vm,this.ec[t+0]=e,this.ec[t+1]=n,this.ec[t+2]=i,this.ec[t+3]=r,this},clone:function(){return(new this.constructor).Di(this)}},THREE.Mr=function(t,e){return new THREE.wr(new Int8Array(t),e)},THREE.Nr=function(t,e){return new THREE.wr(new Uint8Array(t),e)},THREE.Or=function(t,e){return new THREE.wr(new Uint8ClampedArray(t),e)},THREE.Pr=function(t,e){return new THREE.wr(new Int16Array(t),e)},THREE.Qr=function(t,e){return new THREE.wr(new Uint16Array(t),e)},THREE.Rr=function(t,e){return new THREE.wr(new Int32Array(t),e)},THREE.Sr=function(t,e){return new THREE.wr(new Uint32Array(t),e)},THREE.Tr=function(t,e){return new THREE.wr(new Float32Array(t),e)},THREE.Ur=function(t,e){return new THREE.wr(new Float64Array(t),e)},THREE.Vr=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new THREE.wr(t,e).Br(!0)},THREE.Wr=function(t,e,n){THREE.wr.call(this,t,e),this.Xr=n||1},THREE.Wr.prototype=Object.create(THREE.wr.prototype),THREE.Wr.prototype.constructor=THREE.Wr,THREE.Wr.prototype.Di=function(t){return THREE.wr.prototype.Di.call(this,t),this.Xr=t.Xr,this},THREE.Yr=function(t,e){this.yq=THREE.Math._o(),this.ec=t,this.Kn=e,this.xr=!1,this.yr={offset:0,count:-1},this.version=0},THREE.Yr.prototype={constructor:THREE.Yr,get length(){return this.ec.length},get count(){return this.ec.length/this.Kn},set Ar(t){t===!0&&this.version++},Br:function(t){return this.xr=t,this},Di:function(t){return this.ec=new t.ec.constructor(t.ec),this.Kn=t.Kn,this.xr=t.xr,this},Cr:function(t,e,n){t*=this.Kn,n*=e.Kn;for(var i=0,r=this.Kn;i<r;i++)this.ec[t+i]=e.ec[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.ec.set(t,e),this},clone:function(){return(new this.constructor).Di(this)}},THREE.Zr=function(t,e,n){THREE.Yr.call(this,t,e),this.Xr=n||1},THREE.Zr.prototype=Object.create(THREE.Yr.prototype),THREE.Zr.prototype.constructor=THREE.Zr,THREE.Zr.prototype.Di=function(t){return THREE.Yr.prototype.Di.call(this,t),this.Xr=t.Xr,this},THREE.Jn=function(t,e,n,i){this.yq=THREE.Math._o(),this.data=t,this.vm=e,this.offset=n,this.zr=i===!0},THREE.Jn.prototype={constructor:THREE.Jn,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.ec.length},get count(){return this.data.count},get ec(){return this.data.ec},bm:function(t,e){return this.data.ec[t*this.data.Kn+this.offset]=e,this},cm:function(t,e){return this.data.ec[t*this.data.Kn+this.offset+1]=e,this},xm:function(t,e){return this.data.ec[t*this.data.Kn+this.offset+2]=e,this},Zm:function(t,e){return this.data.ec[t*this.data.Kn+this.offset+3]=e,this},Un:function(t){return this.data.ec[t*this.data.Kn+this.offset]},Vn:function(t){return this.data.ec[t*this.data.Kn+this.offset+1]},Wn:function(t){return this.data.ec[t*this.data.Kn+this.offset+2]},Jr:function(t){return this.data.ec[t*this.data.Kn+this.offset+3]},Kr:function(t,e,n){return t=t*this.data.Kn+this.offset,this.data.ec[t+0]=e,this.data.ec[t+1]=n,this},Xn:function(t,e,n,i){return t=t*this.data.Kn+this.offset,this.data.ec[t+0]=e,this.data.ec[t+1]=n,this.data.ec[t+2]=i,this},Lr:function(t,e,n,i,r){return t=t*this.data.Kn+this.offset,this.data.ec[t+0]=e,this.data.ec[t+1]=n,this.data.ec[t+2]=i,this.data.ec[t+3]=r,this}},THREE.Gn=function(){Object.defineProperty(this,"id",{value:THREE.$r++}),this.yq=THREE.Math._o(),this.name="",this.type="Geometry",this.Hn=[],this._r=[],this.as=[],this.bs=[[]],this.cs=[],this.ds=[],this.es=[],this.fs=[],this.gs=[],this.hs=null,this.No=null,this.js=!1,this.ks=!1,this.ls=!1,this.ms=!1,this.ns=!1,this.os=!1,this.ps=!1},Object.assign(THREE.Gn.prototype,THREE.bq.prototype,{Oq:function(t){for(var e=(new THREE.Qn)._n(t),n=0,i=this.Hn.length;n<i;n++){var r=this.Hn[n];r.Dm(t)}for(var n=0,i=this.as.length;n<i;n++){var o=this.as[n];o.Nn.Cm(e).normalize();for(var a=0,s=o.tr.length;a<s;a++)o.tr[a].Cm(e).normalize()}return null!==this.hs&&this.qs(),null!==this.No&&this.Oo(),this.ks=!0,this.ms=!0,this},Uq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.mo(e),this.Oq(t),this}}(),Vq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.no(e),this.Oq(t),this}}(),Wq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.oo(e),this.Oq(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new THREE.Gm),t.lo(e,n,i),this.Oq(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new THREE.Gm),t.qo(e,n,i),this.Oq(t),this}}(),ho:function(){var t;return function(e){void 0===t&&(t=new THREE.wq),t.ho(e),t.mr(),this.Oq(t.matrix)}}(),rs:function(t){function e(t,e,i,r){var o=void 0!==a?[c[t].clone(),c[e].clone(),c[i].clone()]:[],p=void 0!==s?[n._r[t].clone(),n._r[e].clone(),n._r[i].clone()]:[],d=new THREE.sr(t,e,i,o,p,r);n.as.push(d),void 0!==h&&n.bs[0].push([f[t].clone(),f[e].clone(),f[i].clone()]),void 0!==u&&n.bs[1].push([l[t].clone(),l[e].clone(),l[i].clone()])}var n=this,i=null!==t.index?t.index.ec:void 0,r=t.attributes,o=r.position.ec,a=void 0!==r.Nn?r.Nn.ec:void 0,s=void 0!==r.color?r.color.ec:void 0,h=void 0!==r.ss?r.ss.ec:void 0,u=void 0!==r.ts?r.ts.ec:void 0;void 0!==u&&(this.bs[1]=[]);for(var c=[],f=[],l=[],p=0,d=0;p<o.length;p+=3,d+=2)n.Hn.push(new THREE.K(o[p],o[p+1],o[p+2])),void 0!==a&&c.push(new THREE.K(a[p],a[p+1],a[p+2])),void 0!==s&&n._r.push(new THREE.T(s[p],s[p+1],s[p+2])),void 0!==h&&f.push(new THREE.ea(h[d],h[d+1])),void 0!==u&&l.push(new THREE.ea(u[d],u[d+1]));if(void 0!==i){var E=t.us;if(E.length>0)for(var p=0;p<E.length;p++)for(var v=E[p],g=v.start,m=v.count,d=g,y=g+m;d<y;d+=3)e(i[d],i[d+1],i[d+2],v.vr);else for(var p=0;p<i.length;p+=3)e(i[p],i[p+1],i[p+2])}else for(var p=0;p<o.length/3;p+=3)e(p,p+1,p+2);return this.vs(),null!==t.hs&&(this.hs=t.hs.clone()),null!==t.No&&(this.No=t.No.clone()),this},jn:function(){this.qs();var t=this.hs.jn().rd();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.Oo();var t=this.No.jn,e=this.No.N,n=0===e?1:1/e,i=new THREE.Gm;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.Oq(i),this},vs:function(){for(var t=new THREE.K,e=new THREE.K,n=0,i=this.as.length;n<i;n++){var r=this.as[n],o=this.Hn[r.a],a=this.Hn[r.b],s=this.Hn[r.c];t.hm(s,a),e.hm(o,a),t.Nm(e),t.normalize(),r.Nn.Di(t)}},ws:function(t){void 0===t&&(t=!0);var e,n,i,r,o,a;for(a=new Array(this.Hn.length),e=0,n=this.Hn.length;e<n;e++)a[e]=new THREE.K;if(t){var s,h,u,c=new THREE.K,f=new THREE.K;for(i=0,r=this.as.length;i<r;i++)o=this.as[i],s=this.Hn[o.a],h=this.Hn[o.b],u=this.Hn[o.c],c.hm(u,h),f.hm(s,h),c.Nm(f),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(i=0,r=this.as.length;i<r;i++)o=this.as[i],a[o.a].add(o.Nn),a[o.b].add(o.Nn),a[o.c].add(o.Nn);for(e=0,n=this.Hn.length;e<n;e++)a[e].normalize();for(i=0,r=this.as.length;i<r;i++){o=this.as[i];var l=o.tr;3===l.length?(l[0].Di(a[o.a]),l[1].Di(a[o.b]),l[2].Di(a[o.c])):(l[0]=a[o.a].clone(),l[1]=a[o.b].clone(),l[2]=a[o.c].clone())}this.as.length>0&&(this.ms=!0)},xs:function(){var t,e,n,i,r;for(n=0,i=this.as.length;n<i;n++)for(r=this.as[n],r.ys?r.ys.Di(r.Nn):r.ys=r.Nn.clone(),r.zs||(r.zs=[]),t=0,e=r.tr.length;t<e;t++)r.zs[t]?r.zs[t].Di(r.tr[t]):r.zs[t]=r.tr[t].clone();var o=new THREE.Gn;for(o.as=this.as,t=0,e=this.cs.length;t<e;t++){if(!this.ds[t]){this.ds[t]={},this.ds[t].As=[],this.ds[t].tr=[];var a,s,h=this.ds[t].As,u=this.ds[t].tr;for(n=0,i=this.as.length;n<i;n++)a=new THREE.K,s={a:new THREE.K,b:new THREE.K,c:new THREE.K},h.push(a),u.push(s)}var c=this.ds[t];o.Hn=this.cs[t].Hn,o.vs(),o.ws();var a,s;for(n=0,i=this.as.length;n<i;n++)r=this.as[n],a=c.As[n],s=c.tr[n],a.Di(r.Nn),s.a.Di(r.tr[0]),s.b.Di(r.tr[1]),s.c.Di(r.tr[2])}for(n=0,i=this.as.length;n<i;n++)r=this.as[n],r.Nn=r.ys,r.tr=r.zs},Bs:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Cs:function(){for(var t=0,e=this.Hn,n=0,i=e.length;n<i;n++)n>0&&(t+=e[n].pm(e[n-1])),this.gs[n]=t},qs:function(){null===this.hs&&(this.hs=new THREE.Bn),this.hs.pn(this.Hn)},Oo:function(){null===this.No&&(this.No=new THREE.Pn),this.No.pn(this.Hn)},nd:function(t,e,n){if(t instanceof THREE.Gn==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);
var i,r=this.Hn.length,o=this.Hn,a=t.Hn,s=this.as,h=t.as,u=this.bs[0],c=t.bs[0];void 0===n&&(n=0),void 0!==e&&(i=(new THREE.Qn)._n(e));for(var f=0,l=a.length;f<l;f++){var p=a[f],d=p.clone();void 0!==e&&d.Dm(e),o.push(d)}for(f=0,l=h.length;f<l;f++){var E,v,g,m=h[f],y=m.tr,T=m.ur;E=new THREE.sr(m.a+r,m.b+r,m.c+r),E.Nn.Di(m.Nn),void 0!==i&&E.Nn.Cm(i).normalize();for(var R=0,w=y.length;R<w;R++)v=y[R].clone(),void 0!==i&&v.Cm(i).normalize(),E.tr.push(v);E.color.Di(m.color);for(var R=0,w=T.length;R<w;R++)g=T[R],E.ur.push(g.clone());E.vr=m.vr+n,s.push(E)}for(f=0,l=c.length;f<l;f++){var H=c[f],b=[];if(void 0!==H){for(var R=0,w=H.length;R<w;R++)b.push(H[R].clone());u.push(b)}}},Ds:function(t){return t instanceof THREE.jq==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.Fq&&t.mr(),void this.nd(t.j,t.matrix))},Es:function(){var t,e,n,i,r,o,a,s,h={},u=[],c=[],f=4,l=Math.pow(10,f);for(n=0,i=this.Hn.length;n<i;n++)t=this.Hn[n],e=Math.round(t.x*l)+"_"+Math.round(t.y*l)+"_"+Math.round(t.z*l),void 0===h[e]?(h[e]=n,u.push(this.Hn[n]),c[n]=u.length-1):c[n]=c[h[e]];var p=[];for(n=0,i=this.as.length;n<i;n++){r=this.as[n],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var d=-1,E=0;E<3;E++)if(o[E]===o[(E+1)%3]){d=E,p.push(n);break}}for(n=p.length-1;n>=0;n--){var v=p[n];for(this.as.splice(v,1),a=0,s=this.bs.length;a<s;a++)this.bs[a].splice(v,1)}var g=this.Hn.length-u.length;return this.Hn=u,g},Fs:function(){function t(t,e){return t.vr-e.vr}for(var e=this.as,n=e.length,i=0;i<n;i++)e[i].Gs=i;e.sort(t);var r,o,a=this.bs[0],s=this.bs[1];a&&a.length===n&&(r=[]),s&&s.length===n&&(o=[]);for(var i=0;i<n;i++){var h=e[i].Gs;r&&r.push(a[h]),o&&o.push(s[h])}r&&(this.bs[0]=r),o&&(this.bs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=f.length/3,f.push(t.x,t.y,t.z),l[e])}function n(t){var e=t.r.toString()+t.Ci.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=p.length,p.push(t.Oi()),d[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=E.length/2,E.push(t.x,t.y),v[e])}var r={qr:{version:4.4,type:"Geometry",rr:"Geometry.toJSON"}};if(r.yq=this.yq,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.Hs){var o=this.Hs;for(var a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(var s=[],h=0;h<this.Hn.length;h++){var u=this.Hn[h];s.push(u.x,u.y,u.z)}for(var c=[],f=[],l={},p=[],d={},E=[],v={},h=0;h<this.as.length;h++){var g=this.as[h],m=!0,y=!1,T=void 0!==this.bs[0][h],R=g.Nn.length()>0,w=g.tr.length>0,H=1!==g.color.r||1!==g.color.Ci||1!==g.color.b,b=g.ur.length>0,x=0;if(x=t(x,0,0),x=t(x,1,m),x=t(x,2,y),x=t(x,3,T),x=t(x,4,R),x=t(x,5,w),x=t(x,6,H),x=t(x,7,b),c.push(x),c.push(g.a,g.b,g.c),c.push(g.vr),T){var A=this.bs[0][h];c.push(i(A[0]),i(A[1]),i(A[2]))}if(R&&c.push(e(g.Nn)),w){var M=g.tr;c.push(e(M[0]),e(M[1]),e(M[2]))}if(H&&c.push(n(g.color)),b){var U=g.ur;c.push(n(U[0]),n(U[1]),n(U[2]))}}return r.data={},r.data.Hn=s,r.data.Is=f,p.length>0&&(r.data._r=p),E.length>0&&(r.data.Js=[E]),r.data.as=c,r},clone:function(){return(new THREE.Gn).Di(this)},Di:function(t){this.Hn=[],this.as=[],this.bs=[[]];for(var e=t.Hn,n=0,i=e.length;n<i;n++)this.Hn.push(e[n].clone());for(var r=t.as,n=0,i=r.length;n<i;n++)this.as.push(r[n].clone());for(var n=0,i=t.bs.length;n<i;n++){var o=t.bs[n];void 0===this.bs[n]&&(this.bs[n]=[]);for(var a=0,s=o.length;a<s;a++){for(var h=o[a],u=[],c=0,f=h.length;c<f;c++){var l=h[c];u.push(l.clone())}this.bs[n].push(u)}}return this},Ks:function(){this.dispatchEvent({type:"dispose"})}}),THREE.$r=0,THREE.Ls=function(){Object.defineProperty(this,"id",{value:THREE.$r++}),this.yq=THREE.Math._o(),this.name="",this.type="DirectGeometry",this.Ms=[],this.Hn=[],this.Is=[],this._r=[],this.Js=[],this.Ns=[],this.us=[],this.cs={},this.es=[],this.fs=[],this.hs=null,this.No=null,this.ks=!1,this.ms=!1,this.ns=!1,this.ls=!1,this.ps=!1},Object.assign(THREE.Ls.prototype,THREE.bq.prototype,{qs:THREE.Gn.prototype.qs,Oo:THREE.Gn.prototype.Oo,vs:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},ws:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},Os:function(t){for(var e,n,i=[],r=t.as,o=0;o<r.length;o++){var a=r[o];a.vr!==n&&(n=a.vr,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,vr:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.us=i},Ps:function(t){var e,n=t.as,i=t.Hn,r=t.bs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=t.cs,h=s.length;if(h>0){e=[];for(var u=0;u<h;u++)e[u]=[];this.cs.position=e}var c,f=t.ds,l=f.length;if(l>0){c=[];for(var u=0;u<l;u++)c[u]=[];this.cs.Nn=c}for(var p=t.fs,d=t.es,E=p.length===i.length,v=d.length===i.length,u=0;u<n.length;u++){var g=n[u];this.Hn.push(i[g.a],i[g.b],i[g.c]);var m=g.tr;if(3===m.length)this.Is.push(m[0],m[1],m[2]);else{var y=g.Nn;this.Is.push(y,y,y)}var T=g.ur;if(3===T.length)this._r.push(T[0],T[1],T[2]);else{var R=g.color;this._r.push(R,R,R)}if(o===!0){var w=r[0][u];void 0!==w?this.Js.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.Js.push(new THREE.ea,new THREE.ea,new THREE.ea))}if(a===!0){var w=r[1][u];void 0!==w?this.Ns.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.Ns.push(new THREE.ea,new THREE.ea,new THREE.ea))}for(var H=0;H<h;H++){var b=s[H].Hn;e[H].push(b[g.a],b[g.b],b[g.c])}for(var H=0;H<l;H++){var x=f[H].tr[u];c[H].push(x.a,x.b,x.c)}E&&this.fs.push(p[g.a],p[g.b],p[g.c]),v&&this.es.push(d[g.a],d[g.b],d[g.c])}return this.Os(t),this.ks=t.ks,this.ms=t.ms,this.ns=t.ns,this.ls=t.ls,this.ps=t.ps,this},Ks:function(){this.dispatchEvent({type:"dispose"})}}),THREE.In=function(){Object.defineProperty(this,"id",{value:THREE.$r++}),this.yq=THREE.Math._o(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.Qs={},this.us=[],this.hs=null,this.No=null,this.Rs={start:0,count:1/0}},Object.assign(THREE.In.prototype,THREE.bq.prototype,{Ss:function(){return this.index},Ts:function(t){this.index=t},Us:function(t,e){return e instanceof THREE.wr==!1&&e instanceof THREE.Jn==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.Us(t,new THREE.wr(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.Ts(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},Vs:function(t,e,n){this.us.push({start:t,count:e,vr:void 0!==n?n:0})},Ws:function(){this.us=[]},Xs:function(t,e){this.Rs.start=t,this.Rs.count=e},Oq:function(t){var e=this.attributes.position;void 0!==e&&(t.Sn(e.ec),e.Ar=!0);var n=this.attributes.Nn;if(void 0!==n){var i=(new THREE.Qn)._n(t);i.Sn(n.ec),n.Ar=!0}return null!==this.hs&&this.qs(),null!==this.No&&this.Oo(),this},Uq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.mo(e),this.Oq(t),this}}(),Vq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.no(e),this.Oq(t),this}}(),Wq:function(){var t;return function(e){return void 0===t&&(t=new THREE.Gm),t.oo(e),this.Oq(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new THREE.Gm),t.lo(e,n,i),this.Oq(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new THREE.Gm),t.qo(e,n,i),this.Oq(t),this}}(),ho:function(){var t;return function(e){void 0===t&&(t=new THREE.wq),t.ho(e),t.mr(),this.Oq(t.matrix)}}(),jn:function(){this.qs();var t=this.hs.jn().rd();return this.translate(t.x,t.y,t.z),t},Dn:function(t){var e=t.j;if(t instanceof THREE.mq||t instanceof THREE.kq){var n=new THREE.Tr(3*e.Hn.length,3),i=new THREE.Tr(3*e._r.length,3);if(this.Us("position",n.Hr(e.Hn)),this.Us("color",i.Er(e._r)),e.gs&&e.gs.length===e.Hn.length){var r=new THREE.Tr(e.gs.length,1);this.Us("lineDistance",r.Dr(e.gs))}null!==e.No&&(this.No=e.No.clone()),null!==e.hs&&(this.hs=e.hs.clone())}else t instanceof THREE.jq&&e instanceof THREE.Gn&&this.Ps(e);return this},Ys:function(t){var e=t.j;if(t instanceof THREE.jq){var n=e.Zs;if(void 0===n||e.js===!0)return this.Ps(e);n.ks=e.ks||e.js,n.ms=e.ms||e.js,n.ns=e.ns||e.js,n.ls=e.ls||e.js,n.ps=e.ps||e.js,e.js=!1,e.ks=!1,e.ms=!1,e.ns=!1,e.ls=!1,e.ps=!1,e=n}var i;return e.ks===!0&&(i=this.attributes.position,void 0!==i&&(i.Hr(e.Hn),i.Ar=!0),e.ks=!1),e.ms===!0&&(i=this.attributes.Nn,void 0!==i&&(i.Hr(e.Is),i.Ar=!0),e.ms=!1),e.ns===!0&&(i=this.attributes.color,void 0!==i&&(i.Er(e._r),i.Ar=!0),e.ns=!1),e.ls&&(i=this.attributes.ss,void 0!==i&&(i.Gr(e.Js),i.Ar=!0),e.ls=!1),e.os&&(i=this.attributes.$s,void 0!==i&&(i.Dr(e.gs),i.Ar=!0),e.os=!1),e.ps&&(e.Os(t.j),this.us=e.us,e.ps=!1),this},Ps:function(t){return t.Zs=(new THREE.Ls).Ps(t),this._s(t.Zs)},_s:function(t){var e=new Float32Array(3*t.Hn.length);if(this.Us("position",new THREE.wr(e,3).Hr(t.Hn)),t.Is.length>0){var n=new Float32Array(3*t.Is.length);this.Us("normal",new THREE.wr(n,3).Hr(t.Is))}if(t._r.length>0){var i=new Float32Array(3*t._r.length);this.Us("color",new THREE.wr(i,3).Er(t._r))}if(t.Js.length>0){var r=new Float32Array(2*t.Js.length);this.Us("uv",new THREE.wr(r,2).Gr(t.Js))}if(t.Ns.length>0){var o=new Float32Array(2*t.Ns.length);this.Us("uv2",new THREE.wr(o,2).Gr(t.Ns))}if(t.Ms.length>0){var a=t.Hn.length>65535?Uint32Array:Uint16Array,s=new a(3*t.Ms.length);this.Ts(new THREE.wr(s,1).Fr(t.Ms))}this.us=t.us;for(var h in t.cs){for(var u=[],c=t.cs[h],f=0,l=c.length;f<l;f++){var p=c[f],d=new THREE.Tr(3*p.length,3);u.push(d.Hr(p))}this.Qs[h]=u}if(t.fs.length>0){var E=new THREE.Tr(4*t.fs.length,4);this.Us("skinIndex",E.Ir(t.fs))}if(t.es.length>0){var v=new THREE.Tr(4*t.es.length,4);this.Us("skinWeight",v.Ir(t.es))}return null!==t.No&&(this.No=t.No.clone()),null!==t.hs&&(this.hs=t.hs.clone()),this},qs:function(){null===this.hs&&(this.hs=new THREE.Bn);var t=this.attributes.position.ec;void 0!==t?this.hs.Cn(t):this.hs.qn(),(isNaN(this.hs.min.x)||isNaN(this.hs.min.y)||isNaN(this.hs.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},Oo:function(){var t=new THREE.Bn,e=new THREE.K;return function(){null===this.No&&(this.No=new THREE.Pn);var n=this.attributes.position;if(n){var i=n.ec,r=this.No.jn;t.Cn(i),t.jn(r);for(var o=0,a=0,s=i.length;a<s;a+=3)e.$i(i,a),o=Math.max(o,r.qm(e));this.No.N=Math.sqrt(o),isNaN(this.No.N)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),vs:function(){},ws:function(){var t=this.index,e=this.attributes,n=this.us;if(e.position){var i=e.position.ec;if(void 0===e.Nn)this.Us("normal",new THREE.wr(new Float32Array(i.length),3));else for(var r=e.Nn.ec,o=0,a=r.length;o<a;o++)r[o]=0;var s,h,u,c=e.Nn.ec,f=new THREE.K,l=new THREE.K,p=new THREE.K,d=new THREE.K,E=new THREE.K;if(t){var v=t.ec;0===n.length&&this.Vs(0,v.length);for(var g=0,m=n.length;g<m;++g)for(var y=n[g],T=y.start,R=y.count,o=T,a=T+R;o<a;o+=3)s=3*v[o+0],h=3*v[o+1],u=3*v[o+2],f.$i(i,s),l.$i(i,h),p.$i(i,u),d.hm(p,l),E.hm(f,l),d.Nm(E),c[s]+=d.x,c[s+1]+=d.y,c[s+2]+=d.z,c[h]+=d.x,c[h+1]+=d.y,c[h+2]+=d.z,c[u]+=d.x,c[u+1]+=d.y,c[u+2]+=d.z}else for(var o=0,a=i.length;o<a;o+=9)f.$i(i,o),l.$i(i,o+3),p.$i(i,o+6),d.hm(p,l),E.hm(f,l),d.Nm(E),c[o]=d.x,c[o+1]=d.y,c[o+2]=d.z,c[o+3]=d.x,c[o+4]=d.y,c[o+5]=d.z,c[o+6]=d.x,c[o+7]=d.y,c[o+8]=d.z;this.at(),e.Nn.Ar=!0}},nd:function(t,e){if(t instanceof THREE.In==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],o=r.ec,a=t.attributes[i],s=a.ec,h=a.vm,u=0,c=h*e;u<s.length;u++,c++)o[c]=s[u];return this},at:function(){for(var t,e,n,i,r=this.attributes.Nn.ec,o=0,a=r.length;o<a;o+=3)t=r[o],e=r[o+1],n=r[o+2],i=1/Math.sqrt(t*t+e*e+n*n),r[o]*=i,r[o+1]*=i,r[o+2]*=i},bt:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new THREE.In,e=this.index.ec,n=this.attributes;for(var i in n){for(var r=n[i],o=r.ec,a=r.vm,s=new o.constructor(e.length*a),h=0,u=0,c=0,f=e.length;c<f;c++){h=e[c]*a;for(var l=0;l<a;l++)s[u++]=o[h++]}t.Us(i,new THREE.wr(s,a))}return t},toJSON:function(){var t={qr:{version:4.4,type:"BufferGeometry",rr:"BufferGeometry.toJSON"}};if(t.yq=this.yq,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.Hs){var e=this.Hs;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.ec);t.data.index={type:i.ec.constructor.name,ec:r}}var o=this.attributes;for(var n in o){var a=o[n],r=Array.prototype.slice.call(a.ec);t.data.attributes[n]={vm:a.vm,type:a.ec.constructor.name,ec:r,zr:a.zr}}var s=this.us;s.length>0&&(t.data.us=JSON.parse(JSON.stringify(s)));var h=this.No;return null!==h&&(t.data.No={jn:h.jn.toArray(),N:h.N}),t},clone:function(){return(new THREE.In).Di(this)},Di:function(t){var e=t.index;null!==e&&this.Ts(e.clone());var n=t.attributes;for(var i in n){var r=n[i];this.Us(i,r.clone())}for(var o=t.us,a=0,s=o.length;a<s;a++){var h=o[a];this.Vs(h.start,h.count,h.vr)}return this},Ks:function(){this.dispatchEvent({type:"dispose"})}}),THREE.In.ct=65535,THREE.dt=function(){THREE.In.call(this),this.type="InstancedBufferGeometry",this.et=void 0},THREE.dt.prototype=Object.create(THREE.In.prototype),THREE.dt.prototype.constructor=THREE.dt,THREE.dt.prototype.Vs=function(t,e,n){this.us.push({start:t,count:e,ft:n})},THREE.dt.prototype.Di=function(t){var e=t.index;null!==e&&this.Ts(e.clone());var n=t.attributes;for(var i in n){var r=n[i];this.Us(i,r.clone())}for(var o=t.us,a=0,s=o.length;a<s;a++){var h=o[a];this.Vs(h.start,h.count,h.ft)}return this},THREE.gt=function(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t,this.xr=!1},THREE.gt.prototype={constructor:THREE.gt,ht:function(t){return this.xr=!0,this.it=t,this}},THREE.jt=function(){throw new Error("THREE.AnimationAction: Use mixer.clipAction for construction.")},THREE.jt.kt=function(t,e,n){this.lt=t,this.nt=e,this.ot=n||null;for(var i=e.pt,r=i.length,o=new Array(r),a={Sp:THREE.li,Tp:THREE.li},s=0;s!==r;++s){var h=i[s].qt(null);o[s]=h,h.Jp=a}this.rt=a,this.st=o,this.tt=new Array(r),this.ut=null,this.vt=null,this.wt=null,this.xt=null,this.loop=THREE.gi,this.yt=-1,this.zt=null,this.time=0,this.At=1,this.Bt=1,this.weight=1,this.Ct=1,this.Dt=1/0,this.paused=!1,this.enabled=!0,this.Et=!1,this.Ft=!0,this.Gt=!0},THREE.jt.kt.prototype={constructor:THREE.jt.kt,play:function(){return this.lt.Ht(this),this},stop:function(){return this.lt.It(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this.yt=-1,this.zt=null,this.Kt().Jt()},Lt:function(){this.zt;return this.enabled&&!this.paused&&0!==this.At&&null===this.zt&&this.lt.Mt(this)},Nt:function(){return this.lt.Mt(this)},Ot:function(t){return this.zt=t,this},Pt:function(t,e){return this.loop=t,this.Dt=e,this},Qt:function(t){return this.weight=t,this.Ct=this.enabled?t:0,this.Kt()},Rt:function(){return this.Ct},St:function(t){return this.Tt(t,0,1)},Ut:function(t){return this.Tt(t,1,0)},Vt:function(t,e,n){this.lt;if(t.Ut(e),this.St(e),n){var i=this.nt.duration,r=t.nt.duration,o=r/i,a=i/r;t.Wt(1,o,e),this.Wt(a,1,e)}return this},Xt:function(t,e,n){return t.Vt(this,e,n)},Kt:function(){var t=this.xt;return null!==t&&(this.xt=null,this.lt.Yt(t)),this},Zt:function(t){return this.At=t,this.Bt=this.paused?0:t,this.Jt()},$t:function(){return this.Bt},_t:function(t){return this.At=this.nt.duration/t,this.Jt()},au:function(t){return this.time=t.time,this.At=t.At,this.Jt()},bu:function(t){return this.Wt(this.Bt,0,t)},Wt:function(t,e,n){var i=this.lt,r=i.time,o=this.wt,a=this.At;null===o&&(o=i.cu(),this.wt=o);var s=o.Ap,h=o.Dp;return s[0]=r,s[1]=r+n,h[0]=t/a,h[1]=e/a,this},Jt:function(){var t=this.wt;return null!==t&&(this.wt=null,this.lt.Yt(t)),this},du:function(){return this.lt},eu:function(){return this.nt},getRoot:function(){return this.ot||this.lt.fu},gu:function(t,e,n,i){var r=this.zt;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this.zt=null,e=n*o}e*=this.hu(t);var a=this.iu(e),s=this.ju(t);if(s>0)for(var h=this.st,u=this.tt,c=0,f=h.length;c!==f;++c)h[c].evaluate(a),u[c].ku(i,s)},ju:function(t){var e=0;if(this.enabled){e=this.weight;var n=this.xt;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.Ap[1]&&(this.Kt(),0===i&&(this.enabled=!1))}}return this.Ct=e,e},hu:function(t){var e=0;if(!this.paused){e=this.At;var n=this.wt;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.Ap[1]&&(this.Jt(),0===e?this.paused=!0:this.At=e)}}return this.Bt=e,e},iu:function(t){var e=this.time+t;if(0===t)return e;var n=this.nt.duration,i=this.loop,r=this.yt;if(i===THREE.fi){r===-1&&(this.lu=0,this.mu(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.Et?this.paused=!0:this.enabled=!1,this.lt.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=i===THREE.hi;if(r===-1&&(t>=0?(r=0,this.mu(!0,0===this.Dt,o)):this.mu(0===this.Dt,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,r+=Math.abs(a);var s=this.Dt-r;if(s<0)this.Et?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.lt.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===s){var h=t<0;this.mu(h,!h,o)}else this.mu(!1,!1,o);this.yt=r,this.lt.dispatchEvent({type:"loop",action:this,nu:a})}}if(o&&1===(1&r))return this.time=e,n-e}return this.time=e,e},mu:function(t,e,n){var i=this.rt;n?(i.Sp=THREE.mi,i.Tp=THREE.mi):(t?i.Sp=this.Ft?THREE.mi:THREE.li:i.Sp=THREE.ni,e?i.Tp=this.Gt?THREE.mi:THREE.li:i.Tp=THREE.ni)},Tt:function(t,e,n){var i=this.lt,r=i.time,o=this.xt;null===o&&(o=i.cu(),this.xt=o);var a=o.Ap,s=o.Dp;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}},THREE.ou=function(t,e,n){this.name=t,this.pt=n,this.duration=void 0!==e?e:-1,this.yq=THREE.Math._o(),this.duration<0&&this.pu(),this.trim(),this.qu()},THREE.ou.prototype={constructor:THREE.ou,pu:function(){for(var t=this.pt,e=0,n=0,i=t.length;n!==i;++n){var r=this.pt[n];e=Math.max(e,r.Tf[r.Tf.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.pt.length;t++)this.pt[t].trim(0,this.duration);return this},qu:function(){for(var t=0;t<this.pt.length;t++)this.pt[t].qu();return this}},Object.assign(THREE.ou,{parse:function(t){for(var e=[],n=t.pt,i=1/(t.ru||1),r=0,o=n.length;r!==o;++r)e.push(THREE.su.parse(n[r]).scale(i));return new THREE.ou(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.pt,i={name:t.name,duration:t.duration,pt:e},r=0,o=n.length;r!==o;++r)e.push(THREE.su.toJSON(n[r]));return i},tu:function(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],h=[];s.push((a+r-1)%r,a,(a+1)%r),h.push(0,1,0);var u=THREE.vu.uu(s);s=THREE.vu.wu(s,1,u),h=THREE.vu.wu(h,1,u),i||0!==s[0]||(s.push(r),h.push(h[0])),o.push(new THREE.xu(".morphTargetInfluences["+e[a].name+"]",s,h).scale(1/n))}return new THREE.ou(t,-1,o)},yu:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.j&&i.j.zu||i.zu}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},Au:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],h=s.name.match(r);if(h&&h.length>1){var u=h[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var f=[];for(var u in i)f.push(THREE.ou.tu(u,i[u],e,n));return f},Bu:function(t,e,n){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var i=function(t,e,n,i,r){if(0!==n.length){var o=[],a=[];THREE.vu.Cu(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},r=[],o=t.name||"default",a=t.length||-1,s=t.ru||30,h=t.Du||[],u=0;u<h.length;u++){var c=h[u].keys;if(c&&0!==c.length)if(c[0].cs){for(var f={},l=0;l<c.length;l++)if(c[l].cs)for(var p=0;p<c[l].cs.length;p++)f[c[l].cs[p]]=-1;for(var d in f){for(var E=[],v=[],p=0;p!==c[l].cs.length;++p){var g=c[l];E.push(g.time),v.push(g.Eu===d?1:0)}r.push(new THREE.xu(".morphTargetInfluence["+d+"]",E,v))}a=f.length*(s||1)}else{var m=".bones["+e[u].name+"]";i(THREE.Fu,m+".position",c,"pos",r),i(THREE.Gu,m+".quaternion",c,"rot",r),i(THREE.Fu,m+".scale",c,"scl",r)}}if(0===r.length)return null;var y=new THREE.ou(o,a,r);return y}}),THREE.Hu=function(t){this.fu=t,this.Iu(),this.Ju=0,this.time=0,this.At=1},Object.assign(THREE.Hu.prototype,THREE.bq.prototype,{Ku:function(t,e){var n=e||this.fu,i=n.yq,r="string"==typeof t?THREE.ou.yu(n,t):t,o=null!==r?r.yq:t,a=this.Lu[o],s=null;if(void 0!==a){var h=a.Mu[i];if(void 0!==h)return h;s=a.Nu[0],null===r&&(r=s.nt)}if(null===r)return null;var u=new THREE.Hu.Ou(this,r,e);return this.Pu(u,s),this.Qu(u,o,i),u},Ru:function(t,e){var n=e||this.fu,i=n.yq,r="string"==typeof t?THREE.ou.yu(n,t):t,o=r?r.yq:t,a=this.Lu[o];return void 0!==a?a.Mu[i]||null:null},Su:function(){var t=this.Tu,e=this.Uu,n=this.Vu,i=this.Wu;this.Uu=0,this.Wu=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==i;++r)n[r].Xu=0;return this},update:function(t){t*=this.At;for(var e=this.Tu,n=this.Uu,i=this.time+=t,r=Math.sign(t),o=this.Ju^=1,a=0;a!==n;++a){var s=e[a];s.enabled&&s.gu(i,t,r,o)}for(var h=this.Vu,u=this.Wu,a=0;a!==u;++a)h[a].apply(o);return this},getRoot:function(){return this.fu},Yu:function(t){var e=this.Tu,n=t.yq,i=this.Lu,r=i[n];if(void 0!==r){for(var o=r.Nu,a=0,s=o.length;a!==s;++a){var h=o[a];this.It(h);var u=h.ut,c=e[e.length-1];h.ut=null,h.vt=null,c.ut=u,e[u]=c,e.pop(),this.Zu(h)}delete i[n]}},$u:function(t){var e=t.yq,n=this.Lu;for(var i in n){var r=n[i].Mu,o=r[e];void 0!==o&&(this.It(o),this._u(o))}var a=this.av,s=a[e];if(void 0!==s)for(var h in s){var u=s[h];u.bv(),this.cv(u)}},dv:function(t,e){var n=this.Ru(t,e);null!==n&&(this.It(n),this._u(n))}}),THREE.Hu.Ou=THREE.jt.kt,Object.assign(THREE.Hu.prototype,{Pu:function(t,e){var n=t.ot||this.fu,i=t.nt.pt,r=i.length,o=t.tt,a=t.st,s=n.yq,h=this.av,u=h[s];void 0===u&&(u={},h[s]=u);for(var c=0;c!==r;++c){var f=i[c],l=f.name,p=u[l];if(void 0!==p)o[c]=p;else{if(p=o[c],void 0!==p){null===p.ut&&(++p.ev,this.fv(p,s,l));continue}var d=e&&e.tt[c].hv.gv;p=new THREE.iv(THREE.jv.create(n,l,d),f.kv,f.lv()),++p.ev,this.fv(p,s,l),o[c]=p}a[c].Cp=p.buffer}},Ht:function(t){if(!this.Mt(t)){if(null===t.ut){var e=(t.ot||this.fu).yq,n=t.nt.yq,i=this.Lu[n];this.Pu(t,i&&i.Nu[0]),this.Qu(t,n,e)}for(var r=t.tt,o=0,a=r.length;o!==a;++o){var s=r[o];0===s.Xu++&&(this.mv(s),s.nv())}this.ov(t)}},It:function(t){if(this.Mt(t)){for(var e=t.tt,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.Xu&&(r.bv(),this.pv(r))}this.qv(t)}},Iu:function(){this.Tu=[],this.Uu=0,this.Lu={},this.Vu=[],this.Wu=0,this.av={},this.rv=[],this.sv=0;var t=this;this.tv={uv:{get total(){return t.Tu.length},get vv(){return t.Uu}},wv:{get total(){return t.Vu.length},get vv(){return t.Wu}},xv:{get total(){return t.rv.length},get vv(){return t.sv}}}},Mt:function(t){var e=t.ut;return null!==e&&e<this.Uu},Qu:function(t,e,n){var i=this.Tu,r=this.Lu,o=r[e];if(void 0===o)o={Nu:[t],Mu:{}},t.vt=0,r[e]=o;else{var a=o.Nu;t.vt=a.length,a.push(t)}t.ut=i.length,i.push(t),o.Mu[n]=t},_u:function(t){var e=this.Tu,n=e[e.length-1],i=t.ut;n.ut=i,e[i]=n,e.pop(),t.ut=null;var r=t.nt.yq,o=this.Lu,a=o[r],s=a.Nu,h=s[s.length-1],u=t.vt;h.vt=u,s[u]=h,s.pop(),t.vt=null;var c=a.Mu,f=(e.ot||this.fu).yq;delete c[f],0===s.length&&delete o[r],this.Zu(t)},Zu:function(t){for(var e=t.tt,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.ev&&this.cv(r)}},ov:function(t){var e=this.Tu,n=t.ut,i=this.Uu++,r=e[i];t.ut=i,e[i]=t,r.ut=n,e[n]=r},qv:function(t){var e=this.Tu,n=t.ut,i=--this.Uu,r=e[i];t.ut=i,e[i]=t,r.ut=n,e[n]=r},fv:function(t,e,n){var i=this.av,r=i[e],o=this.Vu;void 0===r&&(r={},i[e]=r),r[n]=t,t.ut=o.length,o.push(t)},cv:function(t){var e=this.Vu,n=t.hv,i=n.yv.yq,r=n.path,o=this.av,a=o[i],s=e[e.length-1],h=t.ut;s.ut=h,e[h]=s,e.pop(),delete a[r];t:{for(var _ in a)break t;delete o[i]}},mv:function(t){var e=this.Vu,n=t.ut,i=this.Wu++,r=e[i];t.ut=i,e[i]=t,r.ut=n,e[n]=r},pv:function(t){var e=this.Vu,n=t.ut,i=--this.Wu,r=e[i];t.ut=i,e[i]=t,r.ut=n,e[n]=r},cu:function(){var t=this.rv,e=this.sv++,n=t[e];return void 0===n&&(n=new THREE.Vp(new Float32Array(2),new Float32Array(2),1,this.zv),n.Av=e,t[e]=n),n},Yt:function(t){var e=this.rv,n=t.Av,i=--this.sv,r=e[i];t.Av=i,e[i]=t,r.Av=n,e[n]=r},zv:new Float32Array(1)}),THREE.Bv=function(t){this.yq=THREE.Math._o(),this.Cv=Array.prototype.slice.call(arguments),this.Dv=0;var e={};this.Ev=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].yq]=n;this.Fv=[],this.Gv=[],this.Vu=[],this.Hv={};var r=this;this.tv={Iv:{get total(){return r.Cv.length},get vv(){return this.total-r.Dv}},get Jv(){return r.Vu.length}}},THREE.Bv.prototype={constructor:THREE.Bv,add:function(t){for(var e=this.Cv,n=e.length,i=this.Dv,r=this.Ev,o=this.Fv,a=this.Gv,s=this.Vu,h=s.length,u=0,c=arguments.length;u!==c;++u){var f=arguments[u],l=f.yq,p=r[l];if(void 0===p){p=n++,r[l]=p,e.push(f);for(var d=0,E=h;d!==E;++d)s[d].push(new THREE.jv(f,o[d],a[d]))}else if(p<i){var v=e[p],g=--i,m=e[g];r[m.yq]=p,e[p]=m,r[l]=g,e[g]=f;for(var d=0,E=h;d!==E;++d){var y=s[d],T=y[g],R=y[p];y[p]=T,void 0===R&&(R=new THREE.jv(f,o[d],a[d])),y[g]=R}}else e[p]!==v&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.Dv=i},remove:function(t){for(var e=this.Cv,n=(e.length,this.Dv),i=this.Ev,r=this.Vu,o=r.length,a=0,s=arguments.length;a!==s;++a){var h=arguments[a],u=h.yq,c=i[u];if(void 0!==c&&c>=n){var f=n++,l=e[f];i[l.yq]=c,e[c]=l,i[u]=f,e[f]=h;for(var p=0,d=o;p!==d;++p){var E=r[p],v=E[f],g=E[c];E[c]=v,E[f]=g}}}this.Dv=n},Kv:function(t){for(var e=this.Cv,n=e.length,i=this.Dv,r=this.Ev,o=this.Vu,a=o.length,s=0,h=arguments.length;s!==h;++s){var u=arguments[s],c=u.yq,f=r[c];if(void 0!==f)if(delete r[c],f<i){var l=--i,p=e[l],d=--n,E=e[d];r[p.yq]=f,e[f]=p,r[E.yq]=l,e[l]=E,e.pop();for(var v=0,g=a;v!==g;++v){var m=o[v],y=m[l],T=m[d];m[f]=y,m[l]=T,m.pop()}}else{var d=--n,E=e[d];r[E.yq]=f,e[f]=E,e.pop();for(var v=0,g=a;v!==g;++v){var m=o[v];m[f]=m[d],m.pop()}}}this.Dv=i},Lv:function(t,e){var n=this.Hv,i=n[t],r=this.Vu;if(void 0!==i)return r[i];var o=this.Fv,a=this.Gv,s=this.Cv,h=s.length,u=this.Dv,c=new Array(h);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(c);for(var f=u,l=s.length;f!==l;++f){var p=s[f];c[f]=new THREE.jv(p,t,e)}return c},Mv:function(t){var e=this.Hv,n=e[t];if(void 0!==n){var i=this.Fv,r=this.Gv,o=this.Vu,a=o.length-1,s=o[a],h=t[a];e[h]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}},THREE.vu={Nv:function(t,e,n){return THREE.vu.qf(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},Ov:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},qf:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},uu:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},wu:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*e,h=0;h!==e;++h)r[a++]=t[s+h];return r},Cu:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a)){do a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++];while(void 0!==o)}else do a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++];while(void 0!==o)}}},THREE.su=function(t,e,n,i){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.Tf=THREE.vu.Ov(e,this.Pv),this.values=THREE.vu.Ov(n,this.Qv),this.Rv(i||this.Sv),this.Tv(),this.qu()},THREE.su.prototype={constructor:THREE.su,Pv:Float32Array,Qv:Float32Array,Sv:THREE.ji,Uv:function(t){return new THREE.Up(this.Tf,this.values,this.lv(),t)},Vv:function(t){return new THREE.Vp(this.Tf,this.values,this.lv(),t)},Wv:function(t){return new THREE.Np(this.Tf,this.values,this.lv(),t)},Rv:function(t){var e;switch(t){case THREE.ii:e=this.Uv;break;case THREE.ji:e=this.Vv;break;case THREE.ki:e=this.Wv}if(void 0===e){var n="unsupported interpolation for "+this.kv+" keyframe track named "+this.name;if(void 0===this.qt){if(t===this.Sv)throw new Error(n);this.Rv(this.Sv)}return void console.warn(n)}this.qt=e},Xv:function(){switch(this.qt){case this.Uv:return THREE.ii;case this.Vv:return THREE.ji;case this.Wv:return THREE.ki}},lv:function(){return this.values.length/this.Tf.length},shift:function(t){if(0!==t)for(var e=this.Tf,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.Tf,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.Tf,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;o!==-1&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var a=this.lv();this.Tf=THREE.vu.Nv(n,r,o),this.values=THREE.vu.Nv(this.values,r*a,o*a)}return this},Tv:function(){var t=!0,e=this.lv();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var n=this.Tf,i=this.values,r=n.length;0===r&&(console.error("track is empty",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),t=!1;break}o=s}if(void 0!==i&&THREE.vu.qf(i))for(var a=0,h=i.length;a!==h;++a){var u=i[a];if(isNaN(u)){console.error("value is not a valid number",this,a,u),t=!1;break}}return t},qu:function(){for(var t=this.Tf,e=this.values,n=this.lv(),i=1,r=1,o=t.length-1;r<=o;++r){var a=!1,s=t[r],h=t[r+1];if(s!==h&&(1!==r||s!==s[0]))for(var u=r*n,c=u-n,f=u+n,l=0;l!==n;++l){var p=e[u+l];if(p!==e[c+l]||p!==e[f+l]){a=!0;break}}if(a){if(r!==i){t[i]=t[r];for(var d=r*n,E=i*n,l=0;l!==n;++l)e[E+l]=e[d+l]}++i}}return i!==t.length&&(this.Tf=THREE.vu.Nv(t,0,i),this.values=THREE.vu.Nv(e,0,i*n)),this}},Object.assign(THREE.su,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=THREE.su.Yv(t.type);if(void 0===t.Tf){var n=[],i=[];THREE.vu.Cu(t.keys,n,i,"value"),t.Tf=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.Tf,t.values,t.Zv)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,Tf:THREE.vu.Ov(t.Tf,Array),values:THREE.vu.Ov(t.values,Array)};var i=t.Xv();i!==t.Sv&&(e.Zv=i)}return e.type=t.kv,e},Yv:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return THREE.xu;case"vector":case"vector2":case"vector3":case"vector4":return THREE.Fu;case"color":return THREE.$v;case"quaternion":return THREE.Gu;case"bool":case"boolean":return THREE._v;case"string":return THREE.aw}throw new Error("Unsupported typeName: "+t)}}),THREE.jv=function(t,e,n){this.path=e,this.gv=n||THREE.jv.bw(e),this.cw=THREE.jv.dw(t,this.gv.nodeName)||t,this.yv=t},THREE.jv.prototype={constructor:THREE.jv,ew:function(t,e){this.bind(),this.ew(t,e)},fw:function(t,e){this.bind(),this.fw(t,e)},bind:function(){var t=this.cw,e=this.gv,n=e.gw,i=e.propertyName,r=e.hw;if(t||(t=THREE.jv.dw(this.yv,e.nodeName)||this.yv,this.cw=t),this.ew=this.iw,this.fw=this.jw,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.kw;switch(n){case"materials":if(!t.k)return void console.error("  can not bind to material as node does not have a material",this);if(!t.k.or)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.k.or;break;case"bones":if(!t.lw)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.lw.mw;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);
t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[o]}}var s=t[i];if(void 0===s){var h=e.nodeName;return void console.error("  trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}var u=this.ow.nw;void 0!==t.Ar?(u=this.ow.pw,this.qw=t):void 0!==t.Hq&&(u=this.ow.rw,this.qw=t);var c=this.tw.sw;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.j)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.j.cs)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var a=0;a<this.cw.j.cs.length;a++)if(t.j.cs[a].name===r){r=a;break}}c=this.tw.uw,this.vw=s,this.hw=r}else void 0!==s.$i&&void 0!==s.toArray?(c=this.tw.ww,this.vw=s):void 0!==s.length?(c=this.tw.xw,this.vw=s):this.propertyName=i;this.ew=this.yw[c],this.fw=this.zw[c][u]},Aw:function(){this.cw=null,this.ew=this.Bw,this.fw=this.Cw}},Object.assign(THREE.jv.prototype,{iw:function(){},jw:function(){},Bw:THREE.jv.prototype.ew,Cw:THREE.jv.prototype.fw,tw:{sw:0,xw:1,uw:2,ww:3},ow:{nw:0,pw:1,rw:2},yw:[function(t,e){t[e]=this.cw[this.propertyName]},function(t,e){for(var n=this.vw,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.vw[this.hw]},function(t,e){this.vw.toArray(t,e)}],zw:[[function(t,e){this.cw[this.propertyName]=t[e]},function(t,e){this.cw[this.propertyName]=t[e],this.qw.Ar=!0},function(t,e){this.cw[this.propertyName]=t[e],this.qw.Hq=!0}],[function(t,e){for(var n=this.vw,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.vw,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.qw.Ar=!0},function(t,e){for(var n=this.vw,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.qw.Hq=!0}],[function(t,e){this.vw[this.hw]=t[e]},function(t,e){this.vw[this.hw]=t[e],this.qw.Ar=!0},function(t,e){this.vw[this.hw]=t[e],this.qw.Hq=!0}],[function(t,e){this.vw.$i(t,e)},function(t,e){this.vw.$i(t,e),this.qw.Ar=!0},function(t,e){this.vw.$i(t,e),this.qw.Hq=!0}]]}),THREE.jv.Dw=function(t,e,n){var i=n||THREE.jv.bw(e);this.Ew=t,this.Vu=t.Lv(e,i)},THREE.jv.Dw.prototype={constructor:THREE.jv.Dw,ew:function(t,e){this.bind();var n=this.Ew.Dv,i=this.Vu[n];void 0!==i&&i.ew(t,e)},fw:function(t,e){for(var n=this.Vu,i=this.Ew.Dv,r=n.length;i!==r;++i)n[i].fw(t,e)},bind:function(){for(var t=this.Vu,e=this.Ew.Dv,n=t.length;e!==n;++e)t[e].bind()},Aw:function(){for(var t=this.Vu,e=this.Ew.Dv,n=t.length;e!==n;++e)t[e].Aw()}},THREE.jv.create=function(t,e,n){return t instanceof THREE.Bv?new THREE.jv.Dw(t,e,n):new THREE.jv(t,e,n)},THREE.jv.bw=function(t){var e=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=e.exec(t);if(!n)throw new Error("cannot parse trackName at all: "+t);n.index===e.lastIndex&&e.lastIndex++;var i={nodeName:n[3],gw:n[5],kw:n[7],propertyName:n[9],hw:n[11]};if(null===i.propertyName||0===i.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return i},THREE.jv.dw=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.yq)return t;if(t.lw){var n=function(t){for(var n=0;n<t.mw.length;n++){var i=t.mw[n];if(i.name===e)return i}return null},i=n(t.lw);if(i)return i}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.yq===e)return i;var o=r(i.children);if(o)return o}return null},o=r(t.children);if(o)return o}return null},THREE.iv=function(t,e,n){this.hv=t,this.Ep=n;var i,r=Float64Array;switch(e){case"quaternion":i=this.Fw;break;case"string":case"bool":r=Array,i=this.Gw;break;default:i=this.Hw}this.buffer=new r(4*n),this.Iw=i,this.Jw=0,this.Xu=0,this.ev=0},THREE.iv.prototype={constructor:THREE.iv,ku:function(t,e){var n=this.buffer,i=this.Ep,r=t*i+i,o=this.Jw;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=e}else{o+=e;var s=e/o;this.Iw(n,r,0,s,i)}this.Jw=o},apply:function(t){var e=this.Ep,n=this.buffer,i=t*e+e,r=this.Jw,o=this.hv;if(this.Jw=0,r<1){var a=3*e;this.Iw(n,i,a,1-r,e)}for(var s=e,h=e+e;s!==h;++s)if(n[s]!==n[s+e]){o.fw(n,i);break}},nv:function(){var t=this.hv,e=this.buffer,n=this.Ep,i=3*n;t.ew(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.Jw=0},bv:function(){var t=3*this.Ep;this.hv.fw(this.buffer,t)},Gw:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},Fw:function(t,e,n,i,r){THREE.Jl.am(t,e,t,e,t,n,i)},Hw:function(t,e,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*i}}},THREE._v=function(t,e,n){THREE.su.call(this,t,e,n)},THREE._v.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE._v,kv:"bool",Qv:Array,Sv:THREE.ii,Vv:void 0,Wv:void 0}),THREE.$v=function(t,e,n,i){THREE.su.call(this,t,e,n,i)},THREE.$v.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE.$v,kv:"color"}),THREE.xu=function(t,e,n,i){THREE.su.call(this,t,e,n,i)},THREE.xu.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE.xu,kv:"number"}),THREE.Gu=function(t,e,n,i){THREE.su.call(this,t,e,n,i)},THREE.Gu.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE.Gu,kv:"quaternion",Sv:THREE.ji,Vv:function(t){return new THREE.Wp(this.Tf,this.values,this.lv(),t)},Wv:void 0}),THREE.aw=function(t,e,n,i){THREE.su.call(this,t,e,n,i)},THREE.aw.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE.aw,kv:"string",Qv:Array,Sv:THREE.ii,Vv:void 0,Wv:void 0}),THREE.Fu=function(t,e,n,i){THREE.su.call(this,t,e,n,i)},THREE.Fu.prototype=Object.assign(Object.create(THREE.su.prototype),{constructor:THREE.Fu,kv:"vector"}),THREE.Audio=function(t){THREE.wq.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.Kw.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.Lw()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.Mw=!1,this.Nw=!0,this.Ow="empty",this.filters=[]},THREE.Audio.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.Audio,Pw:function(){return this.gain},Qw:function(t){return this.Nw=!1,this.Ow="audioNode",this.source=t,this.connect(),this},Rw:function(t){return this.source.buffer=t,this.Ow="buffer",this.autoplay&&this.play(),this},play:function(){if(this.Mw===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.Nw===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.Mw=!0,this.source=t,this.connect()},pause:function(){return this.Nw===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.Mw=!1,this)},stop:function(){return this.Nw===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.Mw=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.Pw())}else this.source.connect(this.Pw());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.Pw())}else this.source.disconnect(this.Pw());return this},Sw:function(){return this.filters},Tw:function(t){return t||(t=[]),this.Mw===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},Uw:function(){return this.Sw()[0]},Vw:function(t){return this.Tw(t?[t]:[])},Ww:function(t){return this.Nw===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.Mw===!0&&(this.source.playbackRate.value=this.playbackRate),this)},Xw:function(){return this.playbackRate},Kw:function(){this.Mw=!1},Yw:function(){return this.Nw===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},Pt:function(t){return this.Nw===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},Zw:function(){return this.gain.gain.value},$w:function(t){return this.gain.gain.value=t,this}}),THREE._w=function(t,e){this.ax=t.context.createAnalyser(),this.ax.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.ax.frequencyBinCount),t.Pw().connect(this.ax)},Object.assign(THREE._w.prototype,{bx:function(){return this.ax.getByteFrequencyData(this.data),this.data},ex:function(){for(var t=0,e=this.bx(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.defineProperty(THREE,"AudioContext",{get:function(){var t;return function(){return void 0===t&&(t=new(window.AudioContext||window.webkitAudioContext)),t}}()}),THREE.gx=function(t){THREE.Audio.call(this,t),this.hx=this.context.createPanner(),this.hx.connect(this.gain)},THREE.gx.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.gx,Pw:function(){return this.hx},ix:function(){return this.hx.refDistance},jx:function(t){this.hx.refDistance=t},kx:function(){return this.hx.rolloffFactor},lx:function(t){this.hx.rolloffFactor=t},mx:function(){return this.hx.distanceModel},nx:function(t){this.hx.distanceModel=t},ox:function(){return this.hx.maxDistance},px:function(t){this.hx.maxDistance=t},En:function(){var t=new THREE.K;return function(e){THREE.wq.prototype.En.call(this,e),t.Vm(this.Km),this.hx.setPosition(t.x,t.y,t.z)}}()}),THREE.AudioListener=function(){THREE.wq.call(this),this.type="AudioListener",this.context=THREE.AudioContext,this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},THREE.AudioListener.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.AudioListener,Lw:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},Uw:function(){return this.filter},Vw:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},qx:function(){return this.gain.gain.value},sx:function(t){this.gain.gain.value=t},En:function(){var t=new THREE.K,e=new THREE.Jl,n=new THREE.K,i=new THREE.K;return function(r){THREE.wq.prototype.En.call(this,r);var o=this.context.listener,a=this.zq;this.Km.so(t,e,n),i.set(0,0,-1).Am(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z)}}()}),THREE.tx=function(){THREE.wq.call(this),this.type="Camera",this.ux=new THREE.Gm,this.Im=new THREE.Gm},THREE.tx.prototype=Object.create(THREE.wq.prototype),THREE.tx.prototype.constructor=THREE.tx,THREE.tx.prototype.jr=function(){var t=new THREE.Jl;return function(e){var n=e||new THREE.K;return this.gr(t),n.set(0,0,-1).Am(t)}}(),THREE.tx.prototype.ho=function(){var t=new THREE.Gm;return function(e){t.ho(this.position,e,this.zq),this.Cq.Sl(t)}}(),THREE.tx.prototype.clone=function(){return(new this.constructor).Di(this)},THREE.tx.prototype.Di=function(t){return THREE.wq.prototype.Di.call(this,t),this.ux.Di(t.ux),this.Im.Di(t.Im),this},THREE.vx=function(t,e,n){THREE.wq.call(this),this.type="CubeCamera";var i=90,r=1,o=new THREE.sq(i,r,t,e);o.zq.set(0,-1,0),o.ho(new THREE.K(1,0,0)),this.add(o);var a=new THREE.sq(i,r,t,e);a.zq.set(0,-1,0),a.ho(new THREE.K(-1,0,0)),this.add(a);var s=new THREE.sq(i,r,t,e);s.zq.set(0,0,1),s.ho(new THREE.K(0,1,0)),this.add(s);var h=new THREE.sq(i,r,t,e);h.zq.set(0,0,-1),h.ho(new THREE.K(0,-1,0)),this.add(h);var u=new THREE.sq(i,r,t,e);u.zq.set(0,-1,0),u.ho(new THREE.K(0,0,1)),this.add(u);var c=new THREE.sq(i,r,t,e);c.zq.set(0,-1,0),c.ho(new THREE.K(0,0,-1)),this.add(c);var f={format:THREE.Sh,wx:THREE.Dh,xx:THREE.Dh};this.yx=new THREE.zx(n,n,f),this.Ax=function(t,e){null===this.parent&&this.En();var n=this.yx,i=n.G.Bx;n.G.Bx=!1,n.Cx=0,t.Dx(e,o,n),n.Cx=1,t.Dx(e,a,n),n.Cx=2,t.Dx(e,s,n),n.Cx=3,t.Dx(e,h,n),n.Cx=4,t.Dx(e,u,n),n.G.Bx=i,n.Cx=5,t.Dx(e,c,n),t.Ex(null)}},THREE.vx.prototype=Object.create(THREE.wq.prototype),THREE.vx.prototype.constructor=THREE.vx,THREE.tq=function(t,e,n,i,r,o){THREE.tx.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.hq=void 0!==o?o:2e3,this.Fx()},THREE.tq.prototype=Object.assign(Object.create(THREE.tx.prototype),{constructor:THREE.tq,Di:function(t){return THREE.tx.prototype.Di.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.hq=t.hq,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},Gx:function(t,e,n,i,r,o){this.view={Hx:t,Ix:e,offsetX:n,offsetY:i,width:r,height:o},this.Fx()},Jx:function(){this.view=null,this.Fx()},Fx:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view){var h=this.zoom/(this.view.width/this.view.Hx),u=this.zoom/(this.view.height/this.view.Ix),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/h),o=r+c*(this.view.width/h),a-=f*(this.view.offsetY/u),s=a-f*(this.view.height/u)}this.Im.wo(r,o,a,s,this.near,this.hq)},toJSON:function(t){var e=THREE.wq.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.hq=this.hq,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),THREE.sq=function(t,e,n,i){THREE.tx.call(this),this.type="PerspectiveCamera",this.Kx=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.hq=void 0!==i?i:2e3,this.focus=10,this.Lx=void 0!==e?e:1,this.view=null,this.Mx=35,this.Nx=0,this.Fx()},THREE.sq.prototype=Object.assign(Object.create(THREE.tx.prototype),{constructor:THREE.sq,Di:function(t){return THREE.tx.prototype.Di.call(this,t),this.Kx=t.Kx,this.zoom=t.zoom,this.near=t.near,this.hq=t.hq,this.focus=t.focus,this.Lx=t.Lx,this.view=null===t.view?null:Object.assign({},t.view),this.Mx=t.Mx,this.Nx=t.Nx,this},Ox:function(t){var e=.5*this.Px()/t;this.Kx=2*THREE.Math.$o*Math.atan(e),this.Fx()},Qx:function(){var t=Math.tan(.5*THREE.Math.vo*this.Kx);return.5*this.Px()/t},Rx:function(){return 2*THREE.Math.$o*Math.atan(Math.tan(.5*THREE.Math.vo*this.Kx)/this.zoom)},Sx:function(){return this.Mx*Math.min(this.Lx,1)},Px:function(){return this.Mx/Math.max(this.Lx,1)},Gx:function(t,e,n,i,r,o){this.Lx=t/e,this.view={Hx:t,Ix:e,offsetX:n,offsetY:i,width:r,height:o},this.Fx()},Jx:function(){this.view=null,this.Fx()},Fx:function(){var t=this.near,e=t*Math.tan(.5*THREE.Math.vo*this.Kx)/this.zoom,n=2*e,i=this.Lx*n,r=-.5*i,o=this.view;if(null!==o){var a=o.Hx,s=o.Ix;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var h=this.Nx;0!==h&&(r+=t*h/this.Sx()),this.Im.to(r,r+i,e-n,e,t,this.hq)},toJSON:function(t){var e=THREE.wq.prototype.toJSON.call(this,t);return e.object.Kx=this.Kx,e.object.zoom=this.zoom,e.object.near=this.near,e.object.hq=this.hq,e.object.focus=this.focus,e.object.Lx=this.Lx,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.Mx=this.Mx,e.object.Nx=this.Nx,e}}),THREE.Tx=function(){this.type="StereoCamera",this.Lx=1,this.Ux=new THREE.sq,this.Ux.Iq.enable(1),this.Ux.Fq=!1,this.Vx=new THREE.sq,this.Vx.Iq.enable(2),this.Vx.Fq=!1},Object.assign(THREE.Tx.prototype,{update:function(){var t,e,n,i,r,o=new THREE.Gm,a=new THREE.Gm;return function(s){var h=t!==s.focus||e!==s.Kx||n!==s.Lx*this.Lx||i!==s.near||r!==s.hq;if(h){t=s.focus,e=s.Kx,n=s.Lx*this.Lx,i=s.near,r=s.hq;var u,c,f=s.Im.clone(),l=.032,p=l*i/t,d=i*Math.tan(THREE.Math.vo*e*.5);a.elements[12]=-l,o.elements[12]=l,u=-d*n+p,c=d*n+p,f.elements[0]=2*i/(c-u),f.elements[8]=(c+u)/(c-u),this.Ux.Im.Di(f),u=-d*n-p,c=d*n-p,f.elements[0]=2*i/(c-u),f.elements[8]=(c+u)/(c-u),this.Vx.Im.Di(f)}this.Ux.Km.Di(s.Km).multiply(a),this.Vx.Km.Di(s.Km).multiply(o)}}()}),THREE.Wx=function(t,e){THREE.wq.call(this),this.type="Light",this.color=new THREE.T(t),this.Xx=void 0!==e?e:1,this.Kq=void 0},THREE.Wx.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.Wx,Di:function(t){return THREE.wq.prototype.Di.call(this,t),this.color.Di(t.color),this.Xx=t.Xx,this},toJSON:function(t){var e=THREE.wq.prototype.toJSON.call(this,t);return e.object.color=this.color.Oi(),e.object.Xx=this.Xx,void 0!==this.Yx&&(e.object.Yx=this.Yx.Oi()),void 0!==this.ln&&(e.object.ln=this.ln),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.Zx&&(e.object.Zx=this.Zx),void 0!==this.$x&&(e.object.$x=this.$x),e}}),THREE._x=function(t){this.ay=t,this.bias=0,this.N=1,this.by=new THREE.ea(512,512),this.map=null,this.matrix=new THREE.Gm},Object.assign(THREE._x.prototype,{Di:function(t){return this.ay=t.ay.clone(),this.bias=t.bias,this.N=t.N,this.by.Di(t.by),this},clone:function(){return(new this.constructor).Di(this)}}),THREE.ey=function(t,e){THREE.Wx.call(this,t,e),this.type="AmbientLight",this.Jq=void 0},THREE.ey.prototype=Object.assign(Object.create(THREE.Wx.prototype),{constructor:THREE.ey}),THREE.gy=function(t,e){THREE.Wx.call(this,t,e),this.type="DirectionalLight",this.position.Di(THREE.wq.Aq),this.mr(),this.target=new THREE.wq,this.hy=new THREE.iy},THREE.gy.prototype=Object.assign(Object.create(THREE.Wx.prototype),{constructor:THREE.gy,Di:function(t){return THREE.Wx.prototype.Di.call(this,t),this.target=t.target.clone(),this.hy=t.hy.clone(),this}}),THREE.iy=function(t){THREE._x.call(this,new THREE.tq(-5,5,5,-5,.5,500))},THREE.iy.prototype=Object.assign(Object.create(THREE._x.prototype),{constructor:THREE.iy}),THREE.jy=function(t,e,n){THREE.Wx.call(this,t,n),this.type="HemisphereLight",this.Jq=void 0,this.position.Di(THREE.wq.Aq),this.mr(),this.Yx=new THREE.T(e)},THREE.jy.prototype=Object.assign(Object.create(THREE.Wx.prototype),{constructor:THREE.jy,Di:function(t){return THREE.Wx.prototype.Di.call(this,t),this.Yx.Di(t.Yx),this}}),THREE.ky=function(t,e,n,i){THREE.Wx.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.Xx*Math.PI},set:function(t){this.Xx=t/(4*Math.PI)}}),this.ln=void 0!==n?n:0,this.Zx=void 0!==i?i:1,this.hy=new THREE._x(new THREE.sq(90,1,.5,500))},THREE.ky.prototype=Object.assign(Object.create(THREE.Wx.prototype),{constructor:THREE.ky,Di:function(t){return THREE.Wx.prototype.Di.call(this,t),this.ln=t.ln,this.Zx=t.Zx,this.hy=t.hy.clone(),this}}),THREE.ly=function(t,e,n,i,r,o){THREE.Wx.call(this,t,e),this.type="SpotLight",this.position.Di(THREE.wq.Aq),this.mr(),this.target=new THREE.wq,Object.defineProperty(this,"power",{get:function(){return this.Xx*Math.PI},set:function(t){this.Xx=t/Math.PI}}),this.ln=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.$x=void 0!==r?r:0,this.Zx=void 0!==o?o:1,this.hy=new THREE.my},THREE.ly.prototype=Object.assign(Object.create(THREE.Wx.prototype),{constructor:THREE.ly,Di:function(t){return THREE.Wx.prototype.Di.call(this,t),this.ln=t.ln,this.angle=t.angle,this.$x=t.$x,this.Zx=t.Zx,this.target=t.target.clone(),this.hy=t.hy.clone(),this}}),THREE.my=function(){THREE._x.call(this,new THREE.sq(50,1,.5,500))},THREE.my.prototype=Object.assign(Object.create(THREE._x.prototype),{constructor:THREE.my,update:function(t){var e=2*THREE.Math.$o*t.angle,n=this.by.width/this.by.height,i=t.ln||500,r=this.ay;e===r.Kx&&n===r.Lx&&i===r.hq||(r.Kx=e,r.Lx=n,r.hq=i,r.Fx())}}),THREE.ny=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.ny.prototype,{load:function(t,e,n,i){var r=new THREE.qy(this.oy);r.sy("arraybuffer"),r.load(t,function(t){var n=THREE.AudioContext;n.decodeAudioData(t,function(t){e(t)})},n,i)}}),THREE.pc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},THREE.ty=function(){this.uy=function(){},this.vy=function(){},this.wy=function(){}},THREE.ty.prototype={constructor:THREE.ty,crossOrigin:void 0,xy:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},yy:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.zy(t[r],e,n);return i},zy:function(){var t,e,n;return function(i,r,o){function a(t,n,i,a,h){var u,c=r+t,f=THREE.ty.By.get(c);null!==f?u=f.load(c):(e.Cy(o),u=e.load(c)),void 0!==n&&(u.repeat.$i(n),1!==n[0]&&(u.Dy=THREE.xh),1!==n[1]&&(u.Ey=THREE.xh)),void 0!==i&&u.offset.$i(i),void 0!==a&&("repeat"===a[0]&&(u.Dy=THREE.xh),"mirror"===a[0]&&(u.Dy=THREE.zh),"repeat"===a[1]&&(u.Ey=THREE.xh),"mirror"===a[1]&&(u.Ey=THREE.zh)),void 0!==h&&(u.Fy=h);var l=THREE.Math._o();return s[l]=u,l}void 0===t&&(t=new THREE.T),void 0===e&&(e=new THREE.A),void 0===n&&(n=new THREE.Ay);var s={},h={yq:THREE.Math._o(),type:"MeshLambertMaterial"};for(var u in i){var c=i[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=c;break;case"blending":h.Gy=THREE[c];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":h.color=t.$i(c).Oi();break;case"colorSpecular":h.Hy=t.$i(c).Oi();break;case"colorEmissive":h.Iy=t.$i(c).Oi();break;case"specularCoef":h.Jy=c;break;case"shading":"basic"===c.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===c.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===c.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=a(c,i.Ky,i.Ly,i.My,i.Ny);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.Oy=a(c,i.Py,i.Qy,i.Ry,i.Sy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.Ty=a(c,i.Uy,i.Vy,i.Wy,i.Xy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.Yy=a(c,i.Zy,i.$y,i._y,i.az);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bz=a(c,i.cz,i.dz,i.ez,i.fz);break;case"mapBumpScale":h.gz=c;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.hz=a(c,i.iz,i.jz,i.kz,i.lz);break;case"mapNormalFactor":h.mz=[c,c];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.nz=a(c,i.oz,i.pz,i.qz,i.rz);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.sz=a(c,i.tz,i.uz,i.vz,i.wz);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.xz=a(c,i.yz,i.zz,i.Az,i.Bz);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.Cz=a(c,i.Dz,i.Ez,i.Fz,i.Gz);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.Hz=THREE.xg;break;case"doubleSided":h.Hz=THREE.yg;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),h.opacity=c;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[u]=c;break;case"vertexColors":c===!0&&(h.ur=THREE.Dg),"face"===c&&(h.ur=THREE.Cg);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,c)}}return"MeshBasicMaterial"===h.type&&delete h.Iy,"MeshPhongMaterial"!==h.type&&delete h.Hy,h.opacity<1&&(h.D=!0),n.Iz(s),n.parse(h)}}()},THREE.ty.By={Jz:[],add:function(t,e){this.Jz.push(t,e)},get:function(t){for(var e=this.Jz,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}};THREE.qy=function(t){this.oy=void 0!==t?t:THREE.py};Object.assign(THREE.qy.prototype,{load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t);var r=this,o=THREE.pc.get(t);if(void 0!==o)return r.oy.Kz(t),setTimeout(function(){e&&e(o),r.oy.Lz(t)},0),o;var a=new XMLHttpRequest;return a.overrideMimeType("text/plain"),a.open("GET",t,!0),a.addEventListener("load",function(n){var o=n.target.response;THREE.pc.add(t,o),200===this.status?(e&&e(o),r.oy.Lz(t)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),e&&e(o),r.oy.Lz(t)):(i&&i(n),r.oy.Mz(t))},!1),void 0!==n&&a.addEventListener("progress",function(t){n(t)},!1),a.addEventListener("error",function(e){i&&i(e),r.oy.Mz(t)},!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.send(null),r.oy.Kz(t),a},Nz:function(t){return this.path=t,this},sy:function(t){return this.responseType=t,this},Oz:function(t){return this.withCredentials=t,this}}),THREE.Pz=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.Pz.prototype,{load:function(t,e,n,i){var r=this,o=new THREE.qy(this.oy);o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new THREE.Qz(t)}}),THREE.Rz=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.Rz.prototype,{load:function(t,e,n,i){var r=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){URL.revokeObjectURL(o.src),e&&e(o),r.oy.Lz(t)},0===t.indexOf("data:"))o.src=t;else{var a=new THREE.qy;a.Nz(this.path),a.sy("blob"),a.load(t,function(t){o.src=URL.createObjectURL(t)},n,i)}return r.oy.Kz(t),o},Cy:function(t){return this.crossOrigin=t,this},Nz:function(t){return this.path=t,this}}),THREE.Sz=function(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.oy=void 0!==t?t:THREE.py,this.withCredentials=!1},Object.assign(THREE.Sz.prototype,{load:function(t,e,n,i){var r=this,o=this.Tz&&"string"==typeof this.Tz?this.Tz:THREE.ty.prototype.xy(t),a=new THREE.qy(this.oy);a.Oz(this.withCredentials),a.load(t,function(n){var i=JSON.parse(n),a=i.qr;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var h=r.parse(i,o);e(h.j,h.or)},n,i)},Uz:function(t){this.Tz=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var i,r,o,s,h,u,c,f,l,p,d,E,v,g,m,y,T,R,w,H,b,x,A,M,U,O,S,D=t.as,C=t.Hn,L=t.Is,P=t._r,N=0;if(void 0!==t.Js){for(i=0;i<t.Js.length;i++)t.Js[i].length&&N++;for(i=0;i<N;i++)a.bs[i]=[]}for(s=0,h=C.length;s<h;)R=new THREE.K,R.x=C[s++]*e,R.y=C[s++]*e,R.z=C[s++]*e,a.Hn.push(R);for(s=0,h=D.length;s<h;)if(p=D[s++],d=n(p,0),E=n(p,1),v=n(p,3),g=n(p,4),m=n(p,5),y=n(p,6),T=n(p,7),d){if(H=new THREE.sr,H.a=D[s],H.b=D[s+1],H.c=D[s+3],b=new THREE.sr,b.a=D[s+1],b.b=D[s+2],b.c=D[s+3],s+=4,E&&(l=D[s++],H.vr=l,b.vr=l),o=a.as.length,v)for(i=0;i<N;i++)for(M=t.Js[i],a.bs[i][o]=[],a.bs[i][o+1]=[],r=0;r<4;r++)f=D[s++],O=M[2*f],S=M[2*f+1],U=new THREE.ea(O,S),2!==r&&a.bs[i][o].push(U),0!==r&&a.bs[i][o+1].push(U);if(g&&(c=3*D[s++],H.Nn.set(L[c++],L[c++],L[c]),b.Nn.Di(H.Nn)),m)for(i=0;i<4;i++)c=3*D[s++],A=new THREE.K(L[c++],L[c++],L[c]),2!==i&&H.tr.push(A),0!==i&&b.tr.push(A);if(y&&(u=D[s++],x=P[u],H.color.Ei(x),b.color.Ei(x)),T)for(i=0;i<4;i++)u=D[s++],x=P[u],2!==i&&H.ur.push(new THREE.T(x)),0!==i&&b.ur.push(new THREE.T(x));a.as.push(H),a.as.push(b)}else{if(w=new THREE.sr,w.a=D[s++],w.b=D[s++],w.c=D[s++],E&&(l=D[s++],w.vr=l),o=a.as.length,v)for(i=0;i<N;i++)for(M=t.Js[i],a.bs[i][o]=[],r=0;r<3;r++)f=D[s++],O=M[2*f],S=M[2*f+1],U=new THREE.ea(O,S),a.bs[i][o].push(U);if(g&&(c=3*D[s++],w.Nn.set(L[c++],L[c++],L[c])),m)for(i=0;i<3;i++)c=3*D[s++],A=new THREE.K(L[c++],L[c++],L[c]),w.tr.push(A);if(y&&(u=D[s++],w.color.Ei(P[u])),T)for(i=0;i<3;i++)u=D[s++],w.ur.push(new THREE.T(P[u]));a.as.push(w)}}function i(){var e=void 0!==t.Vz?t.Vz:2;if(t.es)for(var n=0,i=t.es.length;n<i;n+=e){var r=t.es[n],o=e>1?t.es[n+1]:0,s=e>2?t.es[n+2]:0,h=e>3?t.es[n+3]:0;a.es.push(new THREE.Ym(r,o,s,h))}if(t.fs)for(var n=0,i=t.fs.length;n<i;n+=e){var u=t.fs[n],c=e>1?t.fs[n+1]:0,f=e>2?t.fs[n+2]:0,l=e>3?t.fs[n+3]:0;a.fs.push(new THREE.Ym(u,c,f,l))}a.mw=t.mw,a.mw&&a.mw.length>0&&(a.es.length!==a.fs.length||a.fs.length!==a.Hn.length)&&console.warn("When skinning, number of vertices ("+a.Hn.length+"), skinIndices ("+a.fs.length+"), and skinWeights ("+a.es.length+") should match.")}function r(e){if(void 0!==t.cs)for(var n=0,i=t.cs.length;n<i;n++){a.cs[n]={},a.cs[n].name=t.cs[n].name,a.cs[n].Hn=[];for(var r=a.cs[n].Hn,o=t.cs[n].Hn,s=0,h=o.length;s<h;s+=3){var u=new THREE.K;u.x=o[s]*e,u.y=o[s+1]*e,u.z=o[s+2]*e,r.push(u)}}if(void 0!==t.Wz&&t.Wz.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=a.as,f=t.Wz[0]._r,n=0,i=c.length;n<i;n++)c[n].color.$i(f,3*n)}}function o(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.zu&&(t.zu.length?n=n.concat(t.zu):n.push(t.zu));for(var i=0;i<n.length;i++){var r=THREE.ou.Bu(n[i],a.mw);r&&e.push(r)}if(a.cs){var o=THREE.ou.Au(a.cs,10);e=e.concat(o)}e.length>0&&(a.zu=e)}var a=new THREE.Gn,s=void 0!==t.scale?1/t.scale:1;if(n(s),i(),r(s),o(),a.vs(),a.Oo(),void 0===t.or||0===t.or.length)return{j:a};var h=THREE.ty.prototype.yy(t.or,e,this.crossOrigin);return{j:a,or:h}}}),THREE.Xz=function(t,e,n){var i=this,r=!1,o=0,a=0;this.Yz=void 0,this.Zz=t,this.$z=e,this._z=n,this.Kz=function(t){a++,r===!1&&void 0!==i.Yz&&i.Yz(t,o,a),r=!0},this.Lz=function(t){o++,void 0!==i.$z&&i.$z(t,o,a),o===a&&(r=!1,void 0!==i.Zz&&i.Zz())},this.Mz=function(t){void 0!==i._z&&i._z(t)}},THREE.py=new THREE.Xz,THREE.aA=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.aA.prototype,{load:function(t,e,n,i){var r=this,o=new THREE.qy(r.oy);o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new THREE.In,n=t.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var r=new i[n.type](n.ec);e.Ts(new THREE.wr(r,1))}var o=t.data.attributes;for(var a in o){var s=o[a],r=new i[s.type](s.ec);e.Us(a,new THREE.wr(r,s.vm,s.zr))}var h=t.data.us||t.data.bA||t.data.cA;if(void 0!==h)for(var u=0,c=h.length;u!==c;++u){var f=h[u];e.Vs(f.start,f.count,f.vr)}var l=t.data.No;if(void 0!==l){var p=new THREE.K;void 0!==l.jn&&p.$i(l.jn),e.No=new THREE.Pn(p,l.N)}return e}}),THREE.Ay=function(t){this.oy=void 0!==t?t:THREE.py,this.pr={}},Object.assign(THREE.Ay.prototype,{load:function(t,e,n,i){var r=this,o=new THREE.qy(r.oy);o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},Iz:function(t){this.pr=t},dA:function(t){var e=this.pr;return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]},parse:function(t){var e=new THREE[t.type];if(void 0!==t.yq&&(e.yq=t.yq),void 0!==t.name&&(e.name=t.name),void 0!==t.color&&e.color.Ei(t.color),void 0!==t.eA&&(e.eA=t.eA),void 0!==t.fA&&(e.fA=t.fA),void 0!==t.Iy&&e.Iy.Ei(t.Iy),void 0!==t.Hy&&e.Hy.Ei(t.Hy),void 0!==t.Jy&&(e.Jy=t.Jy),void 0!==t.l&&(e.l=t.l),void 0!==t.B&&(e.B=t.B),void 0!==t.C&&(e.C=t.C),void 0!==t.ur&&(e.ur=t.ur),void 0!==t.gA&&(e.gA=t.gA),void 0!==t.Gy&&(e.Gy=t.Gy),void 0!==t.Hz&&(e.Hz=t.Hz),
void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.D&&(e.D=t.D),void 0!==t.hA&&(e.hA=t.hA),void 0!==t.iA&&(e.iA=t.iA),void 0!==t.jA&&(e.jA=t.jA),void 0!==t.kA&&(e.kA=t.kA),void 0!==t.lA&&(e.lA=t.lA),void 0!==t.mA&&(e.mA=t.mA),void 0!==t.size&&(e.size=t.size),void 0!==t.nA&&(e.nA=t.nA),void 0!==t.map&&(e.map=this.dA(t.map)),void 0!==t.Cz&&(e.Cz=this.dA(t.Cz),e.D=!0),void 0!==t.bz&&(e.bz=this.dA(t.bz)),void 0!==t.gz&&(e.gz=t.gz),void 0!==t.hz&&(e.hz=this.dA(t.hz)),void 0!==t.mz){var n=t.mz;Array.isArray(n)===!1&&(n=[n,n]),e.mz=(new THREE.ea).$i(n)}if(void 0!==t.oA&&(e.oA=this.dA(t.oA)),void 0!==t.pA&&(e.pA=t.pA),void 0!==t.qA&&(e.qA=t.qA),void 0!==t.xz&&(e.xz=this.dA(t.xz)),void 0!==t.sz&&(e.sz=this.dA(t.sz)),void 0!==t.Oy&&(e.Oy=this.dA(t.Oy)),void 0!==t.rA&&(e.rA=t.rA),void 0!==t.nz&&(e.nz=this.dA(t.nz)),void 0!==t.sA&&(e.sA=this.dA(t.sA),e.tA=THREE.hh),void 0!==t.uA&&(e.uA=t.uA),void 0!==t.Ty&&(e.Ty=this.dA(t.Ty)),void 0!==t.vA&&(e.vA=t.vA),void 0!==t.Yy&&(e.Yy=this.dA(t.Yy)),void 0!==t.wA&&(e.wA=t.wA),void 0!==t.or)for(var i=0,r=t.or.length;i<r;i++)e.or.push(this.parse(t.or[i]));return e}}),THREE.xA=function(t){this.oy=void 0!==t?t:THREE.py,this.Tz=""},Object.assign(THREE.xA.prototype,{load:function(t,e,n,i){""===this.Tz&&(this.Tz=t.substring(0,t.lastIndexOf("/")+1));var r=this,o=new THREE.qy(r.oy);o.load(t,function(t){r.parse(JSON.parse(t),e)},n,i)},Uz:function(t){this.Tz=t},Cy:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.yA(t.nr),i=this.zA(t.images,function(){void 0!==e&&e(a)}),r=this.AA(t.pr,i),o=this.BA(t.or,r),a=this.CA(t.object,n,o);return t.zu&&(a.zu=this.DA(t.zu)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},yA:function(t){var e={};if(void 0!==t)for(var n=new THREE.Sz,i=new THREE.aA,r=0,o=t.length;r<o;r++){var a,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new THREE[s.type](s.width,s.height,s.EA,s.FA);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new THREE[s.type](s.width,s.height,s.GA,s.EA,s.FA,s.HA);break;case"CircleGeometry":case"CircleBufferGeometry":a=new THREE[s.type](s.N,s.IA,s.JA,s.KA);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new THREE[s.type](s.LA,s.MA,s.height,s.NA,s.FA,s.OA,s.JA,s.KA);break;case"ConeGeometry":case"ConeBufferGeometry":a=new THREE[s.type](s.N,s.height,s.NA,s.FA,s.OA,s.JA,s.KA);break;case"SphereGeometry":case"SphereBufferGeometry":a=new THREE[s.type](s.N,s.EA,s.FA,s.PA,s.QA,s.JA,s.KA);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new THREE[s.type](s.N,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new THREE[s.type](s.RA,s.SA,s.TA,s.UA,s.JA,s.KA);break;case"TorusGeometry":case"TorusBufferGeometry":a=new THREE[s.type](s.N,s.VA,s.NA,s.WA,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new THREE[s.type](s.N,s.VA,s.WA,s.NA,s.m,s.XA);break;case"LatheGeometry":case"LatheBufferGeometry":a=new THREE[s.type](s.points,s.IA,s.PA,s.QA);break;case"BufferGeometry":a=i.parse(s);break;case"Geometry":a=n.parse(s.data,this.Tz).j;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.yq=s.yq,void 0!==s.name&&(a.name=s.name),e[s.yq]=a}return e},BA:function(t,e){var n={};if(void 0!==t){var i=new THREE.Ay;i.Iz(e);for(var r=0,o=t.length;r<o;r++){var a=i.parse(t[r]);n[a.yq]=a}}return n},DA:function(t){for(var e=[],n=0;n<t.length;n++){var i=THREE.ou.parse(t[n]);e.push(i)}return e},zA:function(t,e){function n(t){return i.oy.Kz(t),a.load(t,function(){i.oy.Lz(t)})}var i=this,r={};if(void 0!==t&&t.length>0){var o=new THREE.Xz(e),a=new THREE.Rz(o);a.Cy(this.crossOrigin);for(var s=0,h=t.length;s<h;s++){var u=t[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.Tz+u.url;r[u.yq]=n(c)}}return r},AA:function(t,e){function n(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),THREE[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=t[r];void 0===a.YA&&console.warn('THREE.ObjectLoader: No "image" specified for',a.yq),void 0===e[a.YA]&&console.warn("THREE.ObjectLoader: Undefined image",a.YA);var s=new THREE.ZA(e[a.YA]);s.Ar=!0,s.yq=a.yq,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping)),void 0!==a.offset&&s.offset.$i(a.offset),void 0!==a.repeat&&s.repeat.$i(a.repeat),void 0!==a.wrap&&(s.Dy=n(a.wrap[0]),s.Ey=n(a.wrap[1])),void 0!==a.xx&&(s.xx=n(a.xx)),void 0!==a.wx&&(s.wx=n(a.wx)),void 0!==a.Fy&&(s.Fy=a.Fy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.yq]=s}return i},CA:function(){var t=new THREE.Gm;return function(e,n,i){function r(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function o(t){if(void 0!==t)return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}var a;switch(e.type){case"Scene":a=new THREE.$A;break;case"PerspectiveCamera":a=new THREE.sq(e.Kx,e.Lx,e.near,e.hq),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.Mx&&(a.Mx=e.Mx),void 0!==e.Nx&&(a.Nx=e.Nx),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new THREE.tq(e.left,e.right,e.top,e.bottom,e.near,e.hq);break;case"AmbientLight":a=new THREE.ey(e.color,e.Xx);break;case"DirectionalLight":a=new THREE.gy(e.color,e.Xx);break;case"PointLight":a=new THREE.ky(e.color,e.Xx,e.ln,e.Zx);break;case"SpotLight":a=new THREE.ly(e.color,e.Xx,e.ln,e.angle,e.$x,e.Zx);break;case"HemisphereLight":a=new THREE.jy(e.color,e.Yx,e.Xx);break;case"Mesh":var s=r(e.j),h=o(e.k);a=s.mw&&s.mw.length>0?new THREE._A(s,h):new THREE.jq(s,h);break;case"LOD":a=new THREE.lq;break;case"Line":a=new THREE.kq(r(e.j),o(e.k),e.mode);break;case"PointCloud":case"Points":a=new THREE.mq(r(e.j),o(e.k));break;case"Sprite":a=new THREE.nq(o(e.k));break;case"Group":a=new THREE.aB;break;default:a=new THREE.wq}if(a.yq=e.yq,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(t.$i(e.matrix),t.so(a.position,a.Cq,a.scale)):(void 0!==e.position&&a.position.$i(e.position),void 0!==e.rotation&&a.rotation.$i(e.rotation),void 0!==e.scale&&a.scale.$i(e.scale)),void 0!==e.Jq&&(a.Jq=e.Jq),void 0!==e.Kq&&(a.Kq=e.Kq),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.Nq&&(a.Nq=e.Nq),void 0!==e.children)for(var u in e.children)a.add(this.CA(e.children[u],n,i));if("LOD"===e.type)for(var c=e.bB,f=0;f<c.length;f++){var l=c[f],u=a.cr("uuid",l.object);void 0!==u&&a.cB(u,l.ln)}return a}}()}),THREE.A=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.A.prototype,{load:function(t,e,n,i){var r=new THREE.ZA,o=new THREE.Rz(this.oy);return o.Cy(this.crossOrigin),o.Nz(this.path),o.load(t,function(n){var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?THREE.Sh:THREE.Th,r.YA=n,r.Ar=!0,void 0!==e&&e(r)},n,i),r},Cy:function(t){return this.crossOrigin=t,this},Nz:function(t){return this.path=t,this}}),THREE.dB=function(t){this.oy=void 0!==t?t:THREE.py},Object.assign(THREE.dB.prototype,{load:function(t,e,n,i){function r(n){a.load(t[n],function(t){o.images[n]=t,s++,6===s&&(o.Ar=!0,e&&e(o))},void 0,i)}var o=new THREE.eB,a=new THREE.Rz(this.oy);a.Cy(this.crossOrigin),a.Nz(this.path);for(var s=0,h=0;h<t.length;++h)r(h);return o},Cy:function(t){return this.crossOrigin=t,this},Nz:function(t){return this.path=t,this}}),THREE.fB=THREE.gB=function(t){this.oy=void 0!==t?t:THREE.py,this.hB=null},Object.assign(THREE.gB.prototype,{load:function(t,e,n,i){var r=this,o=new THREE.iB,a=new THREE.qy(this.oy);return a.sy("arraybuffer"),a.load(t,function(t){var n=r.hB(t);n&&(void 0!==n.YA?o.YA=n.YA:void 0!==n.data&&(o.YA.width=n.width,o.YA.height=n.height,o.YA.data=n.data),o.Dy=void 0!==n.Dy?n.Dy:THREE.yh,o.Ey=void 0!==n.Ey?n.Ey:THREE.yh,o.wx=void 0!==n.wx?n.wx:THREE.Dh,o.xx=void 0!==n.xx?n.xx:THREE.Fh,o.Fy=void 0!==n.Fy?n.Fy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.jB&&(o.jB=n.jB),1===n.kB&&(o.xx=THREE.Dh),o.Ar=!0,e&&e(o,n))},n,i),o}}),THREE.lB=function(t){this.oy=void 0!==t?t:THREE.py,this.hB=null},Object.assign(THREE.lB.prototype,{load:function(t,e,n,i){function r(r){h.load(t[r],function(t){var n=o.hB(t,!0);a[r]={width:n.width,height:n.height,format:n.format,jB:n.jB},u+=1,6===u&&(1===n.kB&&(s.xx=THREE.Dh),s.format=n.format,s.Ar=!0,e&&e(s))},n,i)}var o=this,a=[],s=new THREE.mB;s.YA=a;var h=new THREE.qy(this.oy);if(h.Nz(this.path),h.sy("arraybuffer"),Array.isArray(t))for(var u=0,c=0,f=t.length;c<f;++c)r(c);else h.load(t,function(t){var n=o.hB(t,!0);if(n.nB)for(var i=n.jB.length/n.kB,r=0;r<i;r++){a[r]={jB:[]};for(var h=0;h<n.kB;h++)a[r].jB.push(n.jB[r*n.kB+h]),a[r].format=n.format,a[r].width=n.width,a[r].height=n.height}else s.YA.width=n.width,s.YA.height=n.height,s.jB=n.jB;1===n.kB&&(s.xx=THREE.Dh),s.format=n.format,s.Ar=!0,e&&e(s)},n,i);return s},Nz:function(t){return this.path=t,this}}),THREE.oB=function(){Object.defineProperty(this,"id",{value:THREE.pB++}),this.yq=THREE.Math._o(),this.name="",this.type="Material",this.qB=!0,this.rB=!0,this.Gy=THREE.Fg,this.Hz=THREE.wg,this.gA=THREE.Ag,this.ur=THREE.Bg,this.opacity=1,this.D=!1,this.sB=THREE.Tg,this.tB=THREE.Ug,this.blendEquation=THREE.Kg,this.uB=null,this.vB=null,this.wB=null,this.depthFunc=THREE.bh,this.iA=!0,this.jA=!0,this.xB=null,this.yB=!1,this.kA=!0,this.precision=null,this.polygonOffset=!1,this.zB=0,this.AB=0,this.hA=0,this.BB=!1,this.CB=0,this.visible=!0,this.DB=!0},THREE.oB.prototype={constructor:THREE.oB,get Ar(){return this.DB},set Ar(t){t===!0&&this.update(),this.DB=t},EB:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var i=this[e];void 0!==i?i instanceof THREE.T?i.set(n):i instanceof THREE.K&&n instanceof THREE.K?i.Di(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.qr,e.push(i)}return e}var n=void 0===t;n&&(t={pr:{},images:{}});var i={qr:{version:4.4,type:"Material",rr:"Material.toJSON"}};if(i.yq=this.yq,i.type=this.type,""!==this.name&&(i.name=this.name),this.color instanceof THREE.T&&(i.color=this.color.Oi()),void 0!==this.eA&&(i.eA=this.eA),void 0!==this.fA&&(i.fA=this.fA),this.Iy instanceof THREE.T&&(i.Iy=this.Iy.Oi()),this.Hy instanceof THREE.T&&(i.Hy=this.Hy.Oi()),void 0!==this.Jy&&(i.Jy=this.Jy),this.map instanceof THREE.ZA&&(i.map=this.map.toJSON(t).yq),this.Cz instanceof THREE.ZA&&(i.Cz=this.Cz.toJSON(t).yq),this.Ty instanceof THREE.ZA&&(i.Ty=this.Ty.toJSON(t).yq),this.bz instanceof THREE.ZA&&(i.bz=this.bz.toJSON(t).yq,i.gz=this.gz),this.hz instanceof THREE.ZA&&(i.hz=this.hz.toJSON(t).yq,i.mz=this.mz.toArray()),this.oA instanceof THREE.ZA&&(i.oA=this.oA.toJSON(t).yq,i.pA=this.pA,i.qA=this.qA),this.xz instanceof THREE.ZA&&(i.xz=this.xz.toJSON(t).yq),this.sz instanceof THREE.ZA&&(i.sz=this.sz.toJSON(t).yq),this.Oy instanceof THREE.ZA&&(i.Oy=this.Oy.toJSON(t).yq),this.nz instanceof THREE.ZA&&(i.nz=this.nz.toJSON(t).yq),this.sA instanceof THREE.ZA&&(i.sA=this.sA.toJSON(t).yq,i.uA=this.uA),void 0!==this.size&&(i.size=this.size),void 0!==this.nA&&(i.nA=this.nA),this.Gy!==THREE.Fg&&(i.Gy=this.Gy),this.gA!==THREE.Ag&&(i.gA=this.gA),this.Hz!==THREE.wg&&(i.Hz=this.Hz),this.ur!==THREE.Bg&&(i.ur=this.ur),this.opacity<1&&(i.opacity=this.opacity),this.D===!0&&(i.D=this.D),this.hA>0&&(i.hA=this.hA),this.BB===!0&&(i.BB=this.BB),this.lA===!0&&(i.lA=this.lA),this.mA>1&&(i.mA=this.mA),n){var r=e(t.pr),o=e(t.images);r.length>0&&(i.pr=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).Di(this)},Di:function(t){this.name=t.name,this.qB=t.qB,this.rB=t.rB,this.Gy=t.Gy,this.Hz=t.Hz,this.gA=t.gA,this.ur=t.ur,this.opacity=t.opacity,this.D=t.D,this.sB=t.sB,this.tB=t.tB,this.blendEquation=t.blendEquation,this.uB=t.uB,this.vB=t.vB,this.wB=t.wB,this.depthFunc=t.depthFunc,this.iA=t.iA,this.jA=t.jA,this.kA=t.kA,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.zB=t.zB,this.AB=t.AB,this.hA=t.hA,this.BB=t.BB,this.CB=t.CB,this.visible=t.visible,this.yB=t.yB;var e=t.xB,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.xB=n,this},update:function(){this.dispatchEvent({type:"update"})},Ks:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(THREE.oB.prototype,THREE.bq.prototype),THREE.pB=0,THREE.FB=function(t){THREE.oB.call(this),this.type="LineBasicMaterial",this.color=new THREE.T(16777215),this.GB=1,this.HB="round",this.IB="round",this.rB=!1,this.EB(t)},THREE.FB.prototype=Object.create(THREE.oB.prototype),THREE.FB.prototype.constructor=THREE.FB,THREE.FB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.GB=t.GB,this.HB=t.HB,this.IB=t.IB,this},THREE.JB=function(t){THREE.oB.call(this),this.type="LineDashedMaterial",this.color=new THREE.T(16777215),this.GB=1,this.scale=1,this.KB=3,this.LB=1,this.rB=!1,this.EB(t)},THREE.JB.prototype=Object.create(THREE.oB.prototype),THREE.JB.prototype.constructor=THREE.JB,THREE.JB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.GB=t.GB,this.scale=t.scale,this.KB=t.KB,this.LB=t.LB,this},THREE.MB=function(t){THREE.oB.call(this),this.type="MeshBasicMaterial",this.color=new THREE.T(16777215),this.map=null,this.Yy=null,this.wA=1,this.nz=null,this.Cz=null,this.sA=null,this.tA=THREE.hh,this.uA=1,this.NB=.98,this.lA=!1,this.mA=1,this.OB="round",this.PB="round",this.QB=!1,this.cs=!1,this.rB=!1,this.EB(t)},THREE.MB.prototype=Object.create(THREE.oB.prototype),THREE.MB.prototype.constructor=THREE.MB,THREE.MB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.map=t.map,this.Yy=t.Yy,this.wA=t.wA,this.nz=t.nz,this.Cz=t.Cz,this.sA=t.sA,this.tA=t.tA,this.uA=t.uA,this.NB=t.NB,this.lA=t.lA,this.mA=t.mA,this.OB=t.OB,this.PB=t.PB,this.QB=t.QB,this.cs=t.cs,this},THREE.RB=function(t){THREE.oB.call(this),this.type="MeshDepthMaterial",this.SB=THREE.zi,this.QB=!1,this.cs=!1,this.map=null,this.Cz=null,this.oA=null,this.pA=1,this.qA=0,this.lA=!1,this.mA=1,this.qB=!1,this.rB=!1,this.EB(t)},THREE.RB.prototype=Object.create(THREE.oB.prototype),THREE.RB.prototype.constructor=THREE.RB,THREE.RB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.SB=t.SB,this.QB=t.QB,this.cs=t.cs,this.map=t.map,this.Cz=t.Cz,this.oA=t.oA,this.pA=t.pA,this.qA=t.qA,this.lA=t.lA,this.mA=t.mA,this},THREE.TB=function(t){THREE.oB.call(this),this.type="MeshLambertMaterial",this.color=new THREE.T(16777215),this.map=null,this.Ty=null,this.vA=1,this.Yy=null,this.wA=1,this.Iy=new THREE.T(0),this.rA=1,this.Oy=null,this.nz=null,this.Cz=null,this.sA=null,this.tA=THREE.hh,this.uA=1,this.NB=.98,this.lA=!1,this.mA=1,this.OB="round",this.PB="round",this.QB=!1,this.cs=!1,this.ds=!1,this.EB(t)},THREE.TB.prototype=Object.create(THREE.oB.prototype),THREE.TB.prototype.constructor=THREE.TB,THREE.TB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.map=t.map,this.Ty=t.Ty,this.vA=t.vA,this.Yy=t.Yy,this.wA=t.wA,this.Iy.Di(t.Iy),this.Oy=t.Oy,this.rA=t.rA,this.nz=t.nz,this.Cz=t.Cz,this.sA=t.sA,this.tA=t.tA,this.uA=t.uA,this.NB=t.NB,this.lA=t.lA,this.mA=t.mA,this.OB=t.OB,this.PB=t.PB,this.QB=t.QB,this.cs=t.cs,this.ds=t.ds,this},THREE.UB=function(t){THREE.oB.call(this,t),this.type="MeshNormalMaterial",this.lA=!1,this.mA=1,this.qB=!1,this.rB=!1,this.cs=!1,this.EB(t)},THREE.UB.prototype=Object.create(THREE.oB.prototype),THREE.UB.prototype.constructor=THREE.UB,THREE.UB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.lA=t.lA,this.mA=t.mA,this},THREE.VB=function(t){THREE.oB.call(this),this.type="MeshPhongMaterial",this.color=new THREE.T(16777215),this.Hy=new THREE.T(1118481),this.Jy=30,this.map=null,this.Ty=null,this.vA=1,this.Yy=null,this.wA=1,this.Iy=new THREE.T(0),this.rA=1,this.Oy=null,this.bz=null,this.gz=1,this.hz=null,this.mz=new THREE.ea(1,1),this.oA=null,this.pA=1,this.qA=0,this.nz=null,this.Cz=null,this.sA=null,this.tA=THREE.hh,this.uA=1,this.NB=.98,this.lA=!1,this.mA=1,this.OB="round",this.PB="round",this.QB=!1,this.cs=!1,this.ds=!1,this.EB(t)},THREE.VB.prototype=Object.create(THREE.oB.prototype),THREE.VB.prototype.constructor=THREE.VB,THREE.VB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.Hy.Di(t.Hy),this.Jy=t.Jy,this.map=t.map,this.Ty=t.Ty,this.vA=t.vA,this.Yy=t.Yy,this.wA=t.wA,this.Iy.Di(t.Iy),this.Oy=t.Oy,this.rA=t.rA,this.bz=t.bz,this.gz=t.gz,this.hz=t.hz,this.mz.Di(t.mz),this.oA=t.oA,this.pA=t.pA,this.qA=t.qA,this.nz=t.nz,this.Cz=t.Cz,this.sA=t.sA,this.tA=t.tA,this.uA=t.uA,this.NB=t.NB,this.lA=t.lA,this.mA=t.mA,this.OB=t.OB,this.PB=t.PB,this.QB=t.QB,this.cs=t.cs,this.ds=t.ds,this},THREE.WB=function(t){THREE.oB.call(this),this.XB={YB:""},this.type="MeshStandardMaterial",this.color=new THREE.T(16777215),this.eA=.5,this.fA=.5,this.map=null,this.Ty=null,this.vA=1,this.Yy=null,this.wA=1,this.Iy=new THREE.T(0),this.rA=1,this.Oy=null,this.bz=null,this.gz=1,this.hz=null,this.mz=new THREE.ea(1,1),this.oA=null,this.pA=1,this.qA=0,this.xz=null,this.sz=null,this.Cz=null,this.sA=null,this.ZB=1,this.NB=.98,this.lA=!1,this.mA=1,this.OB="round",this.PB="round",this.QB=!1,this.cs=!1,this.ds=!1,this.EB(t)},THREE.WB.prototype=Object.create(THREE.oB.prototype),THREE.WB.prototype.constructor=THREE.WB,THREE.WB.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.XB={YB:""},this.color.Di(t.color),this.eA=t.eA,this.fA=t.fA,this.map=t.map,this.Ty=t.Ty,this.vA=t.vA,this.Yy=t.Yy,this.wA=t.wA,this.Iy.Di(t.Iy),this.Oy=t.Oy,this.rA=t.rA,this.bz=t.bz,this.gz=t.gz,this.hz=t.hz,this.mz.Di(t.mz),this.oA=t.oA,this.pA=t.pA,this.qA=t.qA,this.xz=t.xz,this.sz=t.sz,this.Cz=t.Cz,this.sA=t.sA,this.ZB=t.ZB,this.NB=t.NB,this.lA=t.lA,this.mA=t.mA,this.OB=t.OB,this.PB=t.PB,this.QB=t.QB,this.cs=t.cs,this.ds=t.ds,this},THREE.$B=function(t){THREE.WB.call(this),this.XB={_B:""},this.type="MeshPhysicalMaterial",this.uA=.5,this.aC=0,this.bC=0,this.EB(t)},THREE.$B.prototype=Object.create(THREE.WB.prototype),THREE.$B.prototype.constructor=THREE.$B,THREE.$B.prototype.Di=function(t){return THREE.WB.prototype.Di.call(this,t),this.XB={_B:""},this.uA=t.uA,this.aC=t.aC,this.bC=t.bC,this},THREE.cC=function(t){this.yq=THREE.Math._o(),this.type="MultiMaterial",this.or=t instanceof Array?t:[],this.visible=!0},THREE.cC.prototype={constructor:THREE.cC,toJSON:function(t){for(var e={qr:{version:4.2,type:"material",rr:"MaterialExporter"},yq:this.yq,type:this.type,or:[]},n=this.or,i=0,r=n.length;i<r;i++){var o=n[i].toJSON(t);delete o.qr,e.or.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.or.length;e++)t.or.push(this.or[e].clone());return t.visible=this.visible,t}},THREE.dC=function(t){THREE.oB.call(this),this.type="PointsMaterial",this.color=new THREE.T(16777215),this.map=null,this.size=1,this.nA=!0,this.rB=!1,this.EB(t)},THREE.dC.prototype=Object.create(THREE.oB.prototype),THREE.dC.prototype.constructor=THREE.dC,THREE.dC.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.map=t.map,this.size=t.size,this.nA=t.nA,this},THREE.eC=function(t){THREE.oB.call(this),this.type="ShaderMaterial",this.XB={},this.l={},this.B="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.C="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.GB=1,this.lA=!1,this.mA=1,this.qB=!1,this.rB=!1,this.fC=!1,this.QB=!1,this.cs=!1,this.ds=!1,this.extensions={gC:!1,hC:!1,iC:!1,jC:!1},this.kC={color:[1,1,1],ss:[0,0],ts:[0,0]},this.lC=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.EB(t))},THREE.eC.prototype=Object.create(THREE.oB.prototype),THREE.eC.prototype.constructor=THREE.eC,THREE.eC.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.C=t.C,this.B=t.B,this.l=THREE.mC.clone(t.l),this.XB=t.XB,this.lA=t.lA,this.mA=t.mA,this.rB=t.rB,this.fC=t.fC,this.QB=t.QB,this.cs=t.cs,this.ds=t.ds,this.extensions=t.extensions,this},THREE.eC.prototype.toJSON=function(t){var e=THREE.oB.prototype.toJSON.call(this,t);return e.l=this.l,e.B=this.B,e.C=this.C,e},THREE.nC=function(t){THREE.eC.call(this,t),this.type="RawShaderMaterial"},THREE.nC.prototype=Object.create(THREE.eC.prototype),THREE.nC.prototype.constructor=THREE.nC,THREE.oC=function(t){THREE.oB.call(this),this.type="SpriteMaterial",this.color=new THREE.T(16777215),this.map=null,this.rotation=0,this.qB=!1,this.rB=!1,this.EB(t)},THREE.oC.prototype=Object.create(THREE.oB.prototype),THREE.oC.prototype.constructor=THREE.oC,THREE.oC.prototype.Di=function(t){return THREE.oB.prototype.Di.call(this,t),this.color.Di(t.color),this.map=t.map,this.rotation=t.rotation,this},THREE.pC=function(){THREE.eC.call(this,{l:THREE.mC.nd([THREE.qC.rB,{opacity:{value:1}}]),B:THREE.sC.rC,C:THREE.sC.tC}),this.rB=!0,this.D=!0,Object.defineProperties(this,{opacity:{Bq:!0,get:function(){return this.l.opacity.value},set:function(t){this.l.opacity.value=t}}})},THREE.pC.prototype=Object.create(THREE.eC.prototype),THREE.pC.prototype.constructor=THREE.pC,THREE.ZA=function(t,e,n,i,r,o,a,s,h,u){Object.defineProperty(this,"id",{value:THREE.uC++}),this.yq=THREE.Math._o(),this.name="",this.vC="",this.YA=void 0!==t?t:THREE.ZA.wC,this.jB=[],this.mapping=void 0!==e?e:THREE.ZA.xC,this.Dy=void 0!==n?n:THREE.yh,this.Ey=void 0!==i?i:THREE.yh,this.wx=void 0!==r?r:THREE.Dh,this.xx=void 0!==o?o:THREE.Fh,this.Fy=void 0!==h?h:1,this.format=void 0!==a?a:THREE.Th,this.type=void 0!==s?s:THREE.Gh,this.offset=new THREE.ea(0,0),this.repeat=new THREE.ea(1,1),this.Bx=!0,this.yC=!1,this.flipY=!0,this.zC=4,this.encoding=void 0!==u?u:THREE.ri,this.version=0,this.ht=null},THREE.ZA.wC=void 0,THREE.ZA.xC=THREE.ph,THREE.ZA.prototype={constructor:THREE.ZA,set Ar(t){t===!0&&this.version++},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.YA=t.YA,this.jB=t.jB.slice(0),this.mapping=t.mapping,this.Dy=t.Dy,this.Ey=t.Ey,this.wx=t.wx,this.xx=t.xx,this.Fy=t.Fy,this.format=t.format,this.type=t.type,this.offset.Di(t.offset),this.repeat.Di(t.repeat),this.Bx=t.Bx,this.yC=t.yC,this.flipY=t.flipY,this.zC=t.zC,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.pr[this.yq])return t.pr[this.yq];var n={qr:{version:4.4,type:"Texture",rr:"Texture.toJSON"},yq:this.yq,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.Dy,this.Ey],xx:this.xx,wx:this.wx,Fy:this.Fy,flipY:this.flipY};if(void 0!==this.YA){var i=this.YA;void 0===i.yq&&(i.yq=THREE.Math._o()),void 0===t.images[i.yq]&&(t.images[i.yq]={yq:i.yq,url:e(i)}),n.YA=i.yq}return t.pr[this.yq]=n,n},Ks:function(){this.dispatchEvent({type:"dispose"})},AC:function(t){if(this.mapping===THREE.ph){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.Dy){case THREE.xh:t.x=t.x-Math.floor(t.x);break;case THREE.yh:t.x=t.x<0?0:1;break;case THREE.zh:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.Ey){case THREE.xh:t.y=t.y-Math.floor(t.y);break;case THREE.yh:t.y=t.y<0?0:1;break;case THREE.zh:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(THREE.ZA.prototype,THREE.bq.prototype),THREE.uC=0,THREE.BC=function(t,e,n,i,r,o,a,s,h){THREE.ZA.call(this,null,i,r,o,a,s,THREE.Xh,n,h),this.YA={width:t,height:e},this.type=void 0!==n?n:THREE.Jh,this.wx=void 0!==a?a:THREE.Ah,this.xx=void 0!==s?s:THREE.Ah,this.flipY=!1,this.Bx=!1},THREE.BC.prototype=Object.create(THREE.ZA.prototype),THREE.BC.prototype.constructor=THREE.BC,THREE.CC=function(t,e,n,i,r,o,a,s,h){THREE.ZA.call(this,t,e,n,i,r,o,a,s,h),this.Ar=!0},THREE.CC.prototype=Object.create(THREE.ZA.prototype),THREE.CC.prototype.constructor=THREE.CC,THREE.eB=function(t,e,n,i,r,o,a,s,h,u){t=void 0!==t?t:[],e=void 0!==e?e:THREE.qh,THREE.ZA.call(this,t,e,n,i,r,o,a,s,h,u),this.flipY=!1},THREE.eB.prototype=Object.create(THREE.ZA.prototype),THREE.eB.prototype.constructor=THREE.eB,Object.defineProperty(THREE.eB.prototype,"images",{get:function(){return this.YA},set:function(t){this.YA=t}}),THREE.mB=function(t,e,n,i,r,o,a,s,h,u,c,f){THREE.ZA.call(this,null,o,a,s,h,u,i,r,c,f),this.YA={width:e,height:n},this.jB=t,this.flipY=!1,this.Bx=!1},THREE.mB.prototype=Object.create(THREE.ZA.prototype),THREE.mB.prototype.constructor=THREE.mB,THREE.iB=function(t,e,n,i,r,o,a,s,h,u,c,f){THREE.ZA.call(this,null,o,a,s,h,u,i,r,c,f),this.YA={data:t,width:e,height:n},this.wx=void 0!==h?h:THREE.Ah,this.xx=void 0!==u?u:THREE.Ah,this.flipY=!1,this.Bx=!1},THREE.iB.prototype=Object.create(THREE.ZA.prototype),THREE.iB.prototype.constructor=THREE.iB,THREE.DC=function(t,e,n,i,r,o,a,s,h){function u(){requestAnimationFrame(u),t.readyState>=t.HAVE_CURRENT_DATA&&(c.Ar=!0)}THREE.ZA.call(this,t,e,n,i,r,o,a,s,h),this.Bx=!1;var c=this;u()},THREE.DC.prototype=Object.create(THREE.ZA.prototype),THREE.DC.prototype.constructor=THREE.DC,THREE.aB=function(){THREE.wq.call(this),this.type="Group"},THREE.aB.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.aB}),THREE.mq=function(t,e){THREE.wq.call(this),this.type="Points",this.j=void 0!==t?t:new THREE.In,this.k=void 0!==e?e:new THREE.dC({color:16777215*Math.random()})},THREE.mq.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.mq,pq:function(){var t=new THREE.Gm,e=new THREE.xo,n=new THREE.Pn;return function(i,r){function o(t,n){var o=e.zo(t);if(o<f){var s=e.nn(t);s.Dm(h);var u=i.gq.origin.pm(s);if(u<i.near||u>i.hq)return;r.push({ln:u,EC:Math.sqrt(o),FC:s.clone(),index:n,face:null,object:a})}}var a=this,s=this.j,h=this.Km,u=i.iq.mq.threshold;if(null===s.No&&s.Oo(),n.Di(s.No),n.Dm(h),i.gq.Ln(n)!==!1){t.Jm(h),e.Di(i.gq).Dm(t);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,l=new THREE.K;if(s instanceof THREE.In){var p=s.index,d=s.attributes,E=d.position.ec;if(null!==p)for(var v=p.ec,g=0,m=v.length;g<m;g++){var y=v[g];l.$i(E,3*y),o(l,y)}else for(var g=0,T=E.length/3;g<T;g++)l.$i(E,3*g),o(l,g)}else for(var R=s.Hn,g=0,T=R.length;g<T;g++)o(R[g],g)}}}(),clone:function(){return new this.constructor(this.j,this.k).Di(this)}}),THREE.kq=function(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.GC(t,e)):(THREE.wq.call(this),this.type="Line",this.j=void 0!==t?t:new THREE.In,void(this.k=void 0!==e?e:new THREE.FB({color:16777215*Math.random()})))},THREE.kq.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.kq,pq:function(){var t=new THREE.Gm,e=new THREE.xo,n=new THREE.Pn;return function(i,r){var o=i.qq,a=o*o,s=this.j,h=this.Km;if(null===s.No&&s.Oo(),n.Di(s.No),n.Dm(h),i.gq.Ln(n)!==!1){t.Jm(h),e.Di(i.gq).Dm(t);var u=new THREE.K,c=new THREE.K,f=new THREE.K,l=new THREE.K,p=this instanceof THREE.GC?2:1;if(s instanceof THREE.In){var d=s.index,E=s.attributes,v=E.position.ec;if(null!==d)for(var g=d.ec,m=0,y=g.length-1;m<y;m+=p){var T=g[m],R=g[m+1];u.$i(v,3*T),c.$i(v,3*R);var w=e.Ao(u,c,l,f);if(!(w>a)){l.Dm(this.Km);var H=i.gq.origin.pm(l);H<i.near||H>i.hq||r.push({ln:H,FC:f.clone().Dm(this.Km),index:m,face:null,HC:null,object:this})}}else for(var m=0,y=v.length/3-1;m<y;m+=p){u.$i(v,3*m),c.$i(v,3*m+3);var w=e.Ao(u,c,l,f);if(!(w>a)){l.Dm(this.Km);var H=i.gq.origin.pm(l);H<i.near||H>i.hq||r.push({ln:H,FC:f.clone().Dm(this.Km),index:m,face:null,HC:null,object:this})}}}else if(s instanceof THREE.Gn)for(var b=s.Hn,x=b.length,m=0;m<x-1;m+=p){var w=e.Ao(b[m],b[m+1],l,f);if(!(w>a)){l.Dm(this.Km);var H=i.gq.origin.pm(l);H<i.near||H>i.hq||r.push({ln:H,FC:f.clone().Dm(this.Km),index:m,face:null,HC:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.j,this.k).Di(this)}}),THREE.GC=function(t,e){THREE.kq.call(this,t,e),this.type="LineSegments"},THREE.GC.prototype=Object.assign(Object.create(THREE.kq.prototype),{constructor:THREE.GC}),THREE.jq=function(t,e){THREE.wq.call(this),this.type="Mesh",this.j=void 0!==t?t:new THREE.In,this.k=void 0!==e?e:new THREE.MB({color:16777215*Math.random()}),this.IC=THREE.oi,this.JC()},THREE.jq.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.jq,KC:function(t){this.IC=t},Di:function(t){return THREE.wq.prototype.Di.call(this,t),this.IC=t.IC,this},JC:function(){if(void 0!==this.j.cs&&this.j.cs.length>0){this.LC=-1,this.MC=[],this.NC={};for(var t=0,e=this.j.cs.length;t<e;t++)this.MC.push(0),this.NC[this.j.cs[t].name]=t}},OC:function(t){return void 0!==this.NC[t]?this.NC[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},pq:function(){function t(t,e,n,i,r,o,a){return THREE.tp.up(t,e,n,i,E),r.Xi(E.x),o.Xi(E.y),a.Xi(E.z),r.add(o).add(a),r.clone()}function e(t,e,n,i,r,o,a){var s,h=t.k;if(s=h.Hz===THREE.xg?n.Fo(o,r,i,!0,a):n.Fo(i,r,o,h.Hz!==THREE.yg,a),null===s)return null;g.Di(a),g.Dm(t.Km);var u=e.gq.origin.pm(g);return u<e.near||u>e.hq?null:{ln:u,FC:g.clone(),object:t}}function n(n,i,r,o,u,c,f,E){a.$i(o,3*c),s.$i(o,3*f),h.$i(o,3*E);var g=e(n,i,r,a,s,h,v);return g&&(u&&(l.$i(u,2*c),p.$i(u,2*f),d.$i(u,2*E),g.ss=t(v,a,s,h,l,p,d)),g.face=new THREE.sr(c,f,E,THREE.tp.Nn(a,s,h)),g.HC=c),g}var i=new THREE.Gm,r=new THREE.xo,o=new THREE.Pn,a=new THREE.K,s=new THREE.K,h=new THREE.K,u=new THREE.K,c=new THREE.K,f=new THREE.K,l=new THREE.ea,p=new THREE.ea,d=new THREE.ea,E=new THREE.K,v=new THREE.K,g=new THREE.K;return function(E,g){var m=this.j,y=this.k,T=this.Km;if(void 0!==y&&(null===m.No&&m.Oo(),o.Di(m.No),o.Dm(T),E.gq.Ln(o)!==!1&&(i.Jm(T),r.Di(E.gq).Dm(i),null===m.hs||r.xn(m.hs)!==!1))){var R,w;if(m instanceof THREE.In){var H,b,x,A=m.index,M=m.attributes,U=M.position.ec;if(void 0!==M.ss&&(R=M.ss.ec),null!==A)for(var O=A.ec,S=0,D=O.length;S<D;S+=3)H=O[S],b=O[S+1],x=O[S+2],w=n(this,E,r,U,R,H,b,x),w&&(w.HC=Math.floor(S/3),g.push(w));else for(var S=0,D=U.length;S<D;S+=9)H=S/3,b=H+1,x=H+2,w=n(this,E,r,U,R,H,b,x),w&&(w.index=H,g.push(w))}else if(m instanceof THREE.Gn){var C,L,P,N=y instanceof THREE.cC,I=N===!0?y.or:null,z=m.Hn,B=m.as,j=m.bs[0];j.length>0&&(R=j);for(var q=0,G=B.length;q<G;q++){var F=B[q],k=N===!0?I[F.vr]:y;if(void 0!==k){if(C=z[F.a],L=z[F.b],P=z[F.c],k.cs===!0){var V=m.cs,K=this.MC;a.set(0,0,0),s.set(0,0,0),h.set(0,0,0);for(var W=0,Z=V.length;W<Z;W++){var X=K[W];if(0!==X){var Y=V[W].Hn;a.gm(u.hm(Y[F.a],C),X),s.gm(c.hm(Y[F.b],L),X),h.gm(f.hm(Y[F.c],P),X)}}a.add(C),s.add(L),h.add(P),C=a,L=s,P=h}if(w=e(this,E,r,C,L,P,v)){if(R){var J=R[q];l.Di(J[0]),p.Di(J[1]),d.Di(J[2]),w.ss=t(v,C,L,P,l,p,d)}w.face=F,w.HC=q,g.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.j,this.k).Di(this)}}),THREE.PC=function(t){THREE.wq.call(this),this.type="Bone",this.QC=t},THREE.PC.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.PC,Di:function(t){return THREE.wq.prototype.Di.call(this,t),this.QC=t.QC,this}}),THREE.RC=function(t,e,n){if(this.SC=void 0===n||n,this.TC=new THREE.Gm,t=t||[],this.mw=t.slice(0),this.SC){var i=Math.sqrt(4*this.mw.length);i=THREE.Math.lp(Math.ceil(i)),i=Math.max(i,4),this.UC=i,this.VC=i,this.WC=new Float32Array(this.UC*this.VC*4),this.XC=new THREE.iB(this.WC,this.UC,this.VC,THREE.Th,THREE.Mh)}else this.WC=new Float32Array(16*this.mw.length);if(void 0===e)this.YC();else if(this.mw.length===e.length)this.ZC=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.ZC=[];for(var r=0,o=this.mw.length;r<o;r++)this.ZC.push(new THREE.Gm)}},Object.assign(THREE.RC.prototype,{
YC:function(){this.ZC=[];for(var t=0,e=this.mw.length;t<e;t++){var n=new THREE.Gm;this.mw[t]&&n.Jm(this.mw[t].Km),this.ZC.push(n)}},$C:function(){for(var t,e=0,n=this.mw.length;e<n;e++)t=this.mw[e],t&&t.Km.Jm(this.ZC[e]);for(var e=0,n=this.mw.length;e<n;e++)t=this.mw[e],t&&(t.parent instanceof THREE.PC?(t.matrix.Jm(t.parent.Km),t.matrix.multiply(t.Km)):t.matrix.Di(t.Km),t.matrix.so(t.position,t.Cq,t.scale))},update:function(){var t=new THREE.Gm;return function(){for(var e=0,n=this.mw.length;e<n;e++){var i=this.mw[e]?this.mw[e].Km:this.TC;t.Hm(i,this.ZC[e]),t.toArray(this.WC,16*e)}this.SC&&(this.XC.Ar=!0)}}(),clone:function(){return new THREE.RC(this.mw,this.ZC,this.SC)}}),THREE._A=function(t,e,n){THREE.jq.call(this,t,e),this.type="SkinnedMesh",this._C="attached",this.aD=new THREE.Gm,this.bD=new THREE.Gm;var i=[];if(this.j&&void 0!==this.j.mw){for(var r,o,a=0,s=this.j.mw.length;a<s;++a)o=this.j.mw[a],r=new THREE.PC(this),i.push(r),r.name=o.name,r.position.$i(o.cD),r.Cq.$i(o.dD),void 0!==o.eD&&r.scale.$i(o.eD);for(var a=0,s=this.j.mw.length;a<s;++a)o=this.j.mw[a],o.parent!==-1&&null!==o.parent&&void 0!==i[o.parent]?i[o.parent].add(i[a]):this.add(i[a])}this.fD(),this.En(!0),this.bind(new THREE.RC(i,void 0,n),this.Km)},THREE._A.prototype=Object.assign(Object.create(THREE.jq.prototype),{constructor:THREE._A,bind:function(t,e){this.lw=t,void 0===e&&(this.En(!0),this.lw.YC(),e=this.Km),this.aD.Di(e),this.bD.Jm(e)},$C:function(){this.lw.$C()},fD:function(){if(this.j instanceof THREE.Gn)for(var t=0;t<this.j.es.length;t++){var e=this.j.es[t],n=1/e.om();n!==1/0?e.Xi(n):e.set(1,0,0,0)}else if(this.j instanceof THREE.In)for(var i=new THREE.Ym,r=this.j.attributes.gD,t=0;t<r.count;t++){i.x=r.Un(t),i.y=r.Vn(t),i.z=r.Wn(t),i.w=r.Jr(t);var n=1/i.om();n!==1/0?i.Xi(n):i.set(1,0,0,0),r.Lr(t,i.x,i.y,i.z,i.w)}},En:function(t){THREE.jq.prototype.En.call(this,!0),"attached"===this._C?this.bD.Jm(this.Km):"detached"===this._C?this.bD.Jm(this.aD):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this._C)},clone:function(){return new this.constructor(this.j,this.k,this.lw.SC).Di(this)}}),THREE.lq=function(){THREE.wq.call(this),this.type="LOD",Object.defineProperties(this,{bB:{Bq:!0,value:[]}})},THREE.lq.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.lq,Di:function(t){THREE.wq.prototype.Di.call(this,t,!1);for(var e=t.bB,n=0,i=e.length;n<i;n++){var r=e[n];this.cB(r.object.clone(),r.ln)}return this},cB:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.bB,i=0;i<n.length&&!(e<n[i].ln);i++);n.splice(i,0,{ln:e,object:t}),this.add(t)},hD:function(t){for(var e=this.bB,n=1,i=e.length;n<i&&!(t<e[n].ln);n++);return e[n-1].object},pq:function(){var t=new THREE.K;return function(e,n){t.Vm(this.Km);var i=e.gq.origin.pm(t);this.hD(i).pq(e,n)}}(),update:function(){var t=new THREE.K,e=new THREE.K;return function(n){var i=this.bB;if(i.length>1){t.Vm(n.Km),e.Vm(this.Km);var r=t.pm(e);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].ln;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=THREE.wq.prototype.toJSON.call(this,t);e.object.bB=[];for(var n=this.bB,i=0,r=n.length;i<r;i++){var o=n[i];e.object.bB.push({object:o.object.yq,ln:o.ln})}return e}}),THREE.nq=function(t){THREE.wq.call(this),this.type="Sprite",this.k=void 0!==t?t:new THREE.oC},THREE.nq.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.nq,pq:function(){var t=new THREE.K;return function(e,n){t.Vm(this.Km);var i=e.gq.zo(t),r=this.scale.x*this.scale.y/4;i>r||n.push({ln:Math.sqrt(i),FC:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.k).Di(this)}}),THREE.iD=function(t,e,n,i,r){THREE.wq.call(this),this.jD=[],this.kD=new THREE.K,this.lD=void 0,void 0!==t&&this.add(t,e,n,i,r)},THREE.iD.prototype=Object.assign(Object.create(THREE.wq.prototype),{constructor:THREE.iD,Di:function(t){THREE.wq.prototype.Di.call(this,t),this.kD.Di(t.kD),this.lD=t.lD;for(var e=0,n=t.jD.length;e<n;e++)this.jD.push(t.jD[e]);return this},add:function(t,e,n,i,r,o){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=new THREE.T(16777215)),void 0===i&&(i=THREE.Fg),n=Math.min(n,Math.max(0,n)),this.jD.push({G:t,size:e,ln:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,Gy:i})},mD:function(){var t,e,n=this.jD.length,i=2*-this.kD.x,r=2*-this.kD.y;for(t=0;t<n;t++)e=this.jD[t],e.x=this.kD.x+i*e.ln,e.y=this.kD.y+r*e.ln,e.nD=e.x*Math.PI*.25,e.rotation+=.25*(e.nD-e.rotation)}}),THREE.$A=function(){THREE.wq.call(this),this.type="Scene",this.background=null,this.qB=null,this.oD=null,this.pD=!0},THREE.$A.prototype=Object.create(THREE.wq.prototype),THREE.$A.prototype.constructor=THREE.$A,THREE.$A.prototype.Di=function(t,e){return THREE.wq.prototype.Di.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.qB&&(this.qB=t.qB.clone()),null!==t.oD&&(this.oD=t.oD.clone()),this.pD=t.pD,this.Fq=t.Fq,this},THREE.qD=function(t,e,n){this.name="",this.color=new THREE.T(t),this.near=void 0!==e?e:1,this.hq=void 0!==n?n:1e3},THREE.qD.prototype.clone=function(){return new THREE.qD(this.color.Oi(),this.near,this.hq)},THREE.rD=function(t,e){this.name="",this.color=new THREE.T(t),this.sD=void 0!==e?e:25e-5},THREE.rD.prototype.clone=function(){return new THREE.rD(this.color.Oi(),this.sD)},THREE.sC={},THREE.sC.tD="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",THREE.sC.uD="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",THREE.sC.vD="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",THREE.sC.wD="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",THREE.sC.xD="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",THREE.sC.yD="\nvec3 transformed = vec3( position );\n",THREE.sC.zD="\nvec3 objectNormal = vec3( normal );\n",THREE.sC.AD="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",THREE.sC.BD="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",THREE.sC.CD="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",THREE.sC.DD="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",THREE.sC.ED="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",THREE.sC.FD="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",THREE.sC.GD="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",THREE.sC.HD="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",THREE.sC.ID="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",THREE.sC.JD="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",THREE.sC.KD="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",THREE.sC.LD="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",THREE.sC.MD="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.sC.ND="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",THREE.sC.OD="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",THREE.sC.PD="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",THREE.sC.QD="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",THREE.sC.RD="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",THREE.sC.SD="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",THREE.sC.TD="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",THREE.sC.UD="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",THREE.sC.VD="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",THREE.sC.WD="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",THREE.sC.XD="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",THREE.sC.YD="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",THREE.sC.ZD="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",THREE.sC.$D="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",THREE.sC._D="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",THREE.sC.aE="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
THREE.sC.bE="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",THREE.sC.cE="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",THREE.sC.dE="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",THREE.sC.eE="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",THREE.sC.fE="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",THREE.sC.gE="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",THREE.sC.hE="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",THREE.sC.iE="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",THREE.sC.jE="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",THREE.sC.kE="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",THREE.sC.lE="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",THREE.sC.mE="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",THREE.sC.nE="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",THREE.sC.oE="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",THREE.sC.pE="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",THREE.sC.qE="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",THREE.sC.rE="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",THREE.sC.sE="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",THREE.sC.tE="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",THREE.sC.uE="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",THREE.sC.vE="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",THREE.sC.wE="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",THREE.sC.xE="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",THREE.sC.yE="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n";THREE.sC.zE="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n";THREE.sC.AE="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",THREE.sC.BE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",THREE.sC.CE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",THREE.sC.DE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",THREE.sC.EE="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",THREE.sC.FE="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",THREE.sC.GE="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",THREE.sC.HE="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",THREE.sC.IE="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",THREE.sC.JE="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",THREE.sC.KE="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",THREE.sC.LE="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",THREE.sC.ME="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",THREE.sC.NE="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",THREE.sC.OE="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",THREE.sC.PE="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",THREE.sC.QE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",THREE.sC.RE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",THREE.sC.SE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",THREE.sC.TE="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",THREE.mC={nd:function(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i)e[r]=i[r]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r instanceof THREE.T||r instanceof THREE.ea||r instanceof THREE.K||r instanceof THREE.Ym||r instanceof THREE.Qn||r instanceof THREE.Gm||r instanceof THREE.ZA?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}},THREE.qC={KD:{UE:{value:new THREE.T(15658734)},opacity:{value:1},map:{value:null},VE:{value:new THREE.Ym(0,0,1,1)},nz:{value:null},Cz:{value:null},sA:{value:null},WE:{value:-1},uA:{value:1},NB:{value:.98}},XE:{Yy:{value:null},wA:{value:1}},YE:{Ty:{value:null},vA:{value:1}},ZE:{Oy:{value:null}},$E:{bz:{value:null},gz:{value:1}},_E:{hz:{value:null},mz:{value:new THREE.ea(1,1)}},aF:{oA:{value:null},pA:{value:1},qA:{value:0}},bF:{xz:{value:null}},cF:{sz:{value:null}},qB:{dF:{value:25e-5},eF:{value:1},fF:{value:2e3},gF:{value:new THREE.T(16777215)}},rB:{hF:{value:[]},iF:{value:[],properties:{direction:{},color:{},hy:{},jF:{},kF:{},lF:{}}},mF:{value:[]},nF:{value:[]},oF:{value:[],properties:{color:{},position:{},direction:{},ln:{},pF:{},qF:{},Zx:{},hy:{},jF:{},kF:{},lF:{}}},rF:{value:[]},sF:{value:[]},tF:{value:[],properties:{color:{},position:{},Zx:{},ln:{},hy:{},jF:{},kF:{},lF:{}}},uF:{value:[]},vF:{value:[]},wF:{value:[],properties:{direction:{},xF:{},Yx:{}}}},points:{UE:{value:new THREE.T(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},VE:{value:new THREE.Ym(0,0,1,1)}}},THREE.sC.yF="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",THREE.sC.zF="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",THREE.sC.AF="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",THREE.sC.BF="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",THREE.sC.CF="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",
THREE.sC.DF="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",THREE.sC.EF="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",THREE.sC.FF="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",THREE.sC.GF="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.HF="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",THREE.sC.IF="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.JF="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",THREE.sC.KF="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.LF="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",THREE.sC.MF="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.NF="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",THREE.sC.OF="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.PF="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",THREE.sC.QF="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",THREE.sC.RF="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",THREE.sC.SF="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",THREE.sC.TF="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",THREE.sC.tC="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",THREE.sC.rC="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",THREE.UF={VF:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.XE,THREE.qC.qB]),B:THREE.sC.JF,C:THREE.sC.IF},WF:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.XE,THREE.qC.YE,THREE.qC.ZE,THREE.qC.qB,THREE.qC.rB,{Iy:{value:new THREE.T(0)}}]),B:THREE.sC.LF,C:THREE.sC.KF},XF:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.XE,THREE.qC.YE,THREE.qC.ZE,THREE.qC.$E,THREE.qC._E,THREE.qC.aF,THREE.qC.qB,THREE.qC.rB,{Iy:{value:new THREE.T(0)},Hy:{value:new THREE.T(1118481)},Jy:{value:30}}]),B:THREE.sC.NF,C:THREE.sC.MF},YF:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.XE,THREE.qC.YE,THREE.qC.ZE,THREE.qC.$E,THREE.qC._E,THREE.qC.aF,THREE.qC.bF,THREE.qC.cF,THREE.qC.qB,THREE.qC.rB,{Iy:{value:new THREE.T(0)},eA:{value:.5},fA:{value:0},ZB:{value:1}}]),B:THREE.sC.PF,C:THREE.sC.OF},points:{l:THREE.mC.nd([THREE.qC.points,THREE.qC.qB]),B:THREE.sC.TF,C:THREE.sC.SF},ZF:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.qB,{scale:{value:1},KB:{value:1},$F:{value:2}}]),B:THREE.sC.HF,C:THREE.sC.GF},GA:{l:THREE.mC.nd([THREE.qC.KD,THREE.qC.aF]),B:THREE.sC.BF,C:THREE.sC.AF},Nn:{l:{opacity:{value:1}},B:THREE.sC.RF,C:THREE.sC.QF},_F:{l:{aG:{value:null},bG:{value:-1},opacity:{value:1}},B:THREE.sC.zF,C:THREE.sC.yF},cG:{l:{dG:{value:null},bG:{value:-1}},B:THREE.sC.FF,C:THREE.sC.EF},eG:{l:{fG:{value:new THREE.K}},B:THREE.sC.DF,C:THREE.sC.CF}},THREE.UF.gG={l:THREE.mC.nd([THREE.UF.YF.l,{aC:{value:0},bC:{value:0}}]),B:THREE.sC.PF,C:THREE.sC.OF},THREE.hG=function(t){function e(){return null===et?dt:1}function n(t,e,n,i){F===!0&&(t*=i,e*=i,n*=i),St.clearColor(t,e,n,i)}function i(){St.init(),St.scissor(at.Di(Et).Xi(dt)),St.viewport(ht.Di(gt).Xi(dt)),n(ct.r,ct.Ci,ct.b,ft)}function r(){tt=null,ot=null,rt="",it=-1,St.reset()}function o(t){t.preventDefault(),r(),i(),Dt.clear()}function a(t){var e=t.target;e.removeEventListener("dispose",a),s(e)}function s(t){h(t),Dt.delete(t)}function h(t){var e=Dt.get(t).pH;t.pH=void 0,void 0!==e&&Pt.qH(e)}function u(t,e,n,i){var r;if(n instanceof THREE.dt&&(r=Ut.get("ANGLE_instanced_arrays"),null===r))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),St.sH();var o=n.attributes,a=e.xH(),s=t.kC;for(var h in a){var u=a[h];if(u>=0){var c=o[h];if(void 0!==c){var f=_t.FLOAT,l=c.ec,p=c.zr;l instanceof Float32Array?f=_t.FLOAT:l instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):l instanceof Uint16Array?f=_t.UNSIGNED_SHORT:l instanceof Int16Array?f=_t.SHORT:l instanceof Uint32Array?f=_t.UNSIGNED_INT:l instanceof Int32Array?f=_t.INT:l instanceof Int8Array?f=_t.BYTE:l instanceof Uint8Array&&(f=_t.UNSIGNED_BYTE);var d=c.vm,E=Lt.HH(c);if(c instanceof THREE.Jn){var v=c.data,g=v.Kn,m=c.offset;v instanceof THREE.Zr?(St.KH(u,v.Xr,r),void 0===n.et&&(n.et=v.Xr*v.count)):St.zH(u),_t.bindBuffer(_t.ARRAY_BUFFER,E),_t.vertexAttribPointer(u,d,f,p,g*v.ec.BYTES_PER_ELEMENT,(i*g+m)*v.ec.BYTES_PER_ELEMENT)}else c instanceof THREE.Wr?(St.KH(u,c.Xr,r),void 0===n.et&&(n.et=c.Xr*c.count)):St.zH(u),_t.bindBuffer(_t.ARRAY_BUFFER,E),_t.vertexAttribPointer(u,d,f,p,0,i*d*c.ec.BYTES_PER_ELEMENT)}else if(void 0!==s){var y=s[h];if(void 0!==y)switch(y.length){case 2:_t.vertexAttrib2fv(u,y);break;case 3:_t.vertexAttrib3fv(u,y);break;case 4:_t.vertexAttrib4fv(u,y);break;default:_t.vertexAttrib1fv(u,y)}}}}St.DH()}function c(t,e){return Math.abs(e[0])-Math.abs(t[0])}function f(t,e){return t.object.Mq!==e.object.Mq?t.object.Mq-e.object.Mq:t.k.pH&&e.k.pH&&t.k.pH!==e.k.pH?t.k.pH.id-e.k.pH.id:t.k.id!==e.k.id?t.k.id-e.k.id:t.z!==e.z?t.z-e.z:t.id-e.id}function l(t,e){return t.object.Mq!==e.object.Mq?t.object.Mq-e.object.Mq:t.z!==e.z?e.z-t.z:t.id-e.id}function p(t,e,n,i,r){var o,a;n.D?(o=Z,a=++X):(o=K,a=++W);var s=o[a];void 0!==s?(s.id=t.id,s.object=t,s.j=e,s.k=n,s.z=bt.z,s.group=r):(s={id:t.id,object:t,j:e,k:n,z:bt.z,group:r},o.push(s))}function d(t){var e=t.j;return null===e.No&&e.Oo(),wt.Di(e.No).Dm(t.Km),v(wt)}function E(t){return wt.jn.set(0,0,0),wt.N=.7071067811865476,wt.Dm(t.Km),v(wt)}function v(t){if(!mt.Ln(t))return!1;var e=yt.SH;if(0===e)return!0;var n=$.xB,i=t.jn,r=-t.N,o=0;do if(n[o].zn(i)<r)return!1;while(++o!==e);return!0}function g(t,e){if(t.visible!==!1){if(t.Iq.test(e.Iq))if(t instanceof THREE.Wx)V.push(t);else if(t instanceof THREE.nq)t.Lq!==!1&&E(t)!==!0||J.push(t);else if(t instanceof THREE.iD)Q.push(t);else if(t instanceof THREE.TH)$.qG===!0&&(bt.Vm(t.Km),bt.Em(Ht)),p(t,null,t.k,bt.z,null);else if((t instanceof THREE.jq||t instanceof THREE.kq||t instanceof THREE.mq)&&(t instanceof THREE._A&&t.lw.update(),t.Lq===!1||d(t)===!0)){var n=t.k;if(n.visible===!0){$.qG===!0&&(bt.Vm(t.Km),bt.Em(Ht));var i=Lt.update(t);if(n instanceof THREE.cC)for(var r=i.us,o=n.or,a=0,s=r.length;a<s;a++){var h=r[a],u=o[h.vr];u.visible===!0&&p(t,i,u,bt.z,h)}else p(t,i,n,bt.z,null)}}for(var c=t.children,a=0,s=c.length;a<s;a++)g(c[a],e)}}function m(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,h=a.j,u=void 0===i?a.k:i,c=a.group;if(s.Dq.Hm(e.ux,s.Km),s.Eq._n(s.Dq),s instanceof THREE.TH){T(u);var f=R(e,n,u,s);rt="",s.Dx(function(t){$.rH(t,f,u)})}else $.EH(e,n,h,u,s,c)}}function y(t,e,n){var i=Dt.get(t),r=Pt.UH(t,xt,e,yt.SH,n),o=Pt.VH(t,r),s=i.pH,u=!0;if(void 0===s)t.addEventListener("dispose",a);else if(s.code!==o)h(t);else{if(void 0!==r.WH)return;u=!1}if(u){if(r.WH){var c=THREE.UF[r.WH];i.XH={name:t.type,l:THREE.mC.clone(c.l),B:c.B,C:c.C}}else i.XH={name:t.type,l:t.l,B:t.B,C:t.C};t.XH=i.XH,s=Pt.YH(t,r,o),i.pH=s,t.pH=s}var f=s.xH();if(t.cs){t.ZH=0;for(var l=0;l<$.zG;l++)f["morphTarget"+l]>=0&&t.ZH++}if(t.ds){t.$H=0;for(var l=0;l<$.AG;l++)f["morphNormal"+l]>=0&&t.$H++}var p=i.XH.l;(t instanceof THREE.eC||t instanceof THREE.nC)&&t.fC!==!0||(i._H=yt.SH,p.xB=yt.aI),t.rB&&(i.bI=xt.hash,p.hF.value=xt.CG,p.iF.value=xt.DG,p.oF.value=xt.EG,p.tF.value=xt.FC,p.wF.value=xt.FG,p.mF.value=xt.mF,p.nF.value=xt.nF,p.rF.value=xt.rF,p.sF.value=xt.sF,p.uF.value=xt.uF,p.vF.value=xt.vF);var d=i.pH.FH(),E=THREE.dI.cI(d.eI,p);i.fI=E,i.gI=THREE.dI.hI(E,p)}function T(t){t.Hz!==THREE.yg?St.enable(_t.CULL_FACE):St.disable(_t.CULL_FACE),St.iI(t.Hz===THREE.xg),t.D===!0?St.NH(t.Gy,t.blendEquation,t.sB,t.tB,t.wB,t.uB,t.vB,t.BB):St.NH(THREE.Eg),St.jI(t.depthFunc),St.PH(t.iA),St.QH(t.jA),St.RH(t.kA),St.kI(t.polygonOffset,t.zB,t.AB)}function R(t,e,n,i){ut=0;var r=Dt.get(n);if(Tt){if(Rt||t!==ot){var o=t===ot&&n.id===it;yt.lI(n.xB,n.yB,t,r,o)}void 0!==r._H&&r._H!==yt.SH&&(n.Ar=!0)}void 0===r.pH&&(n.Ar=!0),void 0!==r.bI&&r.bI!==xt.hash&&(n.Ar=!0),n.Ar&&(y(n,e,i),n.Ar=!1);var a=!1,s=!1,h=!1,u=r.pH,c=u.FH(),f=r.XH.l;if(u.id!==tt&&(_t.useProgram(u.pH),tt=u.id,a=!0,s=!0,h=!0),n.id!==it&&(it=n.id,s=!0),a||t!==ot){if(c.set(_t,t,"projectionMatrix"),Ot.mI&&c.fw(_t,"logDepthBufFC",2/(Math.log(t.hq+1)/Math.LN2)),t!==ot&&(ot=t,s=!0,h=!0),n instanceof THREE.eC||n instanceof THREE.VB||n instanceof THREE.WB||n.sA){var l=c.map.nI;void 0!==l&&l.fw(_t,bt.Vm(t.Km))}(n instanceof THREE.VB||n instanceof THREE.TB||n instanceof THREE.MB||n instanceof THREE.WB||n instanceof THREE.eC||n.QB)&&c.fw(_t,"viewMatrix",t.ux),c.set(_t,$,"toneMappingExposure"),c.set(_t,$,"toneMappingWhitePoint")}if(n.QB){c.oI(_t,i,"bindMatrix"),c.oI(_t,i,"bindMatrixInverse");var p=i.lw;p&&(Ot.pI&&p.SC?(c.set(_t,p,"boneTexture"),c.set(_t,p,"boneTextureWidth"),c.set(_t,p,"boneTextureHeight")):c.oI(_t,p,"boneMatrices"))}s&&(n.rB&&D(f,h),e&&n.qB&&A(f,e),(n instanceof THREE.MB||n instanceof THREE.TB||n instanceof THREE.VB||n instanceof THREE.WB||n instanceof THREE.RB)&&w(f,n),n instanceof THREE.FB?H(f,n):n instanceof THREE.JB?(H(f,n),b(f,n)):n instanceof THREE.dC?x(f,n):n instanceof THREE.TB?M(f,n):n instanceof THREE.VB?U(f,n):n instanceof THREE.$B?S(f,n):n instanceof THREE.WB?O(f,n):n instanceof THREE.RB?n.oA&&(f.oA.value=n.oA,f.pA.value=n.pA,f.qA.value=n.qA):n instanceof THREE.UB&&(f.opacity.value=n.opacity),THREE.dI.upload(_t,r.fI,f,$)),c.set(_t,i,"modelViewMatrix"),c.set(_t,i,"normalMatrix"),c.fw(_t,"modelMatrix",i.Km);var d=r.gI;return null!==d&&(THREE.dI.qI(d,f,i,t),THREE.dI.upload(_t,d,f,$)),u}function w(t,e){t.opacity.value=e.opacity,t.UE.value=e.color,e.Iy&&t.Iy.value.Di(e.Iy).Xi(e.rA),t.map.value=e.map,t.nz.value=e.nz,t.Cz.value=e.Cz,e.Yy&&(t.Yy.value=e.Yy,t.wA.value=e.wA);var n;if(e.map?n=e.map:e.nz?n=e.nz:e.oA?n=e.oA:e.hz?n=e.hz:e.bz?n=e.bz:e.xz?n=e.xz:e.sz?n=e.sz:e.Cz?n=e.Cz:e.Oy&&(n=e.Oy),void 0!==n){n instanceof THREE.rI&&(n=n.G);var i=n.offset,r=n.repeat;t.VE.value.set(i.x,i.y,r.x,r.y)}t.sA.value=e.sA,t.WE.value=e.sA instanceof THREE.eB?-1:1,t.uA.value=e.uA,t.NB.value=e.NB}function H(t,e){t.UE.value=e.color,t.opacity.value=e.opacity}function b(t,e){t.KB.value=e.KB,t.$F.value=e.KB+e.LB,t.scale.value=e.scale}function x(t,e){if(t.UE.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*dt,t.scale.value=.5*I.clientHeight,t.map.value=e.map,null!==e.map){var n=e.map.offset,i=e.map.repeat;t.VE.value.set(n.x,n.y,i.x,i.y)}}function A(t,e){t.gF.value=e.color,e instanceof THREE.qD?(t.eF.value=e.near,t.fF.value=e.hq):e instanceof THREE.rD&&(t.dF.value=e.sD)}function M(t,e){e.Ty&&(t.Ty.value=e.Ty,t.vA.value=e.vA),e.Oy&&(t.Oy.value=e.Oy)}function U(t,e){t.Hy.value=e.Hy,t.Jy.value=Math.max(e.Jy,1e-4),e.Ty&&(t.Ty.value=e.Ty,t.vA.value=e.vA),e.Oy&&(t.Oy.value=e.Oy),e.bz&&(t.bz.value=e.bz,t.gz.value=e.gz),e.hz&&(t.hz.value=e.hz,t.mz.value.Di(e.mz)),e.oA&&(t.oA.value=e.oA,t.pA.value=e.pA,t.qA.value=e.qA)}function O(t,e){t.eA.value=e.eA,t.fA.value=e.fA,e.xz&&(t.xz.value=e.xz),e.sz&&(t.sz.value=e.sz),e.Ty&&(t.Ty.value=e.Ty,t.vA.value=e.vA),e.Oy&&(t.Oy.value=e.Oy),e.bz&&(t.bz.value=e.bz,t.gz.value=e.gz),e.hz&&(t.hz.value=e.hz,t.mz.value.Di(e.mz)),e.oA&&(t.oA.value=e.oA,t.pA.value=e.pA,t.qA.value=e.qA),e.sA&&(t.ZB.value=e.ZB)}function S(t,e){t.aC.value=e.aC,t.bC.value=e.bC,O(t,e)}function D(t,e){t.hF.Ar=e,t.iF.Ar=e,t.tF.Ar=e,t.oF.Ar=e,t.wF.Ar=e}function C(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];r.Jq&&(xt.GG[e++]=r)}xt.GG.length=e}function L(t,e){var n,i,r,o,a,s,h,u=0,c=0,f=0,l=e.ux,p=0,d=0,E=0,v=0;for(n=0,i=t.length;n<i;n++)if(r=t[n],o=r.color,a=r.Xx,s=r.ln,h=r.hy&&r.hy.map?r.hy.map.G:null,r instanceof THREE.ey)u+=o.r*a,c+=o.Ci*a,f+=o.b*a;else if(r instanceof THREE.gy){var g=Nt.get(r);g.color.Di(r.color).Xi(r.Xx),g.direction.Vm(r.Km),bt.Vm(r.target.Km),g.direction.sub(bt),g.direction.Mm(l),g.hy=r.Jq,r.Jq&&(g.jF=r.hy.bias,g.kF=r.hy.N,g.lF=r.hy.by),xt.mF[p]=h,xt.nF[p]=r.hy.matrix,xt.DG[p++]=g}else if(r instanceof THREE.ly){var g=Nt.get(r);g.position.Vm(r.Km),g.position.Dm(l),g.color.Di(o).Xi(a),g.ln=s,g.direction.Vm(r.Km),bt.Vm(r.target.Km),g.direction.sub(bt),g.direction.Mm(l),g.pF=Math.cos(r.angle),g.qF=Math.cos(r.angle*(1-r.$x)),g.Zx=0===r.ln?0:r.Zx,g.hy=r.Jq,r.Jq&&(g.jF=r.hy.bias,g.kF=r.hy.N,g.lF=r.hy.by),xt.rF[E]=h,xt.sF[E]=r.hy.matrix,xt.EG[E++]=g}else if(r instanceof THREE.ky){var g=Nt.get(r);g.position.Vm(r.Km),g.position.Dm(l),g.color.Di(r.color).Xi(r.Xx),g.ln=r.ln,g.Zx=0===r.ln?0:r.Zx,g.hy=r.Jq,r.Jq&&(g.jF=r.hy.bias,g.kF=r.hy.N,g.lF=r.hy.by),xt.uF[d]=h,void 0===xt.vF[d]&&(xt.vF[d]=new THREE.Gm),bt.Vm(r.Km).rd(),xt.vF[d].identity().setPosition(bt),xt.FC[d++]=g}else if(r instanceof THREE.jy){var g=Nt.get(r);g.direction.Vm(r.Km),g.direction.Mm(l),g.direction.normalize(),g.xF.Di(r.color).Xi(a),g.Yx.Di(r.Yx).Xi(a),xt.FG[v++]=g}xt.CG[0]=u,xt.CG[1]=c,xt.CG[2]=f,xt.DG.length=p,xt.EG.length=E,xt.FC.length=d,xt.FG.length=v,xt.hash=p+","+d+","+E+","+v+","+xt.GG.length}function P(){var t=ut;return t>=Ot.uI&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Ot.uI),ut+=1,t}function N(t){var e;if(t===THREE.xh)return _t.REPEAT;if(t===THREE.yh)return _t.CLAMP_TO_EDGE;if(t===THREE.zh)return _t.MIRRORED_REPEAT;if(t===THREE.Ah)return _t.NEAREST;if(t===THREE.Bh)return _t.NEAREST_MIPMAP_NEAREST;if(t===THREE.Ch)return _t.NEAREST_MIPMAP_LINEAR;if(t===THREE.Dh)return _t.LINEAR;if(t===THREE.Eh)return _t.LINEAR_MIPMAP_NEAREST;if(t===THREE.Fh)return _t.LINEAR_MIPMAP_LINEAR;if(t===THREE.Gh)return _t.UNSIGNED_BYTE;if(t===THREE.Oh)return _t.UNSIGNED_SHORT_4_4_4_4;if(t===THREE.Ph)return _t.UNSIGNED_SHORT_5_5_5_1;if(t===THREE.Qh)return _t.UNSIGNED_SHORT_5_6_5;if(t===THREE.Hh)return _t.BYTE;if(t===THREE.Ih)return _t.SHORT;if(t===THREE.Jh)return _t.UNSIGNED_SHORT;if(t===THREE.Kh)return _t.INT;if(t===THREE.Lh)return _t.UNSIGNED_INT;if(t===THREE.Mh)return _t.FLOAT;if(e=Ut.get("OES_texture_half_float"),null!==e&&t===THREE.Nh)return e.HI;if(t===THREE.Rh)return _t.ALPHA;if(t===THREE.Sh)return _t.RGB;if(t===THREE.Th)return _t.RGBA;if(t===THREE.Uh)return _t.LUMINANCE;if(t===THREE.Vh)return _t.LUMINANCE_ALPHA;if(t===THREE.Xh)return _t.DEPTH_COMPONENT;if(t===THREE.Kg)return _t.FUNC_ADD;if(t===THREE.Lg)return _t.FUNC_SUBTRACT;if(t===THREE.Mg)return _t.FUNC_REVERSE_SUBTRACT;if(t===THREE.Pg)return _t.ZERO;if(t===THREE.Qg)return _t.ONE;if(t===THREE.Rg)return _t.SRC_COLOR;if(t===THREE.Sg)return _t.ONE_MINUS_SRC_COLOR;if(t===THREE.Tg)return _t.SRC_ALPHA;if(t===THREE.Ug)return _t.ONE_MINUS_SRC_ALPHA;if(t===THREE.Vg)return _t.DST_ALPHA;if(t===THREE.Wg)return _t.ONE_MINUS_DST_ALPHA;if(t===THREE.Xg)return _t.DST_COLOR;if(t===THREE.Yg)return _t.ONE_MINUS_DST_COLOR;if(t===THREE.Zg)return _t.SRC_ALPHA_SATURATE;if(e=Ut.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===THREE.Yh)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===THREE.Zh)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===THREE.$h)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===THREE._h)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Ut.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===THREE.ai)return e.II;if(t===THREE.bi)return e.JI;if(t===THREE.ci)return e.KI;if(t===THREE.di)return e.LI}if(e=Ut.get("WEBGL_compressed_texture_etc1"),null!==e&&t===THREE.ei)return e.MI;if(e=Ut.get("EXT_blend_minmax"),null!==e){if(t===THREE.Ng)return e.NI;if(t===THREE.Og)return e.OI}return 0}console.log("THREE.WebGLRenderer",THREE.ig),t=t||{};var I=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==t.context?t.context:null,B=void 0!==t.alpha&&t.alpha,j=void 0===t.GA||t.GA,q=void 0===t.iG||t.iG,G=void 0!==t.jG&&t.jG,F=void 0===t.BB||t.BB,k=void 0!==t.kG&&t.kG,V=[],K=[],W=-1,Z=[],X=-1,Y=new Float32Array(8),J=[],Q=[];this.lG=I,this.context=null,this.mG=!0,this.nG=!0,this.oG=!0,this.pG=!0,this.qG=!0,this.xB=[],this.rG=!1,this.sG=2,this.tG=!1,this.uG=!1,this.vG=!1,this.wG=THREE.lh,this.xG=1,this.yG=1,this.zG=8,this.AG=4;var $=this,tt=null,et=null,nt=null,it=-1,rt="",ot=null,at=new THREE.Ym,st=null,ht=new THREE.Ym,ut=0,ct=new THREE.T(0),ft=0,lt=I.width,pt=I.height,dt=1,Et=new THREE.Ym(0,0,lt,pt),vt=!1,gt=new THREE.Ym(0,0,lt,pt),mt=new THREE.Ho,yt=new THREE.BG,Tt=!1,Rt=!1,wt=new THREE.Pn,Ht=new THREE.Gm,bt=new THREE.K,xt={hash:"",CG:[0,0,0],DG:[],mF:[],nF:[],EG:[],rF:[],sF:[],FC:[],uF:[],vF:[],FG:[],GG:[]},At={HG:0,Hn:0,as:0,points:0};this.info={Dx:At,memory:{nr:0,pr:0},IG:null};var _t;try{var Mt={alpha:B,GA:j,iG:q,jG:G,BB:F,kG:k};if(_t=z||I.getContext("webgl",Mt)||I.getContext("experimental-webgl",Mt),null===_t)throw null!==I.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===_t.getShaderPrecisionFormat&&(_t.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),I.addEventListener("webglcontextlost",o,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var Ut=new THREE.JG(_t);Ut.get("WEBGL_depth_texture"),Ut.get("OES_texture_float"),Ut.get("OES_texture_float_linear"),
Ut.get("OES_texture_half_float"),Ut.get("OES_texture_half_float_linear"),Ut.get("OES_standard_derivatives"),Ut.get("ANGLE_instanced_arrays"),Ut.get("OES_element_index_uint")&&(THREE.In.ct=4294967296);var Ot=new THREE.KG(_t,Ut,t),St=new THREE.LG(_t,Ut,N),Dt=new THREE.MG,Ct=new THREE.NG(_t,Ut,St,Dt,Ot,N,this.info),Lt=new THREE.OG(_t,Dt,this.info),Pt=new THREE.PG(this,Ot),Nt=new THREE.QG;this.info.IG=Pt.IG;var It=new THREE.RG(_t,Ut,At),zt=new THREE.SG(_t,Ut,At),Bt=new THREE.tq(-1,1,1,-1,0,1),jt=new THREE.sq,qt=new THREE.jq(new THREE.TG(2,2),new THREE.MB({iA:!1,jA:!1,qB:!1})),Gt=THREE.UF._F,Ft=new THREE.jq(new THREE.UG(5,5,5),new THREE.eC({l:Gt.l,B:Gt.B,C:Gt.C,Hz:THREE.xg,iA:!1,jA:!1,qB:!1}));i(),this.context=_t,this.VG=Ot,this.extensions=Ut,this.properties=Dt,this.state=St;var kt=new THREE.WG(this,xt,Lt,Ot);this.XG=kt;var Vt=new THREE.YG(this,J),Kt=new THREE.ZG(this,Q);this.getContext=function(){return _t},this.getContextAttributes=function(){return _t.getContextAttributes()},this.$G=function(){Ut.get("WEBGL_lose_context")._G()},this.aH=function(){return Ot.aH()},this.bH=function(){return Ot.precision},this.cH=function(){return dt},this.dH=function(t){void 0!==t&&(dt=t,this.eH(gt.z,gt.w,!1))},this.fH=function(){return{width:lt,height:pt}},this.eH=function(t,e,n){lt=t,pt=e,I.width=t*dt,I.height=e*dt,n!==!1&&(I.style.width=t+"px",I.style.height=e+"px"),this.gH(0,0,t,e)},this.gH=function(t,e,n,i){St.viewport(gt.set(t,e,n,i))},this.hH=function(t,e,n,i){St.scissor(Et.set(t,e,n,i))},this.iH=function(t){St.iH(vt=t)},this.jH=function(){return ct},this.kH=function(t,e){ct.set(t),ft=void 0!==e?e:1,n(ct.r,ct.Ci,ct.b,ft)},this.lH=function(){return ft},this.mH=function(t){ft=t,n(ct.r,ct.Ci,ct.b,ft)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=_t.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=_t.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=_t.STENCIL_BUFFER_BIT),_t.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.nH=function(t,e,n,i){this.Ex(t),this.clear(e,n,i)},this.oH=r,this.Ks=function(){Z=[],X=-1,K=[],W=-1,I.removeEventListener("webglcontextlost",o,!1)},this.rH=function(t,e,n){St.sH();var i=Dt.get(t);t.tH&&!i.position&&(i.position=_t.createBuffer()),t.uH&&!i.Nn&&(i.Nn=_t.createBuffer()),t.vH&&!i.ss&&(i.ss=_t.createBuffer()),t.wH&&!i.color&&(i.color=_t.createBuffer());var r=e.xH();if(t.tH&&(_t.bindBuffer(_t.ARRAY_BUFFER,i.position),_t.bufferData(_t.ARRAY_BUFFER,t.yH,_t.DYNAMIC_DRAW),St.zH(r.position),_t.vertexAttribPointer(r.position,3,_t.FLOAT,!1,0,0)),t.uH){if(_t.bindBuffer(_t.ARRAY_BUFFER,i.Nn),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&"MeshPhysicalMaterial"!==n.type&&n.gA===THREE.zg)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.AH,h=(s[o+0]+s[o+3]+s[o+6])/3,u=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=h,s[o+1]=u,s[o+2]=c,s[o+3]=h,s[o+4]=u,s[o+5]=c,s[o+6]=h,s[o+7]=u,s[o+8]=c}_t.bufferData(_t.ARRAY_BUFFER,t.AH,_t.DYNAMIC_DRAW),St.zH(r.Nn),_t.vertexAttribPointer(r.Nn,3,_t.FLOAT,!1,0,0)}t.vH&&n.map&&(_t.bindBuffer(_t.ARRAY_BUFFER,i.ss),_t.bufferData(_t.ARRAY_BUFFER,t.BH,_t.DYNAMIC_DRAW),St.zH(r.ss),_t.vertexAttribPointer(r.ss,2,_t.FLOAT,!1,0,0)),t.wH&&n.ur!==THREE.Bg&&(_t.bindBuffer(_t.ARRAY_BUFFER,i.color),_t.bufferData(_t.ARRAY_BUFFER,t.CH,_t.DYNAMIC_DRAW),St.zH(r.color),_t.vertexAttribPointer(r.color,3,_t.FLOAT,!1,0,0)),St.DH(),_t.drawArrays(_t.TRIANGLES,0,t.count),t.count=0},this.EH=function(t,n,i,r,o,a){T(r);var s=R(t,n,r,o),h=!1,f=i.id+"_"+s.id+"_"+r.lA;f!==rt&&(rt=f,h=!0);var l=o.MC;if(void 0!==l){for(var p=[],d=0,E=l.length;d<E;d++){var v=l[d];p.push([v,d])}p.sort(c),p.length>8&&(p.length=8);for(var g=i.Qs,d=0,E=p.length;d<E;d++){var v=p[d];if(Y[d]=v[0],0!==v[0]){var m=v[1];r.cs===!0&&g.position&&i.Us("morphTarget"+d,g.position[m]),r.ds===!0&&g.Nn&&i.Us("morphNormal"+d,g.Nn[m])}else r.cs===!0&&i.removeAttribute("morphTarget"+d),r.ds===!0&&i.removeAttribute("morphNormal"+d)}s.FH().fw(_t,"morphTargetInfluences",Y),h=!0}var m=i.index,y=i.attributes.position;r.lA===!0&&(m=Lt.GH(i));var w;null!==m?(w=zt,w.Ts(m)):w=It,h&&(u(r,s,i),null!==m&&_t.bindBuffer(_t.ELEMENT_ARRAY_BUFFER,Lt.HH(m)));var H=0,b=1/0;null!==m?b=m.count:void 0!==y&&(b=y.count);var x=i.Rs.start,A=i.Rs.count,M=null!==a?a.start:0,U=null!==a?a.count:1/0,O=Math.max(H,x,M),S=Math.min(H+b,x+A,M+U)-1,D=Math.max(0,S-O+1);if(o instanceof THREE.jq)if(r.lA===!0)St.setLineWidth(r.mA*e()),w.IH(_t.LINES);else switch(o.IC){case THREE.oi:w.IH(_t.TRIANGLES);break;case THREE.pi:w.IH(_t.TRIANGLE_STRIP);break;case THREE.qi:w.IH(_t.TRIANGLE_FAN)}else if(o instanceof THREE.kq){var C=r.GB;void 0===C&&(C=1),St.setLineWidth(C*e()),o instanceof THREE.GC?w.IH(_t.LINES):w.IH(_t.LINE_STRIP)}else o instanceof THREE.mq&&w.IH(_t.POINTS);i instanceof THREE.dt?i.et>0&&w.JH(i,O,D):w.Dx(O,D)},this.Dx=function(t,e,i,r){if(e instanceof THREE.tx==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=t.qB;rt="",it=-1,ot=null,t.pD===!0&&t.En(),null===e.parent&&e.En(),e.ux.Jm(e.Km),Ht.Hm(e.Im,e.ux),mt.Ko(Ht),V.length=0,W=-1,X=-1,J.length=0,Q.length=0,Rt=this.rG,Tt=yt.init(this.xB,Rt,e),g(t,e),K.length=W+1,Z.length=X+1,$.qG===!0&&(K.sort(f),Z.sort(l)),Tt&&yt.LH(),C(V),kt.Dx(t,e),L(V,e),Tt&&yt.MH(),At.HG=0,At.Hn=0,At.as=0,At.points=0,void 0===i&&(i=null),this.Ex(i);var a=t.background;if(null===a?n(ct.r,ct.Ci,ct.b,ft):a instanceof THREE.T&&n(a.r,a.Ci,a.b,1),(this.mG||r)&&this.clear(this.nG,this.oG,this.pG),a instanceof THREE.eB?(jt.Im.Di(e.Im),jt.Km.eo(e.Km),jt.ux.Jm(jt.Km),Ft.k.l.aG.value=a,Ft.Dq.Hm(jt.ux,Ft.Km),Lt.update(Ft),$.EH(jt,null,Ft.j,Ft.k,Ft,null)):a instanceof THREE.ZA&&(qt.k.map=a,Lt.update(qt),$.EH(Bt,null,qt.j,qt.k,qt,null)),t.oD){var s=t.oD;m(K,e,o,s),m(Z,e,o,s)}else St.NH(THREE.Eg),m(K,e,o),m(Z,e,o);Vt.Dx(t,e),Kt.Dx(t,e,ht),i&&Ct.OH(i),St.PH(!0),St.QH(!0),St.RH(!0)},this.sI=function(t,e){St.tI(t),St.iI(e===THREE.rg)},this.vI=P,this.wI=function(){var t=!1;return function(e,n){e instanceof THREE.rI&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.G),Ct.wI(e,n)}}(),this.xI=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Ct.wI(e,n)}}(),this.yI=function(){var t=!1;return function(e,n){e instanceof THREE.zx&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.G),e instanceof THREE.eB||Array.isArray(e.YA)&&6===e.YA.length?Ct.yI(e,n):Ct.zI(e,n)}}(),this.AI=function(){return et},this.Ex=function(t){et=t,t&&void 0===Dt.get(t).BI&&Ct.CI(t);var e,n=t instanceof THREE.zx;if(t){var i=Dt.get(t);e=n?i.BI[t.Cx]:i.BI,at.Di(t.scissor),st=t.DI,ht.Di(t.viewport)}else e=null,at.Di(Et).Xi(dt),st=vt,ht.Di(gt).Xi(dt);if(nt!==e&&(_t.bindFramebuffer(_t.FRAMEBUFFER,e),nt=e),St.scissor(at),St.iH(st),St.viewport(ht),n){var r=Dt.get(t.G);_t.framebufferTexture2D(_t.FRAMEBUFFER,_t.COLOR_ATTACHMENT0,_t.TEXTURE_CUBE_MAP_POSITIVE_X+t.Cx,r.EI,t.FI)}},this.GI=function(t,e,n,i,r,o){if(t instanceof THREE.rI==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Dt.get(t).BI;if(a){var s=!1;a!==nt&&(_t.bindFramebuffer(_t.FRAMEBUFFER,a),s=!0);try{var h=t.G;if(h.format!==THREE.Th&&N(h.format)!==_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h.type===THREE.Gh||N(h.type)===_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_TYPE)||h.type===THREE.Mh&&Ut.get("WEBGL_color_buffer_float")||h.type===THREE.Nh&&Ut.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");_t.checkFramebufferStatus(_t.FRAMEBUFFER)===_t.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&_t.readPixels(e,n,i,r,N(h.format),N(h.type),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&_t.bindFramebuffer(_t.FRAMEBUFFER,nt)}}}},THREE.rI=function(t,e,n){this.yq=THREE.Math._o(),this.width=t,this.height=e,this.scissor=new THREE.Ym(0,0,t,e),this.DI=!1,this.viewport=new THREE.Ym(0,0,t,e),n=n||{},void 0===n.xx&&(n.xx=THREE.Dh),this.G=new THREE.ZA(void 0,void 0,n.Dy,n.Ey,n.wx,n.xx,n.format,n.type,n.Fy,n.encoding),this.QI=void 0===n.QI||n.QI,this.RI=void 0===n.RI||n.RI,this.SI=null},Object.assign(THREE.rI.prototype,THREE.bq.prototype,{eH:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.Ks()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).Di(this)},Di:function(t){return this.width=t.width,this.height=t.height,this.viewport.Di(t.viewport),this.G=t.G.clone(),this.QI=t.QI,this.RI=t.RI,this.SI=t.SI,this},Ks:function(){this.dispatchEvent({type:"dispose"})}}),THREE.zx=function(t,e,n){THREE.rI.call(this,t,e,n),this.Cx=0,this.FI=0},THREE.zx.prototype=Object.create(THREE.rI.prototype),THREE.zx.prototype.constructor=THREE.zx,THREE.RG=function(t,e,n){function i(t){a=t}function r(e,i){t.drawArrays(a,e,i),n.HG++,n.Hn+=i,a===t.TRIANGLES&&(n.as+=i/3)}function o(i){var r=e.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=i.attributes.position,s=0;o instanceof THREE.Jn?(s=o.data.count,r.drawArraysInstancedANGLE(a,0,s,i.et)):(s=o.count,r.drawArraysInstancedANGLE(a,0,s,i.et)),n.HG++,n.Hn+=s*i.et,a===t.TRIANGLES&&(n.as+=i.et*s/3)}var a;this.IH=i,this.Dx=r,this.JH=o},THREE.BG=function(){function t(){u.value!==i&&(u.value=i,u.Ar=r>0),n.SH=r}function e(t,e,i,r){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=u.value,r!==!0||null===a){var c=i+4*o,f=e.ux;h._n(f),(null===a||a.length<c)&&(a=new Float32Array(c));for(var l=0,p=i;l!==o;++l,p+=4)s.Di(t[l]).Dm(f,h),s.Nn.toArray(a,p),a[p+3]=s.Ec}u.value=a,u.Ar=!0}return n.SH=o,a}var n=this,i=null,r=0,o=!1,a=!1,s=new THREE.Jo,h=new THREE.Qn,u={value:null,Ar:!1};this.aI=u,this.SH=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==r||o;return o=n,i=e(t,a,0),r=t.length,s},this.LH=function(){a=!0,e(null)},this.MH=function(){a=!1,t()},this.lI=function(n,s,h,c,f){if(!o||null===n||0===n.length||a&&!s)a?e(null):t();else{var l=a?0:r,p=4*l,d=c.TI||null;u.value=d,d=e(n,h,p,f);for(var E=0;E!==p;++E)d[E]=i[E];c.TI=d,this.SH+=l}}},THREE.SG=function(t,e,n){function i(t){s=t}function r(n){n.ec instanceof Uint32Array&&e.get("OES_element_index_uint")?(h=t.UNSIGNED_INT,u=4):(h=t.UNSIGNED_SHORT,u=2)}function o(e,i){t.drawElements(s,i,h,e*u),n.HG++,n.Hn+=i,s===t.TRIANGLES&&(n.as+=i/3)}function a(i,r,o){var a=e.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,h,r*u,i.et),n.HG++,n.Hn+=o*i.et,void(s===t.TRIANGLES&&(n.as+=i.et*o/3)))}var s,h,u;this.IH=i,this.Ts=r,this.Dx=o,this.JH=a},THREE.JG=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}},THREE.KG=function(t,e,n){function i(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o;this.aH=i,this.UI=r,this.precision=void 0!==n.precision?n.precision:"highp",this.mI=void 0!==n.mI&&n.mI,this.uI=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.VI=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.WI=t.getParameter(t.MAX_TEXTURE_SIZE),this.XI=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.YI=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.ZI=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.$I=t.getParameter(t.MAX_VARYING_VECTORS),this._I=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.aJ=this.VI>0,this.bJ=!!e.get("OES_texture_float"),this.pI=this.aJ&&this.bJ;var a=r(this.precision);a!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",a,"instead."),this.precision=a),this.mI&&(this.mI=!!e.get("EXT_frag_depth"))},THREE.cJ=function(t,e,n){function i(t){var e=t.j;if(void 0!==u[e.id])return u[e.id];e.addEventListener("dispose",r);var i;return e instanceof THREE.In?i=e:e instanceof THREE.Gn&&(void 0===e.dJ&&(e.dJ=(new THREE.In).Dn(t)),i=e.dJ),u[e.id]=i,n.memory.nr++,i}function r(t){var i=t.target,o=u[i.id];null!==o.index&&a(o.index),s(o.attributes),i.removeEventListener("dispose",r),delete u[i.id];var h=e.get(i);h.lA&&a(h.lA),e.delete(i);var c=e.get(o);c.lA&&a(c.lA),e.delete(o),n.memory.nr--}function o(t){return t instanceof THREE.Jn?e.get(t.data).eJ:e.get(t).eJ}function a(e){var n=o(e);void 0!==n&&(t.deleteBuffer(n),h(e))}function s(t){for(var e in t)a(t[e])}function h(t){t instanceof THREE.Jn?e.delete(t.data):e.delete(t)}var u={};this.get=i},THREE.QG=function(){var t={};this.get=function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new THREE.K,color:new THREE.T,hy:!1,jF:0,kF:1,lF:new THREE.ea};break;case"SpotLight":n={position:new THREE.K,direction:new THREE.K,color:new THREE.T,ln:0,pF:0,qF:0,Zx:0,hy:!1,jF:0,kF:1,lF:new THREE.ea};break;case"PointLight":n={position:new THREE.K,color:new THREE.T,ln:0,Zx:0,hy:!1,jF:0,kF:1,lF:new THREE.ea};break;case"HemisphereLight":n={direction:new THREE.K,xF:new THREE.T,Yx:new THREE.T}}return t[e.id]=n,n}},THREE.OG=function(t,e,n){function i(e){var n=c.get(e);e.j instanceof THREE.Gn&&n.Ys(e);var i=n.index,o=n.attributes;null!==i&&r(i,t.ELEMENT_ARRAY_BUFFER);for(var a in o)r(o[a],t.ARRAY_BUFFER);var s=n.Qs;for(var a in s)for(var h=s[a],u=0,f=h.length;u<f;u++)r(h[u],t.ARRAY_BUFFER);return n}function r(t,n){var i=t instanceof THREE.Jn?t.data:t,r=e.get(i);void 0===r.eJ?o(r,i,n):r.version!==i.version&&a(r,i,n)}function o(e,n,i){e.eJ=t.createBuffer(),t.bindBuffer(i,e.eJ);var r=n.xr?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(i,n.ec,r),e.version=n.version}function a(e,n,i){t.bindBuffer(i,e.eJ),n.xr===!1||n.yr.count===-1?t.bufferSubData(i,0,n.ec):0===n.yr.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,n.yr.offset*n.ec.BYTES_PER_ELEMENT,n.ec.subarray(n.yr.offset,n.yr.offset+n.yr.count)),n.yr.count=0),e.version=n.version}function s(t){return t instanceof THREE.Jn?e.get(t.data).eJ:e.get(t).eJ}function h(n){var i=e.get(n);if(void 0!==i.lA)return i.lA;var o=[],a=n.index,s=n.attributes,h=s.position;if(null!==a)for(var c={},f=a.ec,l=0,p=f.length;l<p;l+=3){var d=f[l+0],E=f[l+1],v=f[l+2];u(c,d,E)&&o.push(d,E),u(c,E,v)&&o.push(E,v),u(c,v,d)&&o.push(v,d)}else for(var f=s.position.ec,l=0,p=f.length/3-1;l<p;l+=3){var d=l+0,E=l+1,v=l+2;o.push(d,E,E,v,v,d)}var g=h.count>65535?Uint32Array:Uint16Array,m=new THREE.wr(new g(o),1);return r(m,t.ELEMENT_ARRAY_BUFFER),i.lA=m,m}function u(t,e,n){if(e>n){var i=e;e=n,n=i}var r=t[e];return void 0===r?(t[e]=[n],!0):r.indexOf(n)===-1&&(r.push(n),!0)}var c=new THREE.cJ(t,e,n);this.HH=s,this.GH=h,this.update=i},THREE.WebGLProgram=function(){function t(t){switch(t){case THREE.ri:return["Linear","( value )"];case THREE.si:return["sRGB","( value )"];case THREE.ui:return["RGBE","( value )"];case THREE.wi:return["RGBM","( value, 7.0 )"];case THREE.xi:return["RGBM","( value, 16.0 )"];case THREE.yi:return["RGBD","( value, 256.0 )"];case THREE.ti:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function e(e,n){var i=t(n);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function n(e,n){var i=t(n);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function i(t,e){var n;switch(e){case THREE.lh:n="Linear";break;case THREE.mh:n="Reinhard";break;case THREE.nh:n="Uncharted2";break;case THREE.oh:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function r(t,e,n){t=t||{};var i=[t.gC||e.fJ||e.bz||e.hz||e.gJ?"#extension GL_OES_standard_derivatives : enable":"",(t.hC||e.mI)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.iC&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.jC||e.sA)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(s).join("\n")}function o(t){var e=[];for(var n in t){var i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join("\n")}function a(t,e,n){for(var i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var a=t.getActiveAttrib(e,o),s=a.name;i[s]=t.getAttribLocation(e,s)}return i}function s(t){return""!==t}function h(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.hJ).replace(/NUM_SPOT_LIGHTS/g,e.iJ).replace(/NUM_POINT_LIGHTS/g,e.jJ).replace(/NUM_HEMI_LIGHTS/g,e.kJ)}function u(t){function e(t,e){var n=THREE.sC[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return u(n)}var n=/#include +<([\w\d.]+)>/g;return t.replace(n,e)}function c(t){function e(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}var f=0;return function(t,l,p,d){var E=t.context,v=p.extensions,g=p.XB,m=p.XH.B,y=p.XH.C,T="SHADOWMAP_TYPE_BASIC";d.lJ===THREE.ug?T="SHADOWMAP_TYPE_PCF":d.lJ===THREE.vg&&(T="SHADOWMAP_TYPE_PCF_SOFT");var R="ENVMAP_TYPE_CUBE",w="ENVMAP_MODE_REFLECTION",H="ENVMAP_BLENDING_MULTIPLY";if(d.sA){switch(p.sA.mapping){case THREE.qh:case THREE.rh:R="ENVMAP_TYPE_CUBE";break;case THREE.vh:case THREE.wh:R="ENVMAP_TYPE_CUBE_UV";break;case THREE.sh:case THREE.th:R="ENVMAP_TYPE_EQUIREC";break;case THREE.uh:R="ENVMAP_TYPE_SPHERE"}switch(p.sA.mapping){case THREE.rh:case THREE.th:w="ENVMAP_MODE_REFRACTION"}switch(p.tA){case THREE.hh:H="ENVMAP_BLENDING_MULTIPLY";break;case THREE.ih:H="ENVMAP_BLENDING_MIX";break;case THREE.jh:H="ENVMAP_BLENDING_ADD"}}var b,x,A=t.sG>0?t.sG:1,M=r(v,d,t.extensions),U=o(g),O=E.createProgram();p instanceof THREE.nC?(b=[U].filter(s).join("\n"),x=[U].filter(s).join("\n")):(b=["precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+p.XH.name,U,d.mJ?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+d.nJ,d.map?"#define USE_MAP":"",d.sA?"#define USE_ENVMAP":"",d.sA?"#define "+w:"",d.Ty?"#define USE_LIGHTMAP":"",d.Yy?"#define USE_AOMAP":"",d.Oy?"#define USE_EMISSIVEMAP":"",d.bz?"#define USE_BUMPMAP":"",d.hz?"#define USE_NORMALMAP":"",d.oA&&d.mJ?"#define USE_DISPLACEMENTMAP":"",d.nz?"#define USE_SPECULARMAP":"",d.xz?"#define USE_ROUGHNESSMAP":"",d.sz?"#define USE_METALNESSMAP":"",d.Cz?"#define USE_ALPHAMAP":"",d.ur?"#define USE_COLOR":"",d.gJ?"#define FLAT_SHADED":"",d.QB?"#define USE_SKINNING":"",d.SC?"#define BONE_TEXTURE":"",d.cs?"#define USE_MORPHTARGETS":"",d.ds&&d.gJ===!1?"#define USE_MORPHNORMALS":"",d.oJ?"#define DOUBLE_SIDED":"",d.pJ?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+d._H,d.qJ?"#define USE_SHADOWMAP":"",d.qJ?"#define "+T:"",d.nA?"#define USE_SIZEATTENUATION":"",d.mI?"#define USE_LOGDEPTHBUF":"",d.mI&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(s).join("\n"),x=[M,"precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+p.XH.name,U,d.hA?"#define ALPHATEST "+d.hA:"","#define GAMMA_FACTOR "+A,d.rJ&&d.qB?"#define USE_FOG":"",d.rJ&&d.sJ?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.sA?"#define USE_ENVMAP":"",d.sA?"#define "+R:"",d.sA?"#define "+w:"",d.sA?"#define "+H:"",d.Ty?"#define USE_LIGHTMAP":"",d.Yy?"#define USE_AOMAP":"",d.Oy?"#define USE_EMISSIVEMAP":"",d.bz?"#define USE_BUMPMAP":"",d.hz?"#define USE_NORMALMAP":"",d.nz?"#define USE_SPECULARMAP":"",d.xz?"#define USE_ROUGHNESSMAP":"",d.sz?"#define USE_METALNESSMAP":"",d.Cz?"#define USE_ALPHAMAP":"",d.ur?"#define USE_COLOR":"",d.gJ?"#define FLAT_SHADED":"",d.oJ?"#define DOUBLE_SIDED":"",d.pJ?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+d._H,d.qJ?"#define USE_SHADOWMAP":"",d.qJ?"#define "+T:"",d.BB?"#define PREMULTIPLIED_ALPHA":"",d.vG?"#define PHYSICALLY_CORRECT_LIGHTS":"",d.mI?"#define USE_LOGDEPTHBUF":"",d.mI&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",d.sA&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",d.wG!==THREE.kh?"#define TONE_MAPPING":"",d.wG!==THREE.kh?THREE.sC.ME:"",d.wG!==THREE.kh?i("toneMapping",d.wG):"",d.tJ||d.uJ||d.vJ||d.wJ?THREE.sC.RD:"",d.uJ?e("mapTexelToLinear",d.uJ):"",d.vJ?e("envMapTexelToLinear",d.vJ):"",d.wJ?e("emissiveMapTexelToLinear",d.wJ):"",d.tJ?n("linearToOutputTexel",d.tJ):"",d.SB?"#define DEPTH_PACKING "+p.SB:"","\n"].filter(s).join("\n")),m=u(m,d),m=h(m,d),y=u(y,d),y=h(y,d),p instanceof THREE.eC==!1&&(m=c(m),y=c(y));var S=b+m,D=x+y,C=THREE.WebGLShader(E,E.VERTEX_SHADER,S),L=THREE.WebGLShader(E,E.FRAGMENT_SHADER,D);E.attachShader(O,C),E.attachShader(O,L),void 0!==p.lC?E.bindAttribLocation(O,0,p.lC):d.cs===!0&&E.bindAttribLocation(O,0,"position"),E.linkProgram(O);var P=E.getProgramInfoLog(O),N=E.getShaderInfoLog(C),I=E.getShaderInfoLog(L),z=!0,B=!0;E.getProgramParameter(O,E.LINK_STATUS)===!1?(z=!1,console.error("THREE.WebGLProgram: shader error: ",E.getError(),"gl.VALIDATE_STATUS",E.getProgramParameter(O,E.VALIDATE_STATUS),"gl.getProgramInfoLog",P,N,I)):""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==N&&""!==I||(B=!1),B&&(this.xJ={yJ:z,k:p,zJ:P,B:{log:N,prefix:b},C:{log:I,prefix:x}}),E.deleteShader(C),E.deleteShader(L);var j;this.FH=function(){return void 0===j&&(j=new THREE.dI(E,O,t)),j};var q;return this.xH=function(){return void 0===q&&(q=a(E,O)),q},this.AJ=function(){E.deleteProgram(O),this.pH=void 0},Object.defineProperties(this,{l:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.FH()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.xH()}}}),this.id=f++,this.code=l,this.BJ=1,this.pH=O,this.B=C,this.C=L,this}}(),THREE.PG=function(t,e){function n(t){if(e.pI&&t&&t.lw&&t.lw.SC)return 1024;var n=e.ZI,i=Math.floor((n-20)/4),r=i;return void 0!==t&&t instanceof THREE._A&&(r=Math.min(t.lw.mw.length,r),r<t.lw.mw.length&&console.warn("WebGLRenderer: too many bones - "+t.lw.mw.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function i(t,e){var n;return t?t instanceof THREE.ZA?n=t.encoding:t instanceof THREE.rI&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.G.encoding):n=THREE.ri,n===THREE.ri&&e&&(n=THREE.ti),n}var r=[],o={RB:"depth",UB:"normal",MB:"basic",TB:"lambert",VB:"phong",WB:"physical",$B:"physical",FB:"basic",JB:"dashed",dC:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.UH=function(r,a,s,h,u){var c=o[r.type],f=n(u),l=t.bH();null!==r.precision&&(l=e.UI(r.precision),l!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",l,"instead."));var p=t.AI(),d={WH:c,precision:l,mJ:e.aJ,tJ:i(p?p.G:null,t.uG),map:!!r.map,uJ:i(r.map,t.tG),sA:!!r.sA,CJ:r.sA&&r.sA.mapping,vJ:i(r.sA,t.tG),fJ:!!r.sA&&(r.sA.mapping===THREE.vh||r.sA.mapping===THREE.wh),Ty:!!r.Ty,Yy:!!r.Yy,Oy:!!r.Oy,wJ:i(r.Oy,t.tG),bz:!!r.bz,hz:!!r.hz,oA:!!r.oA,xz:!!r.xz,sz:!!r.sz,nz:!!r.nz,Cz:!!r.Cz,tA:r.tA,ur:r.ur,qB:!!s,rJ:r.qB,sJ:s instanceof THREE.rD,gJ:r.gA===THREE.zg,nA:r.nA,mI:e.mI,QB:r.QB,nJ:f,SC:e.pI&&u&&u.lw&&u.lw.SC,cs:r.cs,ds:r.ds,zG:t.zG,AG:t.AG,hJ:a.DG.length,jJ:a.FC.length,iJ:a.EG.length,kJ:a.FG.length,_H:h,qJ:t.XG.enabled&&u.Kq&&a.GG.length>0,lJ:t.XG.type,wG:t.wG,vG:t.vG,BB:r.BB,hA:r.hA,oJ:r.Hz===THREE.yg,pJ:r.Hz===THREE.xg,SB:void 0!==r.SB&&r.SB};return d},this.VH=function(t,e){var n=[];if(e.WH?n.push(e.WH):(n.push(t.C),n.push(t.B)),void 0!==t.XB)for(var i in t.XB)n.push(i),n.push(t.XB[i]);for(var r=0;r<a.length;r++)n.push(e[a[r]]);return n.join()},this.YH=function(e,n,i){for(var o,a=0,s=r.length;a<s;a++){var h=r[a];if(h.code===i){o=h,++o.BJ;break}}return void 0===o&&(o=new THREE.WebGLProgram(t,i,e,n),r.push(o)),o},this.qH=function(t){if(0===--t.BJ){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.AJ()}},this.IG=r},THREE.MG=function(){var t={};this.get=function(e){var n=e.yq,i=t[n];return void 0===i&&(i={},t[n]=i),i},this.delete=function(e){delete t[e.yq]},this.clear=function(){t={}}},THREE.WebGLShader=function(){function t(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}return function(e,n,i){var r=e.createShader(n);return e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),t(i)),r}}(),THREE.WG=function(t,e,n,i){function r(e,n,i,r){var o=e.j,a=null,s=y,h=e.GJ;if(i&&(s=T,h=e.HJ),h)a=h;else{var u=!1;n.cs&&(o instanceof THREE.In?u=o.Qs&&o.Qs.position&&o.Qs.position.length>0:o instanceof THREE.Gn&&(u=o.cs&&o.cs.length>0));var c=e instanceof THREE._A&&n.QB,f=0;u&&(f|=v),c&&(f|=g),a=s[f]}if(t.rG&&n.yB===!0&&0!==n.xB.length){var l=a.yq,p=n.yq,d=R[l];void 0===d&&(d={},R[l]=d);var E=d[p];void 0===E&&(E=a.clone(),d[p]=E),a=E}a.visible=n.visible,a.lA=n.lA;var m=n.Hz;return L.FJ&&m==THREE.yg&&(m=THREE.wg),L.EJ&&(m===THREE.wg?m=THREE.xg:m===THREE.xg&&(m=THREE.wg)),a.Hz=m,a.yB=n.yB,a.xB=n.xB,a.mA=n.mA,a.GB=n.GB,i&&void 0!==a.l.fG&&a.l.fG.value.Di(r),a}function o(t,e,n){if(t.visible!==!1){if(t.Iq.test(e.Iq)&&(t instanceof THREE.jq||t instanceof THREE.kq||t instanceof THREE.mq)&&t.Jq&&(t.Lq===!1||h.Mo(t)===!0)){var i=t.k;i.visible===!0&&(t.Dq.Hm(n.ux,t.Km),E.push(t))}for(var r=t.children,a=0,s=r.length;a<s;a++)o(r[a],e,n)}}var a=t.context,s=t.state,h=new THREE.Ho,u=new THREE.Gm,c=e.GG,f=new THREE.ea,l=new THREE.ea(i.WI,i.WI),p=new THREE.K,d=new THREE.K,E=[],v=1,g=2,m=(v|g)+1,y=new Array(m),T=new Array(m),R={},w=[new THREE.K(1,0,0),new THREE.K(-1,0,0),new THREE.K(0,0,1),new THREE.K(0,0,-1),new THREE.K(0,1,0),new THREE.K(0,-1,0)],H=[new THREE.K(0,1,0),new THREE.K(0,1,0),new THREE.K(0,1,0),new THREE.K(0,1,0),new THREE.K(0,0,1),new THREE.K(0,0,-1)],b=[new THREE.Ym,new THREE.Ym,new THREE.Ym,new THREE.Ym,new THREE.Ym,new THREE.Ym],x=new THREE.RB;x.SB=THREE.Ai,x.fC=!0;for(var A=THREE.UF.eG,M=THREE.mC.clone(A.l),U=0;U!==m;++U){var O=0!==(U&v),S=0!==(U&g),D=x.clone();D.cs=O,D.QB=S,y[U]=D;var C=new THREE.eC({XB:{DJ:""},l:M,B:A.B,C:A.C,cs:O,QB:S,fC:!0});T[U]=C}var L=this;this.enabled=!1,this.pD=!0,this.Ar=!1,this.type=THREE.ug,this.EJ=!0,this.FJ=!0,this.Dx=function(e,i){if(L.enabled!==!1&&(L.pD!==!1||L.Ar!==!1)&&0!==c.length){s.clearColor(1,1,1,1),s.disable(a.BLEND),s.PH(!0),s.iH(!1);for(var v,g,m=0,y=c.length;m<y;m++){var T=c[m],R=T.hy;if(void 0!==R){var x=R.ay;if(f.Di(R.by),f.min(l),T instanceof THREE.ky){v=6,g=!0;var A=f.x,M=f.y;b[0].set(2*A,M,A,M),b[1].set(0,M,A,M),b[2].set(3*A,M,A,M),b[3].set(A,M,A,M),b[4].set(3*A,0,A,M),b[5].set(A,0,A,M),f.x*=4,f.y*=2}else v=1,g=!1;if(null===R.map){var U={xx:THREE.Ah,wx:THREE.Ah,format:THREE.Th};R.map=new THREE.rI(f.x,f.y,U),x.Fx()}R instanceof THREE.my&&R.update(T);var O=R.map,S=R.matrix;d.Vm(T.Km),x.position.Di(d),t.Ex(O),t.clear();for(var D=0;D<v;D++){if(g){p.Di(x.position),p.add(w[D]),x.zq.Di(H[D]),x.ho(p);var C=b[D];s.viewport(C)}else p.Vm(T.target.Km),x.ho(p);x.En(),x.ux.Jm(x.Km),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(x.Im),S.multiply(x.ux),u.Hm(x.Im,x.ux),h.Ko(u),E.length=0,o(e,i,x);for(var P=0,N=E.length;P<N;P++){var I=E[P],z=n.update(I),B=I.k;if(B instanceof THREE.cC)for(var j=z.us,q=B.or,G=0,F=j.length;G<F;G++){var k=j[G],V=q[k.vr];if(V.visible===!0){var K=r(I,V,g,d);t.EH(x,null,z,K,I,k)}}else{var K=r(I,B,g,d);t.EH(x,null,z,K,I,null)}}}}else console.warn("THREE.WebGLShadowMap:",T,"has no shadow.")}var W=t.jH(),Z=t.lH();t.kH(W,Z),L.Ar=!1}}},THREE.LG=function(t,e,n){function i(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<i;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}var r=this;this.IJ={color:new THREE.JJ(t,this),GA:new THREE.KJ(t,this),iG:new THREE.LJ(t,this)};var o=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=new Uint8Array(o),s=new Uint8Array(o),h=new Uint8Array(o),u={},c=null,f=null,l=null,p=null,d=null,E=null,v=null,g=null,m=!1,y=null,T=null,R=null,w=null,H=null,b=null,x=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),A=null,M={},U=new THREE.Ym,O=new THREE.Ym,S={};S[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),S[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),
this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(t.DEPTH_TEST),this.jI(THREE.bh),this.iI(!1),this.tI(THREE.og),this.enable(t.CULL_FACE),this.enable(t.BLEND),this.NH(THREE.Fg)},this.sH=function(){for(var t=0,e=a.length;t<e;t++)a[t]=0},this.zH=function(n){if(a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),0!==h[n]){var i=e.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(n,0),h[n]=0}},this.KH=function(e,n,i){a[e]=1,0===s[e]&&(t.enableVertexAttribArray(e),s[e]=1),h[e]!==n&&(i.vertexAttribDivisorANGLE(e,n),h[e]=n)},this.DH=function(){for(var e=0,n=s.length;e!==n;++e)s[e]!==a[e]&&(t.disableVertexAttribArray(e),s[e]=0)},this.enable=function(e){u[e]!==!0&&(t.enable(e),u[e]=!0)},this.disable=function(e){u[e]!==!1&&(t.disable(e),u[e]=!1)},this.MJ=function(){if(null===c&&(c=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)c.push(n[i]);return c},this.NH=function(e,i,r,o,a,s,h,u){return e===THREE.Eg?(this.disable(t.BLEND),void(f=e)):(this.enable(t.BLEND),e===f&&u===m||(e===THREE.Gg?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===THREE.Hg?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===THREE.Ig?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),f=e,m=u),void(e===THREE.Jg?(a=a||i,s=s||r,h=h||o,i===l&&a===E||(t.blendEquationSeparate(n(i),n(a)),l=i,E=a),r===p&&o===d&&s===v&&h===g||(t.blendFuncSeparate(n(r),n(o),n(s),n(h)),p=r,d=o,v=s,g=h)):(l=null,p=null,d=null,E=null,v=null,g=null)))},this.RH=function(t){this.IJ.color.NJ(t)},this.PH=function(t){this.IJ.GA.OJ(t)},this.QH=function(t){this.IJ.GA.NJ(t)},this.jI=function(t){this.IJ.GA.PJ(t)},this.QJ=function(t){this.IJ.iG.OJ(t)},this.RJ=function(t){this.IJ.iG.NJ(t)},this.SJ=function(t,e,n){this.IJ.iG.PJ(t,e,n)},this.TJ=function(t,e,n){this.IJ.iG.UJ(t,e,n)},this.iI=function(e){y!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),y=e)},this.tI=function(e){e!==THREE.ng?(this.enable(t.CULL_FACE),e!==T&&(e===THREE.og?t.cullFace(t.BACK):e===THREE.pg?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),T=e},this.setLineWidth=function(e){e!==R&&(t.lineWidth(e),R=e)},this.kI=function(e,n,i){e?(this.enable(t.POLYGON_OFFSET_FILL),w===n&&H===i||(t.polygonOffset(n,i),w=n,H=i)):this.disable(t.POLYGON_OFFSET_FILL)},this.VJ=function(){return b},this.iH=function(e){b=e,e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+x-1),A!==e&&(t.activeTexture(e),A=e)},this.bindTexture=function(e,n){null===A&&r.activeTexture();var i=M[A];void 0===i&&(i={type:void 0,G:void 0},M[A]=i),i.type===e&&i.G===n||(t.bindTexture(e,n||S[e]),i.type=e,i.G=n)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(t)}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(t)}},this.clearColor=function(t,e,n,i){this.IJ.color.WJ(t,e,n,i)},this.clearDepth=function(t){this.IJ.GA.WJ(t)},this.clearStencil=function(t){this.IJ.iG.WJ(t)},this.scissor=function(e){U.Zi(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),U.Di(e))},this.viewport=function(e){O.Zi(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),O.Di(e))},this.reset=function(){for(var e=0;e<s.length;e++)1===s[e]&&(t.disableVertexAttribArray(e),s[e]=0);u={},c=null,A=null,M={},f=null,y=null,T=null,this.IJ.color.reset(),this.IJ.GA.reset(),this.IJ.iG.reset()}},THREE.JJ=function(t,e){var n=!1,i=new THREE.Ym,r=null,o=new THREE.Ym;this.NJ=function(e){r===e||n||(t.colorMask(e,e,e,e),r=e)},this.XJ=function(t){n=t},this.WJ=function(e,n,r,a){i.set(e,n,r,a),o.Zi(i)===!1&&(t.clearColor(e,n,r,a),o.Di(i))},this.reset=function(){n=!1,r=null,o=new THREE.Ym}},THREE.KJ=function(t,e){var n=!1,i=null,r=null,o=null;this.OJ=function(n){n?e.enable(t.DEPTH_TEST):e.disable(t.DEPTH_TEST)},this.NJ=function(e){i===e||n||(t.depthMask(e),i=e)},this.PJ=function(e){if(r!==e){if(e)switch(e){case THREE.$g:t.depthFunc(t.NEVER);break;case THREE._g:t.depthFunc(t.ALWAYS);break;case THREE.ah:t.depthFunc(t.LESS);break;case THREE.bh:t.depthFunc(t.LEQUAL);break;case THREE.dh:t.depthFunc(t.EQUAL);break;case THREE.eh:t.depthFunc(t.GEQUAL);break;case THREE.fh:t.depthFunc(t.GREATER);break;case THREE.gh:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},this.XJ=function(t){n=t},this.WJ=function(e){o!==e&&(t.clearDepth(e),o=e)},this.reset=function(){n=!1,i=null,r=null,o=null}},THREE.LJ=function(t,e){var n=!1,i=null,r=null,o=null,a=null,s=null,h=null,u=null,c=null;this.OJ=function(n){n?e.enable(t.STENCIL_TEST):e.disable(t.STENCIL_TEST)},this.NJ=function(e){i===e||n||(t.stencilMask(e),i=e)},this.PJ=function(e,n,i){r===e&&o===n&&a===i||(t.stencilFunc(e,n,i),r=e,o=n,a=i)},this.UJ=function(e,n,i){s===e&&h===n&&u===i||(t.stencilOp(e,n,i),s=e,h=n,u=i)},this.XJ=function(t){n=t},this.WJ=function(e){c!==e&&(t.clearStencil(e),c=e)},this.reset=function(){n=!1,i=null,r=null,o=null,a=null,s=null,h=null,u=null,c=null}},THREE.NG=function(t,e,n,i,r,o,a){function s(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n);var r=i.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function h(t){return THREE.Math.jp(t.width)&&THREE.Math.jp(t.height)}function u(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=THREE.Math.kp(t.width),e.height=THREE.Math.kp(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function c(t){return t.Dy!==THREE.yh||t.Ey!==THREE.yh||t.xx!==THREE.Ah&&t.xx!==THREE.Dh}function f(e){return e===THREE.Ah||e===THREE.Bh||e===THREE.Ch?t.NEAREST:t.LINEAR}function l(t){var e=t.target;e.removeEventListener("dispose",l),d(e),M.pr--}function p(t){var e=t.target;e.removeEventListener("dispose",p),E(e),M.pr--}function d(e){var n=i.get(e);if(e.YA&&n.YJ)t.deleteTexture(n.YJ);else{if(void 0===n.ZJ)return;t.deleteTexture(n.EI)}i.delete(e)}function E(e){var n=i.get(e),r=i.get(e.G);if(e){if(void 0!==r.EI&&t.deleteTexture(r.EI),e.SI&&e.SI.Ks(),e instanceof THREE.zx)for(var o=0;o<6;o++)t.deleteFramebuffer(n.BI[o]),n.$J&&t.deleteRenderbuffer(n.$J[o]);else t.deleteFramebuffer(n.BI),n.$J&&t.deleteRenderbuffer(n.$J);i.delete(e.G),i.delete(e)}}function v(e,r){var o=i.get(e);if(e.version>0&&o._J!==e.version){var a=e.YA;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(a.complete!==!1)return void T(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D,o.EI)}function g(e,a){var u=i.get(e);if(6===e.YA.length)if(e.version>0&&u._J!==e.version){u.YJ||(e.addEventListener("dispose",l),u.YJ=t.createTexture(),M.pr++),n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_CUBE_MAP,u.YJ),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e instanceof THREE.mB,f=e.YA[0]instanceof THREE.iB,p=[],d=0;d<6;d++)c||f?p[d]=f?e.YA[d].YA:e.YA[d]:p[d]=s(e.YA[d],r.XI);var E=p[0],v=h(E),g=o(e.format),m=o(e.type);y(t.TEXTURE_CUBE_MAP,e,v);for(var d=0;d<6;d++)if(c)for(var T,R=p[d].jB,w=0,H=R.length;w<H;w++)T=R[w],e.format!==THREE.Th&&e.format!==THREE.Sh?n.MJ().indexOf(g)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,w,g,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,w,g,T.width,T.height,0,g,m,T.data);else f?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,p[d].width,p[d].height,0,g,m,p[d].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,g,m,p[d]);e.Bx&&v&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u._J=e.version,e.ht&&e.ht(e)}else n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_CUBE_MAP,u.YJ)}function m(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).EI)}function y(n,a,s){var h;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o(a.Dy)),t.texParameteri(n,t.TEXTURE_WRAP_T,o(a.Ey)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o(a.wx)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o(a.xx))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.Dy===THREE.yh&&a.Ey===THREE.yh||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(a.wx)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(a.xx)),a.xx!==THREE.Ah&&a.xx!==THREE.Dh&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),h=e.get("EXT_texture_filter_anisotropic")){if(a.type===THREE.Mh&&null===e.get("OES_texture_float_linear"))return;if(a.type===THREE.Nh&&null===e.get("OES_texture_half_float_linear"))return;(a.Fy>1||i.get(a).aK)&&(t.texParameterf(n,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.Fy,r.aH())),i.get(a).aK=a.Fy)}}function T(e,i,a){void 0===e.ZJ&&(e.ZJ=!0,i.addEventListener("dispose",l),e.EI=t.createTexture(),M.pr++),n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_2D,e.EI),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.yC),t.pixelStorei(t.UNPACK_ALIGNMENT,i.zC);var f=s(i.YA,r.WI);c(i)&&h(f)===!1&&(f=u(f));var p=h(f),d=o(i.format),E=o(i.type);y(t.TEXTURE_2D,i,p);var v,g=i.jB;if(i instanceof THREE.BC){var m=t.DEPTH_COMPONENT;if(i.type===THREE.Mh){if(!U)throw new Error("Float Depth Texture only supported in WebGL2.0");m=t.bK}else U&&(m=t.DEPTH_COMPONENT16);n.texImage2D(t.TEXTURE_2D,0,m,f.width,f.height,0,d,E,null)}else if(i instanceof THREE.iB)if(g.length>0&&p){for(var T=0,R=g.length;T<R;T++)v=g[T],n.texImage2D(t.TEXTURE_2D,T,d,v.width,v.height,0,d,E,v.data);i.Bx=!1}else n.texImage2D(t.TEXTURE_2D,0,d,f.width,f.height,0,d,E,f.data);else if(i instanceof THREE.mB)for(var T=0,R=g.length;T<R;T++)v=g[T],i.format!==THREE.Th&&i.format!==THREE.Sh?n.MJ().indexOf(d)>-1?n.compressedTexImage2D(t.TEXTURE_2D,T,d,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,T,d,v.width,v.height,0,d,E,v.data);else if(g.length>0&&p){for(var T=0,R=g.length;T<R;T++)v=g[T],n.texImage2D(t.TEXTURE_2D,T,d,d,E,v);i.Bx=!1}else n.texImage2D(t.TEXTURE_2D,0,d,d,E,f);i.Bx&&p&&t.generateMipmap(t.TEXTURE_2D),e._J=i.version,i.ht&&i.ht(i)}function R(e,r,a,s){var h=o(r.G.format),u=o(r.G.type);n.texImage2D(s,0,h,r.width,r.height,0,h,u,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,i.get(r.G).EI,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function w(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.QI&&!n.RI?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.QI&&n.RI?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function H(e,n){var r=n instanceof THREE.zx;if(r)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!(n.SI instanceof THREE.BC))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.SI).EI&&n.SI.YA.width===n.width&&n.SI.YA.height===n.height||(n.SI.YA.width=n.width,n.SI.YA.height=n.height,n.SI.Ar=!0),v(n.SI,0);var o=i.get(n.SI).EI;t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0)}function b(e){var n=i.get(e),r=e instanceof THREE.zx;if(e.SI){if(r)throw new Error("target.depthTexture not supported in Cube render targets");H(n.BI,e)}else if(r){n.$J=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.BI[o]),n.$J[o]=t.createRenderbuffer(),w(n.$J[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.BI),n.$J=t.createRenderbuffer(),w(n.$J,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function x(e){var r=i.get(e),o=i.get(e.G);e.addEventListener("dispose",p),o.EI=t.createTexture(),M.pr++;var a=e instanceof THREE.zx,s=h(e);if(a){r.BI=[];for(var u=0;u<6;u++)r.BI[u]=t.createFramebuffer()}else r.BI=t.createFramebuffer();if(a){n.bindTexture(t.TEXTURE_CUBE_MAP,o.EI),y(t.TEXTURE_CUBE_MAP,e.G,s);for(var u=0;u<6;u++)R(r.BI[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);e.G.Bx&&s&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.EI),y(t.TEXTURE_2D,e.G,s),R(r.BI,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.G.Bx&&s&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);e.QI&&b(e)}function A(e){var r=e.G;if(r.Bx&&h(e)&&r.xx!==THREE.Ah&&r.xx!==THREE.Dh){var o=e instanceof THREE.zx?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(r).EI;n.bindTexture(o,a),t.generateMipmap(o),n.bindTexture(o,null)}}var M=a.memory,U="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.wI=v,this.yI=g,this.zI=m,this.CI=x,this.OH=A},THREE.dI=function(){var t=new THREE.ZA,e=new THREE.eB,n=function(){this.eI=[],this.map={}},i=[],r=[],o=function(t,e,n){var r=t[0];if(r<=0||r>0)return t;var o=e*n,a=i[o];if(void 0===a&&(a=new Float32Array(o),i[o]=a),0!==e){r.toArray(a,0);for(var s=1,h=0;s!==e;++s)h+=n,t[s].toArray(a,h)}return a},a=function(t,e){var n=r[e];void 0===n&&(n=new Int32Array(e),r[e]=n);for(var i=0;i!==e;++i)n[i]=t.vI();return n},s=function(t,e){t.uniform1f(this.cK,e)},h=function(t,e){t.uniform1i(this.cK,e)},u=function(t,e){void 0===e.x?t.uniform2fv(this.cK,e):t.uniform2f(this.cK,e.x,e.y)},c=function(t,e){void 0!==e.x?t.uniform3f(this.cK,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.cK,e.r,e.Ci,e.b):t.uniform3fv(this.cK,e)},f=function(t,e){void 0===e.x?t.uniform4fv(this.cK,e):t.uniform4f(this.cK,e.x,e.y,e.z,e.w)},l=function(t,e){t.uniformMatrix2fv(this.cK,!1,e.elements||e)},p=function(t,e){t.uniformMatrix3fv(this.cK,!1,e.elements||e)},d=function(t,e){t.uniformMatrix4fv(this.cK,!1,e.elements||e)},E=function(e,n,i){var r=i.vI();e.uniform1i(this.cK,r),i.wI(n||t,r)},v=function(t,n,i){var r=i.vI();t.uniform1i(this.cK,r),i.yI(n||e,r)},g=function(t,e){t.uniform2iv(this.cK,e)},m=function(t,e){t.uniform3iv(this.cK,e)},y=function(t,e){t.uniform4iv(this.cK,e)},T=function(t){switch(t){case 5126:return s;case 35664:return u;case 35665:return c;case 35666:return f;case 35674:return l;case 35675:return p;case 35676:return d;case 35678:return E;case 35680:return v;case 5124:case 35670:return h;case 35667:case 35671:return g;case 35668:case 35672:return m;case 35669:case 35673:return y}},R=function(t,e){t.uniform1fv(this.cK,e)},w=function(t,e){t.uniform1iv(this.cK,e)},H=function(t,e){t.uniform2fv(this.cK,o(e,this.size,2))},b=function(t,e){t.uniform3fv(this.cK,o(e,this.size,3))},x=function(t,e){t.uniform4fv(this.cK,o(e,this.size,4))},A=function(t,e){t.uniformMatrix2fv(this.cK,!1,o(e,this.size,4))},M=function(t,e){t.uniformMatrix3fv(this.cK,!1,o(e,this.size,9))},U=function(t,e){t.uniformMatrix4fv(this.cK,!1,o(e,this.size,16))},O=function(e,n,i){var r=n.length,o=a(i,r);e.uniform1iv(this.cK,o);for(var s=0;s!==r;++s)i.wI(n[s]||t,o[s])},S=function(t,n,i){var r=n.length,o=a(i,r);t.uniform1iv(this.cK,o);for(var s=0;s!==r;++s)i.yI(n[s]||e,o[s])},D=function(t){switch(t){case 5126:return R;case 35664:return H;case 35665:return b;case 35666:return x;case 35674:return A;case 35675:return M;case 35676:return U;case 35678:return O;case 35680:return S;case 5124:case 35670:return w;case 35667:case 35671:return g;case 35668:case 35672:return m;case 35669:case 35673:return y}},C=function(t,e,n){this.id=t,this.cK=n,this.fw=T(e.type)},L=function(t,e,n){this.id=t,this.cK=n,this.size=e.size,this.fw=D(e.type)},P=function(t){this.id=t,n.call(this)};P.prototype.fw=function(t,e){for(var n=this.eI,i=0,r=n.length;i!==r;++i){var o=n[i];o.fw(t,e[o.id])}};var N=/([\w\d_]+)(\])?(\[|\.)?/g,I=function(t,e){t.eI.push(e),t.map[e.id]=e},z=function(t,e,n){var i=t.name,r=i.length;for(N.lastIndex=0;;){var o=N.exec(i),a=N.lastIndex,s=o[1],h="]"===o[2],u=o[3];if(h&&(s=0|s),void 0===u||"["===u&&a+2===r){I(n,void 0===u?new C(s,t,e):new L(s,t,e));break}var c=n.map,f=c[s];void 0===f&&(f=new P(s),I(n,f)),n=f}},B=function(t,e,i){n.call(this),this.dK=i;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o!==r;++o){var a=t.getActiveUniform(e,o),s=a.name,h=t.getUniformLocation(e,s);z(a,h,this)}};return B.prototype.fw=function(t,e,n){var i=this.map[e];void 0!==i&&i.fw(t,n,this.dK)},B.prototype.set=function(t,e,n){var i=this.map[n];void 0!==i&&i.fw(t,e[n],this.dK)},B.prototype.oI=function(t,e,n){var i=e[n];void 0!==i&&this.fw(t,n,i)},B.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];s.Ar!==!1&&a.fw(t,s.value,i)}},B.cI=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n},B.hI=function(t,e){for(var n=null,i=t.length,r=0,o=0;o!==i;++o){var a=t[o],s=e[a.id];s&&s.xr===!0?(null===n&&(n=[]),n.push(a)):(r<o&&(t[r]=a),++r)}return r<i&&(t.length=r),n},B.qI=function(t,e,n,i){for(var r=0,o=t.length;r!==o;++r){var a=e[t[r].id],s=a.it;void 0!==s&&s.call(a,n,i)}},B}(),THREE.ZG=function(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);r=l.createBuffer(),o=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,t,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,o),l.bufferData(l.ELEMENT_ARRAY_BUFFER,e,l.STATIC_DRAW),c=l.createTexture(),f=l.createTexture(),p.bindTexture(l.TEXTURE_2D,c),l.texImage2D(l.TEXTURE_2D,0,l.RGB,16,16,0,l.RGB,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),p.bindTexture(l.TEXTURE_2D,f),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,16,16,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),a={B:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),C:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},s=i(a),h={eK:l.getAttribLocation(s,"position"),ss:l.getAttribLocation(s,"uv")},u={fK:l.getUniformLocation(s,"renderType"),map:l.getUniformLocation(s,"map"),gK:l.getUniformLocation(s,"occlusionMap"),opacity:l.getUniformLocation(s,"opacity"),color:l.getUniformLocation(s,"color"),scale:l.getUniformLocation(s,"scale"),rotation:l.getUniformLocation(s,"rotation"),hK:l.getUniformLocation(s,"screenPosition")}}function i(e){var n=l.createProgram(),i=l.createShader(l.FRAGMENT_SHADER),r=l.createShader(l.VERTEX_SHADER),o="precision "+t.bH()+" float;\n";return l.shaderSource(i,o+e.C),l.shaderSource(r,o+e.B),l.compileShader(i),l.compileShader(r),l.attachShader(n,i),l.attachShader(n,r),l.linkProgram(n),n}var r,o,a,s,h,u,c,f,l=t.context,p=t.state;this.Dx=function(i,a,d){if(0!==e.length){var E=new THREE.K,v=d.w/d.z,g=.5*d.z,m=.5*d.w,y=16/d.w,T=new THREE.ea(y*v,y),R=new THREE.K(1,1,0),w=new THREE.ea(1,1),H=new THREE.on;H.min.set(0,0),H.max.set(d.z-16,d.w-16),void 0===s&&n(),l.useProgram(s),p.sH(),p.zH(h.eK),p.zH(h.ss),p.DH(),l.uniform1i(u.gK,0),l.uniform1i(u.map,1),l.bindBuffer(l.ARRAY_BUFFER,r),l.vertexAttribPointer(h.eK,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(h.ss,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,o),p.disable(l.CULL_FACE),p.QH(!1);for(var b=0,x=e.length;b<x;b++){y=16/d.w,T.set(y*v,y);var A=e[b];if(E.set(A.Km.elements[12],A.Km.elements[13],A.Km.elements[14]),E.Dm(a.ux),E.Em(a.Im),R.Di(E),w.x=d.x+R.x*g+g-8,w.y=d.y+R.y*m+m-8,H.vn(w)===!0){p.activeTexture(l.TEXTURE0),p.bindTexture(l.TEXTURE_2D,null),p.activeTexture(l.TEXTURE1),p.bindTexture(l.TEXTURE_2D,c),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGB,w.x,w.y,16,16,0),l.uniform1i(u.fK,0),l.uniform2f(u.scale,T.x,T.y),l.uniform3f(u.hK,R.x,R.y,R.z),p.disable(l.BLEND),p.enable(l.DEPTH_TEST),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),p.activeTexture(l.TEXTURE0),p.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,w.x,w.y,16,16,0),l.uniform1i(u.fK,1),p.disable(l.DEPTH_TEST),p.activeTexture(l.TEXTURE1),p.bindTexture(l.TEXTURE_2D,c),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),A.kD.Di(R),A.lD?A.lD(A):A.mD(),l.uniform1i(u.fK,2),p.enable(l.BLEND);for(var M=0,U=A.jD.length;M<U;M++){var O=A.jD[M];O.opacity>.001&&O.scale>.001&&(R.x=O.x,R.y=O.y,R.z=O.z,y=O.size*O.scale/d.w,T.x=y*v,T.y=y,l.uniform3f(u.hK,R.x,R.y,R.z),l.uniform2f(u.scale,T.x,T.y),l.uniform1f(u.rotation,O.rotation),l.uniform1f(u.opacity,O.opacity),l.uniform3f(u.color,O.color.r,O.color.Ci,O.color.b),p.NH(O.Gy,O.blendEquation,O.sB,O.tB),t.wI(O.G,1),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0))}}}p.enable(l.CULL_FACE),p.enable(l.DEPTH_TEST),p.QH(!0),t.oH()}}},THREE.YG=function(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=f.createBuffer(),a=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,o),f.bufferData(f.ARRAY_BUFFER,t,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),f.bufferData(f.ELEMENT_ARRAY_BUFFER,e,f.STATIC_DRAW),s=i(),h={position:f.getAttribLocation(s,"position"),ss:f.getAttribLocation(s,"uv")},u={iK:f.getUniformLocation(s,"uvOffset"),jK:f.getUniformLocation(s,"uvScale"),rotation:f.getUniformLocation(s,"rotation"),scale:f.getUniformLocation(s,"scale"),color:f.getUniformLocation(s,"color"),map:f.getUniformLocation(s,"map"),opacity:f.getUniformLocation(s,"opacity"),Dq:f.getUniformLocation(s,"modelViewMatrix"),Im:f.getUniformLocation(s,"projectionMatrix"),kK:f.getUniformLocation(s,"fogType"),dF:f.getUniformLocation(s,"fogDensity"),eF:f.getUniformLocation(s,"fogNear"),fF:f.getUniformLocation(s,"fogFar"),gF:f.getUniformLocation(s,"fogColor"),hA:f.getUniformLocation(s,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),c=new THREE.ZA(n),c.Ar=!0}function i(){var e=f.createProgram(),n=f.createShader(f.VERTEX_SHADER),i=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,["precision "+t.bH()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),f.shaderSource(i,["precision "+t.bH()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),f.compileShader(n),f.compileShader(i),f.attachShader(e,n),f.attachShader(e,i),f.linkProgram(e),e}function r(t,e){return t.Mq!==e.Mq?t.Mq-e.Mq:t.z!==e.z?e.z-t.z:e.id-t.id}var o,a,s,h,u,c,f=t.context,l=t.state,p=new THREE.K,d=new THREE.Jl,E=new THREE.K;this.Dx=function(i,v){if(0!==e.length){void 0===s&&n(),f.useProgram(s),l.sH(),l.zH(h.position),l.zH(h.ss),l.DH(),l.disable(f.CULL_FACE),l.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,o),f.vertexAttribPointer(h.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(h.ss,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),f.uniformMatrix4fv(u.Im,!1,v.Im.elements),l.activeTexture(f.TEXTURE0),f.uniform1i(u.map,0);var g=0,m=0,y=i.qB;y?(f.uniform3f(u.gF,y.color.r,y.color.Ci,y.color.b),y instanceof THREE.qD?(f.uniform1f(u.eF,y.near),f.uniform1f(u.fF,y.hq),f.uniform1i(u.kK,1),g=1,m=1):y instanceof THREE.rD&&(f.uniform1f(u.dF,y.sD),f.uniform1i(u.kK,2),g=2,m=2)):(f.uniform1i(u.kK,0),g=0,m=0);for(var T=0,R=e.length;T<R;T++){var w=e[T];w.Dq.Hm(v.ux,w.Km),w.z=-w.Dq.elements[14]}e.sort(r);for(var H=[],T=0,R=e.length;T<R;T++){var w=e[T],b=w.k;if(b.visible!==!1){f.uniform1f(u.hA,b.hA),f.uniformMatrix4fv(u.Dq,!1,w.Dq.elements),w.Km.so(p,d,E),H[0]=E.x,H[1]=E.y;var x=0;i.qB&&b.qB&&(x=m),g!==x&&(f.uniform1i(u.kK,x),g=x),null!==b.map?(f.uniform2f(u.iK,b.map.offset.x,b.map.offset.y),f.uniform2f(u.jK,b.map.repeat.x,b.map.repeat.y)):(f.uniform2f(u.iK,0,0),f.uniform2f(u.jK,1,1)),f.uniform1f(u.opacity,b.opacity),f.uniform3f(u.color,b.color.r,b.color.Ci,b.color.b),f.uniform1f(u.rotation,b.rotation),f.uniform2fv(u.scale,H),l.NH(b.Gy,b.blendEquation,b.sB,b.tB),l.PH(b.iA),l.QH(b.jA),b.map?t.wI(b.map,0):t.wI(c,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}}l.enable(f.CULL_FACE),t.oH()}}},Object.assign(THREE,{lK:function(t,e,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.sr(t,e,n,r,o,a)},mK:0,nK:1,oK:THREE.cC,oq:function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new THREE.mq(t,e)},pK:THREE.nq,qK:function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new THREE.mq(t,e)},rK:function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new THREE.dC(t)},sK:function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new THREE.dC(t)},tK:function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new THREE.dC(t)},uK:function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new THREE.K(t,e,n)}}),Object.assign(THREE.on.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.$e()},vK:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.xn(t)}}),Object.assign(THREE.Bn.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.$e()},vK:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.xn(t)},wK:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.Ln(t)}}),Object.assign(THREE.Qn.prototype,{xK:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.Cm(this)},yK:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.Sn(t)}}),Object.assign(THREE.Gm.prototype,{zK:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.bo(t)},Sq:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.en(t)},xK:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.Em(this)},AK:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.Dm(this)},yK:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.Sn(t)},BK:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.Mm(this)},CK:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.Dm(this)},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},Uq:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},Vq:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},Wq:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},DK:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.");
}}),Object.assign(THREE.Jo.prototype,{EK:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.Wo(t)}}),Object.assign(THREE.Jl.prototype,{xK:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.Am(this)}}),Object.assign(THREE.xo.prototype,{vK:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.xn(t)},FK:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.Mn(t)},wK:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.Ln(t)}}),Object.assign(THREE.K.prototype,{GK:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},HK:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},IK:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.Vm(t)},JK:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.Xm(t)},KK:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.Wm(e,t)}}),Object.assign(THREE.wq.prototype,{LK:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.dr(t)},MK:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.Xq(e,t)}}),Object.defineProperties(THREE.wq.prototype,{NK:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},OK:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(THREE.lq.prototype,{Iv:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.bB}}}),THREE.sq.prototype.PK=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.Mx=e),this.Ox(t)},Object.defineProperties(THREE.Wx.prototype,{QK:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},RK:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.hy.ay.Kx=t}},SK:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.hy.ay.left=t}},TK:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.hy.ay.right=t}},UK:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.hy.ay.top=t}},VK:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.hy.ay.bottom=t}},WK:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.hy.ay.near=t}},XK:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.hy.ay.hq=t}},YK:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},jF:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.hy.bias=t}},ZK:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},$K:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.hy.by.width=t}},_K:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.hy.by.height=t}}}),Object.defineProperties(THREE.wr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.ec.length}}}),Object.assign(THREE.In.prototype,{aL:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.Ts(t)},bL:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.Vs(t,e)},cL:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.Ws()},Bs:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},dL:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(THREE.In.prototype,{bA:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.us}},cA:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.us}}}),Object.defineProperties(THREE.oB.prototype,{eL:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},fL:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new THREE.T}}}),Object.defineProperties(THREE.VB.prototype,{gL:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(THREE.eC.prototype,{gC:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.gC},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.gC=t}}}),THREE.bq.prototype=Object.assign(Object.create({constructor:THREE.bq,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),THREE.bq.prototype),Object.assign(THREE.hG.prototype,{hL:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},iL:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},jL:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},kL:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},lL:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},mL:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},mJ:function(){return this.VG.aJ},nL:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},oL:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.iH(t)},pL:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},qL:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},rL:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},sL:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(THREE.hG.prototype,{qJ:{get:function(){return this.XG.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.XG.enabled=t}},lJ:{get:function(){return this.XG.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.XG.type=t}},tL:{get:function(){return this.XG.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.XG.cullFace=t}}}),Object.defineProperties(THREE.WG.prototype,{cullFace:{get:function(){return this.EJ?THREE.pg:THREE.og},set:function(t){var e=t!==THREE.og;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.EJ=e}}}),Object.defineProperties(THREE.rI.prototype,{Dy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.G.Dy},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.G.Dy=t}},Ey:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.G.Ey},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.G.Ey=t}},wx:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.G.wx},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.G.wx=t}},xx:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.G.xx},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.G.xx=t}},Fy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.G.Fy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.G.Fy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.G.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.G.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.G.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.G.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.G.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.G.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.G.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.G.type=t}},Bx:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.G.Bx},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.G.Bx=t}}}),Object.assign(THREE.Audio.prototype,{load:function(t){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var e=this,n=new THREE.ny;return n.load(t,function(t){e.Rw(t)}),this}}),Object.assign(THREE._w.prototype,{getData:function(t){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.bx()}}),THREE.uL={nd:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e instanceof THREE.jq&&(e.Fq&&e.mr(),i=e.matrix,e=e.j),t.nd(e,i,n)},jn:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.jn()}},THREE.vL={crossOrigin:void 0,wL:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new THREE.A;r.Cy(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},xL:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new THREE.dB;r.Cy(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},yL:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},zL:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},THREE.AL=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.BL=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.Fm(e)},this.CL=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.Lm(e)},this.DL=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.EL=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.lG=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.Dx=function(){},this.kH=function(){},this.eH=function(){}},THREE.FL={GL:function(t,e,n,i){return 2*(1-t)*(n-e)+2*t*(i-n)},HL:function(t,e,n,i,r){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*i*(1-t)-3*t*t*i+3*t*t*r},IL:function(t,e,n,i,r){var o=6*t*t-6*t,a=3*t*t-4*t+1,s=-6*t*t+6*t,h=3*t*t-2*t;return o+a+s+h},Wb:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r,h=r*s;return(2*e-2*n+o+a)*h+(-3*e+3*n-2*o-a)*s+o*r+e}},THREE.JL={KL:function(t,e){for(var n=new THREE.aB,i=0,r=e.length;i<r;i++)n.add(new THREE.jq(t,e[i]));return n},detach:function(t,e,n){t.Oq(e.Km),e.remove(t),n.add(t)},LL:function(t,e,n){var i=new THREE.Gm;i.Jm(n.Km),t.Oq(i),e.remove(t),n.add(t)}},THREE.ML={wp:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},NL:function(){function t(t,e,n,i,r,o){var a,s,h,u,c,f,l,p,d;if(s=t[o[e]].x,h=t[o[e]].y,u=t[o[n]].x,c=t[o[n]].y,f=t[o[i]].x,l=t[o[i]].y,Number.EPSILON>(u-s)*(l-h)-(c-h)*(f-s))return!1;var E,v,g,m,y,T,R,w,H,b,x,A,M,U,O;for(E=f-u,v=l-c,g=s-f,m=h-l,y=u-s,T=c-h,a=0;a<r;a++)if(p=t[o[a]].x,d=t[o[a]].y,!(p===s&&d===h||p===u&&d===c||p===f&&d===l)&&(R=p-s,w=d-h,H=p-u,b=d-c,x=p-f,A=d-l,O=E*b-v*H,M=y*w-T*R,U=g*A-m*x,O>=-Number.EPSILON&&U>=-Number.EPSILON&&M>=-Number.EPSILON))return!1;return!0}return function(e,n){var i=e.length;if(i<3)return null;var r,o,a,s=[],h=[],u=[];if(THREE.ML.wp(e)>0)for(o=0;o<i;o++)h[o]=o;else for(o=0;o<i;o++)h[o]=i-1-o;var c=i,f=2*c;for(o=c-1;c>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:s;if(r=o,c<=r&&(r=0),o=r+1,c<=o&&(o=0),a=o+1,c<=a&&(a=0),t(e,r,o,a,c,h)){var l,p,d,E,v;for(l=h[r],p=h[o],d=h[a],s.push([e[l],e[p],e[d]]),u.push([h[r],h[o],h[a]]),E=o,v=o+1;v<c;E++,v++)h[E]=h[v];c--,f=2*c}}return n?u:s}}(),OL:function(t,e){function n(t){var e=t.length;e>2&&t[e-1].Zi(t[0])&&t.pop()}function i(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function r(t,e,n,r,o){var a=e.x-t.x,s=e.y-t.y,h=r.x-n.x,u=r.y-n.y,c=t.x-n.x,f=t.y-n.y,l=s*h-a*u,p=s*c-a*f;if(Math.abs(l)>Number.EPSILON){var d;if(l>0){if(p<0||p>l)return[];if(d=u*c-h*f,d<0||d>l)return[]}else{if(p>0||p<l)return[];if(d=u*c-h*f,d>0||d<l)return[]}if(0===d)return!o||0!==p&&p!==l?[t]:[];if(d===l)return!o||0!==p&&p!==l?[e]:[];if(0===p)return[n];if(p===l)return[r];var E=d/l;return[{x:t.x+E*a,y:t.y+E*s}]}if(0!==p||u*c!==h*f)return[];var v=0===a&&0===s,g=0===h&&0===u;if(v&&g)return t.x!==n.x||t.y!==n.y?[]:[t];if(v)return i(n,r,t)?[t]:[];if(g)return i(t,e,n)?[n]:[];var m,y,T,R,w,H,b,x;return 0!==a?(t.x<e.x?(m=t,T=t.x,y=e,R=e.x):(m=e,T=e.x,y=t,R=t.x),n.x<r.x?(w=n,b=n.x,H=r,x=r.x):(w=r,b=r.x,H=n,x=n.x)):(t.y<e.y?(m=t,T=t.y,y=e,R=e.y):(m=e,T=e.y,y=t,R=t.y),n.y<r.y?(w=n,b=n.y,H=r,x=r.y):(w=r,b=r.y,H=n,x=n.y)),T<=b?R<b?[]:R===b?o?[]:[w]:R<=x?[w,y]:[w,H]:T>x?[]:T===x?o?[]:[m]:R<=x?[m,y]:[m,H]}function o(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,h=i.x-t.x,u=i.y-t.y,c=r*s-o*a,f=r*u-o*h;if(Math.abs(c)>Number.EPSILON){var l=h*s-u*a;return c>0?f>=0&&l>=0:f>=0||l>=0}return f>0}function a(t,e){function n(t,e){var n=m.length-1,i=t-1;i<0&&(i=n);var r=t+1;r>n&&(r=0);var a=o(m[t],m[i],m[r],s[e]);if(!a)return!1;var h=s.length-1,u=e-1;u<0&&(u=h);var c=e+1;return c>h&&(c=0),a=o(s[e],s[u],s[c],m[t]),!!a}function i(t,e){var n,i,o;for(n=0;n<m.length;n++)if(i=n+1,i%=m.length,o=r(t,e,m[n],m[i],!0),o.length>0)return!0;return!1}function a(t,n){var i,o,a,s,h;for(i=0;i<y.length;i++)for(o=e[y[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,h=r(t,n,o[a],o[s],!0),h.length>0)return!0;return!1}for(var s,h,u,c,f,l,p,d,E,v,g,m=t.concat(),y=[],T=[],R=0,w=e.length;R<w;R++)y.push(R);for(var H=0,b=2*y.length;y.length>0;){if(b--,b<0){console.log("Infinite Loop! Holes left:"+y.length+", Probably Hole outside Shape!");break}for(u=H;u<m.length;u++){c=m[u],h=-1;for(var R=0;R<y.length;R++)if(l=y[R],p=c.x+":"+c.y+":"+l,void 0===T[p]){s=e[l];for(var x=0;x<s.length;x++)if(f=s[x],n(u,x)&&!i(c,f)&&!a(c,f)){h=x,y.splice(R,1),d=m.slice(0,u+1),E=m.slice(u),v=s.slice(h),g=s.slice(0,h+1),m=d.concat(v).concat(g).concat(E),H=u;break}if(h>=0)break;T[p]=!0}if(h>=0)break}}return m}n(t),e.forEach(n);for(var s,h,u,c,f,l,p={},d=t.concat(),E=0,v=e.length;E<v;E++)Array.prototype.push.apply(d,e[E]);for(s=0,h=d.length;s<h;s++)f=d[s].x+":"+d[s].y,void 0!==p[f]&&console.warn("THREE.ShapeUtils: Duplicate point",f,s),p[f]=s;var g=a(t,e),m=THREE.ML.NL(g,!1);for(s=0,h=m.length;s<h;s++)for(c=m[s],u=0;u<3;u++)f=c[u].x+":"+c[u].y,l=p[f],void 0!==l&&(c[u]=l);return m.concat()},PL:function(t){return THREE.ML.wp(t)<0},QL:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(i,r,o,a){return t(i,r)+e(i,o)+n(i,a)}}(),RL:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function i(t,e){return t*t*t*e}return function(r,o,a,s,h){return t(r,o)+e(r,a)+n(r,s)+i(r,h)}}()},THREE.SL=function(){},THREE.SL.prototype={constructor:THREE.SL,op:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},TL:function(t){var e=this.UL(t);return this.op(e)},VL:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.op(n/t));return e},WL:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.TL(n/t));return e},qp:function(){var t=this.XL();return t[t.length-1]},XL:function(t){if(t||(t=this.YL?this.YL:200),this.ZL&&this.ZL.length===t+1&&!this.Ar)return this.ZL;this.Ar=!1;var e,n,i=[],r=this.op(0),o=0;for(i.push(0),n=1;n<=t;n++)e=this.op(n/t),o+=e.pm(r),i.push(o),r=e;return this.ZL=i,i},$L:function(){this.Ar=!0,this.XL()},UL:function(t,e){var n,i=this.XL(),r=0,o=i.length;n=e?e:t*i[o-1];for(var a,s=0,h=o-1;s<=h;)if(r=Math.floor(s+(h-s)/2),a=i[r]-n,a<0)s=r+1;else{if(!(a>0)){h=r;break}h=r-1}if(r=h,i[r]===n){var u=r/(o-1);return u}var c=i[r],f=i[r+1],l=f-c,p=(n-c)/l,u=(r+p)/(o-1);return u},_L:function(t){var e=1e-4,n=t-e,i=t+e;n<0&&(n=0),i>1&&(i=1);var r=this.op(n),o=this.op(i),a=o.clone().sub(r);return a.normalize()},aM:function(t){var e=this.UL(t);return this._L(e)}},THREE.SL.create=function(t,e){return t.prototype=Object.create(THREE.SL.prototype),t.prototype.constructor=t,t.prototype.op=e,t},THREE.bM=function(){this.cM=[],this.dM=!1},THREE.bM.prototype=Object.assign(Object.create(THREE.SL.prototype),{constructor:THREE.bM,add:function(t){this.cM.push(t)},closePath:function(){var t=this.cM[0].op(0),e=this.cM[this.cM.length-1].op(1);t.Zi(e)||this.cM.push(new THREE.eM(e,t))},op:function(t){for(var e=t*this.qp(),n=this.fM(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.cM[i],a=o.qp(),s=0===a?0:1-r/a;return o.TL(s)}i++}return null},qp:function(){var t=this.fM();return t[t.length-1]},$L:function(){this.Ar=!0,this.gM=null,this.XL()},fM:function(){if(this.gM&&this.gM.length===this.cM.length)return this.gM;for(var t=[],e=0,n=0,i=this.cM.length;n<i;n++)e+=this.cM[n].qp(),t.push(e);return this.gM=t,t},WL:function(t){t||(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.op(n/t));return this.dM&&e.push(e[0]),e},VL:function(t){t=t||12;for(var e,n=[],i=0,r=this.cM;i<r.length;i++)for(var o=r[i],a=o instanceof THREE.hM?2*t:o instanceof THREE.eM?1:o instanceof THREE.iM?t*o.points.length:t,s=o.VL(a),h=0;h<s.length;h++){var u=s[h];e&&e.Zi(u)||(n.push(u),e=u)}return this.dM&&n.length>1&&!n[n.length-1].Zi(n[0])&&n.push(n[0]),n},jM:function(t){var e=this.VL(t);return this.kM(e)},lM:function(t){var e=this.WL(t);return this.kM(e)},kM:function(t){for(var e=new THREE.Gn,n=0,i=t.length;n<i;n++){var r=t[n];e.Hn.push(new THREE.K(r.x,r.y,r.z||0))}return e}}),THREE.Qz=function(t){this.data=t},Object.assign(THREE.Qz.prototype,{mM:function(t,e,n){function i(t){for(var n=String(t).split(""),i=e/o.nM,a=0,s=[],h=0;h<n.length;h++){var u=r(n[h],i,a);a+=u.offset,s.push(u.path)}return s}function r(t,e,i){var r=o.oM[t]||o.oM.pM;if(r){var a,s,h,u,c,f,l,p,d,E,v,g=new THREE.qM,m=[],y=THREE.ML.QL,T=THREE.ML.RL;if(r.rM)for(var R=r.sM||(r.sM=r.rM.split(" ")),w=0,H=R.length;w<H;){var b=R[w++];switch(b){case"m":a=R[w++]*e+i,s=R[w++]*e,g.moveTo(a,s);break;case"l":a=R[w++]*e+i,s=R[w++]*e,g.lineTo(a,s);break;case"q":if(h=R[w++]*e+i,u=R[w++]*e,l=R[w++]*e+i,p=R[w++]*e,g.quadraticCurveTo(l,p,h,u),v=m[m.length-1]){c=v.x,f=v.y;for(var x=1;x<=n;x++){var A=x/n;y(A,c,l,h),y(A,f,p,u)}}break;case"b":if(h=R[w++]*e+i,u=R[w++]*e,l=R[w++]*e+i,p=R[w++]*e,d=R[w++]*e+i,E=R[w++]*e,g.bezierCurveTo(l,p,d,E,h,u),v=m[m.length-1]){c=v.x,f=v.y;for(var x=1;x<=n;x++){var A=x/n;T(A,c,l,d,h),T(A,f,p,E,u)}}}}return{offset:r.tM*e,path:g}}}void 0===e&&(e=100),void 0===n&&(n=4);for(var o=this.data,a=i(t),s=[],h=0,u=a.length;h<u;h++)Array.prototype.push.apply(s,a[h].uM());return s}}),THREE.vM=function(t){THREE.bM.call(this),this.wM=new THREE.ea,t&&this.xM(t)},THREE.vM.prototype=Object.assign(Object.create(THREE.bM.prototype),{constructor:THREE.vM,xM:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.wM.set(t,e)},lineTo:function(t,e){var n=new THREE.eM(this.wM.clone(),new THREE.ea(t,e));this.cM.push(n),this.wM.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new THREE.yM(this.wM.clone(),new THREE.ea(t,e),new THREE.ea(n,i));this.cM.push(r),this.wM.set(n,i)},bezierCurveTo:function(t,e,n,i,r,o){var a=new THREE.zM(this.wM.clone(),new THREE.ea(t,e),new THREE.ea(n,i),new THREE.ea(r,o));this.cM.push(a),this.wM.set(r,o)},AM:function(t){var e=[this.wM.clone()].concat(t),n=new THREE.iM(e);this.cM.push(n),this.wM.Di(t[t.length-1])},arc:function(t,e,n,i,r,o){var a=this.wM.x,s=this.wM.y;this.BM(t+a,e+s,n,i,r,o)},BM:function(t,e,n,i,r,o){this.CM(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,a,s){var h=this.wM.x,u=this.wM.y;this.CM(t+h,e+u,n,i,r,o,a,s)},CM:function(t,e,n,i,r,o,a,s){var h=new THREE.hM(t,e,n,i,r,o,a,s);if(this.cM.length>0){var u=h.op(0);u.Zi(this.wM)||this.lineTo(u.x,u.y)}this.cM.push(h);var c=h.op(1);this.wM.Di(c)}}),THREE.qM=function(){this.DM=[],this.EM=null},THREE.qM.prototype={moveTo:function(t,e){this.EM=new THREE.vM,this.DM.push(this.EM),this.EM.moveTo(t,e)},lineTo:function(t,e){this.EM.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.EM.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.EM.bezierCurveTo(t,e,n,i,r,o)},AM:function(t){this.EM.AM(t)},uM:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new THREE.FM;o.cM=r.cM,e.push(o)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],h=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=e[o],h=-h,s=e[r],u=-u),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=u*(t.x-a.x)-h*(t.y-a.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i}var r=THREE.ML.PL,o=this.DM;if(0===o.length)return[];if(e===!0)return n(o);var a,s,h,u=[];if(1===o.length)return s=o[0],h=new THREE.FM,h.cM=s.cM,u.push(h),u;var c=!r(o[0].VL());c=t?!c:c;var f,l=[],p=[],d=[],E=0;p[E]=void 0,d[E]=[];for(var v=0,g=o.length;v<g;v++)s=o[v],f=s.VL(),a=r(f),a=t?!a:a,a?(!c&&p[E]&&E++,p[E]={Ri:new THREE.FM,m:f},p[E].Ri.cM=s.cM,c&&E++,d[E]=[]):d[E].push({Qi:s,m:f[0]});if(!p[0])return n(o);if(p.length>1){for(var m=!1,y=[],T=0,R=p.length;T<R;T++)l[T]=[];for(var T=0,R=p.length;T<R;T++)for(var w=d[T],H=0;H<w.length;H++){for(var b=w[H],x=!0,A=0;A<p.length;A++)i(b.m,p[A].m)&&(T!==A&&y.push({GM:T,HM:A,IM:H}),x?(x=!1,l[A].push(b)):m=!0);x&&l[T].push(b)}y.length>0&&(m||(d=l))}for(var M,v=0,U=p.length;v<U;v++){h=p[v].Ri,u.push(h),M=d[v];for(var O=0,S=M.length;O<S;O++)h.JM.push(M[O].Qi)}return u}},THREE.FM=function(){THREE.vM.apply(this,arguments),this.JM=[]},THREE.FM.prototype=Object.assign(Object.create(THREE.vM.prototype),{constructor:THREE.FM,KM:function(t){return new THREE.LM(this,t)},MM:function(t){return new THREE.NM(this,t)},OM:function(t){for(var e=[],n=0,i=this.JM.length;n<i;n++)e[n]=this.JM[n].VL(t);return e},PM:function(t){return{shape:this.VL(t),JM:this.OM(t)}},QM:function(t){return this.PM(t)}}),THREE.eM=function(t,e){this.RM=t,this.SM=e},THREE.eM.prototype=Object.create(THREE.SL.prototype),THREE.eM.prototype.constructor=THREE.eM,THREE.eM.prototype.op=function(t){if(1===t)return this.SM.clone();var e=this.SM.clone().sub(this.RM);return e.Xi(t).add(this.RM),e},THREE.eM.prototype.TL=function(t){return this.op(t)},THREE.eM.prototype._L=function(t){var e=this.SM.clone().sub(this.RM);return e.normalize()},THREE.yM=function(t,e,n){this.TM=t,this.RM=e,this.SM=n},THREE.yM.prototype=Object.create(THREE.SL.prototype),THREE.yM.prototype.constructor=THREE.yM,THREE.yM.prototype.op=function(t){var e=THREE.ML.QL;return new THREE.ea(e(t,this.TM.x,this.RM.x,this.SM.x),e(t,this.TM.y,this.RM.y,this.SM.y))},THREE.yM.prototype._L=function(t){var e=THREE.FL.GL;return new THREE.ea(e(t,this.TM.x,this.RM.x,this.SM.x),e(t,this.TM.y,this.RM.y,this.SM.y)).normalize()},THREE.zM=function(t,e,n,i){this.TM=t,this.RM=e,this.SM=n,this.UM=i},THREE.zM.prototype=Object.create(THREE.SL.prototype),THREE.zM.prototype.constructor=THREE.zM,THREE.zM.prototype.op=function(t){var e=THREE.ML.RL;return new THREE.ea(e(t,this.TM.x,this.RM.x,this.SM.x,this.UM.x),e(t,this.TM.y,this.RM.y,this.SM.y,this.UM.y))},THREE.zM.prototype._L=function(t){var e=THREE.FL.HL;return new THREE.ea(e(t,this.TM.x,this.RM.x,this.SM.x,this.UM.x),e(t,this.TM.y,this.RM.y,this.SM.y,this.UM.y)).normalize()},THREE.iM=function(t){this.points=void 0==t?[]:t},THREE.iM.prototype=Object.create(THREE.SL.prototype),THREE.iM.prototype.constructor=THREE.iM,THREE.iM.prototype.op=function(t){var e=this.points,n=(e.length-1)*t,i=Math.floor(n),r=n-i,o=e[0===i?i:i-1],a=e[i],s=e[i>e.length-2?e.length-1:i+1],h=e[i>e.length-3?e.length-1:i+2],u=THREE.FL.Wb;return new THREE.ea(u(o.x,a.x,s.x,h.x,r),u(o.y,a.y,s.y,h.y,r))},THREE.hM=function(t,e,n,i,r,o,a,s){this.VM=t,this.WM=e,this.XM=n,this.YM=i,this.ZM=r,this.$M=o,this._M=a,this.aN=s||0},THREE.hM.prototype=Object.create(THREE.SL.prototype),THREE.hM.prototype.constructor=THREE.hM,THREE.hM.prototype.op=function(t){for(var e=2*Math.PI,n=this.$M-this.ZM,i=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=i?0:e),this._M!==!0||i||(n===e?n=-e:n-=e);var r=this.ZM+t*n,o=this.VM+this.XM*Math.cos(r),a=this.WM+this.YM*Math.sin(r);if(0!==this.aN){var s=Math.cos(this.aN),h=Math.sin(this.aN),u=o-this.VM,c=a-this.WM;o=u*s-c*h+this.VM,a=u*h+c*s+this.WM}return new THREE.ea(o,a)},THREE.bN=function(t,e,n,i,r,o){THREE.hM.call(this,t,e,n,n,i,r,o)},THREE.bN.prototype=Object.create(THREE.hM.prototype),THREE.bN.prototype.constructor=THREE.bN,THREE.cN=THREE.SL.create(function(t,e){this.RM=t,this.SM=e},function(t){if(1===t)return this.SM.clone();var e=new THREE.K;return e.hm(this.SM,this.RM),e.Xi(t),e.add(this.RM),e}),THREE.dN=THREE.SL.create(function(t,e,n){this.TM=t,this.RM=e,this.SM=n},function(t){var e=THREE.ML.QL;return new THREE.K(e(t,this.TM.x,this.RM.x,this.SM.x),e(t,this.TM.y,this.RM.y,this.SM.y),e(t,this.TM.z,this.RM.z,this.SM.z))}),THREE.eN=THREE.SL.create(function(t,e,n,i){this.TM=t,this.RM=e,this.SM=n,this.UM=i},function(t){var e=THREE.ML.RL;return new THREE.K(e(t,this.TM.x,this.RM.x,this.SM.x,this.UM.x),e(t,this.TM.y,this.RM.y,this.SM.y,this.UM.y),e(t,this.TM.z,this.RM.z,this.SM.z,this.UM.z))}),THREE.fN=THREE.SL.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==t?[]:t},function(t){var e=this.points,n=(e.length-1)*t,i=Math.floor(n),r=n-i,o=e[0==i?i:i-1],a=e[i],s=e[i>e.length-2?e.length-1:i+1],h=e[i>e.length-3?e.length-1:i+2],u=THREE.FL.Wb;return new THREE.K(u(o.x,a.x,s.x,h.x,r),u(o.y,a.y,s.y,h.y,r),u(o.z,a.z,s.z,h.z,r))}),THREE.gN=function(){function t(){}var e=new THREE.K,n=new t,i=new t,r=new t;return t.prototype.init=function(t,e,n,i){this.hN=t,this.iN=n,this.jN=-3*t+3*e-2*n-i,this.kN=2*t-2*e+n+i},t.prototype.lN=function(t,e,n,i,r,o,a){var s=(e-t)/r-(n-t)/(r+o)+(n-e)/o,h=(n-e)/o-(i-e)/(o+a)+(i-n)/a;s*=o,h*=o,this.init(e,n,s,h)},t.prototype.mN=function(t,e,n,i,r){this.init(e,n,r*(n-t),r*(i-e))},t.prototype.nN=function(t){var e=t*t,n=e*t;return this.hN+this.iN*t+this.jN*e+this.kN*n},THREE.SL.create(function(t){this.points=t||[],this.closed=!1},function(t){var o,a,s,h,u=this.points;h=u.length,h<2&&console.log("duh, you need at least 2 points"),o=(h-(this.closed?0:1))*t,a=Math.floor(o),s=o-a,this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/u.length)+1)*u.length:0===s&&a===h-1&&(a=h-2,s=1);var c,f,l,p;if(this.closed||a>0?c=u[(a-1)%h]:(e.hm(u[0],u[1]).add(u[0]),c=e),f=u[a%h],l=u[(a+1)%h],this.closed||a+2<h?p=u[(a+2)%h]:(e.hm(u[h-1],u[h-2]).add(u[h-1]),p=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var d="chordal"===this.type?.5:.25,E=Math.pow(c.qm(f),d),v=Math.pow(f.qm(l),d),g=Math.pow(l.qm(p),d);v<1e-4&&(v=1),E<1e-4&&(E=v),g<1e-4&&(g=v),n.lN(c.x,f.x,l.x,p.x,E,v,g),i.lN(c.y,f.y,l.y,p.y,E,v,g),r.lN(c.z,f.z,l.z,p.z,E,v,g)}else if("catmullrom"===this.type){var m=void 0!==this.oN?this.oN:.5;n.mN(c.x,f.x,l.x,p.x,m),i.mN(c.y,f.y,l.y,p.y,m),r.mN(c.z,f.z,l.z,p.z,m)}var y=new THREE.K(n.nN(s),i.nN(s),r.nN(s));return y})}(),THREE.pN=function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),THREE.gN.call(this,t),this.type="catmullrom",this.closed=!0},THREE.pN.prototype=Object.create(THREE.gN.prototype),THREE.qN=function(t,e,n,i,r,o){THREE.Gn.call(this),this.type="BoxGeometry",this.Hs={width:t,height:e,GA:n,EA:i,FA:r,HA:o},this.rs(new THREE.UG(t,e,n,i,r,o)),this.Es()},THREE.qN.prototype=Object.create(THREE.Gn.prototype),THREE.qN.prototype.constructor=THREE.qN,THREE.rN=THREE.qN,THREE.UG=function(t,e,n,i,r,o){function a(t,e,n){var i=0;return i+=(t+1)*(e+1)*2,i+=(t+1)*(n+1)*2,i+=(n+1)*(e+1)*2}function s(t,e,n){var i=0;return i+=t*e*2,i+=t*n*2,i+=n*e*2,6*i}function h(t,e,n,i,r,o,a,s,h,c,f){for(var R=o/h,w=a/c,H=o/2,b=a/2,x=s/2,A=h+1,M=c+1,U=0,O=0,S=new THREE.K,D=0;D<M;D++)for(var C=D*w-b,L=0;L<A;L++){var P=L*R-H;S[t]=P*i,S[e]=C*r,S[n]=x,p[v]=S.x,p[v+1]=S.y,p[v+2]=S.z,S[t]=0,S[e]=0,S[n]=s>0?1:-1,d[v]=S.x,d[v+1]=S.y,d[v+2]=S.z,E[g]=L/h,E[g+1]=1-D/c,v+=3,g+=2,U+=1}for(D=0;D<c;D++)for(L=0;L<h;L++){var N=y+L+A*D,I=y+L+A*(D+1),z=y+(L+1)+A*(D+1),B=y+(L+1)+A*D;l[m]=N,l[m+1]=I,l[m+2]=B,l[m+3]=I,l[m+4]=z,l[m+5]=B,m+=6,O+=6}u.Vs(T,O,f),T+=O,y+=U}THREE.In.call(this),this.type="BoxBufferGeometry",this.Hs={width:t,height:e,GA:n,EA:i,FA:r,HA:o};var u=this;i=Math.floor(i)||1,
r=Math.floor(r)||1,o=Math.floor(o)||1;var c=a(i,r,o),f=s(i,r,o),l=new(f>65535?Uint32Array:Uint16Array)(f),p=new Float32Array(3*c),d=new Float32Array(3*c),E=new Float32Array(2*c),v=0,g=0,m=0,y=0,T=0;h("z","y","x",-1,-1,n,e,t,o,r,0),h("z","y","x",1,-1,n,e,-t,o,r,1),h("x","z","y",1,1,t,n,e,i,o,2),h("x","z","y",1,-1,t,n,-e,i,o,3),h("x","y","z",1,-1,t,e,n,i,r,4),h("x","y","z",-1,-1,t,e,-n,i,r,5),this.Ts(new THREE.wr(l,1)),this.Us("position",new THREE.wr(p,3)),this.Us("normal",new THREE.wr(d,3)),this.Us("uv",new THREE.wr(E,2))},THREE.UG.prototype=Object.create(THREE.In.prototype),THREE.UG.prototype.constructor=THREE.UG,THREE.sN=function(t,e,n,i){THREE.Gn.call(this),this.type="CircleGeometry",this.Hs={N:t,IA:e,JA:n,KA:i},this.rs(new THREE.tN(t,e,n,i))},THREE.sN.prototype=Object.create(THREE.Gn.prototype),THREE.sN.prototype.constructor=THREE.sN,THREE.tN=function(t,e,n,i){THREE.In.call(this),this.type="CircleBufferGeometry",this.Hs={N:t,IA:e,JA:n,KA:i},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r=e+2,o=new Float32Array(3*r),a=new Float32Array(3*r),s=new Float32Array(2*r);a[2]=1,s[0]=.5,s[1]=.5;for(var h=0,u=3,c=2;h<=e;h++,u+=3,c+=2){var f=n+h/e*i;o[u]=t*Math.cos(f),o[u+1]=t*Math.sin(f),a[u+2]=1,s[c]=(o[u]/t+1)/2,s[c+1]=(o[u+1]/t+1)/2}for(var l=[],u=1;u<=e;u++)l.push(u,u+1,0);this.Ts(new THREE.wr(new Uint16Array(l),1)),this.Us("position",new THREE.wr(o,3)),this.Us("normal",new THREE.wr(a,3)),this.Us("uv",new THREE.wr(s,2)),this.No=new THREE.Pn(new THREE.K,t)},THREE.tN.prototype=Object.create(THREE.In.prototype),THREE.tN.prototype.constructor=THREE.tN,THREE.uN=function(t,e,n,i,r,o,a,s){function h(){var t=(i+1)*(r+1);return o===!1&&(t+=(i+1)*p+i*p),t}function u(){var t=i*r*2*3;return o===!1&&(t+=i*p*3),t}function c(){var o,h,u=new THREE.K,c=new THREE.K,f=0,p=(e-t)/n;for(h=0;h<=r;h++){var d=[],E=h/r,x=E*(e-t)+t;for(o=0;o<=i;o++){var A=o/i;c.x=x*Math.sin(A*s+a),c.y=-E*n+H,c.z=x*Math.cos(A*s+a),g.Xn(T,c.x,c.y,c.z),u.Di(c),(0===t&&0===h||0===e&&h===r)&&(u.x=Math.sin(A*s+a),u.z=Math.cos(A*s+a)),u.cm(Math.sqrt(u.x*u.x+u.z*u.z)*p).normalize(),m.Xn(T,u.x,u.y,u.z),y.Kr(T,A,1-E),d.push(T),T++}w.push(d)}for(o=0;o<i;o++)for(h=0;h<r;h++){var M=w[h][o],U=w[h+1][o],O=w[h+1][o+1],S=w[h][o+1];v.bm(R,M),R++,v.bm(R,U),R++,v.bm(R,S),R++,v.bm(R,U),R++,v.bm(R,O),R++,v.bm(R,S),R++,f+=6}l.Vs(b,f,0),b+=f}function f(n){var r,o,h,u=new THREE.ea,c=new THREE.K,f=0,p=n===!0?t:e,d=n===!0?1:-1;for(o=T,r=1;r<=i;r++)g.Xn(T,0,H*d,0),m.Xn(T,0,d,0),u.x=.5,u.y=.5,y.Kr(T,u.x,u.y),T++;for(h=T,r=0;r<=i;r++){var E=r/i,w=E*s+a,x=Math.cos(w),A=Math.sin(w);c.x=p*A,c.y=H*d,c.z=p*x,g.Xn(T,c.x,c.y,c.z),m.Xn(T,0,d,0),u.x=.5*x+.5,u.y=.5*A*d+.5,y.Kr(T,u.x,u.y),T++}for(r=0;r<i;r++){var M=o+r,U=h+r;n===!0?(v.bm(R,U),R++,v.bm(R,U+1),R++,v.bm(R,M),R++):(v.bm(R,U+1),R++,v.bm(R,U),R++,v.bm(R,M),R++),f+=3}l.Vs(b,f,n===!0?1:2),b+=f}THREE.In.call(this),this.type="CylinderBufferGeometry",this.Hs={LA:t,MA:e,height:n,NA:i,FA:r,OA:o,JA:a,KA:s};var l=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var p=0;o===!1&&(t>0&&p++,e>0&&p++);var d=h(),E=u(),v=new THREE.wr(new(E>65535?Uint32Array:Uint16Array)(E),1),g=new THREE.wr(new Float32Array(3*d),3),m=new THREE.wr(new Float32Array(3*d),3),y=new THREE.wr(new Float32Array(2*d),2),T=0,R=0,w=[],H=n/2,b=0;c(),o===!1&&(t>0&&f(!0),e>0&&f(!1)),this.Ts(v),this.Us("position",g),this.Us("normal",m),this.Us("uv",y)},THREE.uN.prototype=Object.create(THREE.In.prototype),THREE.uN.prototype.constructor=THREE.uN,THREE.vN=function(t,e,n,i,r,o,a,s){THREE.Gn.call(this),this.type="CylinderGeometry",this.Hs={LA:t,MA:e,height:n,NA:i,FA:r,OA:o,JA:a,KA:s},this.rs(new THREE.uN(t,e,n,i,r,o,a,s)),this.Es()},THREE.vN.prototype=Object.create(THREE.Gn.prototype),THREE.vN.prototype.constructor=THREE.vN,THREE.wN=function(t,e,n,i,r,o,a){THREE.uN.call(this,0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.Hs={N:t,height:e,NA:n,FA:i,JA:o,KA:a}},THREE.wN.prototype=Object.create(THREE.In.prototype),THREE.wN.prototype.constructor=THREE.wN,THREE.xN=function(t,e,n,i,r,o,a){THREE.vN.call(this,0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.Hs={N:t,height:e,NA:n,FA:i,OA:r,JA:o,KA:a}},THREE.xN.prototype=Object.create(THREE.vN.prototype),THREE.xN.prototype.constructor=THREE.xN,THREE.yN=function(t,e){function n(t,e){return t-e}THREE.In.call(this),e=void 0!==e?e:1;var i,r=Math.cos(THREE.Math.vo*e),o=[0,0],a={},s=["a","b","c"];t instanceof THREE.In?(i=new THREE.Gn,i.rs(t)):i=t.clone(),i.Es(),i.vs();for(var h=i.Hn,u=i.as,c=0,f=u.length;c<f;c++)for(var l=u[c],p=0;p<3;p++){o[0]=l[s[p]],o[1]=l[s[(p+1)%3]],o.sort(n);var d=o.toString();void 0===a[d]?a[d]={zN:o[0],AN:o[1],BN:c,CN:void 0}:a[d].CN=c}var E=[];for(var d in a){var v=a[d];if(void 0===v.CN||u[v.BN].Nn.Ul(u[v.CN].Nn)<=r){var g=h[v.zN];E.push(g.x),E.push(g.y),E.push(g.z),g=h[v.AN],E.push(g.x),E.push(g.y),E.push(g.z)}}this.Us("position",new THREE.wr(new Float32Array(E),3))},THREE.yN.prototype=Object.create(THREE.In.prototype),THREE.yN.prototype.constructor=THREE.yN,THREE.LM=function(t,e){return"undefined"==typeof t?void(t=[]):(THREE.Gn.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.DN(t,e),void this.vs())},THREE.LM.prototype=Object.create(THREE.Gn.prototype),THREE.LM.prototype.constructor=THREE.LM,THREE.LM.prototype.DN=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];this.EN(r,e)}},THREE.LM.prototype.EN=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().Xi(n).add(t)}function i(t,e,n){var i,r,o=1,a=t.x-e.x,s=t.y-e.y,h=n.x-t.x,u=n.y-t.y,c=a*a+s*s,f=a*u-s*h;if(Math.abs(f)>Number.EPSILON){var l=Math.sqrt(c),p=Math.sqrt(h*h+u*u),d=e.x-s/l,E=e.y+a/l,v=n.x-u/p,g=n.y+h/p,m=((v-d)*u-(g-E)*h)/(a*u-s*h);i=d+a*m-t.x,r=E+s*m-t.y;var y=i*i+r*r;if(y<=2)return new THREE.ea(i,r);o=Math.sqrt(y/2)}else{var T=!1;a>Number.EPSILON?h>Number.EPSILON&&(T=!0):a<-Number.EPSILON?h<-Number.EPSILON&&(T=!0):Math.sign(s)===Math.sign(u)&&(T=!0),T?(i=-s,r=a,o=Math.sqrt(c)):(i=a,r=s,o=Math.sqrt(c/2))}return new THREE.ea(i/o,r/o)}function r(){if(y){var t=0,e=F*t;for(K=0;K<k;K++)G=P[K],h(G[2]+e,G[1]+e,G[0]+e);for(t=R+2*m,e=F*t,K=0;K<k;K++)G=P[K],h(G[0]+e,G[1]+e,G[2]+e)}else{for(K=0;K<k;K++)G=P[K],h(G[2],G[1],G[0]);for(K=0;K<k;K++)G=P[K],h(G[0]+F*R,G[1]+F*R,G[2]+F*R)}}function o(){var t=0;for(a(N,t),t+=N.length,A=0,M=C.length;A<M;A++)x=C[A],a(x,t),t+=x.length}function a(t,e){var n,i;for(K=t.length;--K>=0;){n=K,i=K-1,i<0&&(i=t.length-1);var r=0,o=R+2*m;for(r=0;r<o;r++){var a=F*r,s=F*(r+1),h=e+n+a,c=e+i+a,f=e+i+s,l=e+n+s;u(h,c,f,l,t,r,o,n,i)}}}function s(t,e,n){U.Hn.push(new THREE.K(t,e,n))}function h(t,e,n){t+=O,e+=O,n+=O,U.as.push(new THREE.sr(t,e,n,null,null,0));var i=b.SN(U,t,e,n);U.bs[0].push(i)}function u(t,e,n,i,r,o,a,s,h){t+=O,e+=O,n+=O,i+=O,U.as.push(new THREE.sr(t,e,i,null,null,1)),U.as.push(new THREE.sr(e,n,i,null,null,1));var u=b.TN(U,t,e,n,i);U.bs[0].push([u[0],u[1],u[3]]),U.bs[0].push([u[1],u[2],u[3]])}var c,f,l,p,d,E=void 0!==e.FN?e.FN:100,v=void 0!==e.GN?e.GN:6,g=void 0!==e.HN?e.HN:v-2,m=void 0!==e.IN?e.IN:3,y=void 0===e.JN||e.JN,T=void 0!==e.KN?e.KN:12,R=void 0!==e.LN?e.LN:1,w=e.MN,H=!1,b=void 0!==e.NN?e.NN:THREE.LM.ON;w&&(c=w.WL(R),H=!0,y=!1,f=void 0!==e.frames?e.frames:new THREE.QN.PN(w,R,!1),l=new THREE.K,p=new THREE.K,d=new THREE.K),y||(m=0,v=0,g=0);var x,A,M,U=this,O=this.Hn.length,S=t.QM(T),D=S.shape,C=S.JM,L=!THREE.ML.PL(D);if(L){for(D=D.reverse(),A=0,M=C.length;A<M;A++)x=C[A],THREE.ML.PL(x)&&(C[A]=x.reverse());L=!1}var P=THREE.ML.OL(D,C),N=D;for(A=0,M=C.length;A<M;A++)x=C[A],D=D.concat(x);for(var I,z,B,j,q,G,F=D.length,k=P.length,V=[],K=0,W=N.length,Z=W-1,X=K+1;K<W;K++,Z++,X++)Z===W&&(Z=0),X===W&&(X=0),V[K]=i(N[K],N[Z],N[X]);var Y,J=[],Q=V.concat();for(A=0,M=C.length;A<M;A++){for(x=C[A],Y=[],K=0,W=x.length,Z=W-1,X=K+1;K<W;K++,Z++,X++)Z===W&&(Z=0),X===W&&(X=0),Y[K]=i(x[K],x[Z],x[X]);J.push(Y),Q=Q.concat(Y)}for(I=0;I<m;I++){for(B=I/m,j=v*(1-B),z=g*Math.sin(B*Math.PI/2),K=0,W=N.length;K<W;K++)q=n(N[K],V[K],z),s(q.x,q.y,-j);for(A=0,M=C.length;A<M;A++)for(x=C[A],Y=J[A],K=0,W=x.length;K<W;K++)q=n(x[K],Y[K],z),s(q.x,q.y,-j)}for(z=g,K=0;K<F;K++)q=y?n(D[K],Q[K],z):D[K],H?(p.Di(f.Is[0]).Xi(q.x),l.Di(f.RN[0]).Xi(q.y),d.Di(c[0]).add(p).add(l),s(d.x,d.y,d.z)):s(q.x,q.y,0);var $;for($=1;$<=R;$++)for(K=0;K<F;K++)q=y?n(D[K],Q[K],z):D[K],H?(p.Di(f.Is[$]).Xi(q.x),l.Di(f.RN[$]).Xi(q.y),d.Di(c[$]).add(p).add(l),s(d.x,d.y,d.z)):s(q.x,q.y,E/R*$);for(I=m-1;I>=0;I--){for(B=I/m,j=v*(1-B),z=g*Math.sin(B*Math.PI/2),K=0,W=N.length;K<W;K++)q=n(N[K],V[K],z),s(q.x,q.y,E+j);for(A=0,M=C.length;A<M;A++)for(x=C[A],Y=J[A],K=0,W=x.length;K<W;K++)q=n(x[K],Y[K],z),H?s(q.x,q.y+c[R-1].y,c[R-1].x+j):s(q.x,q.y,E+j)}r(),o()},THREE.LM.ON={SN:function(t,e,n,i){var r=t.Hn,o=r[e],a=r[n],s=r[i];return[new THREE.ea(o.x,o.y),new THREE.ea(a.x,a.y),new THREE.ea(s.x,s.y)]},TN:function(t,e,n,i,r){var o=t.Hn,a=o[e],s=o[n],h=o[i],u=o[r];return Math.abs(a.y-s.y)<.01?[new THREE.ea(a.x,1-a.z),new THREE.ea(s.x,1-s.z),new THREE.ea(h.x,1-h.z),new THREE.ea(u.x,1-u.z)]:[new THREE.ea(a.y,1-a.z),new THREE.ea(s.y,1-s.z),new THREE.ea(h.y,1-h.z),new THREE.ea(u.y,1-u.z)]}},THREE.NM=function(t,e){THREE.Gn.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.DN(t,e),this.vs()},THREE.NM.prototype=Object.create(THREE.Gn.prototype),THREE.NM.prototype.constructor=THREE.NM,THREE.NM.prototype.DN=function(t,e){for(var n=0,i=t.length;n<i;n++)this.EN(t[n],e);return this},THREE.NM.prototype.EN=function(t,e){void 0===e&&(e={});var n,i,r,o=void 0!==e.KN?e.KN:12,a=e.k,s=void 0===e.NN?THREE.LM.ON:e.NN,h=this.Hn.length,u=t.QM(o),c=u.shape,f=u.JM,l=!THREE.ML.PL(c);if(l){for(c=c.reverse(),n=0,i=f.length;n<i;n++)r=f[n],THREE.ML.PL(r)&&(f[n]=r.reverse());l=!1}var p=THREE.ML.OL(c,f);for(n=0,i=f.length;n<i;n++)r=f[n],c=c.concat(r);var d,E,v=c.length,g=p.length;for(n=0;n<v;n++)d=c[n],this.Hn.push(new THREE.K(d.x,d.y,0));for(n=0;n<g;n++){E=p[n];var m=E[0]+h,y=E[1]+h,T=E[2]+h;this.as.push(new THREE.sr(m,y,T,null,null,a)),this.bs[0].push(s.SN(this,m,y,T))}},THREE.UN=function(t,e,n,i){THREE.In.call(this),this.type="LatheBufferGeometry",this.Hs={points:t,IA:e,PA:n,QA:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=THREE.Math.Ae(i,0,2*Math.PI);var r,o,a,s=(e+1)*t.length,h=e*t.length*2*3,u=new THREE.wr(new(h>65535?Uint32Array:Uint16Array)(h),1),c=new THREE.wr(new Float32Array(3*s),3),f=new THREE.wr(new Float32Array(2*s),2),l=0,p=0,d=(1/(t.length-1),1/e),E=new THREE.K,v=new THREE.ea;for(o=0;o<=e;o++){var g=n+o*d*i,m=Math.sin(g),y=Math.cos(g);for(a=0;a<=t.length-1;a++)E.x=t[a].x*m,E.y=t[a].y,E.z=t[a].x*y,c.Xn(l,E.x,E.y,E.z),v.x=o/e,v.y=a/(t.length-1),f.Kr(l,v.x,v.y),l++}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){r=a+o*t.length;var T=r,R=r+t.length,w=r+t.length+1,H=r+1;u.bm(p,T),p++,u.bm(p,R),p++,u.bm(p,H),p++,u.bm(p,R),p++,u.bm(p,w),p++,u.bm(p,H),p++}if(this.Ts(u),this.Us("position",c),this.Us("uv",f),this.ws(),i===2*Math.PI){var b=this.attributes.Nn.ec,x=new THREE.K,A=new THREE.K,M=new THREE.K;for(r=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)x.x=b[a+0],x.y=b[a+1],x.z=b[a+2],A.x=b[r+a+0],A.y=b[r+a+1],A.z=b[r+a+2],M.fm(x,A).normalize(),b[a+0]=b[r+a+0]=M.x,b[a+1]=b[r+a+1]=M.y,b[a+2]=b[r+a+2]=M.z}},THREE.UN.prototype=Object.create(THREE.In.prototype),THREE.UN.prototype.constructor=THREE.UN,THREE.VN=function(t,e,n,i){THREE.Gn.call(this),this.type="LatheGeometry",this.Hs={points:t,IA:e,PA:n,QA:i},this.rs(new THREE.UN(t,e,n,i)),this.Es()},THREE.VN.prototype=Object.create(THREE.Gn.prototype);THREE.VN.prototype.constructor=THREE.VN;THREE.WN=function(t,e,n,i){THREE.Gn.call(this),this.type="PlaneGeometry",this.Hs={width:t,height:e,EA:n,FA:i},this.rs(new THREE.TG(t,e,n,i))},THREE.WN.prototype=Object.create(THREE.Gn.prototype),THREE.WN.prototype.constructor=THREE.WN,THREE.TG=function(t,e,n,i){THREE.In.call(this),this.type="PlaneBufferGeometry",this.Hs={width:t,height:e,EA:n,FA:i};for(var r=t/2,o=e/2,a=Math.floor(n)||1,s=Math.floor(i)||1,h=a+1,u=s+1,c=t/a,f=e/s,l=new Float32Array(h*u*3),p=new Float32Array(h*u*3),d=new Float32Array(h*u*2),E=0,v=0,g=0;g<u;g++)for(var m=g*f-o,y=0;y<h;y++){var T=y*c-r;l[E]=T,l[E+1]=-m,p[E+2]=1,d[v]=y/a,d[v+1]=1-g/s,E+=3,v+=2}E=0;for(var R=new(l.length/3>65535?Uint32Array:Uint16Array)(a*s*6),g=0;g<s;g++)for(var y=0;y<a;y++){var w=y+h*g,H=y+h*(g+1),b=y+1+h*(g+1),x=y+1+h*g;R[E]=w,R[E+1]=H,R[E+2]=x,R[E+3]=H,R[E+4]=b,R[E+5]=x,E+=6}this.Ts(new THREE.wr(R,1)),this.Us("position",new THREE.wr(l,3)),this.Us("normal",new THREE.wr(p,3)),this.Us("uv",new THREE.wr(d,2))},THREE.TG.prototype=Object.create(THREE.In.prototype),THREE.TG.prototype.constructor=THREE.TG,THREE.XN=function(t,e,n,i,r,o){THREE.In.call(this),this.type="RingBufferGeometry",this.Hs={RA:t,SA:e,TA:n,UA:i,JA:r,KA:o},t=t||20,e=e||50,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var a,s,h,u=(n+1)*(i+1),c=n*i*2*3,f=new THREE.wr(new(c>65535?Uint32Array:Uint16Array)(c),1),l=new THREE.wr(new Float32Array(3*u),3),p=new THREE.wr(new Float32Array(3*u),3),d=new THREE.wr(new Float32Array(2*u),2),E=0,v=0,g=t,m=(e-t)/i,y=new THREE.K,T=new THREE.ea;for(s=0;s<=i;s++){for(h=0;h<=n;h++)a=r+h/n*o,y.x=g*Math.cos(a),y.y=g*Math.sin(a),l.Xn(E,y.x,y.y,y.z),p.Xn(E,0,0,1),T.x=(y.x/e+1)/2,T.y=(y.y/e+1)/2,d.Kr(E,T.x,T.y),E++;g+=m}for(s=0;s<i;s++){var R=s*(n+1);for(h=0;h<n;h++){a=h+R;var w=a,H=a+n+1,b=a+n+2,x=a+1;f.bm(v,w),v++,f.bm(v,H),v++,f.bm(v,b),v++,f.bm(v,w),v++,f.bm(v,b),v++,f.bm(v,x),v++}}this.Ts(f),this.Us("position",l),this.Us("normal",p),this.Us("uv",d)},THREE.XN.prototype=Object.create(THREE.In.prototype),THREE.XN.prototype.constructor=THREE.XN,THREE.YN=function(t,e,n,i,r,o){THREE.Gn.call(this),this.type="RingGeometry",this.Hs={RA:t,SA:e,TA:n,UA:i,JA:r,KA:o},this.rs(new THREE.XN(t,e,n,i,r,o))},THREE.YN.prototype=Object.create(THREE.Gn.prototype),THREE.YN.prototype.constructor=THREE.YN,THREE.ZN=function(t,e,n,i,r,o,a){THREE.Gn.call(this),this.type="SphereGeometry",this.Hs={N:t,EA:e,FA:n,PA:i,QA:r,JA:o,KA:a},this.rs(new THREE.$N(t,e,n,i,r,o,a))},THREE.ZN.prototype=Object.create(THREE.Gn.prototype),THREE.ZN.prototype.constructor=THREE.ZN,THREE.$N=function(t,e,n,i,r,o,a){THREE.In.call(this),this.type="SphereBufferGeometry",this.Hs={N:t,EA:e,FA:n,PA:i,QA:r,JA:o,KA:a},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;for(var s=o+a,h=(e+1)*(n+1),u=new THREE.wr(new Float32Array(3*h),3),c=new THREE.wr(new Float32Array(3*h),3),f=new THREE.wr(new Float32Array(2*h),2),l=0,p=[],d=new THREE.K,E=0;E<=n;E++){for(var v=[],g=E/n,m=0;m<=e;m++){var y=m/e,T=-t*Math.cos(i+y*r)*Math.sin(o+g*a),R=t*Math.cos(o+g*a),w=t*Math.sin(i+y*r)*Math.sin(o+g*a);d.set(T,R,w).normalize(),u.Xn(l,T,R,w),c.Xn(l,d.x,d.y,d.z),f.Kr(l,y,1-g),v.push(l),l++}p.push(v)}for(var H=[],E=0;E<n;E++)for(var m=0;m<e;m++){var b=p[E][m+1],x=p[E][m],A=p[E+1][m],M=p[E+1][m+1];(0!==E||o>0)&&H.push(b,x,M),(E!==n-1||s<Math.PI)&&H.push(x,A,M)}this.Ts(new(u.count>65535?THREE.Sr:THREE.Qr)(H,1)),this.Us("position",u),this.Us("normal",c),this.Us("uv",f),this.No=new THREE.Pn(new THREE.K,t)},THREE.$N.prototype=Object.create(THREE.In.prototype),THREE.$N.prototype.constructor=THREE.$N,THREE._N=function(t,e){e=e||{};var n=e.font;if(n instanceof THREE.Qz==!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Gn;var i=n.mM(t,e.size,e.KN);e.FN=void 0!==e.height?e.height:50,void 0===e.GN&&(e.GN=10),void 0===e.HN&&(e.HN=8),void 0===e.JN&&(e.JN=!1),THREE.LM.call(this,i,e),this.type="TextGeometry"},THREE._N.prototype=Object.create(THREE.LM.prototype),THREE._N.prototype.constructor=THREE._N,THREE.aO=function(t,e,n,i,r){THREE.In.call(this),this.type="TorusBufferGeometry",this.Hs={N:t,VA:e,NA:n,WA:i,arc:r},t=t||100,e=e||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,s=(n+1)*(i+1),h=n*i*2*3,u=new(h>65535?Uint32Array:Uint16Array)(h),c=new Float32Array(3*s),f=new Float32Array(3*s),l=new Float32Array(2*s),p=0,d=0,E=0,v=new THREE.K,g=new THREE.K,m=new THREE.K;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var y=a/i*r,T=o/n*Math.PI*2;g.x=(t+e*Math.cos(T))*Math.cos(y),g.y=(t+e*Math.cos(T))*Math.sin(y),g.z=e*Math.sin(T),c[p]=g.x,c[p+1]=g.y,c[p+2]=g.z,v.x=t*Math.cos(y),v.y=t*Math.sin(y),m.hm(g,v).normalize(),f[p]=m.x,f[p+1]=m.y,f[p+2]=m.z,l[d]=a/i,l[d+1]=o/n,p+=3,d+=2}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var R=(i+1)*o+a-1,w=(i+1)*(o-1)+a-1,H=(i+1)*(o-1)+a,b=(i+1)*o+a;u[E]=R,u[E+1]=w,u[E+2]=b,u[E+3]=w,u[E+4]=H,u[E+5]=b,E+=6}this.Ts(new THREE.wr(u,1)),this.Us("position",new THREE.wr(c,3)),this.Us("normal",new THREE.wr(f,3)),this.Us("uv",new THREE.wr(l,2))},THREE.aO.prototype=Object.create(THREE.In.prototype),THREE.aO.prototype.constructor=THREE.aO,THREE.bO=function(t,e,n,i,r){THREE.Gn.call(this),this.type="TorusGeometry",this.Hs={N:t,VA:e,NA:n,WA:i,arc:r},this.rs(new THREE.aO(t,e,n,i,r))},THREE.bO.prototype=Object.create(THREE.Gn.prototype),THREE.bO.prototype.constructor=THREE.bO,THREE.cO=function(t,e,n,i,r,o){function a(t,e,n,i,r){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,h=Math.cos(s);r.x=i*(2+h)*.5*o,r.y=i*(2+h)*a*.5,r.z=i*Math.sin(s)*.5}THREE.In.call(this),this.type="TorusKnotBufferGeometry",this.Hs={N:t,VA:e,WA:n,NA:i,m:r,XA:o},t=t||100,e=e||40,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var s,h,u=(i+1)*(n+1),c=i*n*2*3,f=new THREE.wr(new(c>65535?Uint32Array:Uint16Array)(c),1),l=new THREE.wr(new Float32Array(3*u),3),p=new THREE.wr(new Float32Array(3*u),3),d=new THREE.wr(new Float32Array(2*u),2),E=0,v=0,g=new THREE.K,m=new THREE.K,y=new THREE.ea,T=new THREE.K,R=new THREE.K,w=new THREE.K,H=new THREE.K,b=new THREE.K;for(s=0;s<=n;++s){var x=s/n*r*Math.PI*2;for(a(x,r,o,t,T),a(x+.01,r,o,t,R),H.hm(R,T),b.fm(R,T),w.Vl(H,b),b.Vl(w,H),w.normalize(),b.normalize(),h=0;h<=i;++h){var A=h/i*Math.PI*2,M=-e*Math.cos(A),U=e*Math.sin(A);g.x=T.x+(M*b.x+U*w.x),g.y=T.y+(M*b.y+U*w.y),g.z=T.z+(M*b.z+U*w.z),l.Xn(E,g.x,g.y,g.z),m.hm(g,T).normalize(),p.Xn(E,m.x,m.y,m.z),y.x=s/n,y.y=h/i,d.Kr(E,y.x,y.y),E++}}for(h=1;h<=n;h++)for(s=1;s<=i;s++){var O=(i+1)*(h-1)+(s-1),S=(i+1)*h+(s-1),D=(i+1)*h+s,C=(i+1)*(h-1)+s;f.bm(v,O),v++,f.bm(v,S),v++,f.bm(v,C),v++,f.bm(v,S),v++,f.bm(v,D),v++,f.bm(v,C),v++}this.Ts(f),this.Us("position",l),this.Us("normal",p),this.Us("uv",d)},THREE.cO.prototype=Object.create(THREE.In.prototype),THREE.cO.prototype.constructor=THREE.cO,THREE.dO=function(t,e,n,i,r,o,a){THREE.Gn.call(this),this.type="TorusKnotGeometry",this.Hs={N:t,VA:e,WA:n,NA:i,m:r,XA:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.rs(new THREE.cO(t,e,n,i,r,o)),this.Es()},THREE.dO.prototype=Object.create(THREE.Gn.prototype),THREE.dO.prototype.constructor=THREE.dO,THREE.QN=function(t,e,n,i,r,o){function a(t,e,n){return O.Hn.push(new THREE.K(t,e,n))-1}THREE.Gn.call(this),this.type="TubeGeometry",this.Hs={path:t,IA:e,N:n,NA:i,closed:r,eO:o},e=e||64,n=n||1,i=i||8,r=r||!1,o=o||THREE.QN.fO;var s,h,u,c,f,l,p,d,E,v,g,m,y,T,R,w,H,b,x,A,M,U=[],O=this,S=e+1,D=new THREE.K,C=new THREE.QN.PN(t,e,r),L=C.gO,P=C.Is,N=C.RN;for(this.gO=L,this.Is=P,this.RN=N,v=0;v<S;v++)for(U[v]=[],c=v/(S-1),E=t.TL(c),s=L[v],h=P[v],u=N[v],l=n*o(c),g=0;g<i;g++)f=g/i*2*Math.PI,p=-l*Math.cos(f),d=l*Math.sin(f),D.Di(E),D.x+=p*h.x+d*u.x,D.y+=p*h.y+d*u.y,D.z+=p*h.z+d*u.z,U[v][g]=a(D.x,D.y,D.z);for(v=0;v<e;v++)for(g=0;g<i;g++)m=r?(v+1)%e:v+1,y=(g+1)%i,T=U[v][g],R=U[m][g],w=U[m][y],H=U[v][y],b=new THREE.ea(v/e,g/i),x=new THREE.ea((v+1)/e,g/i),A=new THREE.ea((v+1)/e,(g+1)/i),M=new THREE.ea(v/e,(g+1)/i),this.as.push(new THREE.sr(T,R,H)),this.bs[0].push([b,x,M]),this.as.push(new THREE.sr(R,w,H)),this.bs[0].push([x.clone(),A,M.clone()]);this.vs(),this.ws()},THREE.QN.prototype=Object.create(THREE.Gn.prototype),THREE.QN.prototype.constructor=THREE.QN,THREE.QN.fO=function(t){return 1},THREE.QN.hO=function(t){return Math.sin(Math.PI*t)},THREE.QN.PN=function(t,e,n){function i(){p[0]=new THREE.K,d[0]=new THREE.K,o=Number.MAX_VALUE,a=Math.abs(l[0].x),s=Math.abs(l[0].y),h=Math.abs(l[0].z),a<=o&&(o=a,f.set(1,0,0)),s<=o&&(o=s,f.set(0,1,0)),h<=o&&f.set(0,0,1),E.Vl(l[0],f).normalize(),p[0].Vl(l[0],E),d[0].Vl(l[0],p[0])}var r,o,a,s,h,u,c,f=new THREE.K,l=[],p=[],d=[],E=new THREE.K,v=new THREE.Gm,g=e+1;for(this.gO=l,this.Is=p,this.RN=d,u=0;u<g;u++)c=u/(g-1),l[u]=t.aM(c),l[u].normalize();for(i(),u=1;u<g;u++)p[u]=p[u-1].clone(),d[u]=d[u-1].clone(),E.Vl(l[u-1],l[u]),E.length()>Number.EPSILON&&(E.normalize(),r=Math.acos(THREE.Math.Ae(l[u-1].Ul(l[u]),-1,1)),p[u].Dm(v.po(E,r))),d[u].Vl(l[u],p[u]);if(n)for(r=Math.acos(THREE.Math.Ae(p[0].Ul(p[g-1]),-1,1)),r/=g-1,l[0].Ul(E.Vl(p[0],p[g-1]))>0&&(r=-r),u=1;u<g;u++)p[u].Dm(v.po(l[u],r*u)),d[u].Vl(l[u],p[u])},THREE.iO=function(t,e,n,i){function r(t){var e=t.normalize().clone();e.index=c.Hn.push(e)-1;var n=s(t)/2/Math.PI+.5,i=h(t)/Math.PI+.5;return e.ss=new THREE.ea(n,1-i),e}function o(t,e,n){var i=new THREE.sr(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);c.as.push(i),y.Di(t).add(e).add(n).km(3);var r=s(y);c.bs[0].push([u(t.ss,t,r),u(e.ss,e,r),u(n.ss,n,r)])}function a(t,e){for(var n=Math.pow(2,e),i=r(c.Hn[t.a]),a=r(c.Hn[t.b]),s=r(c.Hn[t.c]),h=[],u=0;u<=n;u++){h[u]=[];for(var f=r(i.clone().Yi(s,u/n)),l=r(a.clone().Yi(s,u/n)),p=n-u,d=0;d<=p;d++)0===d&&u===n?h[u][d]=f:h[u][d]=r(f.clone().Yi(l,d/p))}for(var u=0;u<n;u++)for(var d=0;d<2*(n-u)-1;d++){var E=Math.floor(d/2);d%2===0?o(h[u][E+1],h[u+1][E],h[u][E]):o(h[u][E+1],h[u+1][E+1],h[u+1][E])}}function s(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function u(t,e,n){return n<0&&1===t.x&&(t=new THREE.ea(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new THREE.ea(n/2/Math.PI+.5,t.y)),t.clone()}THREE.Gn.call(this),this.type="PolyhedronGeometry",this.Hs={Hn:t,Ms:e,N:n,detail:i},n=n||1,i=i||0;for(var c=this,f=0,l=t.length;f<l;f+=3)r(new THREE.K(t[f],t[f+1],t[f+2]));for(var p=this.Hn,d=[],f=0,E=0,l=e.length;f<l;f+=3,E++){var v=p[e[f]],g=p[e[f+1]],m=p[e[f+2]];d[E]=new THREE.sr(v.index,g.index,m.index,[v.clone(),g.clone(),m.clone()])}for(var y=new THREE.K,f=0,l=d.length;f<l;f++)a(d[f],i);for(var f=0,l=this.bs[0].length;f<l;f++){var T=this.bs[0][f],R=T[0].x,w=T[1].x,H=T[2].x,b=Math.max(R,w,H),x=Math.min(R,w,H);b>.9&&x<.1&&(R<.2&&(T[0].x+=1),w<.2&&(T[1].x+=1),H<.2&&(T[2].x+=1))}for(var f=0,l=this.Hn.length;f<l;f++)this.Hn[f].Xi(n);this.Es(),this.vs(),this.No=new THREE.Pn(new THREE.K,n)},THREE.iO.prototype=Object.create(THREE.Gn.prototype),THREE.iO.prototype.constructor=THREE.iO,THREE.jO=function(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.iO.call(this,r,o,t,e),this.type="DodecahedronGeometry",this.Hs={N:t,detail:e}},THREE.jO.prototype=Object.create(THREE.iO.prototype),THREE.jO.prototype.constructor=THREE.jO,THREE.kO=function(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.iO.call(this,i,r,t,e),this.type="IcosahedronGeometry",this.Hs={N:t,detail:e}},THREE.kO.prototype=Object.create(THREE.iO.prototype),THREE.kO.prototype.constructor=THREE.kO,THREE.lO=function(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.iO.call(this,n,i,t,e),this.type="OctahedronGeometry",this.Hs={N:t,detail:e}},THREE.lO.prototype=Object.create(THREE.iO.prototype),THREE.lO.prototype.constructor=THREE.lO,THREE.mO=function(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.iO.call(this,n,i,t,e),this.type="TetrahedronGeometry",this.Hs={N:t,detail:e}},THREE.mO.prototype=Object.create(THREE.iO.prototype),THREE.mO.prototype.constructor=THREE.mO,THREE.nO=function(t,e,n){THREE.Gn.call(this),this.type="ParametricGeometry",this.Hs={fc:t,oO:e,pO:n};var i,r,o,a,s,h=this.Hn,u=this.as,c=this.bs[0],f=e+1;for(i=0;i<=n;i++)for(s=i/n,r=0;r<=e;r++)a=r/e,o=t(a,s),h.push(o);var l,p,d,E,v,g,m,y;for(i=0;i<n;i++)for(r=0;r<e;r++)l=i*f+r,p=i*f+r+1,d=(i+1)*f+r+1,E=(i+1)*f+r,v=new THREE.ea(r/e,i/n),g=new THREE.ea((r+1)/e,i/n),m=new THREE.ea((r+1)/e,(i+1)/n),y=new THREE.ea(r/e,(i+1)/n),u.push(new THREE.sr(l,p,E)),c.push([v,g,y]),u.push(new THREE.sr(p,d,E)),c.push([g.clone(),m,y.clone()]);this.vs(),this.ws()},THREE.nO.prototype=Object.create(THREE.Gn.prototype),THREE.nO.prototype.constructor=THREE.nO,THREE.qO=function(t){function e(t,e){return t-e}THREE.In.call(this);var n=[0,0],i={},r=["a","b","c"];if(t instanceof THREE.Gn){for(var o=t.Hn,a=t.as,s=0,h=new Uint32Array(6*a.length),u=0,c=a.length;u<c;u++)for(var f=a[u],l=0;l<3;l++){n[0]=f[r[l]],n[1]=f[r[(l+1)%3]],n.sort(e);var p=n.toString();void 0===i[p]&&(h[2*s]=n[0],h[2*s+1]=n[1],i[p]=!0,s++)}for(var d=new Float32Array(2*s*3),u=0,c=s;u<c;u++)for(var l=0;l<2;l++){var E=o[h[2*u+l]],v=6*u+3*l;d[v+0]=E.x,d[v+1]=E.y,d[v+2]=E.z}this.Us("position",new THREE.wr(d,3))}else if(t instanceof THREE.In)if(null!==t.index){var g=t.index.ec,o=t.attributes.position,m=t.us,s=0;0===m.length&&t.Vs(0,g.length);for(var h=new Uint32Array(2*g.length),y=0,T=m.length;y<T;++y)for(var R=m[y],w=R.start,H=R.count,u=w,b=w+H;u<b;u+=3)for(var l=0;l<3;l++){n[0]=g[u+l],n[1]=g[u+(l+1)%3],n.sort(e);var p=n.toString();void 0===i[p]&&(h[2*s]=n[0],h[2*s+1]=n[1],i[p]=!0,s++)}for(var d=new Float32Array(2*s*3),u=0,c=s;u<c;u++)for(var l=0;l<2;l++){var v=6*u+3*l,x=h[2*u+l];d[v+0]=o.Un(x),d[v+1]=o.Vn(x),d[v+2]=o.Wn(x)}this.Us("position",new THREE.wr(d,3))}else{for(var o=t.attributes.position.ec,s=o.length/3,A=s/3,d=new Float32Array(2*s*3),u=0,c=A;u<c;u++)for(var l=0;l<3;l++){var v=18*u+6*l,M=9*u+3*l;d[v+0]=o[M],d[v+1]=o[M+1],d[v+2]=o[M+2];var x=9*u+3*((l+1)%3);d[v+3]=o[x],d[v+4]=o[x+1],d[v+5]=o[x+2]}this.Us("position",new THREE.wr(d,3))}},THREE.qO.prototype=Object.create(THREE.In.prototype),THREE.qO.prototype.constructor=THREE.qO,THREE.rO=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),i=new THREE.In;i.Us("position",new THREE.wr(e,3)),i.Us("color",new THREE.wr(n,3));var r=new THREE.FB({ur:THREE.Dg});THREE.GC.call(this,i,r)},THREE.rO.prototype=Object.create(THREE.GC.prototype),THREE.rO.prototype.constructor=THREE.rO,THREE.sO=function(){var t=new THREE.In;t.Us("position",new THREE.Tr([0,0,0,0,1,0],3));var e=new THREE.uN(0,.5,1,5,1);return e.translate(0,-.5,0),function(n,i,r,o,a,s){THREE.wq.call(this),void 0===o&&(o=16776960),void 0===r&&(r=1),void 0===a&&(a=.2*r),void 0===s&&(s=.2*a),this.position.Di(i),this.line=new THREE.kq(t,new THREE.FB({color:o})),this.line.Fq=!1,this.add(this.line),this.tO=new THREE.jq(e,new THREE.MB({color:o})),this.tO.Fq=!1,this.add(this.tO),this.uO(n),this.sm(r,a,s)}}(),THREE.sO.prototype=Object.create(THREE.wq.prototype),THREE.sO.prototype.constructor=THREE.sO,THREE.sO.prototype.uO=function(){var t,e=new THREE.K;return function(n){n.y>.99999?this.Cq.set(0,0,0,1):n.y<-.99999?this.Cq.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.Cq.Rl(e,t))}}(),THREE.sO.prototype.sm=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.mr(),this.tO.scale.set(n,e,n),this.tO.position.y=t,this.tO.mr()},THREE.sO.prototype.setColor=function(t){this.line.k.color.Di(t),this.tO.k.color.Di(t)},THREE.vO=function(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new THREE.In;r.Ts(new THREE.wr(n,1)),r.Us("position",new THREE.wr(i,3)),THREE.GC.call(this,r,new THREE.FB({color:e})),void 0!==t&&this.update(t)},THREE.vO.prototype=Object.create(THREE.GC.prototype),THREE.vO.prototype.constructor=THREE.vO,THREE.vO.prototype.update=function(){var t=new THREE.Bn;return function(e){if(e instanceof THREE.Bn?t.Di(e):t.Dn(e),!t.$e()){var n=t.min,i=t.max,r=this.j.attributes.position,o=r.ec;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.Ar=!0,this.j.Oo()}}}(),THREE.wO=function(t,e){var n=void 0!==e?e:8947848;this.object=t,this.xO=new THREE.Bn,THREE.jq.call(this,new THREE.qN(1,1,1),new THREE.MB({color:n,lA:!0}))},THREE.wO.prototype=Object.create(THREE.jq.prototype),THREE.wO.prototype.constructor=THREE.wO,THREE.wO.prototype.update=function(){this.xO.Dn(this.object),this.xO.size(this.scale),this.xO.jn(this.position)},THREE.yO=function(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){i.Hn.push(new THREE.K),i._r.push(new THREE.T(e)),void 0===o[t]&&(o[t]=[]),o[t].push(i.Hn.length-1)}var i=new THREE.Gn,r=new THREE.FB({color:16777215,ur:THREE.Cg}),o={},a=16755200,s=16711680,h=43775,u=16777215,c=3355443;e("n1","n2",a),e("n2","n4",a),e("n4","n3",a),e("n3","n1",a),e("f1","f2",a),e("f2","f4",a),e("f4","f3",a),e("f3","f1",a),e("n1","f1",a),e("n2","f2",a),e("n3","f3",a),e("n4","f4",a),e("p","n1",s),e("p","n2",s),e("p","n3",s),e("p","n4",s),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",c),e("cn1","cn2",c),e("cn3","cn4",c),e("cf1","cf2",c),e("cf3","cf4",c),THREE.GC.call(this,i,r),this.ay=t,this.ay.Fx&&this.ay.Fx(),this.matrix=t.Km,this.Fq=!1,this.zO=o,this.update()},THREE.yO.prototype=Object.create(THREE.GC.prototype),THREE.yO.prototype.constructor=THREE.yO,THREE.yO.prototype.update=function(){function t(t,o,a,s){i.set(o,a,s).Lm(r);var h=n[t];if(void 0!==h)for(var u=0,c=h.length;u<c;u++)e.Hn[h[u]].Di(i)}var e,n,i=new THREE.K,r=new THREE.tx;return function(){e=this.j,n=this.zO;var i=1,o=1;r.Im.Di(this.ay.Im),t("c",0,0,-1),t("t",0,0,1),t("n1",-i,-o,-1),t("n2",i,-o,-1),t("n3",-i,o,-1),t("n4",i,o,-1),t("f1",-i,-o,1),t("f2",i,-o,1),t("f3",-i,o,1),t("f4",i,o,1),t("u1",.7*i,1.1*o,-1),t("u2",.7*-i,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-i,0,1),t("cf2",i,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-i,0,-1),t("cn2",i,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.ks=!0}}(),THREE.AO=function(t,e){THREE.wq.call(this),this.BO=t,this.BO.En(),this.matrix=t.Km,this.Fq=!1,void 0===e&&(e=1);var n=new THREE.In;n.Us("position",new THREE.Tr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new THREE.FB({qB:!1});this.add(new THREE.kq(n,i)),n=new THREE.In,n.Us("position",new THREE.Tr([0,0,0,0,0,1],3)),this.add(new THREE.kq(n,i)),this.update()},THREE.AO.prototype=Object.create(THREE.wq.prototype),THREE.AO.prototype.constructor=THREE.AO,THREE.AO.prototype.Ks=function(){var t=this.children[0],e=this.children[1];t.j.Ks(),t.k.Ks(),e.j.Ks(),e.k.Ks()},THREE.AO.prototype.update=function(){var t=new THREE.K,e=new THREE.K,n=new THREE.K;return function(){t.Vm(this.BO.Km),e.Vm(this.BO.target.Km),n.hm(e,t);var i=this.children[0],r=this.children[1];i.ho(n),i.k.color.Di(this.BO.color).Xi(this.BO.Xx),r.ho(n),r.scale.z=n.length()}}(),THREE.CO=function(t,e,n){var i=void 0!==e?e:16777215;THREE.GC.call(this,new THREE.yN(t.j,n),new THREE.FB({color:i})),this.matrix=t.Km,this.Fq=!1},THREE.CO.prototype=Object.create(THREE.GC.prototype),THREE.CO.prototype.constructor=THREE.CO,THREE.DO=function(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.j;s instanceof THREE.Gn?a=s.as.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var h=new THREE.In,u=new THREE.Tr(2*a*3,3);h.Us("position",u),THREE.GC.call(this,h,new THREE.FB({color:r,GB:o})),this.Fq=!1,this.update()},THREE.DO.prototype=Object.create(THREE.GC.prototype),THREE.DO.prototype.constructor=THREE.DO,THREE.DO.prototype.update=function(){
var t=new THREE.K,e=new THREE.K,n=new THREE.Qn;return function(){this.object.En(!0),n._n(this.object.Km);for(var i=this.object.Km,r=this.j.attributes.position,o=this.object.j,a=o.Hn,s=o.as,h=0,u=0,c=s.length;u<c;u++){var f=s[u],l=f.Nn;t.Di(a[f.a]).add(a[f.b]).add(a[f.c]).km(3).Dm(i),e.Di(l).Cm(n).normalize().Xi(this.size).add(t),r.Xn(h,t.x,t.y,t.z),h+=1,r.Xn(h,e.x,e.y,e.z),h+=1}return r.Ar=!0,this}}(),THREE.EO=function(t,e,n,i){e=e||1,n=new THREE.T(void 0!==n?n:4473924),i=new THREE.T(void 0!==i?i:8947848);for(var r=e/2,o=2*t/e,a=[],s=[],h=0,u=0,c=-t;h<=e;h++,c+=o){a.push(-t,0,c,t,0,c),a.push(c,0,-t,c,0,t);var f=h===r?n:i;f.toArray(s,u),u+=3,f.toArray(s,u),u+=3,f.toArray(s,u),u+=3,f.toArray(s,u),u+=3}var l=new THREE.In;l.Us("position",new THREE.Tr(a,3)),l.Us("color",new THREE.Tr(s,3));var p=new THREE.FB({ur:THREE.Dg});THREE.GC.call(this,l,p)},THREE.EO.prototype=Object.create(THREE.GC.prototype),THREE.EO.prototype.constructor=THREE.EO,THREE.EO.prototype.FO=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},THREE.GO=function(t,e){THREE.wq.call(this),this.BO=t,this.BO.En(),this.matrix=t.Km,this.Fq=!1,this._r=[new THREE.T,new THREE.T];var n=new THREE.ZN(e,4,2);n.Uq(-Math.PI/2);for(var i=0,r=8;i<r;i++)n.as[i].color=this._r[i<4?0:1];var o=new THREE.MB({ur:THREE.Cg,lA:!0});this.HO=new THREE.jq(n,o),this.add(this.HO),this.update()},THREE.GO.prototype=Object.create(THREE.wq.prototype),THREE.GO.prototype.constructor=THREE.GO,THREE.GO.prototype.Ks=function(){this.HO.j.Ks(),this.HO.k.Ks()},THREE.GO.prototype.update=function(){var t=new THREE.K;return function(){this._r[0].Di(this.BO.color).Xi(this.BO.Xx),this._r[1].Di(this.BO.Yx).Xi(this.BO.Xx),this.HO.ho(t.Vm(this.BO.Km).rd()),this.HO.j.ns=!0}}(),THREE.IO=function(t,e){this.BO=t,this.BO.En();var n=new THREE.$N(e,4,2),i=new THREE.MB({lA:!0,qB:!1});i.color.Di(this.BO.color).Xi(this.BO.Xx),THREE.jq.call(this,n,i),this.matrix=this.BO.Km,this.Fq=!1},THREE.IO.prototype=Object.create(THREE.jq.prototype),THREE.IO.prototype.constructor=THREE.IO,THREE.IO.prototype.Ks=function(){this.j.Ks(),this.k.Ks()},THREE.IO.prototype.update=function(){this.k.color.Di(this.BO.color).Xi(this.BO.Xx)},THREE.JO=function(t){this.mw=this.KO(t);for(var e=new THREE.Gn,n=0;n<this.mw.length;n++){var i=this.mw[n];i.parent instanceof THREE.PC&&(e.Hn.push(new THREE.K),e.Hn.push(new THREE.K),e._r.push(new THREE.T(0,0,1)),e._r.push(new THREE.T(0,1,0)))}e.xr=!0;var r=new THREE.FB({ur:THREE.Dg,iA:!1,jA:!1,D:!0});THREE.GC.call(this,e,r),this.root=t,this.matrix=t.Km,this.Fq=!1,this.update()},THREE.JO.prototype=Object.create(THREE.GC.prototype),THREE.JO.prototype.constructor=THREE.JO,THREE.JO.prototype.KO=function(t){var e=[];t instanceof THREE.PC&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.KO(t.children[n]));return e},THREE.JO.prototype.update=function(){for(var t=this.j,e=(new THREE.Gm).Jm(this.root.Km),n=new THREE.Gm,i=0,r=0;r<this.mw.length;r++){var o=this.mw[r];o.parent instanceof THREE.PC&&(n.Hm(e,o.Km),t.Hn[i].Vm(n),n.Hm(e,o.parent.Km),t.Hn[i+1].Vm(n),i+=2)}t.ks=!0,t.Oo()},THREE.LO=function(t){THREE.wq.call(this),this.BO=t,this.BO.En(),this.matrix=t.Km,this.Fq=!1;for(var e=new THREE.In,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1,o=32;i<o;i++,r++){var a=i/o*Math.PI*2,s=r/o*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}e.Us("position",new THREE.Tr(n,3));var h=new THREE.FB({qB:!1});this.tO=new THREE.GC(e,h),this.add(this.tO),this.update()},THREE.LO.prototype=Object.create(THREE.wq.prototype),THREE.LO.prototype.constructor=THREE.LO,THREE.LO.prototype.Ks=function(){this.tO.j.Ks(),this.tO.k.Ks()},THREE.LO.prototype.update=function(){var t=new THREE.K,e=new THREE.K;return function(){var n=this.BO.ln?this.BO.ln:1e3,i=n*Math.tan(this.BO.angle);this.tO.scale.set(i,i,n),t.Vm(this.BO.Km),e.Vm(this.BO.target.Km),this.tO.ho(e.sub(t)),this.tO.k.color.Di(this.BO.color).Xi(this.BO.Xx)}}(),THREE.MO=function(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.j;s instanceof THREE.Gn?a=3*s.as.length:s instanceof THREE.In&&(a=s.attributes.Nn.count);var h=new THREE.In,u=new THREE.Tr(2*a*3,3);h.Us("position",u),THREE.GC.call(this,h,new THREE.FB({color:r,GB:o})),this.Fq=!1,this.update()},THREE.MO.prototype=Object.create(THREE.GC.prototype),THREE.MO.prototype.constructor=THREE.MO,THREE.MO.prototype.update=function(){var t=new THREE.K,e=new THREE.K,n=new THREE.Qn;return function(){var i=["a","b","c"];this.object.En(!0),n._n(this.object.Km);var r=this.object.Km,o=this.j.attributes.position,a=this.object.j;if(a instanceof THREE.Gn)for(var s=a.Hn,h=a.as,u=0,c=0,f=h.length;c<f;c++)for(var l=h[c],p=0,d=l.tr.length;p<d;p++){var E=s[l[i[p]]],v=l.tr[p];t.Di(E).Dm(r),e.Di(v).Cm(n).normalize().Xi(this.size).add(t),o.Xn(u,t.x,t.y,t.z),u+=1,o.Xn(u,e.x,e.y,e.z),u+=1}else if(a instanceof THREE.In)for(var g=a.attributes.position,m=a.attributes.Nn,u=0,p=0,d=g.count;p<d;p++)t.set(g.Un(p),g.Vn(p),g.Wn(p)).Dm(r),e.set(m.Un(p),m.Vn(p),m.Wn(p)),e.Cm(n).normalize().Xi(this.size).add(t),o.Xn(u,t.x,t.y,t.z),u+=1,o.Xn(u,e.x,e.y,e.z),u+=1;return o.Ar=!0,this}}(),THREE.NO=function(t,e){var n=void 0!==e?e:16777215;THREE.GC.call(this,new THREE.qO(t.j),new THREE.FB({color:n})),this.matrix=t.Km,this.Fq=!1},THREE.NO.prototype=Object.create(THREE.GC.prototype),THREE.NO.prototype.constructor=THREE.NO,THREE.TH=function(t){THREE.wq.call(this),this.k=t,this.Dx=function(t){}},THREE.TH.prototype=Object.create(THREE.wq.prototype),THREE.TH.prototype.constructor=THREE.TH,THREE.OO=function(t,e){THREE.jq.call(this,t,e),this.PO={},this.QO=[];var n=this.j.cs.length,i="__default",r=0,o=n-1,a=n/1;this.RO(i,r,o,a),this.SO(i,1)},THREE.OO.prototype=Object.create(THREE.jq.prototype),THREE.OO.prototype.constructor=THREE.OO,THREE.OO.prototype.RO=function(t,e,n,i){var r={start:e,end:n,length:n-e+1,ru:i,duration:(n-e)/i,TO:0,UO:0,active:!1,time:0,direction:1,weight:1,VO:!1,WO:!1};this.PO[t]=r,this.QO.push(r)},THREE.OO.prototype.XO=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,i={},r=this.j,o=0,a=r.cs.length;o<a;o++){var s=r.cs[o],h=s.name.match(n);if(h&&h.length>1){var u=h[1];i[u]||(i[u]={start:1/0,end:-(1/0)});var c=i[u];o<c.start&&(c.start=o),o>c.end&&(c.end=o),e||(e=u)}}for(var u in i){var c=i[u];this.RO(u,c.start,c.end,t)}this.YO=e},THREE.OO.prototype.ZO=function(t){var e=this.PO[t];e&&(e.direction=1,e.VO=!1)},THREE.OO.prototype.$O=function(t){var e=this.PO[t];e&&(e.direction=-1,e.VO=!0)},THREE.OO.prototype._O=function(t,e){var n=this.PO[t];n&&(n.ru=e,n.duration=(n.end-n.start)/n.ru)},THREE.OO.prototype.aP=function(t,e){var n=this.PO[t];n&&(n.duration=e,n.ru=(n.end-n.start)/n.duration)},THREE.OO.prototype.SO=function(t,e){var n=this.PO[t];n&&(n.weight=e)},THREE.OO.prototype.bP=function(t,e){var n=this.PO[t];n&&(n.time=e)},THREE.OO.prototype.cP=function(t){var e=0,n=this.PO[t];return n&&(e=n.time),e},THREE.OO.prototype.dP=function(t){var e=-1,n=this.PO[t];return n&&(e=n.duration),e},THREE.OO.prototype.eP=function(t){var e=this.PO[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},THREE.OO.prototype.fP=function(t){var e=this.PO[t];e&&(e.active=!1)},THREE.OO.prototype.update=function(t){for(var e=0,n=this.QO.length;e<n;e++){var i=this.QO[e];if(i.active){var r=i.duration/i.length;i.time+=i.direction*t,i.WO?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.VO=!0),i.time<0&&(i.time=0,i.VO=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var o=i.start+THREE.Math.Ae(Math.floor(i.time/r),0,i.length-1),a=i.weight;o!==i.UO&&(this.MC[i.TO]=0,this.MC[i.UO]=1*a,this.MC[o]=0,i.TO=i.UO,i.UO=o);var s=i.time%r/r;i.VO&&(s=1-s),i.UO!==i.TO?(this.MC[i.UO]=s*a,this.MC[i.TO]=(1-s)*a):this.MC[i.UO]=a}}},function(t,e){"function"==typeof define&&define.hg?define([],e):"object"==typeof module&&module.Kb?module.Kb=e():t.gP=e()}(this,function(){function t(t){var e=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),n.getTimezoneOffset())}function e(e){return e.getTimezoneOffset()<t(e)}return function(){var t,n=new Date,i=n.getTimezoneOffset()/60;switch(e(n)&&i++,i=Math.round(0-i)){case-12:case-11:case-10:case-9:case-8:t="fremont";break;case-7:case-6:t="dallas";break;case-5:case-4:case-3:t="newark";break;case-2:case-1:case 0:t="london";break;case 1:case 2:case 3:case 4:case 5:t="frankfurt";break;case 6:case 7:case 8:case 9:case 10:case 11:case 12:t="singapore";break;default:t="newark"}return t}}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.Kb=t();else if("function"==typeof define&&define.hg)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.hP=t()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={Kb:{}};e[a][0].call(c.Kb,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.Kb,t,e,n,i)}return n[a].Kb}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){function i(t,e,n,i){return JSON.stringify(t,r(e,i),n)}function r(t,e){var n=[],i=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(e)).join(".")+"]"}),function(r,o){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?i.splice(a,1/0,r):i.push(r),~n.indexOf(o)&&(o=e.call(this,r,o))}else n.push(o);return null==t?o:t.call(this,r,o)}}n=e.Kb=i,n.iP=r},{}],2:[function(t,e,n){"use strict";function i(t){this.name="RavenConfigError",this.message=t}i.prototype=new Error,i.prototype.constructor=i,e.Kb=i},{}],3:[function(t,e,n){"use strict";var i=function(t,e,n){var i=t[e],r=t;if(e in t){var o="warn"===e?"warning":e;t[e]=function(){var t=[].slice.call(arguments),e=""+t.join(" "),a={level:o,jP:"console",kP:{arguments:t}};n&&n(e,a),i&&Function.prototype.apply.call(i,r,t)}}};e.Kb={lP:i}},{}],4:[function(t,e,n){"use strict";function i(){return+new Date}function r(){this.uP=!("object"!=typeof JSON||!JSON.stringify),this.vP="undefined"!=typeof document,this.wP=null,this.xP=null,this.yP=null,this.zP=null,this.AP=null,this.BP={},this.CP={jP:"javascript",DP:[],EP:[],FP:[],GP:[],crossOrigin:"anonymous",HP:!0,IP:0,stackTraceLimit:50,JP:!0},this.KP=0,this.LP=!1,this.MP=Error.stackTraceLimit,this.NP=window.console||{},this.OP={},this.PP=[],this.zt=i(),this.QP=[],this.RP=[],this.SP=null,this.TP,this.UP=window.location,this.VP=this.UP&&this.UP.href;for(var t in this.NP)this.OP[t]=this.NP[t]}var o=t(7),a=t(2),s=t(6),h=t(1),u=s.bf,c=s.rf,f=s.af,l=s.mP,p=s.nP,d=s.oP,E=s.dg,v=s.pP,g=s.truncate,m=s.qP,y=s.rP,T=s.sP,R=s.tP,w=s.nf,H=s.fill,b=t(3).lP,x="source protocol user pass host port path".split(" "),A=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;r.prototype={VERSION:"3.5.1",debug:!1,WP:o,XP:function(t,e){var n=this;if(this.yP)return this.YP("error","Error: Raven has already been configured"),this;if(!t)return this;e&&E(e,function(t,e){"tags"===t||"extra"===t?n.BP[t]=e:n.CP[t]=e});var i=this.ZP(t),r=i.path.lastIndexOf("/"),a=i.path.substr(1,r);this.$P=t,this.CP.DP.push(/^Script error\.?$/),this.CP.DP.push(/^Javascript error: Script error\.? on line 0$/),this.CP.DP=d(this.CP.DP),this.CP.EP=!!this.CP.EP.length&&d(this.CP.EP),this.CP.FP=!!this.CP.FP.length&&d(this.CP.FP),this.CP.GP=d(this.CP.GP),this.CP._P=Math.max(0,Math.min(this.CP._P||100,100));var s={aQ:!0,console:!0,bQ:!0,location:!0},h=this.CP.JP;return"[object Object]"==={}.toString.call(h)?h=v(s,h):h!==!1&&(h=s),this.CP.JP=h,this.zP=i.cQ,this.dQ=i.eQ&&i.eQ.substr(1),this.AP=i.path.substr(r+1),this.yP=this.fQ(i),this.gQ=this.yP+"/"+a+"api/"+this.AP+"/store/",o.HP=!!this.CP.HP,this},hQ:function(){var t=this;return this.iQ()&&!this.LP&&(o.jQ.subscribe(function(){t.kQ.apply(t,arguments)}),this.lQ(),t.CP.JP&&this.mQ(),this.nQ(),this.LP=!0),Error.stackTraceLimit=this.CP.stackTraceLimit,this},context:function(t,e,n){return u(t)&&(n=e||[],e=t,t=void 0),this.wrap(t,e).apply(this,n)},wrap:function(t,e,n){function i(){var i=[],o=arguments.length,a=!t||t&&t.qQ!==!1;for(n&&u(n)&&n.apply(this,arguments);o--;)i[o]=a?r.wrap(t,arguments[o]):arguments[o];try{return e.apply(this,i)}catch(e){throw r.rQ(),r.sQ(e,t),e}}var r=this;if(c(e)&&!u(t))return t;if(u(t)&&(e=t,t=void 0),!u(e))return e;try{if(e.oQ)return e}catch(t){return e}if(e.pQ)return e.pQ;for(var o in e)p(e,o)&&(i[o]=e[o]);return i.prototype=e.prototype,e.pQ=i,i.oQ=!0,i.tQ=e,i},uQ:function(){return o.jQ.uQ(),this.vQ(),Error.stackTraceLimit=this.MP,this.LP=!1,this},sQ:function(t,e){if(!f(t))return this.wQ(t,e);this.wP=t;try{var n=o.xQ(t);this.yQ(n,e)}catch(e){if(t!==e)throw e}return this},wQ:function(t,e){if(!this.CP.DP.test||!this.CP.DP.test(t))return this.zQ(v({message:t+""},e)),this},AQ:function(t){var e=v({timestamp:i()/1e3},t);this.RP.push(e),this.RP.length>this.CP._P&&this.RP.shift()},BQ:function(t){var e=Array.prototype.slice.call(arguments,1);return this.PP.push([t,e]),this.LP&&this.nQ(),this},CQ:function(t){return this.BP.cQ=t,this},DQ:function(t){return this.EQ("extra",t),this},FQ:function(t){return this.EQ("tags",t),this},GQ:function(){return this.BP={},this},getContext:function(){return JSON.parse(h(this.BP))},HQ:function(t){return this.CP.IQ=t,this},JQ:function(t){return this.CP.release=t,this},KQ:function(t){var e=this.CP.LQ;return this.CP.LQ=u(t)?function(n){return t(n,e)}:t,this},MQ:function(t){var e=this.CP.NQ;return this.CP.NQ=u(t)?function(n){return t(n,e)}:t,this},OQ:function(t){return this.CP.PQ=t,this},QQ:function(){return this.wP},lastEventId:function(){return this.xP},iQ:function(){return!!this.uP&&(!!this.yP||(this.RQ||(this.RQ=!0,this.YP("error","Error: Raven has not been configured.")),!1))},SQ:function(){var t=window.TQ;t&&this.XP(t.UQ,t.XP).hQ()},VQ:function(t){if(window.document){t=t||{};var e=t.WQ||this.lastEventId();if(!e)throw new a("Missing eventId");var n=t.UQ||this.$P;if(!n)throw new a("Missing DSN");var i=encodeURIComponent,r="";r+="?eventId="+i(e),r+="&dsn="+i(n);var o=t.cQ||this.BP.cQ;o&&(o.name&&(r+="&name="+i(o.name)),o.email&&(r+="&email="+i(o.email)));var s=this.fQ(this.ZP(n)),h=document.createElement("script");h.async=!0,h.src=s+"/api/embed/error-page/"+r,(document.head||document.body).appendChild(h)}},rQ:function(){var t=this;this.KP+=1,setTimeout(function(){t.KP-=1})},XQ:function(t,e){var n,i;if(this.vP){e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=document.createEventObject(),n.YQ=t);for(i in e)p(e,i)&&(n[i]=e[i]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.YQ.toLowerCase(),n)}catch(t){}}},ZQ:function(t){var e=this;return function(n){if(e.TP=null,e.SP!==n){e.SP=n;var i,r=n.target;try{i=T(r)}catch(t){i="<unknown>"}e.AQ({category:"ui."+t,message:i})}}},$Q:function(){var t=this,e=1e3;return function(n){var i=n.target,r=i&&i.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r)){var o=t.TP;o||t.ZQ("input")(n),clearTimeout(o),t.TP=setTimeout(function(){t.TP=null},e)}}},_Q:function(t,e){var n=R(this.UP.href),i=R(e),r=R(t);this.VP=e,n.protocol===i.protocol&&n.host===i.host&&(e=i.aR),n.protocol===r.protocol&&n.host===r.host&&(t=r.aR),this.AQ({category:"navigation",data:{bR:e,from:t}})},lQ:function(){function t(t){return function(e,i){for(var r=new Array(arguments.length),o=0;o<r.length;++o)r[o]=arguments[o];var a=r[0];return u(a)&&(r[0]=n.wrap(a)),t.apply?t.apply(this,r):t(r[0],r[1])}}function e(t){var e=window[t]&&window[t].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(H(e,"addEventListener",function(e){return function(i,o,a,s){try{o&&o.cR&&(o.cR=n.wrap(o.cR))}catch(t){}var h;return r&&r.bQ&&("EventTarget"===t||"Node"===t)&&("click"===i?h=n.ZQ(i):"keypress"===i&&(h=n.$Q())),e.call(this,i,n.wrap(o,void 0,h),a,s)}},i),H(e,"removeEventListener",function(t){return function(e,n,i,r){return n=n&&(n.pQ?n.pQ:n),t.call(this,e,n,i,r)}},i))}var n=this,i=n.QP,r=this.CP.JP;H(window,"setTimeout",t,i),H(window,"setInterval",t,i),window.requestAnimationFrame&&H(window,"requestAnimationFrame",function(t){return function(e){return t(n.wrap(e))}},i);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<o.length;a++)e(o[a]);var s=window.dR||window.eR;s&&s.fR&&s.fR.gR&&H(s.fR,"ready",function(t){return function(e){return t.call(this,n.wrap(e))}},i)},mQ:function(){function t(t,n){t in n&&u(n[t])&&H(n,t,function(t){return e.wrap(t)})}var e=this,n=this.CP.JP,i=e.QP;if(n.aQ&&"XMLHttpRequest"in window){var r=XMLHttpRequest.prototype;H(r,"open",function(t){return function(n,i){return w(i)&&i.indexOf(e.zP)===-1&&(this.hR={method:n,url:i,iR:null}),t.apply(this,arguments)}},i),H(r,"send",function(n){return function(i){function r(){if(o.hR&&(1===o.readyState||4===o.readyState)){try{o.hR.iR=o.status}catch(t){}e.AQ({type:"http",category:"xhr",data:o.hR})}}for(var o=this,a=["onload","onerror","onprogress"],s=0;s<a.length;s++)t(a[s],o);return"onreadystatechange"in o&&u(o.onreadystatechange)?H(o,"onreadystatechange",function(t){return e.wrap(t,void 0,r)}):o.onreadystatechange=r,n.apply(this,arguments)}},i)}n.bQ&&this.vP&&(document.addEventListener?(document.addEventListener("click",e.ZQ("click"),!1),document.addEventListener("keypress",e.$Q(),!1)):(document.attachEvent("onclick",e.ZQ("click")),document.attachEvent("onkeypress",e.$Q())));var o=window.chrome,a=o&&o.app&&o.app.runtime,s=!a&&window.history&&history.pushState;if(n.location&&s){var h=window.onpopstate;window.onpopstate=function(){var t=e.UP.href;if(e._Q(e.VP,t),h)return h.apply(this,arguments)},H(history,"pushState",function(t){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&e._Q(e.VP,n+""),t.apply(this,arguments)}},i)}if(n.console&&"console"in window&&console.log){var c=function(t,n){e.AQ({message:t,level:n.level,category:"console"})};E(["debug","info","warn","error","log"],function(_,t){b(console,t,c)})}},vQ:function(){for(var t;this.QP.length;){t=this.QP.shift();var e=t[0],n=t[1],i=t[2];e[n]=i}},nQ:function(){var t=this;E(this.PP,function(_,e){var n=e[0],i=e[1];n.apply(t,[t].concat(i))})},ZP:function(t){var e=A.exec(t),n={},i=7;try{for(;i--;)n[x[i]]=e[i]||""}catch(e){throw new a("Invalid DSN: "+t)}if(n.eQ&&!this.CP.jR)throw new a("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},fQ:function(t){var e="//"+t.host+(t.port?":"+t.port:"");return t.protocol&&(e=t.protocol+":"+e),e},kQ:function(){this.KP||this.yQ.apply(this,arguments)},yQ:function(t,e){var n=this,i=[];t.stack&&t.stack.length&&E(t.stack,function(t,e){var r=n.kR(e);r&&i.push(r)}),this.XQ("handle",{lR:t,options:e}),this.mR(t.name,t.message,t.url,t.lineno,i.slice(0,this.CP.stackTraceLimit),e)},kR:function(t){if(t.url){var e={filename:t.url,lineno:t.line,colno:t.nR,Eb:t.fc||"?"};return e.oR=!(this.CP.GP.test&&!this.CP.GP.test(e.filename)||/(Raven|TraceKit)\./.test(e.Eb)||/raven\.(min\.)?js$/.test(e.filename)),e}},mR:function(t,e,n,i,r,o){var a;if((!this.CP.DP.test||!this.CP.DP.test(e))&&(e+="",r&&r.length?(n=r[0].filename||n,r.reverse(),a={frames:r}):n&&(a={frames:[{filename:n,lineno:i,oR:!0}]}),(!this.CP.EP.test||!this.CP.EP.test(n))&&(!this.CP.FP.test||this.CP.FP.test(n)))){var s=v({exception:{values:[{type:t,value:e,stacktrace:a}]},pR:n},o);this.zQ(s)}},qR:function(t){var e=this.CP.IP;if(t.message&&(t.message=g(t.message,e)),t.exception){var n=t.exception.values[0];n.value=g(n.value,e)}return t},rR:function(){if(this.vP&&document.location&&document.location.href){var t={headers:{sR:navigator.userAgent}};return t.url=document.location.href,document.referrer&&(t.headers.tR=document.referrer),t}},zQ:function(t){var e=this.CP,n={Fm:this.AP,jP:e.jP,platform:"javascript"},r=this.rR();r&&(n.uR=r),t=v(n,t),t.tags=v(v({},this.BP.tags),t.tags),t.kP=v(v({},this.BP.kP),t.kP),t.kP.vR=i()-this.zt,this.RP&&this.RP.length>0&&(t.wR={values:[].slice.call(this.RP,0)}),l(t.tags)&&delete t.tags,this.BP.cQ&&(t.cQ=this.BP.cQ),e.IQ&&(t.IQ=e.IQ),e.release&&(t.release=e.release),e.xR&&(t.yR=e.xR),u(e.LQ)&&(t=e.LQ(t)||t),t&&!l(t)&&(u(e.NQ)&&!e.NQ(t)||this.zR(t))},zR:function(t,e){var n=this,i=this.CP;if(this.xP=t.AR||(t.AR=y()),t=this.qR(t),this.YP("debug","Raven about to send:",t),this.iQ()){var r={BR:"7",CR:"raven-js/"+this.VERSION,DR:this.zP};this.dQ&&(r.ER=this.dQ);var o=t.exception&&t.exception.values[0];this.AQ({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:t.message,AR:t.AR,level:t.level||"error"});var a=this.gQ;(i.PQ||this.FR).call(this,{url:a,GR:r,data:t,options:i,HR:function(){n.XQ("success",{data:t,src:a}),e&&e()},_z:function(i){n.XQ("failure",{data:t,src:a}),i=i||new Error("Raven send failed (no additional details provided)"),e&&e(i)}})}},FR:function(t){function e(){200===n.status?t.HR&&t.HR():t._z&&t._z(new Error("Sentry error code: "+n.status))}var n=new XMLHttpRequest,i="withCredentials"in n||"undefined"!=typeof XDomainRequest;if(i){var r=t.url;"withCredentials"in n?n.onreadystatechange=function(){4===n.readyState&&e()}:(n=new XDomainRequest,r=r.replace(/^https?:/,""),n.onload=e),n.open("POST",r+"?"+m(t.GR)),n.send(h(t.data))}},YP:function(t){this.OP[t]&&this.debug&&Function.prototype.apply.call(this.OP[t],this.NP,[].slice.call(arguments,1))},EQ:function(t,e){c(e)?delete this.BP[t]:this.BP[t]=v(this.BP[t]||{},e)}},r.prototype.IR=r.prototype.CQ,r.prototype.JR=r.prototype.JQ,e.Kb=r},{1:1,2:2,3:3,6:6,7:7}],5:[function(t,e,n){"use strict";var i=t(4),r=window.hP,o=new i;o.Bf=function(){return window.hP=r,o},o.SQ(),e.Kb=o},{4:4}],6:[function(t,e,n){"use strict";function i(t){return void 0===t}function r(t){return"function"==typeof t}function o(t){return"[object String]"===T.toString.call(t)}function a(t){return"object"==typeof t&&null!==t}function s(t){for(var _ in t)return!1;return!0}function h(t){var e=T.toString.call(t);return a(t)&&"[object Error]"===e||"[object Exception]"===e||t instanceof Error}function u(t,e){var n,r;if(i(t.length))for(n in t)l(t,n)&&e.call(null,n,t[n]);else if(r=t.length)for(n=0;n<r;n++)e.call(null,n,t[n])}function c(t,e){return e?(u(e,function(e,n){t[e]=n}),t):t}function f(t,e){return!e||t.length<=e?t:t.substr(0,e)+""}function l(t,e){return T.hasOwnProperty.call(t,e)}function p(t){for(var e,n=[],i=0,r=t.length;i<r;i++)e=t[i],o(e)?n.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&n.push(e.source);return new RegExp(n.join("|"),"i")}function d(t){var e=[];return u(t,function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.join("&")}function E(t){var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",i=e[8]||"";return{protocol:e[2],host:e[4],path:e[5],aR:e[5]+n+i}}function v(){var t=window.crypto||window.msCrypto;if(!i(t)&&t.getRandomValues){var e=new Uint16Array(8);t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var n=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return n(e[0])+n(e[1])+n(e[2])+n(e[3])+n(e[4])+n(e[5])+n(e[6])+n(e[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}function g(t){for(var e,n=5,i=80,r=[],o=0,a=0,s=" > ",h=s.length;t&&o++<n&&(e=m(t),!("html"===e||o>1&&a+r.length*h+e.length>=i));)r.push(e),a+=e.length,t=t.parentNode;return r.reverse().join(s)}function m(t){var e,n,i,r,a,s=[];if(!t||!t.tagName)return"";if(s.push(t.tagName.toLowerCase()),t.id&&s.push("#"+t.id),e=t.className,e&&o(e))for(n=e.split(" "),a=0;a<n.length;a++)s.push("."+n[a]);var h=["type","name","title","alt"];for(a=0;a<h.length;a++)i=h[a],r=t.getAttribute(i),r&&s.push("["+i+'="'+r+'"]');return s.join("")}function y(t,e,n,i){var r=t[e];t[e]=n(r),i&&i.push([t,e,r])}var T=Object.prototype;e.Kb={rf:i,bf:r,nf:o,jf:a,mP:s,af:h,dg:u,pP:c,truncate:f,nP:l,oP:p,qP:d,rP:v,sP:g,KR:m,tP:E,fill:y}},{}],7:[function(t,e,n){"use strict";function i(){return"undefined"==typeof document?"":document.location.href}var r=t(6),o=r.nP,a=r.nf,s=r.rf,h={HP:!0,debug:!1},u=[].slice,c="?",f=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;h.jQ=function(){function t(t){l(),m.push(t)}function e(t){for(var e=m.length-1;e>=0;--e)m[e]===t&&m.splice(e,1)}function n(){p(),m=[]}function r(t,e){var n=null;if(!e||h.HP){for(var i in m)if(o(m,i))try{m[i].apply(null,[t].concat(u.call(arguments,2)))}catch(t){n=t}if(n)throw n}}function s(t,e,n,o,s){var u=null;if(R)h.xQ.LR(R,e,n,t),d();else if(s)u=h.xQ(s),r(u,!0);else{var l,p={url:e,line:n,nR:o},E=void 0,g=t;if(a(t)){var l=t.match(f);l&&(E=l[1],g=l[2])}p.fc=c,u={name:E,message:g,url:i(),stack:[p]},r(u,!0)}return!!v&&v.apply(this,arguments)}function l(){g||(v=window.onerror,window.onerror=s,g=!0)}function p(){g&&(window.onerror=v,g=!1,v=void 0)}function d(){var t=R,e=y;y=null,R=null,T=null,r.apply(null,[t,!1].concat(e))}function E(t,e){var n=u.call(arguments,1);if(R){if(T===t)return;d()}var i=h.xQ(t);if(R=i,T=t,y=n,window.setTimeout(function(){T===t&&d()},i.MR?2e3:0),e!==!1)throw t}var v,g,m=[],y=null,T=null,R=null;return E.subscribe=t,E.unsubscribe=e,E.uQ=n,E}(),h.xQ=function(){function t(t){if(!s(t.stack)&&t.stack){for(var e,n,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,h=t.stack.split("\n"),u=[],f=(/^(.*) is undefined$/.exec(t.message),0),l=h.length;f<l;++f){if(e=r.exec(h[f])){var p=e[2]&&e[2].indexOf("native")!==-1;n={url:p?null:e[2],fc:e[1]||c,hc:p?[e[2]]:[],line:e[3]?+e[3]:null,nR:e[4]?+e[4]:null}}else if(e=a.exec(h[f]))n={url:e[2],fc:e[1]||c,hc:[],line:+e[3],nR:e[4]?+e[4]:null};else{if(!(e=o.exec(h[f])))continue;n={url:e[3],fc:e[1]||c,hc:e[2]?e[2].split(","):[],line:e[4]?+e[4]:null,nR:e[5]?+e[5]:null}}!n.fc&&n.line&&(n.fc=c),u.push(n)}return u.length?(u[0].nR||s(t.columnNumber)||(u[0].nR=t.columnNumber+1),{name:t.name,message:t.message,url:i(),stack:u}):null}}function e(t){var e=t.stacktrace;if(!s(t.stacktrace)&&t.stacktrace){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=e.split("\n"),h=[],u=0;u<a.length;u+=2){var f=null;(n=r.exec(a[u]))?f={url:n[2],line:+n[1],nR:null,fc:n[3],hc:[]}:(n=o.exec(a[u]))&&(f={url:n[6],line:+n[1],nR:+n[2],fc:n[3]||n[4],hc:n[5]?n[5].split(","):[]}),f&&(!f.fc&&f.line&&(f.fc=c),h.push(f))}return h.length?{name:t.name,message:t.message,url:i(),stack:h}:null}}function n(t){var e=t.message.split("\n");if(e.length<4)return null;for(var n,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,a=/^\s*Line (\d+) of function script\s*$/i,s=[],h=(document.getElementsByTagName("script"),2);h<e.length;h+=2){var u=null;if(n=r.exec(e[h]))u={url:n[2],fc:n[3],hc:[],line:+n[1],nR:null};else if(n=o.exec(e[h])){u={url:n[3],fc:n[4],hc:[],line:+n[1],nR:null};+n[1]}else if(n=a.exec(e[h])){var f=window.location.href.replace(/#.*$/,"");u={url:f,fc:"",hc:[],line:n[1],nR:null}}u&&(u.fc||(u.fc=c),s.push(u))}return s.length?{name:t.name,message:e[0],url:i(),stack:s}:null}function r(t,e,n,i){var r={url:e,line:n};if(r.url&&r.line){if(t.MR=!1,r.fc||(r.fc=c),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].fc===r.fc)return t.stack[0].line=r.line,!1}return t.stack.unshift(r),t.Bd=!0,!0}return t.MR=!0,!1}function o(t,e){for(var n,s,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],l={},p=!1,d=o.caller;d&&!p;d=d.caller)if(d!==a&&d!==h.jQ){if(s={url:null,fc:c,line:null,nR:null},d.name?s.fc=d.name:(n=u.exec(d.toString()))&&(s.fc=n[1]),"undefined"==typeof s.fc)try{s.fc=n.input.substring(0,n.input.indexOf("{"))}catch(t){}l[""+d]?p=!0:l[""+d]=!0,f.push(s)}e&&f.splice(0,e);var E={name:t.name,message:t.message,url:i(),stack:f};return r(E,t.qc||t.fileName,t.line||t.lineNumber,t.message||t.description),E}function a(r,a){var s=null;a=null==a?0:+a;try{if(s=e(r))return s}catch(t){if(h.debug)throw t}try{if(s=t(r))return s}catch(t){if(h.debug)throw t}try{if(s=n(r))return s}catch(t){if(h.debug)throw t}try{if(s=o(r,a+1))return s}catch(t){if(h.debug)throw t}return{name:r.name,message:r.message,url:i()}}return a.LR=r,a.NR=t,a}(),e.Kb=h},{6:6}]},{},[5])(5)}),function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={Kb:{}};e[a][0].call(c.Kb,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.Kb,t,e,n,i)}return n[a].Kb}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)h[e]=t[e],u[t.charCodeAt(e)]=e;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function r(t){var e,n,i,r,o,a,s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new c(3*s/4-o),i=o>0?s-4:s;var h=0;for(e=0,n=0;e<i;e+=4,n+=3)r=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],a[h++]=r>>16&255,a[h++]=r>>8&255,a[h++]=255&r;return 2===o?(r=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,a[h++]=255&r):1===o&&(r=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,a[h++]=r>>8&255,a[h++]=255&r),a}function o(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function a(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(o(i));return r.join("")}function s(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,u=0,c=n-i;u<c;u+=s)o.push(a(t,u,u+s>c?c:u+s));return 1===i?(e=t[n-1],r+=h[e>>2],r+=h[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=h[e>>10],r+=h[e>>4&63],r+=h[e<<2&63],r+="="),o.push(r),o.join("")}n.OR=r,n.PR=s;var h=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;i()},{}],2:[function(t,e,n){(function(e){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,VR:function(){return 42}},42===t.VR()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function r(){return a.TR?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return a.TR?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TR||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,n)}function s(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,i):"string"==typeof e?f(t,e,n):d(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function u(t,e,n,i){return h(e),
e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}function c(t,e){if(h(e),t=o(t,e<0?0:0|E(e)),!a.TR)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.bS(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(e,n);return t=o(t,i),t.write(e,n),t}function l(t,e){var n=0|E(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),a.TR?(t=e,t.__proto__=a.prototype):t=l(t,e),t}function d(t,e){if(a.isBuffer(e)){var n=0|E(e.length);return t=o(t,n),0===t.length?t:(e.Di(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Y(e.length)?o(t,0):l(t,e);if("Buffer"===e.type&&$(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function E(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),a.$R(+t)}function g(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return U(this,e,n);case"ascii":return S(this,e,n);case"binary":return D(this,e,n);case"base64":return M(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function T(t,e,n,i){function r(t,e){return 1===o?t[e]:t.hS(e*o)}var o=1,a=t.length,s=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,s/=2,n/=2}for(var h=-1,u=n;u<a;++u)if(r(t,u)===r(e,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===s)return h*o}else h!==-1&&(u-=u-h),h=-1;return-1}function R(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,i){return X(V(e,t.length-n),t,n,i)}function H(t,e,n,i){return X(K(e),t,n,i)}function b(t,e,n,i){return H(t,e,n,i)}function x(t,e,n,i){return X(Z(e),t,n,i)}function A(t,e,n,i){return X(W(e,t.length-n),t,n,i)}function M(t,e,n){return 0===e&&n===t.length?J.PR(t):J.PR(t.slice(e,n))}function U(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var h,u,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:h=t[r+1],128===(192&h)&&(f=(31&o)<<6|63&h,f>127&&(a=f));break;case 3:h=t[r+1],u=t[r+2],128===(192&h)&&128===(192&u)&&(f=(15&o)<<12|(63&h)<<6|63&u,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:h=t[r+1],u=t[r+2],c=t[r+3],128===(192&h)&&128===(192&u)&&128===(192&c)&&(f=(15&o)<<18|(63&h)<<12|(63&u)<<6|63&c,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return O(i)}function O(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function D(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function C(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=k(t[o]);return r}function L(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function P(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,i,r,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function I(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function z(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function B(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,r){return r||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,i,23,4),n+4}function q(t,e,n,i,r){return r||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,i,52,8),n+8}function G(t){if(t=F(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function k(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function Z(t){return J.OR(G(t))}function X(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function Y(t){return t!==t}var J=t("base64-js"),Q=t("ieee754"),$=t("isarray");n.QR=a,n.RR=v,n.SR=50,a.TR=void 0!==e.TR?e.TR:i(),n.UR=r(),a.WR=8192,a.XR=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return s(null,t,e,n)},a.TR&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.YR&&a[Symbol.YR]===a&&Object.defineProperty(a,Symbol.YR,{value:null,ZR:!0})),a.$R=function(t,e,n){return u(null,t,e,n)},a._R=function(t){return c(null,t)},a.aS=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t.cS)},a.dS=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},a.bS=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!$(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.$R(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=a._R(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.Di(i,r),r+=o.length}return i},a.byteLength=g,a.prototype.cS=!0,a.prototype.eS=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.fS=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?U(this,0,t):m.apply(this,arguments)},a.prototype.Zi=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.dS(this,t)},a.prototype.gS=function(){var t="",e=n.SR;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.dS=function(t,e,n,i,r){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,h=Math.min(o,s),u=this.slice(i,r),c=t.slice(e,n),f=0;f<h;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.indexOf=function(t,e,n){if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:T(this,t,e,n);if("number"==typeof t)return a.TR&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):T(this,[t],e,n);throw new TypeError("val must be string, number or Buffer")},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return R(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return H(this,t,e,n);case"binary":return b(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.iS||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(a.TR)i=this.subarray(t,e),i.__proto__=a.prototype;else{var r=e-t;i=new a(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},a.prototype.jS=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},a.prototype.kS=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},a.prototype.lS=function(t,e){return e||P(t,1,this.length),this[t]},a.prototype.mS=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.hS=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.nS=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.oS=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.pS=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},a.prototype.qS=function(t,e,n){t=0|t,e=0|e,n||P(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},a.prototype.rS=function(t,e){return e||P(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.sS=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.tS=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.uS=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.vS=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.wS=function(t,e){return e||P(t,4,this.length),Q.read(this,t,!0,23,4)},a.prototype.xS=function(t,e){return e||P(t,4,this.length),Q.read(this,t,!1,23,4)},a.prototype.yS=function(t,e){return e||P(t,8,this.length),Q.read(this,t,!0,52,8)},a.prototype.zS=function(t,e){return e||P(t,8,this.length),Q.read(this,t,!1,52,8)},a.prototype.AS=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,t,e,n,r,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.BS=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;N(this,t,e,n,r,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.CS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,1,255,0),a.TR||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.DS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,2,65535,0),a.TR?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},a.prototype.ES=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,2,65535,0),a.TR?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},a.prototype.FS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,4,4294967295,0),a.TR?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},a.prototype.GS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,4,4294967295,0),a.TR?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},a.prototype.HS=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.IS=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.JS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,1,127,-128),a.TR||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.KS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,2,32767,-32768),a.TR?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},a.prototype.LS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,2,32767,-32768),a.TR?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},a.prototype.MS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,4,2147483647,-2147483648),a.TR?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},a.prototype.NS=function(t,e,n){return t=+t,e=0|e,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TR?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},a.prototype.OS=function(t,e,n){return j(this,t,e,!0,n)},a.prototype.PS=function(t,e,n){return j(this,t,e,!1,n)},a.prototype.QS=function(t,e,n){return q(this,t,e,!0,n)},a.prototype.RS=function(t,e,n){return q(this,t,e,!1,n)},a.prototype.Di=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!a.TR)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.bS(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:V(new a(t,i).toString()),h=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%h]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{SS:1,TS:3,US:4}],3:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,h=(1<<s)-1,u=h>>1,c=-7,f=n?r-1:0,l=n?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=l,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+f],f+=l,c-=8);if(0===o)o=1-u;else{if(o===h)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=u}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,h,u=8*o-r-1,c=(1<<u)-1,f=c>>1,l=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,E=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+f>=1?l/h:l*Math.pow(2,1-f),e*h>=2&&(a++,h/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*h-1)*Math.pow(2,r),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*E}},{}],4:[function(t,e,n){var i={}.toString;e.Kb=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],5:[function(t,e,n){"use strict";function i(t,e){var n=Object.keys(q);if(n.indexOf(e)<0)throw new TypeError("Underlying type does not exist. Typo?");j[t]=e}function r(t){var e=Object.keys(q),n=t.trim().toLowerCase();if(j.hasOwnProperty(n)&&(n=j[n]),e.indexOf(n)===-1)throw new TypeError("Invalid data type for schema: "+t+" -> "+n);return n}function o(t){B=t}function a(t){var e=t.trim().toLowerCase(),n=["ascii","utf8","utf16le","ucs2","base64","binary","hex"];if(!(n.indexOf(e)>-1))throw new TypeError("String encoding not available");z=e}function s(t,e){for(;t>127;)e[K.byteOffset++]=127&t|128,t>>=7;e[K.byteOffset++]=127&t}function h(t,e){s(t<<1^t>>31,e)}function u(t){var e,n=0,i=0;do e=t[K.byteOffset++],n|=(127&e)<<7*i,i++;while(128&e);return n}function c(t){var e=u(t);return e>>>1^-(1&e)}function f(t,e){var n=I.byteLength(t||"",z);s(n,e),K.byteOffset+=e.write(t||"",K.byteOffset,n,z)}function l(t){var e=u(t),n=t.toString(z,K.byteOffset,K.byteOffset+e);return K.byteOffset+=e,n}function p(t,e){var n=t.length;s(n,e),t.Di(e,K.byteOffset),K.byteOffset+=n}function d(t){var e=u(t),n=k(e);return t.Di(n,0,K.byteOffset,K.byteOffset+e),K.byteOffset+=e,n}function E(t,e){switch(t){case"boolean":return"bag.byteOffset = wBuffer.writeUInt8("+e+" ? 1 : 0, bag.byteOffset, true);";case"int8":return"bag.byteOffset = wBuffer.writeInt8("+e+", bag.byteOffset, true);";case"uint8":return"bag.byteOffset = wBuffer.writeUInt8("+e+", bag.byteOffset, true);";case"int16":return"bag.byteOffset = wBuffer.writeInt16BE("+e+", bag.byteOffset, true);";case"uint16":return"bag.byteOffset = wBuffer.writeUInt16BE("+e+", bag.byteOffset, true);";case"int32":return"bag.byteOffset = wBuffer.writeInt32BE("+e+", bag.byteOffset, true);";case"uint32":return"bag.byteOffset = wBuffer.writeUInt32BE("+e+", bag.byteOffset, true);";case"float32":return"bag.byteOffset = wBuffer.writeFloatBE("+e+", bag.byteOffset, true);";case"float64":return"bag.byteOffset = wBuffer.writeDoubleBE("+e+", bag.byteOffset, true);";case"string":return"bag.writeString("+e+", wBuffer);";case"varuint":return"bag.writeVarUInt("+e+", wBuffer);";case"varint":return"bag.writeVarInt("+e+", wBuffer);";case"buffer":return"bag.writeBuffer("+e+", wBuffer);"}}function v(t){return t<=0?1:Math.floor(Math.log(t)/Math.log(128))+1}function g(t){return v(t<<1^t>>31)}function m(t,e,n,i,r){var o=i<=1?e:e+"xn",a=void 0===r?"ref"+o+".length":r,s="j"+e;return"for (var "+s+"="+(t.length-1)+";"+s+"<"+a+";"+s+"++) { "+n+"}"}function y(t){return"byteC+=bag.getVarUIntByteLength(ref"+t+".length);"}function T(t){return"bag.writeVarUInt(ref"+t+".length,wBuffer);"}function R(t){return"var "+t+"=bag.readVarUInt(buffer);"}function w(t,e,n,i){return"var ref"+t+"="+i+"; ref"+e+"["+n+"]=ref"+t+";"}function H(t,e,n){return"var ref"+t+"=ref"+e+"["+n+"];"}function b(t,e,n,i,r,o,a,s){var h=(L(o,e),L(o,n)),u=t?"j"+n:i;o[o.length-1]+=H(e+"xn",h,u),a[a.length-1]+=w(e+"xn",h,u,r),s[s.length-1]+=H(e+"xn",h,u)}function x(t,e,n,i,r){if(typeof t!==e)throw new TypeError(t+" does not match the type of "+e);if(void 0!==n&&t<n)throw new TypeError(t+" is less than minimum allowed value of "+n+" for schema type "+r);if(void 0!==i&&t>i)throw new TypeError(t+" is greater than maximum allowed value of "+i+" for schema type "+r)}function A(t){var e="bag.throwTypeError("+t+",'Buffer or Uint8Array');";return"if ("+t+" instanceof Uint8Array === false && "+t+" instanceof Buffer === false){"+e+"}"}function M(t,e){var n="bag.throwTypeError("+t+",'"+e+"');";return"if (typeof("+t+") !== '"+e+"'){"+n+"}"}function U(t,e,n,i){var r="bag.throwTypeError("+t+",'number',"+e+","+n+",'"+i+"');";return"if (typeof("+t+") !== 'number'||"+t+"<"+e+"||"+t+">"+n+"){"+r+"}"}function O(t,e){var n=3.4028234663852886e38;switch(t){case"boolean":return M(e,"boolean");case"int8":return U(e,-128,127,"int8");case"uint8":return U(e,0,255,"uint8");case"int16":return U(e,-32768,32767,"int16");case"uint16":return U(e,0,65535,"uint16");case"int32":return U(e,-2147483648,2147483647,"int32");case"uint32":return U(e,0,4294967295,"uint32");case"float32":return U(e,-n,n,"float32");case"float64":return U(e,-Number.MAX_VALUE,Number.MAX_VALUE,"float64");case"string":return M(e,"string");case"varuint":return U(e,0,2147483647,"varuint");case"varint":return U(e,-1073741824,1073741823,"varint");case"buffer":return A(e)}}function S(t,e,n,i){var r="ref"+e+n;return(i?O(t,r):"")+E(t,r)}function D(t,e,n){return"ref"+e+n+"="+q[t]}function C(t,e,n){var i=G.hasOwnProperty(t);return i?"byteC+="+G[t]+";":"byteC+=bag.dynamicByteCounts['"+t+"'](ref"+e+n+");"}function L(t,e){return t.length<=2&&t[t.length-1].length<=0?e:e+"xn"}function P(t,e){function n(t,E){h++;var v=Object.keys(t);v.sort(function(t,e){return t<e?-1:t>e?1:0});for(var g=h,x=0;x<v.length;x++){var A=v[x],M=t[A];E&&(A=+A);var U="number"==typeof A?A:"'"+A+"'",O=M.constructor===Array?"[]":"{}",P=E&&x>=v.length-1;if(P&&(u.push(""),c.push(""),f.push("")),M.constructor===Array){var N=h+1,I=u.length<=1?N:N+"xn",z="arrLen"+h;1===u.length&&(s+=H(N,g,U),o+=w(N,g,U,"[]"));var B=T(I),j=R(z),q=y(I);b(P,N,g,U,O,u,c,f),n(M,!0),l=B+m(M,N,u.pop()+l,u.length),p=j+m(M,N,c.pop()+p,u.length,z),d=q+m(M,N,f.pop()+d,u.length),1===u.length&&(i+=l,l="",o+=p,p="",a+=d,d="")}else if("object"==typeof M){var N=h+1;1===u.length&&(s+=H(N,g,U),o+=w(N,g,U,"{}")),b(P,N,g,U,O,u,c,f),n(M,!1)}else{var G=E?"":"["+U+"]",F=r(M);t[A]=F;var I=L(u,g);if(E&&(I+=P?"[j"+g+"]":"["+x+"]"),u[u.length-1]+=S(F,I,G,e),c[c.length-1]+=D(F,I,G),f[f.length-1]+=C(F,I,G),u.length>1)continue;var k=E?g+"["+x+"]":g;i+=S(F,k,G,e),o+=D(F,k,G),a+=C(F,k,G)}}}var i="bag.byteOffset=0;",o="var ref1={}; bag.byteOffset=0;",a="",s="var ref1=json;",h=0,u=[""],c=[""],f=[""],l="",p="",d="";t={a:t},n(t,!1),a="var byteC=0;".concat(a,"var wBuffer=bag.allocUnsafe(byteC);"),i=s.concat(a,i,"return wBuffer;"),o=o.concat("return ref1['a'];");var E=new Function("json","bag",i),v=new Function("buffer","bag",o);return[E,v]}function N(t,e){var n=P(t,void 0===e?B:e),i=n[0],r=n[1];return{encode:function(t){var e={a:t};return i(e,K)},decode:function(t){var e=I.isBuffer(t)?t:V(t);return r(e,K)}}}var I=t("buffer").QR,z="utf8",B=!0,j={},q={VS:"!!buffer.readUInt8(bag.byteOffset, true); bag.byteOffset += 1;",WS:"buffer.readInt8(bag.byteOffset, true); bag.byteOffset += 1;",XS:"buffer.readUInt8(bag.byteOffset, true); bag.byteOffset += 1;",YS:"buffer.readInt16BE(bag.byteOffset, true); bag.byteOffset += 2;",ZS:"buffer.readUInt16BE(bag.byteOffset, true); bag.byteOffset += 2;",$S:"buffer.readInt32BE(bag.byteOffset, true); bag.byteOffset += 4;",_S:"buffer.readUInt32BE(bag.byteOffset, true); bag.byteOffset += 4;",aT:"buffer.readFloatBE(bag.byteOffset, true); bag.byteOffset += 4;",bT:"buffer.readDoubleBE(bag.byteOffset, true); bag.byteOffset += 8;",dc:"bag.readString(buffer);",cT:"bag.readVarUInt(buffer);",dT:"bag.readVarInt(buffer);",buffer:"bag.readBuffer(buffer);"},G={VS:1,WS:1,XS:1,YS:2,ZS:2,$S:4,_S:4,aT:4,bT:8},F={dc:function(t){var e=I.byteLength(t,z);return v(e)+e},cT:function(t){return v(t)},dT:function(t){return g(t)},buffer:function(t){var e=t.length;return v(e)+e}},k=I._R?function(t){return I._R(t)}:function(t){return new I(t)},V=I.from?function(t){return I.from(t)}:function(t){return new I(t)},K={};K._R=k,K.eT=v,K.fT=F,K.gT=u,K.hT=c,K.iT=s,K.jT=h,K.kT=l,K.lT=f,K.mT=d,K.nT=p,K.oT=x,K.byteOffset=0,i("bool","boolean"),e.Kb=n={pT:N,qT:i,rT:a,sT:o},window.tT=e.Kb},{buffer:2}]},{},[5]),!function(t,e,n){function i(t,e){return typeof t===e}function r(){var t,e,n,r,o,a,s;for(var h in y)if(y.hasOwnProperty(h)){if(t=[],e=y[h],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.uT&&e.options.uT.length))for(n=0;n<e.options.uT.length;n++)t.push(e.options.uT[n].toLowerCase());for(r=i(e.fR,"function")?e.fR():e.fR,o=0;o<t.length;o++)a=t[o],s=a.split("."),1===s.length?R[s[0]]=r:(!R[s[0]]||R[s[0]]instanceof Boolean||(R[s[0]]=new Boolean(R[s[0]])),R[s[0]][s[1]]=r),m.push((r?"":"no-")+s.join("-"))}}function o(t){var e=w.className,n=R.wT.vT||"";if(H&&(e=e.baseVal),R.wT.xT){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");e=e.replace(i,"$1"+n+"js$2")}R.wT.yT&&(e+=" "+n+t.join(" "+n),H?w.className.baseVal=e:w.className=e)}function a(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):H?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function s(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function h(t,e){return!!~(""+t).indexOf(e)}function u(t,e){return function(){return t.apply(e,arguments)}}function c(t,e,n){var r;for(var o in t)if(t[o]in e)return n===!1?t[o]:(r=e[t[o]],i(r,"function")?u(r,n||e):r);return!1}function f(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(){var t=e.body;return t||(t=a(H?"svg":"body"),t.zT=!0),t}function p(t,n,i,r){var o,s,h,u,c="modernizr",f=a("div"),p=l();if(parseInt(i,10))for(;i--;)h=a("div"),h.id=r?r[i]:c+(i+1),f.appendChild(h);return o=a("style"),o.type="text/css",o.id="s"+c,(p.zT?p:f).appendChild(o),p.appendChild(f),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),f.id=c,p.zT&&(p.style.background="",p.style.overflow="hidden",u=w.style.overflow,w.style.overflow="hidden",w.appendChild(p)),s=n(f,t),p.zT?(p.parentNode.removeChild(p),w.style.overflow=u,w.offsetHeight):f.parentNode.removeChild(f),!!s}function d(e,i){var r=e.length;if("CSS"in t&&"supports"in t.CSS){for(;r--;)if(t.CSS.supports(f(e[r]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];r--;)o.push("("+f(e[r])+":"+i+")");return o=o.join(" or "),p("@supports ("+o+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return n}function E(t,e,r,o){function u(){f&&(delete U.style,delete U.AT)}if(o=!i(o,"undefined")&&o,!i(r,"undefined")){var c=d(t,r);if(!i(c,"undefined"))return c}for(var f,l,p,E,v,g=["modernizr","tspan"];!U.style;)f=!0,U.AT=a(g.shift()),U.style=U.AT.style;for(p=t.length,l=0;p>l;l++)if(E=t[l],v=U.style[E],h(E,"-")&&(E=s(E)),U.style[E]!==n){if(o||i(r,"undefined"))return u(),"pfx"!=e||E;try{U.style[E]=r}catch(t){}if(U.style[E]!=v)return u(),"pfx"!=e||E}return u(),!1}function v(t,e,n,r,o){var a=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+_.join(a+" ")+a).split(" ");return i(e,"string")||i(e,"undefined")?E(s,e,r,o):(s=(t+" "+A.join(a+" ")+a).split(" "),c(s,e,n))}function g(t,e,i){return v(t,n,n,e,i)}var m=[],y=[],T={BT:"3.3.1",wT:{vT:"",yT:!0,xT:!0,CT:!0},DT:[],ET:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},FT:function(t,e,n){y.push({name:t,fR:e,options:n})},GT:function(t){y.push({name:null,fR:t})}},R=function(){};R.prototype=T,R=new R,R.FT("json","JSON"in t&&"parse"in JSON&&"stringify"in JSON),R.FT("websockets","WebSocket"in t&&2===t.WebSocket.CLOSING);var w=e.documentElement,H="svg"===w.nodeName.toLowerCase();R.FT("webgl",function(){var e=a("canvas"),n="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return n in e?e[n]("webgl")||e[n]("experimental-webgl"):"WebGLRenderingContext"in t});var b="Moz O ms Webkit",_=T.wT.CT?b.split(" "):[];T.HT=_;var x=function(e){var i,r=prefixes.length,o=t.CSSRule;if("undefined"==typeof o)return n;if(!e)return!1;if(e=e.replace(/^@/,""),i=e.replace(/-/g,"_").toUpperCase()+"_RULE",i in o)return"@"+e;for(var a=0;r>a;a++){var s=prefixes[a],h=s.toUpperCase()+"_"+i;if(h in o)return"@-"+s.toLowerCase()+"-"+e}return!1};T.IT=x;var A=T.wT.CT?b.toLowerCase().split(" "):[];T.JT=A;var M={KT:a("modernizr")};R.DT.push(function(){delete M.KT});var U={style:M.KT.style};R.DT.unshift(function(){delete U.style}),T.LT=v;var O=T.MT=function(t,e,n){return 0===t.indexOf("@")?x(t):(-1!=t.indexOf("-")&&(t=s(t)),e?v(t,e,n):v(t,"pfx"))};R.FT("fullscreen",!(!O("exitFullscreen",e,!1)&&!O("cancelFullScreen",e,!1))),R.FT("pointerlock",!!O("exitPointerLock",e)),T.LT=g,R.FT("flexbox",g("flexBasis","1px",!0)),r(),o(m),delete T.FT,delete T.GT;for(var S=0;S<R.DT.length;S++)R.DT[S]();t.NT=R}(window,document),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.Kb=e():"function"==typeof define&&define.hg?define(e):t.OT=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r,o;o=n.shift();)for(r in o)_s.call(o,r)&&(t[r]=o[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function o(t){return"[object Array]"===Ms.call(t)}function a(t){return Us.test(Ms.call(t))}function s(t,e){return null===t&&null===e||"object"!=typeof t&&"object"!=typeof e&&t===e}function h(t){return!isNaN(parseFloat(t))&&isFinite(t)}function u(t){return t&&"[object Object]"===Ms.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function l(){Vy.uU&&bs.apply(null,arguments)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=c(t,n),xs(t,n)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];
t=c(t,n),Ss[t]||(Ss[t]=!0,xs(t,n))}function E(){Vy.uU&&p.apply(null,arguments)}function v(){Vy.uU&&d.apply(null,arguments)}function g(t,e,n){var i=m(t,e,n);return i?i[t][n]:null}function m(t,e,n){for(;e;){if(n in e[t])return e;if(e._T)return null;e=e.parent}}function y(t){return function(){return t}}function T(t){var e,n,i,r,o,a;for(e=t.split("."),(n=js[e.length])||(n=R(e.length)),o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)a=n[r].map(i).join("."),o.hasOwnProperty(a)||(o.push(a),o[a]=!0);return o}function R(t){var e,n,i,r,o,a,s,h,u="";if(!js[t]){for(i=[];u.length<t;)u+=1;for(e=parseInt(u,2),r=function(t){return"1"===t},o=0;o<=e;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(h=[],s=n.length,a=0;a<s;a++)h.push(r(n[a]));i[o]=h}js[t]=i}return js[t]}function w(t,e,n,i){var r=t[e];if(!r||!r.BU(i)&&r.BU(n))return t[e]=r?r.replace(n,i):i,!0}function H(t){var e=t.slice(2);return"i"===t[1]&&h(e)?+e:e}function b(t){return null==t?t:(Fs.hasOwnProperty(t)||(Fs[t]=new ks(t)),Fs[t])}function x(t,e){function n(e,n){var i,r,a;return n.AU?a=[].concat(Object.keys(t.EU.data),Object.keys(t.EU.FU),Object.keys(t.EU.GU)):(i=t.EU.HU[n.vU],r=i?i.get():t.EU.get(n),a=r?Object.keys(r):null),a&&a.forEach(function(t){"_ractive"===t&&o(r)||e.push(n.join(t))}),e}var i,r,a;for(i=e.vU.split("."),a=[Ks];r=i.shift();)"*"===r?a=a.reduce(n,[]):a[0]===Ks?a[0]=b(r):a=a.map(A(r));return a}function A(t){return function(e){return e.join(t)}}function M(t){return t?t.replace(qs,".$1"):""}function U(t,e,n){if("string"!=typeof e||!h(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},x(t,b(M(e))).forEach(function(e){var i=t.EU.get(e);if(!h(i))throw new Error(Zs);r[e.vU]=i+n}),t.set(r);if(i=t.get(e),!h(i))throw new Error(Zs);return t.set(e,+i+n)}function O(t,e){return Ws(this,t,void 0===e?1:+e)}function S(t){this.event=t,this.method="on"+t,this.LU=$s[t]}function D(t,e){var n=t.indexOf(e);n===-1&&t.push(e)}function C(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function L(t,e){var n;if(!o(t)||!o(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function P(t){return"string"==typeof t?[t]:void 0===t?[]:t}function N(t){return t[t.length-1]}function I(t,e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}function z(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function B(t){setTimeout(t,0)}function j(t,e){return function(){for(var n;n=t.shift();)n(e)}}function q(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof th)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(t){return void i(t)}if("function"==typeof r){var o,a,s;a=function(e){o||(o=!0,q(t,e,n,i))},s=function(t){o||(o=!0,i(t))};try{r.call(e,a,s)}catch(t){if(!o)return i(t),void(o=!0)}}else n(e)}}function G(t,e,n){var i;return e=M(e),"~/"===e.substr(0,2)?(i=b(e.substring(2)),V(t,i.xU,n)):"."===e[0]?(i=F(ah(n),e),i&&V(t,i.xU,n)):i=k(t,b(e),n),i}function F(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.vU),"."===e)return b(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),b(n.join("."))}return b(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function k(t,e,n,i){var r,o,a,s,h;if(e.AU)return e;for(o=e.xU;n;)if(r=n.context,n=n.parent,r&&(s=!0,a=t.EU.get(r),a&&("object"==typeof a||"function"==typeof a)&&o in a))return r.join(e.vU);return K(t.EU,o)?e:t.parent&&!t._T&&(s=!0,n=t.rU.NU,o=b(o),h=k(t.parent,o,n,!0))?(t.EU.map(o,{origin:t.parent.EU,OU:h}),e):i||s?void 0:(t.EU.set(e,void 0),e)}function V(t,e){var n;!t.parent||t._T||K(t.EU,e)||(e=b(e),(n=k(t.parent,e,t.rU.NU,!0))&&t.EU.map(e,{origin:t.parent.EU,OU:n}))}function K(t,e){return""===e||e in t.data||e in t.GU||e in t.FU}function W(t){t.PU()}function Z(t){t.Aw()}function X(t){t.QU()}function Y(t){t.cancel()}function J(t){t.detach()}function Q(t){t.cV()}function $(t){!t.gR||t.TU.length||t.VU||(t.YU||(t.parent?t.parent.$U(t):t.cV(),t.YU=!0),t.SU.length||t.UU||("function"==typeof t.RU&&t.RU(),t.parent&&t.parent._U()))}function tt(){for(var t,e,n;uh.hV.length;)e=uh.hV.pop(),n=e.EU.tV(),n&&ph.MU(e,n);for(et(),t=0;t<uh.fV.length;t+=1)uh.fV[t].update();for(uh.fV.length=0,t=0;t<uh.gV.length;t+=1)uh.gV[t]();if(uh.gV.length=0,uh.hV.length)return tt()}function et(){var t,e,n,i;for(t=lh.length;t--;)e=lh[t],e.OU?lh.splice(t,1):(n=sh(e.root,e.uV,e.NU))&&((i||(i=[])).push({item:e,OU:n}),lh.splice(t,1));i&&i.forEach(nt)}function nt(t){t.item.resolve(t.OU)}function it(t,e,n){var i,r,o,a,s,h,u,c,f,l,p,d,E,v;if(i=new oh(function(t){return r=t}),"object"==typeof t){n=e||{},h=n.yV,u=n.duration,s=[],c=n.step,f=n.complete,(c||f)&&(p={},n.step=null,n.complete=null,l=function(t){return function(e,n){p[t]=n}});for(o in t)t.hasOwnProperty(o)&&((c||f)&&(d=l(o),n={yV:h,duration:u},c&&(n.step=d)),n.complete=f?d:Os,s.push(rt(this,o,t[o],n)));return v={yV:h,duration:u},c&&(v.step=function(t){return c(t,p)}),f&&i.then(function(t){return f(t,p)}),v.complete=r,E=rt(this,null,null,v),s.push(E),i.stop=function(){for(var t;t=s.pop();)t.stop();E&&E.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,a=rt(this,t,e,n),i.stop=function(){return a.stop()},i}function rt(t,e,n,i){var r,o,a,h;return e&&(e=b(M(e))),null!==e&&(h=t.EU.get(e)),gh.abort(e,t),s(h,n)?(i.complete&&i.complete(i.bR),Rh):(i.yV&&(r="function"==typeof i.yV?i.yV:t.yV[i.yV],"function"!=typeof r&&(r=null)),o=void 0===i.duration?400:i.duration,a=new yh({OU:e,from:h,bR:n,root:t,duration:o,yV:r,wV:i.wV,step:i.step,complete:i.complete}),gh.add(a),t.xV.push(a),a)}function ot(){return this.zV?this.zV:(this.PT&&I(this.PT.AV,this),this.zV=this.sU.detach(),Hh.MU(this),this.zV)}function at(t){return this.PT?this.sU.find(t):null}function st(t,e){var n;if(n=this.BV?!this.selector||t.name===this.selector:t.cw?ls(t.cw,this.selector):null)return this.push(t.cw||t.iV),e||this.CV(),!0}function ht(t){var e;return(e=t.NU)?e.JV:t.rU&&(e=t.rU.NU)?e.JV:void 0}function ut(t){var e,n;for(e=[t],n=ht(t);n;)e.push(n),n=ht(n);return e}function ct(t,e,n,i){var r=[];return ws(r,{selector:{value:e},MV:{value:n},BV:{value:i},NV:{value:xh}}),n?(ws(r,{cancel:{value:Ah},fu:{value:t},LV:{value:Uh},CV:{value:Oh},OV:{value:Sh},KV:{value:!1,PV:!0}}),r):r}function ft(t,e){var n,i;return this.PT?(e=e||{},n=this.QV,(i=n[t])?e&&e.MV?i:i.slice():(i=Dh(this,t,!!e.MV,!1),i.MV&&(n.push(t),n["_"+t]=i),this.sU.RV(t,i),i)):[]}function lt(t,e){var n,i;return e=e||{},n=this.SV,(i=n[t])?e&&e.MV?i:i.slice():(i=Dh(this,t,!!e.MV,!0),i.MV&&(n.push(t),n["_"+t]=i),this.sU.TV(t,i),i)}function pt(t){return this.sU.UV(t)}function dt(t){return this.VV?this.VV.rU&&this.VV.rU.name===t?this.VV:this.VV.WV(t):null}function Et(t){return this.parent?this.parent.rU&&this.parent.rU.name===t?this.parent:this.parent.XV(t):null}function vt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_V:!0};var i=b(e).CU();gt(t,i,n.event,n.hc,!0)}}function gt(t,e,n,i){var r,o,a=void 0!==arguments[4]&&arguments[4],s=!0;for(Bh.YV(t,n),o=e.length;o>=0;o--)r=t.aW[e[o]],r&&(s=mt(t,r,n,i)&&s);if(Bh.$V(t),t.parent&&s){if(a&&t.rU){var h=t.rU.name+"."+e[e.length-1];e=b(h).CU(),n&&(n.rU=t)}gt(t.parent,e,n,i)}}function mt(t,e,n,i){var r=null,o=!1;n&&!n._V&&(i=[n].concat(i)),e=e.slice();for(var a=0,s=e.length;a<s;a+=1)e[a].apply(t,i)===!1&&(o=!0);return n&&!n._V&&o&&(r=n.bW)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}function yt(t){var e={hc:Array.prototype.slice.call(arguments,1)};jh(this,t,e)}function Tt(t){var e;return t=b(M(t)),e=this.EU.get(t,Fh),void 0===e&&this.parent&&!this._T&&sh(this,t.vU,this.rU.NU)&&(e=this.EU.get(t)),e}function Rt(e,n){if(!this.sU.tU)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.PT=e,(e.AV||(e.AV=[])).push(this),this.zV=null,wt(this)}function wt(t){Vh.MU(t),t.TV("*").forEach(function(t){wt(t.iV)})}function Ht(t,e,n){var i,r;return t=b(M(t)),i=this.EU.get(t),o(i)&&o(e)?(r=dh.start(this,!0),this.EU.nd(t,i,e,n),dh.end(),r):this.set(t,e,n&&n.complete)}function bt(t,e){var n,i;return n=x(t,e),i={},n.forEach(function(e){i[e.vU]=t.get(e.vU)}),i}function xt(t,e,n,i){var r,o,a;e=b(M(e)),i=i||au,e.zU?(r=new ru(t,e,n,i),t.EU.kW.push(r),o=!0):r=new Xh(t,e,n,i),r.init(i.init),t.EU.register(e,r,o?"patternObservers":"observers"),r.gR=!0;var s={cancel:function(){var n;a||(o?(n=t.EU.kW.indexOf(r),t.EU.kW.splice(n,1),t.EU.unregister(e,r,"patternObservers")):t.EU.unregister(e,r,"observers"),a=!0)}};return t.lW.push(s),s}function At(t,e,n){var i,r,o,a;if(u(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",ou(this,t,e,n);if(o=t.split(" "),1===o.length)return ou(this,t,e,n);for(i=[],a=o.length;a--;)t=o[a],t&&i.push(ou(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function _t(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Mt(t,e){var n,i=this;if(t)n=t.split(" ").map(uu).filter(cu),n.forEach(function(t){var n,r;(n=i.aW[t])&&(e?(r=n.indexOf(e),r!==-1&&n.splice(r,1)):i.aW[t]=[])});else for(t in this.aW)delete this.aW[t];return this}function Ut(t,e){var n,i,r,o=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.ET(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(uu).filter(cu),r.forEach(function(t){(o.aW[t]||(o.aW[t]=[])).push(e)}),{cancel:function(){return o.mW(t,e)}}}function Ot(t,e){var n=this.ET(t,function(){e.apply(this,arguments),n.cancel()});return n}function St(t,e,n){var i,r,o,a,s,h,u=[];if(i=Dt(t,e,n),!i)return null;for(r=t.length,s=i.length-2-i[1],o=Math.min(r,i[0]),a=o+i[1],h=0;h<o;h+=1)u.push(h);for(;h<a;h+=1)u.push(-1);for(;h<r;h+=1)u.push(h+s);return 0!==s?u.nW=i[0]:u.nW=t.length,u}function Dt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function Ct(e,n){var i,r,o,a=this;if(o=this.dU,this.cU&&(this.dU=!1),i=dh.start(this,!0),dh.sV(function(){return Au.MU(a)},!0),this.sU.tU)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.PT,n=t(n)||this.anchor,this.PT=e,this.anchor=n,!this.append&&e){var s=e.AV;s&&s.length&&Lt(s),e.innerHTML=""}return this.qW&&bu.apply(),e&&((r=e.AV)?r.push(this):e.AV=[this],n?e.insertBefore(this.sU.Dx(),n):e.appendChild(this.sU.Dx())),dh.end(),this.dU=o,i.then(function(){return _u.MU(a)})}function Lt(t){t.splice(0,t.length).forEach(W)}function Pt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Nt(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,a,s,h,u=[];for(e=[];n=Cu.exec(t);)e.push({vU:n[0],rW:n[1],sW:n[2]});for(o=e.map(zt),h=e.length;h--;)s=o.slice(),r=e[h],s[h]=r.rW+i+r.sW||"",a=o.slice(),a[h]=i+" "+a[h],u.push(s.join(" "),a.join(" "));return u.join(", ")},n=Pu.test(t)?t.replace(Pu,i):t.replace(Du,"").replace(Su,function(t,e){var n,i;return Lu.test(e)?t:(n=e.split(",").map(It),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function It(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function zt(t){return t.vU}function Bt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?f("data option must be an object or a function, `"+t+"` is not valid"):E("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function jt(t,e){Bt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?qt(e,this):e,o=n?qt(t,this):t;return Gt(r,o)}:Gt(e,t)}function qt(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&f("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Gt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Ft(t){var e,n,i;return t.DW("=")?(e=t.cD,t.FW(),(n=t.EW(Dc))?t.EW(Cc)?(i=t.EW(Dc))?(t.FW(),t.DW("=")?[n,i]:(t.cD=e,null)):(t.cD=e,null):null:(t.cD=e,null)):null}function kt(t){var e;return(e=t.EW(Pc))?{RT:pc,QT:e}:null}function Vt(t){var e,n;if(t.Wb[t.IW]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=Kt(t,t.tags[n]))return e}function Kt(t,e){var n,i,r,o;if(n=t.cD,t.DW("\\"+e.open)){if(0===n||"\\"!==t.vU[n-1])return e.open}else if(!t.DW(e.open))return null;if(i=Sc(t))return t.DW(e.close)?(e.open=i[0],e.close=i[1],t.JW(),Ic):null;if(t.FW(),t.DW("/")){t.cD-=1;var a=t.cD;Lc(t)?t.cD=a:(t.cD=a-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(o=0;o<e.KW.length;o+=1)if(r=e.KW[o],i=r(t,e))return e.LW&&(i.Ri=!0),t.MW&&(i.m=t.zW(n)),i;return t.cD=n,null}function Wt(t){var e;return(e=t.EW(qc))?{RT:hc,QT:e}:null}function Zt(t){var e=t.wW();return"true"===e.substr(0,4)?(t.cD+=4,{RT:lc,QT:"true"}):"false"===e.substr(0,5)?(t.cD+=5,{RT:lc,QT:"false"}):null}function Xt(t){var e;return(e=Zc(t))?Jc.test(e.QT)?e.QT:'"'+e.QT.replace(/"/g,'\\"')+'"':(e=jc(t))?e.QT:(e=t.EW(Xc))?e:void 0}function Yt(t){var e,n,i;return e=t.cD,t.FW(),n=Yc(t),null===n?(t.cD=e,null):(t.FW(),t.DW(":")?(t.FW(),i=Mf(t),null===i?(t.cD=e,null):{RT:Ec,NW:n,QT:i}):(t.cD=e,null))}function Jt(t){var e,n,i,r;return e=t.cD,i=Qc(t),null===i?null:(n=[i],t.DW(",")?(r=Jt(t),r?n.concat(r):(t.cD=e,null)):n)}function Qt(t){function e(t){i.push(t)}var n,i,r,o;return n=t.cD,t.FW(),r=Mf(t),null===r?null:(i=[r],t.FW(),t.DW(",")&&(o=Qt(t),null===o&&t.error(zc),o.forEach(e)),i)}function $t(t){return jc(t)||Gc(t)||Zc(t)||tf(t)||nf(t)||Lc(t)}function te(t){var e,n,i,r,o,a;return e=t.cD,i=t.EW(/^@(?:keypath|index|key)/),i||(n=t.EW(af)||"",i=!n&&t.PW&&t.EW(cf)||t.EW(uf),i||"."!==n||(n="",i=".")),i?n||t.PW||!kc.test(i)?!n&&Fc.test(i)?(r=Fc.exec(i)[0],t.cD=e+r.length,{RT:dc,QT:r}):(o=(n||"")+M(i),t.DW("(")&&(a=o.lastIndexOf("."),a!==-1?(o=o.substr(0,a),t.cD=e+o.length):t.cD-=1),{RT:vc,n:o.replace(/^this\./,"./").replace(/^this$/,".")}):(t.cD=e,null):null}function ee(t){var e,n;return e=t.cD,t.DW("(")?(t.FW(),n=Mf(t),n||t.error(zc),t.FW(),t.DW(")")||t.error(Bc),{RT:Tc,x:n}):null}function ne(t){var e,n,i;if(e=t.cD,t.FW(),t.DW(".")){if(t.FW(),n=t.EW(Xc))return{RT:gc,n:n};t.error("Expected a property name")}return t.DW("[")?(t.FW(),i=Mf(t),i||t.error(zc),t.FW(),t.DW("]")||t.error("Expected ']'"),{RT:gc,x:i}):null}function ie(t){var e,n,i,r;return(n=Af(t))?(e=t.cD,t.FW(),t.DW("?")?(t.FW(),i=Mf(t),i||t.error(zc),t.FW(),t.DW(":")||t.error('Expected ":"'),t.FW(),r=Mf(t),r||t.error(zc),{RT:Rc,rM:[n,i,r]}):(t.cD=e,n)):null}function re(t){return _f(t)}function oe(t){function e(t){switch(t.RT){case lc:case dc:case hc:case pc:return t.QT;case uc:return JSON.stringify(String(t.QT));case cc:return"["+(t.OW?t.OW.map(e).join(","):"")+"]";case fc:return"{"+(t.OW?t.OW.map(e).join(","):"")+"}";case Ec:return t.NW+":"+e(t.QT);case yc:return("typeof"===t.Ri?"typeof ":t.Ri)+e(t.rM);case wc:return e(t.rM[0])+("in"===t.Ri.substr(0,2)?" "+t.Ri+" ":t.Ri)+e(t.rM[1]);case Hc:return e(t.x)+"("+(t.rM?t.rM.map(e).join(","):"")+")";case Tc:return"("+e(t.x)+")";case mc:return e(t.x)+e(t.r);case gc:return t.n?"."+t.n:"["+e(t.x)+"]";case Rc:return e(t.rM[0])+"?"+e(t.rM[1])+":"+e(t.rM[2]);case vc:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return ae(t,n=[]),{r:n,Ri:e(t)}}function ae(t,e){var n,i;if(t.RT===vc&&e.indexOf(t.n)===-1&&e.unshift(t.n),i=t.rM||t.OW)if(u(i))ae(i,e);else for(n=i.length;n--;)ae(i[n],e);t.x&&ae(t.x,e),t.r&&ae(t.r,e),t.QT&&ae(t.QT,e)}function se(t,e){var n;if(t){for(;t.RT===Tc&&t.x;)t=t.x;return t.RT===vc?e.r=t.n:t.RT===hc&&Sf.test(t.QT)?e.r=t.QT:(n=he(t))?e.rx=n:e.x=Uf(t),e}}function he(t){for(var e,n=[];t.RT===mc&&t.r.RT===gc;)e=t.r,e.x?e.x.RT===vc?n.unshift(e.x):n.unshift(Uf(e.x)):n.unshift(e.n),t=t.x;return t.RT!==vc?null:{r:t.n,OW:n}}function ue(t,e){var n,i=Mf(t);return i?(t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={RT:Zu},Of(i,n),n):null}function ce(t,e){var n,i;return t.DW("&")?(t.FW(),(n=Mf(t))?(t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),i={RT:Zu},Of(n,i),i):null):null}function fe(t,e){var n,i,r,o,a;return n=t.cD,t.DW(">")?(t.FW(),i=t.cD,t.PW=!0,r=Mf(t),t.PW=!1,t.FW(),o=Mf(t),t.FW(),r?(a={RT:$u},Of(r,a),t.FW(),o&&(a={RT:Xu,n:_c,f:[a]},Of(o,a)),t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),a):null):null}function le(t,e){var n;return t.DW("!")?(n=t.wW().indexOf(e.close),n!==-1?(t.cD+=n+e.close.length,{RT:tc}):void 0):null}function pe(t,e){var n,i,r;if(n=t.cD,i=Mf(t),!i)return null;for(r=0;r<e.length;r+=1)if(t.wW().substr(0,e[r].length)===e[r])return i;return t.cD=n,of(t)}function de(t,e){var n,i,r,o;n=t.cD;try{i=Nf(t,[e.close])}catch(t){o=t}if(!i){if("!"===t.vU.charAt(n))return t.cD=n,null;if(o)throw o}if(!t.DW(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!i)){if("!"===t.GW())return null;t.error("Expected expression or legal reference")}return r={RT:Wu},Of(i,r),r}function Ee(t,e){var n,i,r;return t.EW(Bf)?(n=t.cD,i=t.EW(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.FW(),t.DW(e.close)||t.error("expected legal partial name"),r={RT:oc},i&&(r.n=i),r):null}function ve(t,e){var n,i,r,o;return n=t.cD,t.DW(e.open)?(t.FW(),t.DW("/")?(t.FW(),i=t.wW(),r=i.indexOf(e.close),r!==-1?(o={RT:Ju,r:i.substr(0,r).split(" ")[0]},t.cD+=r,t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o):(t.cD=n,null)):(t.cD=n,null)):null}function ge(t,e){var n=t.cD;return t.DW(e.open)?t.EW(Gf)?(t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{RT:Uc}):(t.cD=n,null):null}function me(t,e){var n,i=t.cD;return t.DW(e.open)?t.EW(kf)?(n=Mf(t),t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{RT:Oc,x:n}):(t.cD=i,null):null}function ye(t,e){var n,i,r,o,a,s,h,u,c,f,l,p;if(n=t.cD,t.DW("^"))r={RT:Xu,f:[],n:xc};else{if(!t.DW("#"))return null;r={RT:Xu,f:[]},t.DW("partial")&&(t.cD=n-t.UW[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(h=t.EW(Xf))&&(p=h,r.n=Vf[h])}if(t.FW(),i=Mf(t),i||t.error("Expected expression"),l=t.EW(Wf)){var d=void 0;(d=t.EW(Zf))?r.VW=l+","+d:r.VW=l}t.FW(),t.DW(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.WW+=1,a=r.f,c=[];do if(o=jf(t,e))p&&o.r!==p&&t.error("Expected "+e.open+"/"+p+e.close),t.WW-=1,f=!0;else if(o=Ff(t,e))r.n===xc&&t.error("{{else}} not allowed in {{#unless}}"),s&&t.error("illegal {{elseif...}} after {{else}}"),u||(u=Te(i,r.n)),u.f.push({RT:Xu,n:bc,x:Uf(we(c.concat(o.x))),f:a=[]}),c.push(Re(o.x));else if(o=qf(t,e))r.n===xc&&t.error("{{else}} not allowed in {{#unless}}"),s&&t.error("there can only be one {{else}} block, at the end of a section"),s=!0,u?u.f.push({RT:Xu,n:bc,x:Uf(we(c)),f:a=[]}):(u=Te(i,r.n),a=u.f);else{if(o=t.read($l),!o)break;a.push(o)}while(!f);return u&&(r.n===_c&&(r.n=Mc),r.Si=u),Of(i,r),r.f.length||delete r.f,r}function Te(t,e){var n;return e===_c?(n={RT:Xu,n:bc,f:[]},Of(Re(t),n)):(n={RT:Xu,n:xc,f:[]},Of(t,n)),n}function Re(t){return t.RT===yc&&"!"===t.Ri?t.rM:{RT:yc,Ri:"!",rM:He(t)}}function we(t){return 1===t.length?t[0]:{RT:wc,Ri:"&&",rM:[He(t[0]),He(we(t.slice(1)))]}}function He(t){return{RT:Tc,x:t}}function be(t){var e,n,i,r,o;return e=t.cD,t.DW(Jf)?(i=t.wW(),r=i.indexOf(Qf),r===-1&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=i.substr(0,r),t.cD+=r+3,o={RT:tc,c:n},t.MW&&(o.m=t.zW(e)),o):null}function xe(t){return t.replace(wf,function(t,e){var n;return n="#"!==e[0]?Tf[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Ae(n)):t})}function Ae(t){return t?10===t?32:t<128?t:t<=159?Rf[t-128]:t<55296?t:t<=57343?65533:t<=65535?t:65533:65533}function _e(t){return t.replace(xf,"&amp;").replace(Hf,"&lt;").replace(bf,"&gt;")}function Me(t){return"string"==typeof t}function Ue(t){return t.RT===tc||t.RT===ec}function Oe(t){return(t.RT===Xu||t.RT===Yu)&&t.f}function Se(t,e,n,i,r){var a,s,h,u,c,f,l,p;for(hl(t),a=t.length;a--;)s=t[a],s.HW?t.splice(a,1):e&&s.RT===tc&&t.splice(a,1);for(ul(t,i?pl:null,r?dl:null),a=t.length;a--;){if(s=t[a],s.f){var d=s.RT===Qu&&ll.test(s.e);c=n||d,!n&&d&&ul(s.f,El,vl),c||(h=t[a-1],u=t[a+1],(!h||"string"==typeof h&&dl.test(h))&&(f=!0),(!u||"string"==typeof u&&pl.test(u))&&(l=!0)),Se(s.f,e,c,f,l)}if(s.Si&&(Se(s.Si.f,e,n,f,l),t.splice(a+1,0,s.Si),delete s.Si),s.a)for(p in s.a)s.a.hasOwnProperty(p)&&"string"!=typeof s.a[p]&&Se(s.a[p],e,n,f,l);if(s.OW&&Se(s.OW,e,n,f,l),s.QT)for(p in s.QT)s.QT.hasOwnProperty(p)&&(o(s.QT[p].n)&&Se(s.QT[p].n,e,n,f,l),o(s.QT[p].d)&&Se(s.QT[p].d,e,n,f,l))}for(a=t.length;a--;)"string"==typeof t[a]&&("string"==typeof t[a+1]&&(t[a]=t[a]+t[a+1],t.splice(a+1,1)),n||(t[a]=t[a].replace(fl," ")),""===t[a]&&t.splice(a,1))}function De(t){var e,n;return e=t.cD,t.DW("</")?(n=t.EW(ml))?t.IW&&n!==t.IW?(t.cD=e,null):{RT:ic,e:n}:(t.cD-=2,void t.error("Illegal closing tag")):null}function Ce(t){var e,n,i;return t.FW(),(n=t.EW(Rl))?(e={name:n},i=Le(t),null!=i&&(e.value=i),e):null}function Le(t){var e,n,i,r;return e=t.cD,/[=\/>\s]/.test(t.GW())||t.error("Expected `=`, `/`, `>` or whitespace"),t.FW(),t.DW("=")?(t.FW(),n=t.cD,i=t.WW,r=Ie(t,"'")||Ie(t,'"')||Ne(t),null===r&&t.error("Expected valid attribute value"),t.WW!==i&&(t.cD=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),r.length?1===r.length&&"string"==typeof r[0]?xe(r[0]):r:""):(t.cD=e,null)}function Pe(t){var e,n,i,r,o;return e=t.cD,(n=t.EW(wl))?(i=n,r=t.tags.map(function(t){return t.open}),(o=yl(i,r))!==-1&&(n=n.substr(0,o),t.cD=e+n.length),n):null}function Ne(t){var e,n;for(t.p_=!0,e=[],n=Nc(t)||Pe(t);null!==n;)e.push(n),n=Nc(t)||Pe(t);return e.length?(t.p_=!1,e):null}function Ie(t,e){var n,i,r;if(n=t.cD,!t.DW(e))return null;for(t.p_=e,i=[],r=Nc(t)||ze(t,e);null!==r;)i.push(r),r=Nc(t)||ze(t,e);return t.DW(e)?(t.p_=!1,i):(t.cD=n,null)}function ze(t,e){var n,i,r,o;return n=t.cD,r=t.wW(),o=t.tags.map(function(t){return t.open}),o.push(e),i=yl(r,o),i===-1&&t.error("Quoted attribute value must have a closing quote"),i?(t.cD+=i,r.substr(0,i)):null}function Be(t){var e,n,i;return t.FW(),(e=Yc(t))?(i={key:e},t.FW(),t.DW(":")?(t.FW(),(n=t.read())?(i.value=n.QT,i):null):null):null}function je(t,e){var n,i,r,o,a,s,h,u,c;if("string"==typeof t){if(i=Al.exec(t)){var f=t.lastIndexOf(")");return _l.test(t)||e.error("Invalid input after method call expression '"+t.slice(f+1)+"'"),n={OW:i[1]},o="["+t.slice(n.OW.length+1,f)+"]",r=new Hl(o),n.a=Uf(r.result[0]),n}if(t.indexOf(":")===-1)return t.trim();t=[t]}if(n={},h=[],u=[],t){for(;t.length;)if(a=t.shift(),"string"==typeof a){if(s=a.indexOf(":"),s!==-1){s&&h.push(a.substr(0,s)),a.length>s+1&&(u[0]=a.substring(s+1));break}h.push(a)}else h.push(a);u=u.concat(t)}return h.length?u.length||"string"!=typeof h?(n={n:1===h.length&&"string"==typeof h[0]?h[0]:h},1===u.length&&"string"==typeof u[0]?(c=bl("["+u[0]+"]"),n.a=c?c.value:u[0].trim()):n.d=u):n=h:n="",n}function qe(t){var e,n,i,r,o,a,s,h,u,c,f,l,p,d,E,v;if(e=t.cD,t.IW||t.p_)return null;if(!t.DW("<"))return null;if("/"===t.GW())return null;if(n={},t.MW&&(n.m=t.zW(e)),t.DW("!"))return n.RT=sc,t.EW(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.EW(/^(.+?)>/),n;if(n.RT=Qu,n.e=t.EW(Ul),!n.e)return null;for(Ol.test(t.GW())||t.error("Illegal tag name"),o=function(e,i){var r=i.n||i;Cl.test(r)&&(t.cD-=r.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.QT[e]=i},t.FW();a=Nc(t)||Tl(t);)a.name?(i=Ll[a.name])?n[i]=xl(a.value,t):(r=Dl.exec(a.name))?(n.QT||(n.QT={}),s=xl(a.value,t),o(r[1],s)):t.K_&&Sl.test(a.name)||(n.a||(n.a={}),n.a[a.name]=a.value||(""===a.value?"":0)):(n.OW||(n.OW=[]),n.OW.push(a)),t.FW();if(t.FW(),t.DW("/")&&(h=!0),!t.DW(">"))return null;var g=n.e.toLowerCase(),m=t.ST;if(!h&&!yf.test(n.e)){t.L_.push(g),"script"!==g&&"style"!==g||(t.IW=g),u=[],c=Ts(null);do if(d=t.cD,E=t.wW(),Ge(g,E))if(v=gl(t)){p=!0;var y=v.e.toLowerCase();if(y!==g&&(t.cD=d,!~t.L_.indexOf(y))){var T="Unexpected closing tag";yf.test(y)&&(T+=" (<"+y+"> is a void element - it cannot contain children)"),t.error(T)}}else(l=jf(t,{open:t.UW[0],close:t.UW[1]}))?(p=!0,t.cD=d):(l=t.read(tp))?(c[l.n]&&(t.cD=d,t.error("Duplicate partial definition")),cl(l.f,t.UT,m,!m,!m),c[l.n]=l.f,f=!0):(l=t.read($l))?u.push(l):p=!0;else p=!0;while(!p);u.length&&(n.f=u),f&&(n.m=c),t.L_.pop()}return t.IW=null,t.M_&&t.M_.indexOf(g)!==-1?Pl:n}function Ge(t,e){var n,i;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=Ml[t],!n||!i||!~i.indexOf(n[1].toLowerCase())}function Fe(t){var e,n,i,r;return n=t.wW(),r=t.IW?"</"+t.IW:"<",t.IW&&!t.Wb[t.IW]?e=n.indexOf(r):(i=t.tags.map(function(t){return t.open}),i=i.concat(t.tags.map(function(t){return"\\"+t.open})),t.p_===!0?i.push('"',"'","=","<",">","`"):t.p_?i.push(t.p_):i.push(r),e=yl(n,i)),e?(e===-1&&(e=n.length),t.cD+=e,t.IW?n.substr(0,e):xe(n.substr(0,e))):null}function ke(t){return t.replace(jl,"\\$&")}function Ve(t){var e=t.cD,n=t.UW[0],i=t.UW[1],r=void 0,o=void 0;if(!t.EW(Gl)||!t.DW(n))return t.cD=e,null;var a=t.EW(Fl);if(v("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+a+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+a+"}} --> ... <!-- {{/"+a+"}} -->'"),!t.DW(i)||!t.EW(kl))return t.cD=e,null;r=[];var s=new RegExp("^<!--\\s*"+Bl(n)+"\\s*\\/\\s*"+a+"\\s*"+Bl(i)+"\\s*-->");do t.EW(s)?o=!0:(Nl=t.read($l),Nl||t.error("expected closing comment ('<!-- "+n+"/"+a+i+" -->')"),r.push(Nl));while(!o);return{RT:ac,f:r,n:a}}function Ke(t){var e,n,i,r,o;e=t.cD;var a=t.UW;if(!t.DW(a[0]))return null;if(!t.EW(Kl))return t.cD=e,null;n=t.EW(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n||t.error("expected legal partial name"),t.DW(a[1])||t.error("Expected closing delimiter '"+a[1]+"'"),i=[];do(r=jf(t,{open:t.UW[0],close:t.UW[1]}))?("partial"===!r.r&&t.error("Expected "+a[0]+"/partial"+a[1]),o=!0):(r=t.read($l),r||t.error("Expected "+a[0]+"/partial"+a[1]),i.push(r));while(!o);return{RT:ac,n:n,f:i}}function We(t){for(var e=[],n=Ts(null),i=!1,r=t.ST;t.cD<t.vU.length;){var o=t.cD,a=void 0,s=void 0;(s=t.read(tp))?(n[s.n]&&(t.cD=o,t.error("Duplicated partial definition")),cl(s.f,t.UT,r,!r,!r),n[s.n]=s.f,i=!0):(a=t.read($l))?e.push(a):t.error("Unexpected template content")}var h={QT:ss,RT:e};return i&&(h.m=n),h}function Ze(t,e){return new Ql(t,e||{}).result}function Xe(t){var e=Ts(op);return e.parse=function(e,n){return Ye(e,n||t)},e}function Ye(t,e){if(!Zl)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Zl(t,e||this.options)}function Je(t,e){var n;if(!ts){if(e&&e.X_)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Qe(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.X_)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.X_)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Qe(t){return t&&"#"===t[0]}function $e(t){return!("string"==typeof t)}function tn(t){return t.Mb&&(t=t.Mb),rp.reduce(function(e,n){return e[n]=t[n],e},{})}function en(t){var e,n=t.wT.Sf;if(n&&n.fR)return e=nn(t,n.fR),e!==n.result?(n.result=e,e=on(e,t)):void 0}function nn(t,e){var n=rn(ap.V_(t));return e.call(t,n)}function rn(t){var e=Ts(ap);return e.parse=function(e,n){return ap.parse(e,n||t)},e}function on(t,e){if("string"==typeof t)"#"===t[0]&&(t=ap.S_(t)),t=Zl(t,ap.V_(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.QT)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.QT!==ss)throw new Error("Mismatched template version (expected "+ss+", got "+t.QT+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function an(t,e,n){if(e)for(var i in e)!n&&t.hasOwnProperty(i)||(t[i]=e[i])}function sn(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=hn(i.c0,e),o="_super"in this,a=this.d0;return this.d0=r,t=n.apply(this,arguments),o?this.d0=a:delete this.d0,t};return i.c0=t,i.e0=n,i}function hn(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=Os,i}function un(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function cn(t,e,n){if(e in t){if(n in t)throw new Error(un(e,n,!0));E(un(e,n)),t[n]=t[e]}}function fn(t){cn(t,"beforeInit","onconstruct"),cn(t,"init","onrender"),cn(t,"complete","oncomplete"),cn(t,"eventDefinitions","events"),o(t.f0)&&cn(t,"adaptors","adapt")}function ln(t,e,n,i){gp(i);for(var r in i)if(dp.hasOwnProperty(r)){var o=i[r];"el"!==r&&"function"==typeof o?E(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=o}Ep.forEach(function(r){r[t](e,n,i)}),Uu[t](e,n,i),hp[t](e,n,i),zu[t](e,n,i),pn(e.prototype,n,i)}function pn(t,e,n){for(var i in n)if(!pp[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=vp(t,i,r)),e[i]=r}}function dn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function En(){this.g0=this.h0=!0,this.bound&&"function"==typeof this.JV.i0&&this.JV.i0()}function vn(){var t;return 1===this.HV.length?this.HV[0].detach():(t=document.createDocumentFragment(),this.HV.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function gn(t){var e,n,i,r;if(this.HV){for(n=this.HV.length,e=0;e<n;e+=1)if(i=this.HV[e],i.find&&(r=i.find(t)))return r;return null}}function mn(t,e){var n,i,r;if(this.HV)for(i=this.HV.length,n=0;n<i;n+=1)r=this.HV[n],r.RV&&r.RV(t,e);return e}function yn(t,e){var n,i,r;if(this.HV)for(i=this.HV.length,n=0;n<i;n+=1)r=this.HV[n],r.TV&&r.TV(t,e);return e}function Tn(t){var e,n,i,r;if(this.HV){for(e=this.HV.length,n=0;n<e;n+=1)if(i=this.HV[n],i.UV&&(r=i.UV(t)))return r;return null}}function Rn(t){var e,n=t.index;return e=this.HV[n+1]?this.HV[n+1].j0():this.JV===this.root?this.JV.rU?this.JV.rU.k0():null:this.JV.k0(this)}function wn(){return this.HV&&this.HV[0]?this.HV[0].j0():null}function Hn(t,e,n,i){return i=i||0,t.map(function(t){var r,o,a;return t.text?t.text:t.IV?t.IV.map(function(t){return Hn(t.HV,e,n,i)}).join(""):(r=n+"-"+i++,a=t.OU&&(o=t.root.EU.HU[t.OU.vU])?o.value:t.ew(),e[r]=a,"${"+r+"}")}).join("")}function bn(){var t,e,n,i;return this.h0&&(e=_p(this.HV,t={},this.root.l0),n=bl("["+e+"]",t),i=n?n.value:[this.toString()],this.m0=i,this.h0=!1),this.m0}function xn(){var t=this;do if(t.n0)return t.n0.cw;while(t=t.parent);return this.root.zV||this.root.PT}function An(){var t,e,n,i;return this.g0&&(e=_p(this.HV,t={},this.root.l0),n=bl(e,t),i=n?n.value:this.toString(),this.value=i,this.g0=!1),this.value}function _n(){this.o0&&this.root.EU.unregister(this.OU,this),this.p0&&this.p0.Aw()}function Mn(){return this.value}function Un(t,e){for(var n,i=0;i<e.K$.length;i++)if(void 0!==(n=t[e.K$[i]]))return n}function On(t,e){var n,i,r,o,a,s={},h=!1;
for(e||(s.A0=n={});t;){if((a=t.JV)&&(i=a.B0)){if(e&&(r=a.C0(e)))return s.uV={sU:t,uV:r},s;if(!e)for(o in i)r=i[o],n[r.n]||(h=!0,n[r.n]={sU:t,uV:r})}!t.parent&&t.JV&&t.JV.rU&&t.JV.rU.NU&&!t.JV.rU.iV._T?(s.D0=!0,t=t.JV.rU.NU):t=t.parent}return h?s:void 0}function Sn(t,e,n){var i;return"@"===e.charAt(0)?new jp(t,e,n):(i=Fp(t.NU,e))?new Gp(t,i,n):new Ip(t,e,n)}function Dn(t,e){var n,i;if(Wp[t])return Wp[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),Wp[t]=n,n}function Cn(t){return t.call()}function Ln(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.wU?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.vU)})}function Pn(t){return b("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Nn(t){return void 0!==t&&"@"!==t[0]}function In(t,e){var n,i,r;if(t.L0)return t;if(i="__ractive_"+e.l0,n=t[i])return n;if(/this/.test(t.toString())){Rs(t,i,{value:Zp.call(t,e),ZR:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e.M0.push({fR:t,K$:i}),t[i]}return Rs(t,"__ractive_nowrap",{value:t}),t.L0}function zn(t){return t.value}function Bn(t){return void 0!=t}function jn(t){t.r0()}function qn(t,e){function n(e){t.resolve(e)}function i(e){var n=t.OU;e!=n&&(t.resolve(e),void 0!==n&&t.IV&&t.IV.forEach(function(t){t.s0(n,e)}))}var r,o,a;o=e.NU,a=e.Sf,t.root=o.root,t.NU=o,t.n0=o.n0,t.Sf=e.Sf,t.index=e.index||0,t.LW=e.Sf.Ri,t.type=e.Sf.RT,t.o0=!1,(r=a.r)&&(t.p0=Vp(t,r,n)),e.Sf.x&&(t.p0=new Xp(t,o,e.Sf.x,i)),e.Sf.rx&&(t.p0=new $p(t,e.Sf.rx,i)),t.Sf.n!==xc||t.hasOwnProperty("value")||t.fw(void 0)}function Gn(t){var e,n,i;return t&&t.wU?(this.OU=t,void this.fw(t.value)):(this.o0&&(this.root.EU.unregister(this.OU,this),this.o0=!1,e=!0),this.OU=t,void 0!=t&&(n=this.root.EU.get(t),this.root.EU.register(t,this),this.o0=!0),this.fw(n),void(e&&(i=this.T0)&&i.U0()))}function Fn(t,e){this.IV&&this.IV.forEach(function(n){return n.s0(t,e)}),this.p0&&this.p0.s0(t,e)}function kn(){this.NU.i0()}function Vn(){var t;return 1===this.IV.length?this.IV[0].detach():(t=document.createDocumentFragment(),this.IV.forEach(function(e){t.appendChild(e.detach())}),t)}function Kn(t){var e,n,i;for(n=this.IV.length,e=0;e<n;e+=1)if(i=this.IV[e].find(t))return i;return null}function Wn(t,e){var n,i;for(i=this.IV.length,n=0;n<i;n+=1)this.IV[n].RV(t,e)}function Zn(t,e){var n,i;for(i=this.IV.length,n=0;n<i;n+=1)this.IV[n].TV(t,e)}function Xn(t){var e,n,i;for(n=this.IV.length,e=0;e<n;e+=1)if(i=this.IV[e].UV(t))return i;return null}function Yn(t){return this.IV[t.index+1]?this.IV[t.index+1].j0():this.NU.k0(this)}function Jn(){var t,e,n;if(t=this.IV.length)for(e=0;e<t;e+=1)if(n=this.IV[e].j0())return n;return this.NU.k0(this)}function Qn(t){var e,n,i,r,o,a,s,h=this;if(!this.V0&&!this.W0&&this.x0===Ac){if(this.V0=!0,dh.sV(function(){return h.V0=!1}),e=this.NU,o=[],t.forEach(function(t,e){var i,r,a,s,u;return t===e?void(o[t]=h.IV[e]):(i=h.IV[e],void 0===n&&(n=e),t===-1?(h.X0.push(i),void i.Aw()):(r=t-e,a=h.OU.join(e),s=h.OU.join(t),i.index=t,(u=i.Y0)&&u.forEach($n),i.s0(a,s),void(o[t]=i)))}),r=this.root.EU.get(this.OU).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.IV.length=r,this.tU&&dh.oV(this),a={Sf:this.Sf.f,root:this.root,JV:this},i=n;i<r;i+=1)s=o[i],s||this.Z0.push(i),this.IV[i]=s}}function $n(t){t.s0("","")}function ti(){var t=this;return this.$0=document.createDocumentFragment(),this.IV.forEach(function(e){return t.$0.appendChild(e.Dx())}),this._0=this.IV.slice(),this.a1=[],this.tU=!0,this.$0}function ei(t){var e,n,i=this;this.updating||(this.updating=!0,this.OU&&(e=this.root.EU.HU[this.OU.vU])&&(t=e.get()),this.Z0.length?(n={Sf:this.Sf.f||[],root:this.root,n0:this.n0,JV:this},this.Z0.forEach(function(t){var e;n.context=i.OU.join(t),n.index=t,e=new gy(n),i.a1.push(i.IV[t]=e)}),this.Z0.length=0):ii(this,t)&&(this.i0(),this.tU&&dh.oV(this)),this.value=t,this.updating=!1)}function ni(t,e,n){if(e===Ac&&t.B0&&t.B0[0]){var i=t.B0[0];(n&&"i"===i.RT||!n&&"k"===i.RT)&&(n||(t.length=0,t.X0=t.IV.slice(0),t.X0.forEach(function(t){return t.Aw()}))),i.RT=n?"k":"i"}t.x0=e}function ii(t,e){var n={Sf:t.Sf.f||[],root:t.root,n0:t.NU.n0,JV:t};if(t.b1=!0,t.c1)switch(t.c1){case bc:return t.b1=!1,hi(t,e,!1,n);case xc:return t.b1=!1,hi(t,e,!0,n);case _c:return si(t,n);case Mc:return ai(t,e,n);case Ac:if(u(e))return ni(t,t.c1,!0),oi(t,e,n)}return t.ordered=!!a(e),t.ordered?(ni(t,Ac,!1),ri(t,e,n)):u(e)||"function"==typeof e?t.Sf.VW?(ni(t,Ac,!0),oi(t,e,n)):(ni(t,_c,!1),si(t,n)):(ni(t,bc,!1),t.b1=!1,hi(t,e,!1,n))}function ri(t,e,n){var i,r,o;if(r=e.length,r===t.length)return!1;if(r<t.length)t.X0=t.IV.splice(r,t.length-r),t.X0.forEach(Z);else if(r>t.length)for(i=t.length;i<r;i+=1)n.context=t.OU.join(i),n.index=i,o=new gy(n),t.a1.push(t.IV[i]=o);return t.length=r,!0}function oi(t,e,n){var i,r,o,a,s,h;for(o=t.nP||(t.nP={}),r=t.IV.length;r--;)a=t.IV[r],a.key in e||(s=!0,a.Aw(),t.X0.push(a),t.IV.splice(r,1),o[a.key]=!1);for(r=t.IV.length;r--;)a=t.IV[r],a.index!==r&&(a.index=r,(h=a.Y0)&&h.forEach(fi));r=t.IV.length;for(i in e)o[i]||(s=!0,n.context=t.OU.join(i),n.key=i,n.index=r++,a=new gy(n),t.a1.push(a),t.IV.push(a),o[i]=!0);return t.length=t.IV.length,s}function ai(t,e,n){return e?si(t,n):ui(t)}function si(t,e){var n;if(!t.length)return e.context=t.OU,e.index=0,n=new gy(e),t.a1.push(t.IV[0]=n),t.length=1,!0}function hi(t,e,n,i){var r,o,s,h,c;if(o=a(e)&&0===e.length,s=!1,!a(e)&&u(e)){s=!0;for(c in e){s=!1;break}}return r=n?o||s||!e:e&&!o&&!s,r?t.length?t.length>1?(t.X0=t.IV.splice(1),t.X0.forEach(Z),!0):void 0:(i.index=0,h=new gy(i),t.a1.push(t.IV[0]=h),t.length=1,!0):ui(t)}function ui(t){if(t.length)return t.X0=t.IV.splice(0,t.IV.length).filter(ci),t.X0.forEach(Z),t.length=t.a1.length=0,!0}function ci(t){return t.tU}function fi(t){t.s0("","")}function li(t){var e,n,i;for(e="",n=0,i=this.length,n=0;n<i;n+=1)e+=this.IV[n].toString(t);return e}function pi(){var t=this;this.IV.forEach(Z),this.a1.forEach(function(e){return I(t.IV,e)}),this.a1=[],Lp.call(this),this.length=0,this.W0=!0}function di(t){this.IV.forEach(t?Ei:vi),this._0=[],this.tU=!1}function Ei(t){t.QU(!0)}function vi(t){t.QU(!1)}function gi(){var t,e,n,i,r,o,a;for(n=this._0;t=this.X0.pop();)t.QU(!0),n.splice(n.indexOf(t),1);for(;t=this.a1.shift();)t.Dx();for(this.tU&&(r=this.NU.d1()),a=this.IV.length,o=0;o<a;o+=1)t=this.IV[o],e=n.indexOf(t,o),e!==o?(this.$0.appendChild(t.detach()),e!==-1&&n.splice(e,1),n.splice(o,0,t)):this.$0.childNodes.length&&(i=t.j0(),r.insertBefore(this.$0,i));this.tU&&this.$0.childNodes.length&&(i=this.NU.k0(this),r.insertBefore(this.$0,i)),this._0=this.IV.slice()}function mi(){var t,e;if(this.$0){for(t=this.f1.length,e=0;e<t;e+=1)this.$0.appendChild(this.f1[e]);return this.$0}}function yi(t){var e,n,i,r;for(n=this.f1.length,e=0;e<n;e+=1)if(i=this.f1[e],1===i.nodeType){if(ls(i,t))return i;if(r=i.querySelector(t))return r}return null}function Ti(t,e){var n,i,r,o,a,s;for(i=this.f1.length,n=0;n<i;n+=1)if(r=this.f1[n],1===r.nodeType&&(ls(r,t)&&e.push(r),o=r.querySelectorAll(t)))for(a=o.length,s=0;s<a;s+=1)e.push(o[s])}function Ri(){return this.tU&&this.f1[0]?this.f1[0]:this.NU.k0(this)}function wi(t){return Od[t]||(Od[t]=fs(t))}function Hi(t){var e,n,i;t&&"select"===t.name&&t.hv&&(e=z(t.cw.options).filter(bi),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.hv.fw(i),t.i0())}function bi(t){return t.selected}function xi(){if(this.tU)throw new Error("Attempted to render an item that was already rendered");return this.$0=document.createDocumentFragment(),this.f1=Sd(this.value,this.NU.d1(),this.$0),Dd(this.n0),this.tU=!0,this.$0}function Ai(t){var e;(e=this.root.EU.HU[this.OU.vU])&&(t=e.get()),t!==this.value&&(this.value=t,this.NU.i0(),this.tU&&dh.oV(this))}function _i(){return void 0!=this.value?xe(""+this.value):""}function Mi(t){this.tU&&t&&(this.f1.forEach(e),this.tU=!1)}function Ui(){var t,e;if(this.tU){for(;this.f1&&this.f1.length;)t=this.f1.pop(),t.parentNode.removeChild(t);e=this.NU.d1(),this.f1=Sd(this.value,e,this.$0),e.insertBefore(this.$0,this.NU.k0(this)),Dd(this.n0)}}function Oi(){var t,e=this.cw;if(e)return(t=e.parentNode)&&t.removeChild(e),e}function Si(){return null}function Di(){return this.cw}function Ci(t){if(this.attributes&&this.attributes[t])return this.attributes[t].value}function Li(){var t=this.l1||!this.tU?this.sU.ew():this.sU.toString();s(t,this.value)||("id"===this.name&&this.value&&delete this.root.f1[this.value],this.value=t,"value"===this.name&&this.cw&&(this.cw.GV.value=t),this.tU&&dh.oV(this))}function Pi(t){var e=t.sU.HV;if(1===e.length)return e[0].type===Wu?e[0]:void 0}function Ni(t){return this.type=nc,this.o1=t.o1,this.root=t.root,rE(this,t.name),this.Xe=mf.test(this.name),t.value&&"string"!=typeof t.value?(this.NU=this.o1.NU,this.sU=new gy({Sf:t.value,root:this.root,JV:this}),this.value=this.sU.ew(),this.wV=oE(this),this.q1=!!this.wV&&!this.wV.LW,void(this.gR=!0)):void(this.value=!!this.Xe||(t.value||""))}function Ii(t,e){this.sU&&this.sU.s0(t,e)}function zi(t){var e;this.cw=t,t.namespaceURI&&t.namespaceURI!==rs.kU||(e=uE[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.Xe||this.M1)&&(this.l1=!0),"value"===e&&(t.GV.value=this.value)),this.tU=!0,this.update()}function Bi(){var t=this,e=t.name,n=t.n1,i=t.value,r=t.wV,o=t.sU;if(("value"!==e||"select"!==this.o1.name&&"textarea"!==this.o1.name)&&("value"!==e||void 0===this.o1.getAttribute("contenteditable"))){if("name"===e&&"input"===this.o1.name&&r)return"name={{"+(r.OU.vU||r.uV)+"}}";if(this.Xe)return i?e:"";if(o){if(1===o.HV.length&&null==o.HV[0].value)return"";i=o.toString()}return n&&(e=n+":"+e),i?e+'="'+ji(i)+'"':e}}function ji(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function qi(){this.sU&&this.sU.Aw(),"id"===this.name&&delete this.root.f1[this.value]}function Gi(){var t,e,n,i,r=this.value;if(!this.N1)for(this.cw.GV.value=r,t=this.cw.options,i=t.length;i--;)if(e=t[i],n=e.GV?e.GV.value:e.value,n==r){e.selected=!0;break}}function Fi(){var t,e,n,i,r=this.value;for(o(r)||(r=[r]),t=this.cw.options,e=t.length;e--;)n=t[e],i=n.GV?n.GV.value:n.value,n.selected=C(r,i)}function ki(){var t=this,e=t.cw,n=t.value;e.checked=n==e.GV.value}function Vi(){var t,e,n,i,r=this.cw;if(t=r.checked,r.value=this.o1.getAttribute("value"),r.checked=this.o1.getAttribute("value")===this.o1.getAttribute("name"),t&&!r.checked&&this.o1.hv&&(n=this.o1.hv.O1,i=n.length)){for(;i--;){if(e=n[i],!e.o1.cw)return;if(e.o1.cw.checked)return dh.kV(e.root),e.P1()}this.root.EU.set(e.OU,void 0)}}function Ki(){var t,e,n=this,i=n.o1,r=n.cw,a=n.value,s=i.hv;if(t=i.getAttribute("value"),o(a)){for(e=a.length;e--;)if(t==a[e])return void(s.Q1=r.checked=!0);s.Q1=r.checked=!1}else s.Q1=r.checked=a==t}function Wi(){this.cw.className=n(this.value)}function Zi(){var t=this,e=t.cw,n=t.value;this.root.f1[n]=e,e.id=n}function Xi(){var t,e;t=this.cw,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function Yi(){var t=this.value;void 0===t&&(t=""),this.N1||(this.cw.innerHTML=t)}function Ji(){var t=this,e=t.cw,n=t.value;e.GV.value=n,this.N1||(e.value=void 0==n?"":n)}function Qi(){this.N1||(this.cw[this.propertyName]=this.value)}function $i(){var t=this,e=t.cw,n=t.m1,i=t.name,r=t.value,o=t.sU;n?e.setAttributeNS(n,i,(o||r).toString()):this.Xe?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(o||r).toString())}function tr(){var t,e,n=this,i=n.name,r=n.o1,o=n.cw;"id"===i?e=mE:"value"===i?"select"===r.name&&"value"===i?e=r.getAttribute("multiple")?pE:lE:"textarea"===r.name?e=RE:null!=r.getAttribute("contenteditable")?e=TE:"input"===r.name&&(t=r.getAttribute("type"),e="file"===t?Os:"radio"===t&&r.hv&&"name"===r.hv.name?EE:RE):this.M1&&"name"===i?"radio"===o.type?e=dE:"checkbox"===o.type&&(e=vE):"style"===i&&o.style.setAttribute?e=yE:"class"!==i||o.namespaceURI&&o.namespaceURI!==rs.kU?this.l1&&(e=wE):e=gE,e||(e=HE),this.update=e,this.update()}function er(t,e){var n=e?"svg":"div";return AE.innerHTML="<"+n+" "+t+"></"+n+">",z(AE.childNodes[0].attributes)}function nr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function ir(t){for(;t=t.parent;)if("form"===t.name)return t}function rr(){this.GV.hv.P1()}function or(){var t;PE.call(this),t=this.GV.root.EU.get(this.GV.hv.OU),this.value=void 0==t?"":t}function ar(){var t=this.GV.hv,e=this;t.Y1&&clearTimeout(t.Y1),t.Y1=setTimeout(function(){t.tU&&PE.call(e),t.Y1=void 0},t.o1.bU)}function sr(t,e,n){var i=t+e+n;return jE[i]||(jE[i]=[])}function hr(t){return t.Q1}function ur(t){return t.o1.getAttribute("value")}function cr(t){var e,n,i,r,o,a=t.attributes;if(t.hv&&(t.hv.PU(),t.hv=null),(t.getAttribute("contenteditable")||a.A1&&fr(a.A1))&&fr(a.value)?n=zE:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=fr(a.name),r=fr(a.checked),i&&r&&E("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{qU:t.root}),i?n="radio"===e?kE:KE:r&&(n="radio"===e?GE:ZE)):"file"===e&&fr(a.value)?n=tv:fr(a.value)&&(n="number"===e||"range"===e?ev:NE)):"select"===t.name&&fr(a.value)?n=t.getAttribute("multiple")?QE:YE:"textarea"===t.name&&fr(a.value)&&(n=NE),n&&(o=new n(t))&&o.OU)return o}function fr(t){return t&&t.q1}function lr(){var t=this.f2();t&&!this.g2?this.h2():!t&&this.g2&&this.QU()}function pr(t){jh(this.root,this.f2(),{event:t})}function dr(){return this.action.toString().trim()}function Er(t,e,n){var i,r,o,a=this;this.o1=t,this.root=t.root,this.NU=t.NU,this.name=e,e.indexOf("*")!==-1&&(f('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.i2=!0),n.OW?(r=n.a.r,this.method=n.OW,this.E0=[],this.fR=Kp(n.a.Ri,r.length),this.NU=t.NU,o=this.root,this.F0=[],r.forEach(function(t,e){var n=void 0;(n=sv.exec(t))?a.E0[e]={j2:!0,l2:n[1]?n[1].split("."):[]}:a.F0.push(Vp(a,t,function(t){return a.resolve(e,t)}))}),this.MU=vr):(i=n.n||n,"string"!=typeof i&&(i=new gy({Sf:i,root:this.root,JV:this})),this.action=i,n.d?(this.m2=new gy({Sf:n.d,root:this.root,JV:this.o1}),this.MU=mr):n.a&&(this.iq=n.a,this.MU=gr))}function vr(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.E0.map(function(n){var i,r,o;if(void 0!==n){if(n.j2){if(i=t,r=n.l2.length)for(o=0;o<r;o+=1)i=i[n.l2[o]]}else i=e.EU.get(n);return i}}),Bh.YV(e,t),i=this.fR.apply(null,n),e[this.method].apply(e,i),Bh.$V(e)}function gr(t){jh(this.root,this.f2(),{event:t,hc:this.iq})}function mr(t){var e=this.m2.n2();"string"==typeof e&&(e=e.substr(1,e.length-2)),jh(this.root,this.f2(),{event:t,hc:e})}function yr(t){var e,n,i,r={};e=this.GV,n=e.o2[t.type],(i=Fp(n.o1.NU))&&(r=Fp.resolve(i)),n.MU({cw:this,bW:t,index:r,OU:e.OU.vU,context:e.root.EU.get(e.OU)})}function Tr(){var t,e=this.name;if(!this.i2){if(t=g("events",this.root,e))this.w2=t(this.cw,Rr(e));else{if(!("on"+e in this.cw||window&&"on"+e in window||es))return void(fv[e]||v(Ls(e,"event"),{cw:this.cw}));this.cw.addEventListener(e,hv,!1)}this.g2=!0}}function Rr(t){return cv[t]||(cv[t]=function(e){var n=e.cw.GV;e.index=n.index,e.OU=n.OU.vU,e.context=n.root.EU.get(n.OU),n.o2[t].MU(e)}),cv[t]}function wr(t,e){function n(n){n&&n.s0(t,e)}var i;return this.method?(i=this.o1.NU,void this.F0.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.m2&&n(this.m2)))}function Hr(){this.cw=this.o1.cw,this.cw.GV.o2[this.name]=this,(this.method||this.f2())&&this.h2()}function br(t,e){this.E0[t]=e}function xr(){return this.method?void this.F0.forEach(Z):("string"!=typeof this.action&&this.action.Aw(),void(this.m2&&this.m2.Aw()))}function Ar(){this.w2?this.w2.PU():this.cw.removeEventListener(this.name,hv,!1),this.g2=!1}function _r(){var t=this;this.B2||(this.B2=!0,dh.sV(function(){Mr(t),t.B2=!1})),this.NU.i0()}function Mr(t){var e,n,i,r,o;e=t.cw,e&&(r=z(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach(function(t){var e,r;e=t.GV?t.GV.value:t.value,r=i?Ur(n,e):n==e,r&&(o=!0),t.selected=r}),o||(r[0]&&(r[0].selected=!0),t.hv&&t.hv.c2())):t.hv&&t.hv.c2())}function Ur(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Or(t,e){t.select=Dr(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Sr(t){t.select&&I(t.select.options,t)}function Dr(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function Cr(t){var e,n,i,r,o,a,s;this.type=Qu,e=this.NU=t.NU,n=this.Sf=t.Sf,this.parent=t.n0||e.n0,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=iE(n.e),"option"===this.name&&Or(this,n),"select"===this.name&&(this.options=[],this.i0=_r),"form"===this.name&&(this.V1=[]),s=eE(this,n),this.attributes=ME(this,n.a),this.C2=SE(this,n.OW),n.f&&(this.sU=new gy({Sf:n.f,root:i,JV:this,n0:this,D2:null})),a=i.aU,s.aU===!1?a=!1:s.aU===!0&&(a=!0),this.aU=a,this.bU=s.bU,a&&(r=nv(this,n.a))&&(this.hv=r,o=this.root.W1[r.OU.vU]||(this.root.W1[r.OU.vU]=[]),o.push(r)),n.QT&&(this.E2=yv(this,n.QT)),n.rM&&(this.w_=new bv(this,n.rM)),this.u_=n.F2||n.G2,this.v_=n.F2||n.H2}function Lr(t,e){function n(n){n.s0(t,e)}var i,r,o,a;if(this.attributes&&this.attributes.forEach(n),this.C2&&this.C2.forEach(n),this.E2&&this.E2.forEach(n),this.w_&&n(this.w_),this.sU&&n(this.sU),o=this.EV)for(a=this.root,i=o.length;i--;)o[i].CV();this.cw&&(r=this.cw.GV)&&w(r,"keypath",t,e)}function Pr(t){var e;(t.attributes.width||t.attributes.height)&&t.cw.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.cw.setAttribute("width",n),void 0!==i&&t.cw.setAttribute("height",i),t.cw.removeEventListener("load",e,!1)},!1)}function Nr(t){t.cw.addEventListener("reset",zr,!1)}function Ir(t){t.cw.removeEventListener("reset",zr,!1)}function zr(){var t=this.GV.FV;dh.start(),t.V1.forEach(Br),dh.end()}function Br(t){t.root.EU.set(t.OU,t.U1)}function jr(t,e,n){var i,r,o;this.o1=t,this.root=i=t.root,this.aV=n,r=e.n||e,"string"!=typeof r&&(o=new gy({Sf:r,root:i,JV:t}),r=o.toString(),o.Aw(),""===r)||(this.name=r,e.a?this.iq=e.a:e.d&&(o=new gy({Sf:e.d,root:i,JV:t}),this.iq=o.n2(),o.Aw()),this.a0=g("transitions",i,r),this.a0||v(Ls(r,"transition"),{qU:this.root}))}function qr(t){return t}function Gr(){tg.hidden=document[Yv]}function Fr(){tg.hidden=!0}function kr(){tg.hidden=!1}function Vr(){var t,e,n,i=this;return t=this.cw=this.o1.cw,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.aV&&Kr(t,e),t.GV.transition=null,i.mV.remove(i),n=!0)},this.a0?void this.a0.apply(this.root,[this].concat(this.iq)):void this.complete()}function Kr(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Wr(){var t,e,n,i=this,r=this.root;return t=Zr(this),e=this.cw=fs(this.name,t),this.NU.D2&&this.cw.setAttribute("data-ractive-css",this.NU.D2.map(function(t){return"{"+t+"}"}).join(" ")),Rs(this.cw,"_ractive",{value:{FV:this,OU:ah(this.NU),o2:Ts(null),root:r}}),this.attributes.forEach(function(t){return t.Dx(e)}),this.C2.forEach(function(t){return t.Dx(e)}),this.sU&&("script"===this.name?(this.i0=fg,this.cw.text=this.sU.toString(!1),this.sU.QU=Os):"style"===this.name?(this.i0=cg,this.i0(),this.sU.QU=Os):this.hv&&this.getAttribute("contenteditable")?this.sU.QU=Os:this.cw.appendChild(this.sU.Dx())),this.hv&&(this.hv.Dx(),this.cw.GV.hv=this.hv),this.E2&&this.E2.forEach(function(t){return t.Dx()}),"option"===this.name&&Xr(this),"img"===this.name?Pr(this):"form"===this.name?Nr(this):"input"===this.name||"textarea"===this.name?this.cw.defaultValue=this.cw.value:"option"===this.name&&(this.cw.defaultSelected=this.cw.selected),this.w_&&this.w_.fR&&dh.sV(function(){i.w_.A2||i.w_.init()},!0),r.dU&&this.u_&&(n=new lg(this,this.u_,!0),dh.lV(n),dh.sV(function(){return n.start()},!0),this.transition=n),this.cw.autofocus&&dh.sV(function(){return i.cw.focus()},!0),Yr(this),this.cw}function Zr(t){var e,n,i;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?rs.mU:(i=t.parent)?"foreignObject"===i.name?rs.kU:i.cw.namespaceURI:t.root.PT.namespaceURI}function Xr(t){var e,n,i;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.cw.multiple&&o(n)){for(i=n.length;i--;)if(e==n[i]){t.cw.selected=!0;break}}else t.cw.selected=e==n}function Yr(t){var e,n,i,r,o;e=t.root;do for(n=e.QV,i=n.length;i--;)r=n[i],o=n["_"+r],o.NV(t)&&(t.EV||(t.EV=[])).push(o);while(e=e.parent)}function Jr(t){var e,n,i;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&o(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Qr(t){var e,n,i,r;if(e=t.attributes,n=e.type,i=e.value,r=e.name,n&&"radio"===n.value&&i&&r.wV)return i.value===r.wV.value||void 0}function $r(t){var e=t.toString();return e?" "+e:""}function to(){this.sU&&this.sU.Aw(),this.hv&&this.hv.Aw(),this.E2&&this.E2.forEach(Z),"option"===this.name&&Sr(this),this.attributes.forEach(Z),this.C2.forEach(Z)}function eo(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&dh.rV(this),this.sU&&this.sU.QU(!1),(e=this.hv)&&(this.hv.QU(),this.cw.GV.hv=null,n=this.root.W1[e.OU.vU],n.splice(n.indexOf(e),1)),this.E2&&this.E2.forEach(X),this.w_&&dh.nV(this.w_),this.root.dU&&this.v_&&(i=new lg(this,this.v_,!1),dh.lV(i),dh.sV(function(){return i.start()})),this.EV&&no(this),"form"===this.name&&Ir(this)}function no(t){var e,n,i;for(i=t.EV.length;i--;)e=t.EV[i],n=e.selector,e.OV(t.cw)}function io(t,e){var n=Tg.exec(e)[0];return null===t||n.length<t.length?n:t}function ro(t,e,n){var i;if(i=oo(t,e,n||{}))return i;if(i=ap.S_(e,{X_:!0})){i=Rg(i);var r=ap.parse(i,ap.V_(t));return t.Y_[e]=r.RT}}function oo(t,e,n){var i=void 0,r=ho(e,n.JV);if(r)return r;var o=m("partials",t,e);if(o){if(r=o.Y_[e],"function"==typeof r&&(i=r.bind(o),i.b0=o.Y_.hasOwnProperty(e),r=i.call(t,ap)),!r&&""!==r)return void E(Cs,e,"partial","partial",{qU:t});if(!ap.U_(r)){var a=ap.parse(r,ap.V_(o));a.m&&E("Partials ({{>%s}}) cannot contain nested inline partials",e,{qU:t});var s=i?o:ao(o,e);s.Y_[e]=r=a.RT}return i&&(r.a0=i),r.QT?r.RT:r}}function ao(t,e){return t.Y_.hasOwnProperty(e)?t:so(t.constructor,e)}function so(t,e){if(t)return t.Y_.hasOwnProperty(e)?t:so(t.L2,e)}function ho(t,e){if(e){if(e.Sf&&e.Sf.m&&e.Sf.m[t])return e.Sf.m[t];if(e.NU&&e.NU.JV)return ho(t,e.NU.JV)}}function uo(t,e){var n,i=m("components",t,e);if(i&&(n=i.R2[e],!n.L2)){var r=n.bind(i);if(r.b0=i.R2.hasOwnProperty(e),n=r(),!n)return void E(Cs,e,"component","component",{qU:t});"string"==typeof n&&(n=uo(t,n)),n.a0=r,i.R2[e]=n}return n}function co(){var t=this.iV.sU.detach();return Dg.MU(this.iV),t}function fo(t){return this.iV.sU.find(t)}function lo(t,e){return this.iV.sU.RV(t,e)}function po(t,e){e.NV(this,!0),this.iV.sU&&this.iV.sU.TV(t,e)}function Eo(t){return t&&t!==this.name?this.iV.sU?this.iV.sU.UV(t):null:this.iV}function vo(){return this.NU.k0(this)}function go(){return this.tU?this.iV.sU.j0():null}function mo(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.qU,n=t.OU,t.updating=!0,dh.start(i),i.EU.mark(n),dh.end(),t.updating=!1)}var r,o,a,s,h,u;if(r=t.V2,o=t.K$,n&&!n.ZR){if("length"===o)return;throw new Error('Cannot use magic mode with property "'+o+'" - object is not configurable')}n&&(a=n.get,s=n.set),h=a||function(){return e},u=function(t){s&&s(t),e=a?a():t,u.X2.forEach(i)},u.X2=[t],Object.defineProperty(r,o,{get:h,set:u,Bq:!0,ZR:!0})}function yo(t,e){var n,i,r,o;if(this.f0)for(n=this.f0.length,i=0;i<n;i+=1)if(r=this.f0[i],r.filter(e,t,this.qU))return o=this.HU[t]=r.wrap(this.qU,e,t,Ro(t)),void(o.value=e)}function To(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function Ro(t){var e;return nm[t]||(e=t?t+".":"",nm[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?To(n,t):n:void 0}),nm[t]}function wo(t){var e,n,i=[Ks];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.AU;)t.indexOf(n)===-1&&D(i,n),n=n.parent;return i}function Ho(t,e,n){var i;xo(t,e),n||(i=e.CU(),i.forEach(function(n){bo(t,n,e)}))}function bo(t,e,n){var i,r,o;e=e.vU||e,i=t.a3.kW,r=i&&i[e],r&&r.forEach(function(e){o=n.join(e.yU),xo(t,o),bo(t,e,o)})}function xo(t,e){t.kW.forEach(function(t){t.fW.test(e.vU)&&t.update(e)})}function Ao(){function t(t){var i=t.key;t.EU===a?(a.b3(i.vU),t.c3(),n.push(i),e(i)):t.EU.mark(i)}function e(n){var i,r;a.d3.hasOwnProperty(n.vU)||((r=a.I0.XT[n.vU])&&r.forEach(t),(i=a.a3.XT[n.vU])&&i.forEach(e))}var n,i,r,o=this,a=this,s={};if(n=this.jV,n.length)return n.slice().forEach(e),i=im(n),i.forEach(function(e){var i;n.indexOf(e)===-1&&(i=a.I0.XT[e.vU])&&i.forEach(t)}),this.jV=[],this.kW.length&&(i.forEach(function(t){return rm(o,t,!0)}),n.forEach(function(t){return rm(o,t)})),this.I0.e3&&(i.forEach(function(t){return _o(o,null,t,"observers")}),Uo(this,n,"observers")),this.I0.default&&(r=[],i.forEach(function(t){return _o(o,r,t,"default")}),r.length&&Mo(this,r,n),Uo(this,n,"default")),n.forEach(function(t){s[t.vU]=o.get(t)}),this.hW={},this.d3={},s}function _o(t,e,n,i){var r,o;(r=Oo(t,n,i))&&(o=t.get(n),r.forEach(function(t){e&&t.f3?e.push(t):t.fw(o)}))}function Mo(t,e,n){e.forEach(function(e){for(var i=!1,r=0,o=n.length,a=[];r<o;){var s=n[r];if(s===e.OU){i=!0;break}s.slice(0,e.OU.length)===e.OU&&a.push(s),r++}i&&e.fw(t.get(e.OU)),a.length&&e.f3(a)})}function Uo(t,e,n){function i(t){t.forEach(r),t.forEach(o)}function r(e){var i=Oo(t,e,n);i&&s.push({OU:e,I0:i})}function o(e){var r;(r=t.a3[n][e.vU])&&i(r)}function a(e){var n=t.get(e.OU);e.I0.forEach(function(t){return t.fw(n)})}var s=[];i(e),s.forEach(a)}function Oo(t,e,n){var i=t.I0[n];return i?i[e.vU]:null}function So(){this.g3.push([])}function Do(t,e){var n,i;if(e||(i=this.HU[t])&&i.PU()!==!1&&(this.HU[t]=null),this.oc[t]=void 0,n=this.h3[t])for(;n.length;)this.b3(n.pop())}function Co(t,e){var n=e.xU;return!(n in t.data||n in t.GU||n in t.FU)}function Lo(t,e){var n=new fm(t,e);return this.gR&&n.init(this),this.GU[t.vU]=n}function Po(t,e){var n,i,r,o,a,s=this.oc,h=t.vU;if(e=e||Em,e.cW&&(o=N(this.g3))&&(~o.indexOf(t)||o.push(t)),_s.call(this.FU,t.xU))return this.FU[t.xU].get(t,e);if(t.wU)return t.value;if(void 0===s[h]?((i=this.GU[h])&&!i.r3?(n=i.get(),this.$T(h,n)):(r=this.HU[h])?n=r.value:t.AU?(this.$T("",this.data),n=this.data):n=No(this,t),s[h]=n):n=s[h],!e.dW&&(r=this.HU[h])&&(n=r.get()),t.AU&&e.eW)for(a in this.FU)n[a]=this.FU[a].ew();return n===pm?void 0:n}function No(t,e){var n,i,r,o;if(n=t.get(e.parent),(o=t.HU[e.parent.vU])&&(n=o.get()),null!==n&&void 0!==n)return(i=t.h3[e.parent.vU])?i.indexOf(e.vU)===-1&&i.push(e.vU):t.h3[e.parent.vU]=[e.vU],"object"!=typeof n||e.yU in n?(r=n[e.yU],t.$T(e.vU,r,!1),t.oc[e.vU]=r,r):t.oc[e.vU]=pm}function Io(){var t;for(t in this.GU)this.GU[t].init(this)}function zo(t,e){var n=this.FU[t.vU]=new mm(t,e);return n.v3(this),n}function Bo(t,e){var n,i=t.vU;e&&(e.B3&&(this.hW[i]=!0),e.d3&&(this.d3[i]=!0)),(n=this.GU[i])&&n.c3(),this.jV.indexOf(t)===-1&&this.jV.push(t);var r=!!e&&e.Y2;this.b3(i,r),this.gR&&this.onchange()}function jo(t,e,n,i){var r,o,a,s;if(this.mark(t),i&&i.dS){a=Go(i.dS);try{r=e.map(a),o=n.map(a)}catch(i){E('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,o=n}}else r=e,o=n;s=Tm(r,o),this.oW(t,n,s,e.length!==n.length)}function qo(t){return JSON.stringify(t)}function Go(t){if(t===!0)return qo;if("string"==typeof t)return wm[t]||(wm[t]=function(e){return e[t]}),wm[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Fo(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];e.LW||((n=this.FU[t.xU])?n.register(t,e,o):(i=this.I0[o]||(this.I0[o]={}),r=i[t.vU]||(i[t.vU]=[]),r.push(e),this.a3[o]||(this.a3[o]={}),t.AU||ko(this,t,o)))}function ko(t,e,n){for(var i,r,o;!e.AU;)i=t.a3[n],r=i[e.parent.vU]||(i[e.parent.vU]=[]),o=e.vU,void 0===r["_"+o]&&(r["_"+o]=0,r.push(e)),r["_"+o]+=1,e=e.parent}function Vo(){return this.g3.pop()}function Ko(t){this.data=t,this.b3("")}function Wo(t,e){var n,i,r,o,a=void 0===arguments[2]?{}:arguments[2];if(!a.C3&&(n=this.FU[t.xU]))return n.set(t,e);if(i=this.GU[t.vU]){if(i.S2)return;i.set(e),e=i.get()}s(this.oc[t.vU],e)||(r=this.HU[t.vU],r&&r.reset&&(o=r.reset(e)!==!1,o&&(e=r.get())),i||o||Zo(this,t,e),a.D3?this.b3(t.vU):this.mark(t))}function Zo(t,e,n){var i,r,o,a;o=function(){i.set?i.set(e.yU,n):(r=i.get(),a())},a=function(){r||(r=Yg(e.yU),t.set(e.parent,r,{D3:!0})),r[e.yU]=n},i=t.HU[e.parent.vU],i?o():(r=t.get(e.parent),(i=t.HU[e.parent.vU])?o():a())}function Xo(t,e,n){var i,r,o,a=this;if(r=n.length,n.forEach(function(e,n){e===-1&&a.mark(t.join(n),Um)}),this.set(t,e,{D3:!0}),(i=this.I0.default[t.vU])&&i.filter(Yo).forEach(function(t){return t.Qd(n,e)}),r!==e.length){for(this.mark(t.join("length"),Mm),o=n.nW;o<e.length;o+=1)this.mark(t.join(o));for(o=e.length;o<r;o+=1)this.mark(t.join(o),Um)}}function Yo(t){return"function"==typeof t.Qd}function Jo(){var t,e=this;for(Object.keys(this.oc).forEach(function(t){return e.b3(t)});t=this.E3.pop();)t.PU()}function Qo(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];if(!e.LW){if(n=this.FU[t.xU])return n.unregister(t,e,o);if(i=this.I0[o][t.vU],r=i.indexOf(e),r===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),t.AU||$o(this,t,o)}}function $o(t,e,n){for(var i,r;!e.AU;)i=t.a3[n],r=i[e.parent.vU],r["_"+e.vU]-=1,r["_"+e.vU]||(I(r,e),r["_"+e.vU]=void 0),e=e.parent}function ta(t){this.G3=new eh(t),this.H3={},this.I3={}}function ea(t,e){return t[e.l0]||(t[e.l0]=[])}function na(t,e){var n=ea(t.I3,e);for(t.G3.MU(e);n.length;)na(t,n.shift());delete t.I3[e.l0]}function ia(t,e){var n,i={};for(n in e)i[n]=ra(t,n,e[n]);return i}function ra(t,e,n){var i,r;return"function"==typeof n&&(i=aa(n,t)),"string"==typeof n&&(i=oa(t,n)),"object"==typeof n&&("string"==typeof n.get?i=oa(t,n.get):"function"==typeof n.get?i=aa(n.get,t):f("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=aa(n.set,t))),{J0:i,m3:r}}function oa(t,e){var n,i,r;return n="return ("+e.replace(Nm,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function aa(t,e){return/this/.test(t.toString())?t.bind(e):t}function sa(e){var n,r,o=void 0===arguments[1]?{}:arguments[1],a=void 0===arguments[2]?{}:arguments[2];if(Vy.uU&&As(),ca(e,a),Rs(e,"data",{get:fa}),Im.MU(e,o),qm.forEach(function(t){e[t]=i(Ts(e.constructor[t]||null),o[t])}),r=new Cm({$T:ha(e,e.$T,o),data:ju.init(e.constructor,e,o),XT:Pm(e,i(Ts(e.constructor.prototype.XT),o.XT)),FU:a.FU,qU:e,onchange:function(){return dh.kV(e)}}),e.EU=r,r.init(),mp.init(e.constructor,e,o),zm.MU(e),Bm.J3(e),e.Sf){var s=void 0;(a.D2||e.qW)&&(s=a.D2?a.D2.slice():[],e.qW&&s.push(e.qW)),e.sU=new gy({Sf:e.Sf,root:e,JV:e,D2:s})}if(Bm.end(e),n=t(e.PT)){var h=e.Dx(n,e.append);Vy.K3&&h.catch(function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),E("An error happened during rendering",{qU:e}),t.stack&&l(t.stack),t})}}function ha(t,e,n){function i(e){return"string"==typeof e&&(e=g("adaptors",t,e),e||f(Ls(e,"adaptor"))),e}var r,o,a;if(e=e.map(i),r=P(n.$T).map(i),r=ua(e,r),o="magic"in n?n.YT:t.YT,a="modifyArrays"in n?n.ZT:t.ZT,o){if(!is)throw new Error("Getters and setters (magic mode) are not supported in this browser");a&&r.push(tm),r.push($g)}return a&&r.push(Zg),r}function ua(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function ca(t,e){
t.l0="r-"+jm++,t.aW=Ts(null),t.wT={},t.W1=Ts(null),t.xV=[],t.f1={},t.QV=[],t.SV=[],t.M0=[],t.lW=[],e.rU?(t.parent=e.parent,t.VV=e.VV||null,t.root=t.parent.root,t.rU=e.rU,e.rU.iV=t,t.L3=e.M3):(t.root=t,t.parent=t.VV=null)}function fa(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function la(t,e,n){this.NU=t.NU,this.RU=n,this.sU=new gy({Sf:e,root:t.root,JV:this}),this.update()}function pa(t,e,n){var i;return e.r?i=Vp(t,e.r,n):e.x?i=new Xp(t,t.NU,e.x,n):e.rx&&(i=new $p(t,e.rx,n)),i}function da(t){return 1===t.length&&t[0].RT===Wu}function Ea(t,e){var n;for(n in e)e.hasOwnProperty(n)&&va(t.iV,t.root,n,e[n])}function va(t,e,n,i){"string"!=typeof i&&f("Components currently only support simple events - you cannot include arguments. Sorry!"),t.ET(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].cw&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),jh(e,i,{event:t,hc:n}),!1})}function ga(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.NU=t.NU,i=n.root,this.root=i,this.type=rc,this.name=t.Sf.e,this.index=t.index,this.P3={},this.Q3={},this.O3=[],km(this,e,t.Sf.a,t.Sf.f,t.Sf.m),Vm(this,t.Sf.QT),(t.Sf.F2||t.Sf.G2||t.Sf.H2||t.Sf.rM)&&E('The "intro", "outro" and "decorator" directives have no effect on components',{qU:this.iV}),Km(this)}function ma(t,e){function n(n){n.s0(t,e)}var i;this.O3.forEach(n);for(var r in this.Q3)this.Q3[r][0]&&n(this.Q3[r][0]);(i=this.root.SV["_"+this.name])&&i.CV()}function ya(){var t=this.iV;return t.Dx(this.NU.d1()),this.tU=!0,t.sU.detach()}function Ta(){return this.iV.sU.toString()}function Ra(){var t=this.iV;this.O3.forEach(Z),wa(this),t.lW.forEach(Y),t.sU.Aw(),t.EU.PU(),t.sU.tU&&t.PT.AV&&I(t.PT.AV,t),Qm.MU(t)}function wa(t){var e,n;e=t.root;do(n=e.SV["_"+t.name])&&n.OV(t);while(e=e.parent)}function Ha(t){this.R3=t,this.iV.QU()}function ba(t){var e=this;this.JV=t.JV,this.parent=this.JV.NU,this.root=t.root,this.n0=t.n0,this.context=t.context,this.index=t.index,this.key=t.key,this.Y0=[],this.D2="cssIds"in t?t.D2:this.parent?this.parent.D2:null,this.HV=t.Sf.map(function(n,i){return xa({NU:e,n0:t.n0,Sf:n,index:i})}),this.value=this.m0=null,this.h0=this.g0=!0,this.bound=!0}function xa(t){if("string"==typeof t.Sf)return new Cp(t);switch(t.Sf.RT){case oc:return new oy(t);case Wu:return new od(t);case Xu:return new xd(t);case Zu:return new Fd(t);case Qu:var e=void 0;return(e=Og(t.NU.root,t.Sf.e))?new ey(t,e):new mg(t);case $u:return new Ug(t);case tc:return new iy(t);case sc:return new sy(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Aa(t,e){this.JV&&!this.JV.b1||w(this,"context",t,e),this.HV.forEach(function(n){n.s0&&n.s0(t,e)})}function _a(){var t;return 1===this.HV.length?t=this.HV[0].Dx():(t=document.createDocumentFragment(),this.HV.forEach(function(e){t.appendChild(e.Dx())})),this.tU=!0,t}function Ma(t){return this.HV?this.HV.map(t?Oa:Ua).join(""):""}function Ua(t){return t.toString()}function Oa(t){return t.toString(!0)}function Sa(){this.bound&&(this.HV.forEach(Da),this.bound=!1)}function Da(t){t.Aw&&t.Aw()}function Ca(t){if(!this.tU)throw new Error("Attempted to unrender a fragment that was not rendered");this.HV.forEach(function(e){return e.QU(t)}),this.tU=!1}function La(t){var e,n,i,r,o;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.EU.HU.N3)&&n.reset?n.reset(t)===!1&&this.EU.reset(t):this.EU.reset(t),i=mp.reset(this),r=i.length;r--;)if(yy.indexOf(i[r])>-1){o=!0;break}if(o){var a=void 0;this.EU.mark(Ks),(a=this.rU)&&(a.R3=!0),this.QU(),a&&(a.R3=!1),this.sU.Sf!==this.Sf&&(this.sU.Aw(),this.sU=new gy({Sf:this.Sf,root:this,JV:this})),e=this.Dx(this.PT,this.anchor)}else e=dh.start(this,!0),this.EU.mark(Ks),dh.end();return Ty.MU(this,t),e}function Pa(t){var e,n;hp.init(null,this,{Sf:t}),e=this.dU,this.dU=!1,(n=this.rU)&&(n.R3=!0),this.QU(),n&&(n.R3=!1),this.sU.Aw(),this.sU=new gy({Sf:this.Sf,root:this,JV:this}),this.Dx(this.PT,this.anchor),this.dU=e}function Na(t,e){var n,i;if(i=dh.start(this,!0),u(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],Ia(this,t,e))}else Ia(this,t,e);return dh.end(),i}function Ia(t,e,n){e=b(M(e)),e.zU?x(t,e).forEach(function(e){t.EU.set(e,n)}):t.EU.set(e,n)}function za(t,e){return Ws(this,t,void 0===e?-1:-e)}function Ba(){var t;return this.sU.Aw(),this.EU.PU(),this.lW.forEach(Y),this.sU.tU&&this.PT.AV&&I(this.PT.AV,this),this.R3=!0,t=this.sU.tU?this.QU():oh.resolve(),Oy.MU(this),this.M0.forEach(ja),t}function ja(t){delete t.fR[t.K$]}function qa(t){var e=this;if("string"!=typeof t)throw new TypeError(Ds);var n=void 0;return/\*/.test(t)?(n={},x(this,b(M(t))).forEach(function(t){n[t.vU]=!e.EU.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Ga(){return this.sU.toString(!0)}function Fa(){var t,e;if(!this.sU.tU)return E("ractive.unrender() was called on a Ractive instance that was not rendered"),oh.resolve();for(t=dh.start(this,!0),e=!this.rU||this.rU.R3||this.R3;this.xV[0];)this.xV[0].stop();return this.sU.QU(e),I(this.PT.AV,this),Ly.MU(this),dh.end(),t}function ka(t){var e;return t=b(t)||Ks,e=dh.start(this,!0),this.EU.mark(t),dh.end(),Iy.MU(this,t),e}function Va(t,e){var n,i,r;if("string"!=typeof t||e){r=[];for(i in this.W1)t&&!b(i).BU(t)||r.push.apply(r,this.W1[i])}else r=this.W1[t];return n=Ka(this,r),this.set(n)}function Ka(t,e){var n={},i=[];return e.forEach(function(t){var e,r;if(!t.Z1||t.o1.cw.checked){if(t.a2)return void(i[t.OU.vU]||t.b2()||(i.push(t.OU),i[t.OU.vU]=t));e=t.S1.value,r=t.ew(),L(e,r)||s(e,r)||(n[t.OU.vU]=r)}}),i.length&&i.forEach(function(t){var e,r,o;e=i[t.vU],r=e.S1.value,o=e.ew(),L(r,o)||(n[t.vU]=o)}),n}function Wa(t,e){return"function"==typeof e&&/_super/.test(t)}function Za(t){for(var e={};t;)Xa(t,e),Ja(t,e),t=t.L2!==Vy&&t.L2;return e}function Xa(t,e){Ep.forEach(function(n){Ya(n.Z_?t.prototype:t,e,n.name)})}function Ya(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function Ja(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n].e0){var r=void 0,o=i.e0;o&&(i=i.e0),r=jy(e[n].e0,i),o&&(r.e0=r),e[n]=r}}else e[n]=i.e0?i.e0:i}})}function Qa(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?e.reduce($a,this):$a(this)}function $a(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Vy&&(r=qy(r)),e=function(t){return this instanceof e?void Gm(this,t):new e(t)},n=Ts(t.prototype),n.constructor=e,ws(e,{Mb:{value:n},extend:{value:Qa,PV:!0,ZR:!0},L2:{value:t}}),mp.extend(t,n,r),ju.extend(t,n,r),r.XT&&(n.XT=i(Ts(t.prototype.XT),r.XT)),e.prototype=n,e}var ts,es,ns,is,rs,os,as,ss=3,hs={PT:void 0,append:!1,Sf:{QT:ss,RT:[]},ST:!1,TT:!1,UT:!0,VT:["{{","}}"],WT:["{{{","}}}"],Wb:!1,data:{},XT:{},YT:!1,ZT:!0,$T:[],_T:!1,aU:!0,bU:!1,cU:!1,dU:!0,complete:void 0,eU:null,fU:!1},us=hs,cs={gU:function(t){return t},hU:function(t){return Math.pow(t,3)},iU:function(t){return Math.pow(t-1,3)+1},jU:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};ts="object"==typeof document,es="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ns="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),is=!0}catch(t){is=!1}rs={kU:"http://www.w3.org/1999/xhtml",lU:"http://www.w3.org/1998/Math/MathML",mU:"http://www.w3.org/2000/svg",nU:"http://www.w3.org/1999/xlink",oU:"http://www.w3.org/XML/1998/namespace",pU:"http://www.w3.org/2000/xmlns/"},os="undefined"!=typeof document&&(document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),as=["o","ms","moz","webkit"];var fs,ls,ps,ds,Es,vs,gs,ms,ys;if(fs=os?function(t,e){return e&&e!==rs.kU?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==rs.kU)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},ts){for(ps=fs("div"),ds=["matches","matchesSelector"],ys=function(t){return function(e,n){return e[t](n)}},gs=ds.length;gs--&&!ls;)if(Es=ds[gs],ps[Es])ls=ys(Es);else for(ms=as.length;ms--;)if(vs=as[gs]+Es.substr(0,1).toUpperCase()+Es.substring(1),ps[vs]){ls=ys(vs);break}ls||(ls=function(t,e){var n,i,r;for(i=t.parentNode,i||(ps.innerHTML="",i=ps,t=t.cloneNode(),ps.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else ls=null;var Ts,Rs,ws,Hs=null;try{Object.defineProperty({},"test",{value:0}),ts&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Rs=Object.defineProperty}catch(t){Rs=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(t){throw t}ts&&Object.defineProperties(fs("div"),{test:{value:0}}),ws=Object.defineProperties}catch(t){ws=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&Rs(t,n,e[n])}}try{Object.create(null),Ts=Object.create}catch(t){Ts=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var bs,xs,As,_s=Object.prototype.hasOwnProperty,Ms=Object.prototype.toString,Us=/^\[object (?:Array|FileList)\]$/,Os=function(){},Ss={};ns?!function(){var t=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";As=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),As=Os},xs=function(t,e){if(As(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.qU:null;if(i){var r=void 0;i.rU&&(r=i.rU.name)&&(t="<"+r+"> "+t);var o=void 0;(o=n.cw||i.sU&&i.sU.tU&&i.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},bs=function(){console.log.apply(console,arguments)}}():xs=bs=As=Os;var Ds="Bad arguments",Cs='A function was specified for "%s" %s, but no %s was returned',Ls=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Ps=function(t,e,n,i){if(t===e)return y(e);if(i){var r=g("interpolators",n,i);if(r)return r(t,e)||y(e);f(Ls(i,"interpolator"))}return zs.number(t,e)||zs.ec(t,e)||zs.object(t,e)||y(e)},Ns=Ps,Is={number:function(t,e){var n;return h(t)&&h(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},ec:function(t,e){var n,i,r,a;if(!o(t)||!o(e))return null;for(n=[],i=[],a=r=Math.min(t.length,e.length);a--;)i[a]=Ns(t[a],e[a]);for(a=r;a<t.length;a+=1)n[a]=t[a];for(a=r;a<e.length;a+=1)n[a]=e[a];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,a;if(!u(t)||!u(e))return null;n=[],o={},r={};for(a in t)_s.call(t,a)&&(_s.call(e,a)?(n.push(a),r[a]=Ns(t[a],e[a])):o[a]=t[a]);for(a in e)_s.call(e,a)&&!_s.call(t,a)&&(o[a]=e[a]);return i=n.length,function(t){for(var e,a=i;a--;)e=n[a],o[e]=r[e](t);return o}}},zs=Is,Bs=T,js={},qs=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Gs=/\*/,Fs={},ks=function(t){var e=t.split(".");this.vU=t,"@"===t[0]&&(this.wU=!0,this.value=H(t)),this.xU=e[0],this.yU=e.pop(),this.zU=Gs.test(t),this.parent=""===t?null:b(e.join(".")),this.AU=!t};ks.prototype={BU:function(t){return t===this||this.startsWith(t)},join:function(t){return b(this.AU?String(t):this.vU+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:b(this.vU.replace(t.vU+".",e.vU+".")):void 0},startsWith:function(t){return!!t&&(t&&this.vU.substr(0,t.vU.length+1)===t.vU+".")},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},CU:function(){return this.DU||(this.DU=Bs(this.vU))}};var Vs,Ks=b(""),Ws=U,Zs="Cannot add to a non-numeric value",Xs=O;"undefined"==typeof window?Vs=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o})}}(as,0,window),Vs=window.requestAnimationFrame);var Ys,Js=Vs;Ys="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Qs=Ys,$s={IU:{JU:"beforeInit",KU:"onconstruct"},Dx:{JU:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{JU:"complete",KU:"oncomplete"}};S.prototype.MU=function(t,e){function n(n){if(t[n])return e?t[n](e):t[n](),!0}n(this.method),!t[this.method]&&this.LU&&n(this.LU.JU)&&(this.LU.message?E(this.LU.message):E('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.LU.JU,this.LU.KU)),e?t.MU(this.event,e):t.MU(this.event)};var th,eh=S,nh={},ih={},rh={};"function"==typeof Promise?th=Promise:(th=function(t){var e,n,i,r,o,a,s=[],h=[],u=nh;i=function(t){return function(i){u===nh&&(e=i,u=t,n=j(u===ih?s:h,e),B(n))}},r=i(ih),o=i(rh);try{t(r,o)}catch(t){o(t)}return a={then:function(t,e){var i=new th(function(r,o){var a=function(t,e,n){"function"==typeof t?e.push(function(e){var n;try{n=t(e),q(i,n,r,o)}catch(t){o(t)}}):e.push(n)};a(t,s,r),a(e,h,o),u!==nh&&B(n)});return i}},a.catch=function(t){return this.then(null,t)},a},th.all=function(t){return new th(function(e,n){var i,r,o,a=[];if(!t.length)return void e(a);for(o=function(t,r){t&&"function"==typeof t.then?t.then(function(t){a[r]=t,--i||e(a)},n):(a[r]=t,--i||e(a))},i=r=t.length;r--;)o(t[r],r)})},th.resolve=function(t){return new th(function(e){e(t)})},th.reject=function(t){return new th(function(e,n){n(t)})});var oh=th,ah=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return Ks},sh=G,hh=function(t,e){this.RU=t,this.parent=e,this.SU=[],this.TU=[],this.children=[],this.UU=this.VU=0,this.WU=[],this.XU=[],this.YU=!1,e&&e.ZU(this)};hh.prototype={ZU:function(t){this.children.push(t),this.UU+=1,this.VU+=1},$U:function(){this.VU-=1,$(this)},_U:function(){this.UU-=1,$(this)},add:function(t){var e=t.aV?this.SU:this.TU;e.push(t)},bV:function(t){this.XU.push(t)},remove:function(t){var e=t.aV?this.SU:this.TU;I(e,t),$(this)},init:function(){this.gR=!0,$(this)},cV:function(){this.XU.forEach(W),this.WU.forEach(J),this.children.forEach(Q)}};var uh,ch,fh=hh,lh=[],ph=new eh("change");ch={start:function(t,e){var n,i;return e&&(n=new oh(function(t){return i=t})),uh={dV:uh,eV:new fh(i,uh&&uh.eV),fV:[],gV:[],hV:[],iV:t},t&&uh.hV.push(t),n},end:function(){tt(),uh.eV.init(),!uh.dV&&uh.iV&&(uh.iV.EU.jV=[]),uh=uh.dV},kV:function(t){uh&&D(uh.hV,t)},lV:function(t){t.mV=uh.eV,uh.eV.add(t)},nV:function(t){uh.eV.bV(t)},oV:function(t){uh.fV.push(t)},pV:function(t){lh.push(t)},qV:function(t){I(lh,t)},rV:function(t){uh.eV.WU.push(t)},sV:function(t,e){var n;if(uh){for(n=uh;e&&n.dV;)n=n.dV;n.gV.push(t)}else t()}};var dh=ch,Eh=[],vh={vV:function(){var t,e,n;for(n=Qs(),dh.start(),t=0;t<Eh.length;t+=1)e=Eh[t],e.vV(n)||Eh.splice(t--,1);dh.end(),Eh.length?Js(vh.vV):vh.$p=!1},add:function(t){Eh.push(t),vh.$p||(vh.$p=!0,Js(vh.vV))},abort:function(t,e){for(var n,i=Eh.length;i--;)n=Eh[i],n.root===e&&n.OU===t&&n.stop()}},gh=vh,mh=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.wV=Ns(this.from,this.bR,this.root,this.wV),this.$p=!0,this.vV()};mh.prototype={vV:function(){var t,e,n,i,r,o;return o=this.OU,!!this.$p&&(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==o&&(dh.start(this.root),this.root.EU.set(o,this.bR),dh.end()),this.step&&this.step(1,this.bR),this.complete(this.bR),r=this.root.xV.indexOf(this),r===-1&&E("Animation was not found"),this.root.xV.splice(r,1),this.$p=!1,!1):(e=this.yV?this.yV(t/this.duration):t/this.duration,null!==o&&(n=this.wV(e),dh.start(this.root),this.root.EU.set(o,n),dh.end()),this.step&&this.step(e,n),!0))},stop:function(){var t;this.$p=!1,t=this.root.xV.indexOf(this),t===-1&&E("Animation was not found"),this.root.xV.splice(t,1)}};var yh=mh,Th=it,Rh={stop:Os},wh=ot,Hh=new eh("detach"),bh=at,xh=st,Ah=function(){var t,e,n;t=this.fu[this.BV?"DV":"EV"],e=this.selector,n=t.indexOf(e),n!==-1&&(t.splice(n,1),t[e]=null)},_h=function(t,e){var n,i,r,o,a,s,h,u,c,f;for(n=ut(t.rU||t.GV.FV),i=ut(e.rU||e.GV.FV),r=N(n),o=N(i);r&&r===o;)n.pop(),i.pop(),a=r,r=N(n),o=N(i);if(r=r.rU||r,o=o.rU||o,c=r.NU,f=o.NU,c===f)return s=c.HV.indexOf(r),h=f.HV.indexOf(o),s-h||n.length-i.length;if(u=a.IV)return s=u.indexOf(c),h=u.indexOf(f),s-h||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Mh=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):_h(t,e)},Uh=function(){this.sort(this.BV?_h:Mh),this.KV=!1},Oh=function(){var t=this;this.KV||(this.KV=!0,dh.sV(function(){t.LV()}))},Sh=function(t){var e=this.indexOf(this.BV?t.iV:t);e!==-1&&this.splice(e,1)},Dh=ct,Ch=ft,Lh=lt,Ph=pt,Nh=dt,Ih=Et,zh={YV:function(t,e){t.event&&(t.ZV=t.ZV||[],t.ZV.push(t.event)),t.event=e},$V:function(t){t.ZV&&t.ZV.length?t.event=t.ZV.pop():delete t.event}},Bh=zh,jh=vt,qh=yt,Gh=Tt,Fh={cW:!0,dW:!0,eW:!0},kh=Rt,Vh=new eh("insert"),Kh=Ht,Wh=function(t,e,n,i){this.root=t,this.OU=e,this.RU=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Wh.prototype={init:function(t){this.value=this.root.get(this.OU.vU),t!==!1?this.update():this.oldValue=this.value},fw:function(t){var e=this;s(t,this.value)||(this.value=t,this.defer&&this.gR?dh.sV(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.RU.call(this.context,this.value,this.oldValue,this.OU.vU),this.oldValue=this.value,this.updating=!1)}};var Zh,Xh=Wh,Yh=bt,Jh=Array.prototype.slice;Zh=function(t,e,n,i){this.root=t,this.RU=n,this.defer=i.defer,this.OU=e,this.fW=new RegExp("^"+e.vU.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.gW=[]),this.context=i&&i.context?i.context:t},Zh.prototype={init:function(t){var e,n;if(e=Yh(this.root,this.OU),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(b(n));else this.values=e},update:function(t){var e,n=this;if(t.zU){e=Yh(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(b(t))}else if(!this.root.EU.hW[t.vU])return this.defer&&this.gR?void dh.sV(function(){return n.iW(t).update()}):void this.jW(t)},jW:function(t){var e,n,i,r;return e=t.vU,n=this.root.EU.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,s(n,this.values[e])&&this.gR||(i=Jh.call(this.fW.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.RU.apply(this.context,r)),void(this.updating=!1))},iW:function(t){var e=this;return this.gW[t.vU]||(this.gW[t.vU]={update:function(){return e.jW(t)}}),this.gW[t.vU]}};var Qh,$h,tu,eu,nu,iu,ru=Zh,ou=xt,au={},su=At,hu=_t,uu=function(t){return t.trim()},cu=function(t){return""!==t},fu=Mt,lu=Ut,pu=Ot,du=St,Eu=Array.prototype,vu=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a,s,h,u,c=[];if(e=b(M(e)),a=this.EU.get(e),s=a.length,!o(a))throw new Error("Called ractive."+t+"('"+e.vU+"'), but '"+e.vU+"' does not refer to an array");return c=du(a,t,i),u=Eu[t].apply(a,i),h=dh.start(this,!0).then(function(){return u}),c?this.EU.oW(e,a,c):this.EU.mark(e),dh.end(),h}},gu=vu("pop"),mu=vu("push"),yu="/* Ractive.js component styles */\n",Tu=[],Ru=!1;ts?(tu=document.createElement("style"),tu.type="text/css",eu=document.getElementsByTagName("head")[0],iu=!1,nu=tu.styleSheet,$h=function(){var t=yu+Tu.map(function(t){return"\n/* {"+t.id+"} */\n"+t.pW}).join("\n");nu?nu.cssText=t:tu.innerHTML=t,iu||(eu.appendChild(tu),iu=!0)},Qh={add:function(t){Tu.push(t),Ru=!0},apply:function(){Ru&&($h(),Ru=!1)}}):Qh={add:Os,apply:Os};var wu,Hu,bu=Qh,xu=Ct,Au=new eh("render"),_u=new eh("complete"),Mu={extend:function(t,e,n){e.$T=Pt(e.$T,P(n.$T))},init:function(){}},Uu=Mu,Ou=Nt,Su=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Du=/\/\*.*?\*\//g,Cu=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Lu=/^@media/,Pu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Nu=1,Iu={name:"css",extend:function(t,e,n){if(n.eU){var i=Nu++,r=n.fU?n.eU:Ou(n.eU,i);e.qW=i,bu.add({id:i,pW:r})}},init:function(){}},zu=Iu,Bu={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&u(n.data))for(i in n.data)r=n.data[i],r&&"object"==typeof r&&(u(r)||o(r))&&E("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=jt(e.data,n.data)},init:function(t,e,n){var i=jt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.EU);return t.EU.reset(e),!0}},ju=Bu,qu=/^\s+/;Hu=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}},Hu.prototype=Error.prototype,wu=function(t,e){var n,i,r=0;for(this.vU=t,this.options=e||{},this.cD=0,this.tW=this.vU.split("\n"),this.uW=this.tW.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.cD<this.vU.length&&(i=this.read());)n.push(i);this.vW=this.wW(),this.result=this.xW?this.xW(n,e):n},wu.prototype={read:function(t){var e,n,i,r;for(t||(t=this.yW),e=this.cD,i=t.length,n=0;n<i;n+=1)if(this.cD=e,r=t[n](this))return r;return null},zW:function(t){for(var e,n=0,i=0;t>=this.uW[n];)i=this.uW[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.zW(this.cD),n=e[0],i=e[1],r=this.tW[e[0]-1],o=0,a=r.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",s=new Hu(""+t+" at line "+n+" character "+i+":\n"+a);throw s.line=e[0],s.AW=e[1],s.BW=t,s},DW:function(t){if(this.vU.substr(this.cD,t.length)===t)return this.cD+=t.length,t},EW:function(t){var e;if(e=t.exec(this.wW()))return this.cD+=e[0].length,e[1]||e[0]},FW:function(){this.EW(qu)},wW:function(){return this.vU.substring(this.cD)},GW:function(){return this.vU.charAt(this.cD)}},wu.extend=function(t){var e,n,i=this;e=function(t,e){wu.call(this,t,e)},e.prototype=Ts(i.prototype);for(n in t)_s.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=wu.extend,e};var Gu,Fu,ku,Vu=wu,Ku=1,Wu=2,Zu=3,Xu=4,Yu=5,Ju=6,Qu=7,$u=8,tc=9,ec=10,nc=13,ic=14,rc=15,oc=16,ac=17,sc=18,hc=20,uc=21,cc=22,fc=23,lc=24,pc=25,dc=26,Ec=27,vc=30,gc=31,mc=32,yc=33,Tc=34,Rc=35,wc=36,Hc=40,bc=50,xc=51,Ac=52,_c=53,Mc=54,Uc=60,Oc=61,Sc=Ft,Dc=/^[^\s=]+/,Cc=/^\s+/,Lc=kt,Pc=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Nc=Vt,Ic={RT:ec,HW:!0},zc="Expected a JavaScript expression",Bc="Expected closing paren",jc=Wt,qc=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Gc=Zt;Gu=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Fu=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,ku=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Fc,kc,Vc=function(t){return function(e){var n,i,r,o;for(n=e.cD,i='"',r=!1;!r;)o=e.EW(Gu)||e.EW(Fu)||e.DW(t),o?i+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.EW(ku),o?i+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},Kc=Vc('"'),Wc=Vc("'"),Zc=function(t){var e,n;return e=t.cD,t.DW('"')?(n=Wc(t),t.DW('"')?{RT:uc,QT:n}:(t.cD=e,null)):t.DW("'")?(n=Kc(t),t.DW("'")?{RT:uc,QT:n}:(t.cD=e,null)):null},Xc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Yc=Xt,Jc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Qc=Yt,$c=Jt,tf=function(t){var e,n;return e=t.cD,t.FW(),t.DW("{")?(n=$c(t),t.FW(),t.DW("}")?{RT:fc,OW:n}:(t.cD=e,null)):(t.cD=e,null)},ef=Qt,nf=function(t){var e,n;return e=t.cD,t.FW(),t.DW("[")?(n=ef(t),t.DW("]")?{RT:cc,OW:n}:(t.cD=e,null)):(t.cD=e,null)},rf=$t,of=te,af=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;Fc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,kc=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var sf,hf,uf=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,cf=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,ff=ee,lf=function(t){return rf(t)||of(t)||ff(t)},pf=ne,df=function(t){var e,n,i,r;if(n=lf(t),!n)return null;for(;n;)if(e=t.cD,i=pf(t))n={RT:mc,x:n,r:i};else{if(!t.DW("("))break;t.FW(),r=ef(t),t.FW(),t.DW(")")||t.error(Bc),n={RT:Hc,x:n},r&&(n.rM=r)}return n};hf=function(t,e){return function(n){var i;return(i=e(n))?i:n.DW(t)?(n.FW(),i=Mf(n),i||n.error(zc),{Ri:t,rM:i,RT:yc}):null}},function(){var t,e,n,i,r;for(i="! ~ + - typeof".split(" "),r=df,t=0,e=i.length;t<e;t+=1)n=hf(i[t],r),r=n;sf=r}();var Ef,vf,gf=sf;vf=function(t,e){return function(n){var i,r,o;if(r=e(n),!r)return null;for(;;){if(i=n.cD,n.FW(),!n.DW(t))return n.cD=i,r;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.wW().charAt(0)))return n.cD=i,r;if(n.FW(),o=e(n),!o)return n.cD=i,r;r={RT:wc,Ri:t,rM:[r,o]}}}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=gf,t=0,e=i.length;t<e;t+=1)n=vf(i[t],r),r=n;Ef=r}();var mf,yf,Tf,Rf,wf,Hf,bf,xf,Af=Ef,_f=ie,Mf=re,Uf=oe,Of=se,Sf=/^[0-9][1-9]*$/,Df=ue,Cf=ce,Lf=fe,Pf=le,Nf=pe,If=de,zf=Ee,Bf=/^yield\s*/,jf=ve,qf=ge,Gf=/^\s*else\s*/,Ff=me,kf=/^\s*elseif\s+/,Vf={dg:Ac,QW:bc,RW:Mc,SW:_c,TW:xc},Kf=ye,Wf=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Zf=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Xf=new RegExp("^("+Object.keys(Vf).join("|")+")\\b"),Yf=be,Jf="<!--",Qf="-->";mf=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,yf=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Tf={XW:34,YW:38,ZW:39,wf:60,Qe:62,$W:160,_W:161,aX:162,bX:163,cX:164,dX:165,eX:166,fX:167,gX:168,Di:169,hX:170,iX:171,jX:172,kX:173,lX:174,mX:175,nX:176,oX:177,pX:178,qX:179,rX:180,sX:181,tX:182,uX:183,vX:184,wX:185,xX:186,yX:187,zX:188,AX:189,BX:190,CX:191,DX:192,EX:193,FX:194,GX:195,HX:196,IX:197,JX:198,KX:199,LX:200,MX:201,NX:202,OX:203,PX:204,QX:205,RX:206,SX:207,TX:208,UX:209,VX:210,WX:211,XX:212,YX:213,ZX:214,Tf:215,$X:216,_X:217,aY:218,bY:219,cY:220,dY:221,eY:222,fY:223,gY:224,hY:225,iY:226,jY:227,kY:228,lY:229,mY:230,nY:231,oY:232,pY:233,qY:234,rY:235,sY:236,tY:237,uY:238,vY:239,wY:240,xY:241,yY:242,zY:243,AY:244,BY:245,CY:246,jm:247,DY:248,EY:249,FY:250,GY:251,HY:252,IY:253,JY:254,KY:255,LY:338,MY:339,NY:352,OY:353,PY:376,QY:402,RY:710,SY:732,TY:913,UY:914,VY:915,WY:916,XY:917,YY:918,ZY:919,$Y:920,_Y:921,aZ:922,bZ:923,cZ:924,dZ:925,eZ:926,fZ:927,gZ:928,hZ:929,iZ:931,jZ:932,kZ:933,lZ:934,mZ:935,nZ:936,oZ:937,alpha:945,beta:946,gamma:947,delta:948,pZ:949,qZ:950,rZ:951,Um:952,sZ:953,tZ:954,uZ:955,vZ:956,wZ:957,xZ:958,yZ:959,zZ:960,AZ:961,BZ:962,CZ:963,DZ:964,EZ:965,Tm:966,FZ:967,GZ:968,HZ:969,IZ:977,JZ:978,KZ:982,LZ:8194,MZ:8195,NZ:8201,OZ:8204,PZ:8205,QZ:8206,RZ:8207,SZ:8211,TZ:8212,UZ:8216,VZ:8217,WZ:8218,XZ:8220,YZ:8221,ZZ:8222,$Z:8224,_Z:8225,a$:8226,b$:8230,c$:8240,d$:8242,e$:8243,f$:8249,g$:8250,h$:8254,i$:8260,j$:8364,YA:8465,k$:8472,l$:8476,m$:8482,n$:8501,o$:8592,p$:8593,q$:8594,r$:8595,s$:8596,t$:8629,u$:8656,v$:8657,w$:8658,x$:8659,y$:8660,z$:8704,A$:8706,B$:8707,empty:8709,C$:8711,D$:8712,E$:8713,F$:8715,G$:8719,Qf:8721,H$:8722,I$:8727,J$:8730,K$:8733,L$:8734,M$:8736,N$:8743,O$:8744,P$:8745,Q$:8746,R$:8747,S$:8756,T$:8764,U$:8773,V$:8776,W$:8800,X$:8801,Y$:8804,Z$:8805,sub:8834,sup:8835,$$:8836,_$:8838,a_:8839,b_:8853,c_:8855,d_:8869,e_:8901,f_:8968,g_:8969,h_:8970,i_:8971,lang:9001,j_:9002,k_:9674,l_:9824,m_:9827,n_:9829,o_:9830},Rf=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],wf=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Tf).join("|")+"));?","g"),Hf=/</g,bf=/>/g,xf=/&/g;var $f,tl,el,nl,il,rl,ol,al=/^\s*\r?\n/,sl=/\r?\n\s*$/,hl=function(t){var e,n,i,r,o;for(e=1;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],Me(n)&&Ue(i)&&Me(r)&&sl.test(r)&&al.test(n)&&(t[e-2]=r.replace(sl,"\n"),t[e]=n.replace(al,"")),Oe(n)&&Me(i)&&sl.test(i)&&Me(n.f[0])&&al.test(n.f[0])&&(t[e-1]=i.replace(sl,"\n"),n.f[0]=n.f[0].replace(al,"")),Me(n)&&Oe(i)&&(o=N(i.f),Me(o)&&sl.test(o)&&al.test(n)&&(i.f[i.f.length-1]=o.replace(sl,"\n"),t[e]=n.replace(al,"")));return t},ul=function(t,e,n){var i;e&&(i=t[0],"string"==typeof i&&(i=i.replace(e,""),i?t[0]=i:t.shift())),n&&(i=N(t),"string"==typeof i&&(i=i.replace(n,""),i?t[t.length-1]=i:t.pop()))},cl=Se,fl=/[ \t\f\r\n]+/g,ll=/^(?:pre|script|style|textarea)$/i,pl=/^[ \t\f\r\n]+/,dl=/[ \t\f\r\n]+$/,El=/^(?:\r\n|\r|\n)/,vl=/(?:\r\n|\r|\n)$/,gl=De,ml=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,yl=function(t,e){var n,i,r;for(n=e.length;n--;){if(i=t.indexOf(e[n]),!i)return 0;i!==-1&&(!r||i<r)&&(r=i)}return r||-1},Tl=Ce,Rl=/^[^\s"'>\/=]+/,wl=/^[^\s"'=<>`]+/;tl={q_:!0,r_:!1,undefined:void 0,s_:null},el=new RegExp("^(?:"+Object.keys(tl).join("|")+")"),nl=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,il=/\$\{([^\}]+)\}/g,rl=/^\$\{([^\}]+)\}/,ol=/^\s*$/,$f=Vu.extend({init:function(t,e){this.values=e.values,this.FW()},xW:function(t){return 1===t.length&&ol.test(this.vW)?{value:t[0].QT}:null},yW:[function(t){var e;return t.values?(e=t.EW(rl),e&&t.values.hasOwnProperty(e)?{QT:t.values[e]}:void 0):null},function(t){var e;if(e=t.EW(el))return{QT:tl[e]}},function(t){var e;if(e=t.EW(nl))return{QT:+e}},function(t){var e,n=Zc(t);return n&&(e=t.values)?{QT:n.QT.replace(il,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.DW("{"))return null;if(e={},t.FW(),t.DW("}"))return{QT:e};for(;n=Be(t);){if(e[n.key]=n.value,t.FW(),t.DW("}"))return{QT:e};if(!t.DW(","))return null}return null;
},function(t){var e,n;if(!t.DW("["))return null;if(e=[],t.FW(),t.DW("]"))return{QT:e};for(;n=t.read();){if(e.push(n.QT),t.FW(),t.DW("]"))return{QT:e};if(!t.DW(","))return null;t.FW()}return null}]});var Hl,bl=function(t,e){var n=new $f(t,{values:e});return n.result},xl=je,Al=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,_l=/\)\s*$/;Hl=Vu.extend({yW:[Mf]});var Ml,Ul=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Ol=/^[\s\n\/>]/,Sl=/^on/,Dl=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Cl=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Ll={t_:"t0",u_:"t1",v_:"t2",w_:"o"},Pl={HW:!0};Ml={x_:["li"],y_:["dt","dd"],z_:["dt","dd"],m:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),A_:["rt","rp"],B_:["rt","rp"],C_:["optgroup"],D_:["option","optgroup"],E_:["tbody","tfoot"],F_:["tbody","tfoot"],G_:["tbody"],H_:["tr","tbody"],I_:["td","th","tr"],J_:["td","th","tr"]};var Nl,Il=qe,zl=Fe,Bl=ke,jl=/[-\/\\^$*+?.()|[\]{}]/g,ql=Ve,Gl=/^<!--\s*/,Fl=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,kl=/\s*-->/,Vl=Ke,Kl=/^#\s*partial\s+/,Wl=We,Zl=Ze,Xl=[Lf,Cf,Kf,zf,If,Pf],Yl=[Df],Jl=[Cf,Kf,If],Ql=void 0,$l=[Nc,Yf,Il,zl],tp=[ql,Vl];Ql=Vu.extend({init:function(t,e){var n=e.WT||["{{{","}}}"],i=e.N_||["[[","]]"],r=e.O_||["[[[","]]]"];this.UW=e.VT||["{{","}}"],this.tags=[{LW:!1,P_:!1,open:this.UW[0],close:this.UW[1],KW:Xl},{LW:!1,P_:!0,open:n[0],close:n[1],KW:Yl},{LW:!0,P_:!1,open:i[0],close:i[1],KW:Jl},{LW:!0,P_:!0,open:r[0],close:r[1],KW:Yl}],this.JW(),this.WW=0,this.L_=[],this.Wb={Q_:!e.Wb||e.Wb.Q_!==!1,style:!e.Wb||e.Wb.style!==!1},e.TT===!0&&(e.TT={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),R_:!0}),this.UT=e.UT!==!1,this.ST=e.ST,this.M_=e.TT&&e.TT.elements,this.K_=e.TT&&e.TT.R_,this.MW=e.MW},xW:function(t){return t.length?(this.WW>0&&this.error("A section was left open"),cl(t[0].RT,this.UT,this.ST,!this.ST,!this.ST),t[0]):{RT:[],QT:ss}},yW:[Wl],JW:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var ep,np,ip,rp=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],op={S_:Je,T_:Qe,U_:$e,V_:tn,W_:Xe,parse:Ye},ap=op,sp={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.Sf,"function"==typeof i?e.Sf=i:e.Sf=on(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.Sf:t.prototype.Sf,"function"==typeof i&&(r=i,i=nn(e,r),e.wT.Sf={fR:r,result:i}),i=on(i,e),e.Sf=i.RT,i.m&&an(e.Y_,i.m)},reset:function(t){var e,n=en(t);if(n)return e=on(n,t),t.Sf=e.RT,an(t.Y_,e.m,!0),!0}},hp=sp;ep=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],np=function(t,e){this.name=t,this.Z_=e},np.prototype={constructor:np,extend:function(t,e,n){this.__(this.Z_?t.Mb:t,this.Z_?e:e.constructor,n)},init:function(){},__:function(t,e,n){var i,r=this.name,o=n[r];i=Ts(t[r]);for(var a in o)i[a]=o[a];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i.a0&&(i.a0.b0?e[t]=i.a0:delete e[t],n=!0)}),n}},ip=ep.map(function(t){return new np(t,"computed"===t)});var up,cp,fp,lp,pp,dp,Ep=ip,vp=sn,gp=fn;lp={$T:Uu,eU:zu,data:ju,Sf:hp},fp=Object.keys(us),dp=dn(fp.filter(function(t){return!lp[t]})),pp=dn(fp.concat(Ep.map(function(t){return t.name}))),cp=[].concat(fp.filter(function(t){return!Ep[t]&&!lp[t]}),Ep,lp.data,lp.Sf,lp.eU),up={extend:function(t,e,n){return ln("extend",t,e,n)},init:function(t,e,n){return ln("init",t,e,n)},reset:function(t){return cp.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:cp};var mp=up,yp=En,Tp=vn,Rp=gn,wp=mn,Hp=yn,bp=Tn,xp=Rn,Ap=wn,_p=Hn,Mp=bn,Up=xn,Op=An,Sp=function(){return e(this.cw)},Dp=function(t){this.type=Ku,this.text=t.Sf};Dp.prototype={detach:Sp,j0:function(){return this.cw},Dx:function(){return this.cw||(this.cw=document.createTextNode(this.text)),this.cw},toString:function(t){return t?_e(this.text):this.text},QU:function(t){if(t)return this.detach()}};var Cp=Dp,Lp=_n,Pp=Mn,Np=function(t,e,n){var i;this.uV=e,this.q0=!1,this.root=t.root,this.NU=t.NU,this.RU=n,i=sh(t.root,e,t.NU),void 0!=i?this.resolve(i):dh.pV(this)};Np.prototype={resolve:function(t){this.OU&&!t&&dh.pV(this),this.q0=!0,this.OU=t,this.RU(t)},r0:function(){this.resolve(b(this.uV))},s0:function(t,e){var n;void 0!=this.OU&&(n=this.OU.replace(t,e),void 0!==n&&this.resolve(n))},Aw:function(){this.q0||dh.qV(this)}};var Ip=Np,zp=function(t,e,n){this.NU=t.NU,this.uV=e,this.RU=n,this.s0()},Bp={t0:{prefix:"c",K$:["context"]},u0:{prefix:"i",K$:["index"]},v0:{prefix:"k",K$:["key","index"]}};zp.prototype={s0:function(){var t,e=this.uV,n=this.NU,i=Bp[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.w0)return this.RU(b("@"+i.prefix+Un(this.w0,i)));if(i.K$.indexOf("index")!==-1||i.K$.indexOf("key")!==-1)for(;n;){if(n.JV.x0===Ac&&void 0!==(t=Un(n,i)))return this.w0=n,n.y0(this),this.RU(b("@"+i.prefix+t));n=!n.parent&&n.JV&&n.JV.rU&&n.JV.rU.NU&&!n.JV.rU.iV._T?n.JV.rU.NU:n.parent}else for(;n;){if(void 0!==(t=Un(n,i)))return this.RU(b("@"+i.prefix+t.vU));n=n.parent}},Aw:function(){this.w0&&this.w0.z0(this)}};var jp=zp,qp=function(t,e,n){this.NU=t.NU,this.uV=e,this.RU=n,e.uV.sU.y0(this),this.s0()};qp.prototype={s0:function(){var t,e=this.uV.uV;t="k"===e.uV.RT?"k"+e.sU.key:"i"+e.sU.index,void 0!==t&&this.RU(b("@"+t))},Aw:function(){this.uV.uV.sU.z0(this)}};var Gp=qp,Fp=On;On.resolve=function(t){var e,n,i={};for(e in t.A0)n=t.A0[e],i[n.uV.n]="k"===n.uV.RT?n.sU.key:n.sU.index;return i};var kp,Vp=Sn,Kp=Dn,Wp={},Zp=Function.prototype.bind;kp=function(t,e,n,i){var r,o=this;r=t.root,this.root=r,this.NU=e,this.RU=i,this.JV=t,this.vU=n.Ri,this.E0=[],this.pending=n.r.length,this.F0=n.r.map(function(t,e){return Vp(o,t,function(t){o.resolve(e,t)})}),this.gR=!0,this.i0()},kp.prototype={i0:function(){this.gR&&(this.G0=Ln(this.vU,this.E0),this.OU=Pn(this.G0),this.H0(),this.RU(this.OU))},Aw:function(){for(var t;t=this.F0.pop();)t.Aw()},resolve:function(t,e){this.E0[t]=e,this.i0()},H0:function(){var t,e,n,i,r,o=this;i=this.OU,t=this.root.EU.GU[i.vU],t?this.root.EU.mark(i):(r=Kp(this.vU,this.F0.length),e=this.E0.map(function(t){var e;return"undefined"===t?function(){}:t.wU?(e=t.value,function(){return e}):function(){var e=o.root.EU.get(t,{dW:!0,eW:!0});return"function"==typeof e&&(e=In(e,o.root)),e}}),n={I0:this.E0.filter(Nn),J0:function(){var t=e.map(Cn);return r.apply(null,t)}},t=this.root.EU.K0(i,n))},s0:function(t,e){this.F0.forEach(function(n){return n.s0(t,e)})}};var Xp=kp,Yp=function(t,e,n){var i=this;this.p0=e,this.root=e.root,this.NU=n,this.EU=e.root.EU,"string"==typeof t?this.value=t:t.RT===vc?this.N0=Vp(this,t.n,function(t){i.resolve(t)}):new Xp(e,n,t,function(t){i.resolve(t)})};Yp.prototype={resolve:function(t){this.OU&&this.EU.unregister(this.OU,this),this.OU=t,this.value=this.EU.get(t),this.bind(),this.p0.i0()},bind:function(){this.EU.register(this.OU,this)},s0:function(t,e){this.N0&&this.N0.s0(t,e)},fw:function(t){this.value=t,this.p0.i0()},Aw:function(){this.OU&&this.EU.unregister(this.OU,this),this.N0&&this.N0.Aw()},r0:function(){this.N0&&this.N0.r0()}};var Jp=Yp,Qp=function(t,e,n){var i,r,o,a,s=this;this.NU=a=t.NU,this.root=i=t.root,this.O0=t,this.uV=r=e.r,this.RU=n,this.P0=[],(o=sh(i,r,a))?this.rW=o:this.Q0=new Ip(this,r,function(t){s.rW=t,s.Q0=null,s.i0()}),this.R0=e.OW.map(function(t){return new Jp(t,s,a)}),this.gR=!0,this.i0()};Qp.prototype={S0:function(){var t=this.R0.map(zn);return!t.every(Bn)||this.Q0?null:this.rW.join(t.join("."))},i0:function(){this.gR&&!this.Q0&&this.RU(this.S0())},Aw:function(){this.R0.forEach(Z)},s0:function(t,e){var n;if(this.rW){var i=this.rW.replace(t,e);i&&i!==this.rW&&(this.rW=i,n=!0)}this.R0.forEach(function(i){i.s0(t,e)&&(n=!0)}),n&&this.i0()},r0:function(){this.Q0&&(this.rW=b(this.uV),this.Q0.Aw(),this.Q0=null),this.R0.forEach(jn),this.i0()}};var $p=Qp,td=qn,ed=Gn,nd=Fn,id={ew:Pp,init:td,resolve:ed,s0:nd},rd=function(t){this.type=Wu,id.init(this,t)};rd.prototype={update:function(){this.cw.data=void 0==this.value?"":this.value},resolve:id.resolve,s0:id.s0,detach:Sp,Aw:Lp,Dx:function(){return this.cw||(this.cw=document.createTextNode(n(this.value))),this.cw},QU:function(t){t&&e(this.cw)},ew:id.ew,fw:function(t){var e;this.OU&&(e=this.root.EU.HU[this.OU.vU])&&(t=e.get()),s(t,this.value)||(this.value=t,this.NU.i0(),this.cw&&dh.oV(this))},j0:function(){return this.cw},toString:function(t){var e=""+n(this.value);return t?_e(e):e}};var od=rd,ad=kn,sd=Vn,hd=Kn,ud=Wn,cd=Zn,fd=Xn,ld=Yn,pd=Jn,dd=Qn,Ed=function(t,e){id.s0.call(this,t,e)},vd=ti,gd=ei,md=li,yd=pi,Td=di,Rd=gi,wd=function(t){this.type=Xu,this.c1=this.x0=t.Sf.n,this.e1=this.c1===xc,this.n0=t.n0,this.IV=[],this.Z0=[],this.a1=[],this.X0=[],t.Sf.VW&&(this.B0=t.Sf.VW.split(",").map(function(t,e){return{n:t,RT:0===e?"k":"i"}})),this._0=[],this.length=0,id.init(this,t)};wd.prototype={i0:ad,detach:sd,find:hd,RV:ud,TV:cd,UV:fd,k0:ld,j0:pd,C0:function(t){if(this.B0)for(var e=this.B0.length;e--;){var n=this.B0[e];if(n.n===t)return n}},ew:id.ew,Qd:dd,s0:Ed,Dx:vd,resolve:id.resolve,fw:gd,toString:md,Aw:yd,QU:Td,update:Rd};var Hd,bd,xd=wd,Ad=mi,_d=yi,Md=Ti,Ud=Ri,Od={};try{fs("table").innerHTML="foo"}catch(t){Hd=!0,bd={g1:['<table class="x">',"</table>"],h1:['<table><thead class="x">',"</thead></table>"],i1:['<table><tbody class="x">',"</tbody></table>"],j1:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Sd=function(t,e,n){var i,r,o,a,s,h=[];if(null!=t&&""!==t){for(Hd&&(r=bd[e.tagName])?(i=wi("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(o=i.options[i.selectedIndex])):e.namespaceURI===rs.mU?(i=wi("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=wi(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(o=i.options[i.selectedIndex]));a=i.firstChild;)h.push(a),n.appendChild(a);if("SELECT"===e.tagName)for(s=h.length;s--;)h[s]!==o&&(h[s].selected=!1)}return h},Dd=Hi,Cd=xi,Ld=Ai,Pd=_i,Nd=Mi,Id=Ui,zd=function(t){this.type=Zu,id.init(this,t)};zd.prototype={detach:Ad,find:_d,RV:Md,j0:Ud,ew:id.ew,s0:id.s0,Dx:Cd,resolve:id.resolve,fw:Ld,toString:Pd,Aw:Lp,QU:Nd,update:Id};var Bd,jd,qd,Gd,Fd=zd,kd=function(){this.NU.i0()},Vd=Oi,Kd=function(t){return this.cw?ls(this.cw,t)?this.cw:this.sU&&this.sU.find?this.sU.find(t):void 0:null},Wd=function(t,e){e.NV(this,!0)&&e.MV&&(this.EV||(this.EV=[])).push(e),this.sU&&this.sU.RV(t,e)},Zd=function(t,e){this.sU&&this.sU.TV(t,e)},Xd=function(t){if(this.sU)return this.sU.UV(t)},Yd=Si,Jd=Di,Qd=Ci,$d=/^true|on|yes|1$/i,tE=/^[0-9]+$/,eE=function(t,e){var n,i,r;return r=e.a||{},i={},n=r.aU,void 0!==n&&(i.aU=0===n||$d.test(n)),n=r.bU,void 0!==n&&(0!==n&&tE.test(n)?i.bU=parseInt(n):i.bU=0===n||$d.test(n)),i},nE=Li;Bd="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),jd="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),qd=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Gd=qd(Bd.concat(jd));var iE=function(t){var e=t.toLowerCase();return Gd[e]||e},rE=function(t,e){var n,i;if(n=e.indexOf(":"),n===-1||(i=e.substr(0,n),"xmlns"===i))t.name=t.o1.m1!==rs.kU?iE(e):e;else if(e=e.substring(n+1),t.name=iE(e),t.m1=rs[i.toLowerCase()],t.n1=i,!t.m1)throw'Unknown namespace ("'+i+'")'},oE=Pi,aE=Ni,sE=Ii,hE=zi,uE={s1:"acceptCharset",t1:"accessKey",u1:"bgColor",v1:"className",w1:"codeBase",z1:"colSpan",A1:"contentEditable",B1:"dateTime",C1:"dirName",for:"htmlFor",D1:"httpEquiv",E1:"isMap",F1:"maxLength",G1:"noValidate",H1:"pubDate",I1:"readOnly",J1:"rowSpan",K1:"tabIndex",L1:"useMap"},cE=Bi,fE=qi,lE=Gi,pE=Fi,dE=ki,EE=Vi,vE=Ki,gE=Wi,mE=Zi,yE=Xi,TE=Yi,RE=Ji,wE=Qi,HE=$i,bE=tr,xE=function(t){this.init(t)};xE.prototype={i0:nE,init:aE,s0:sE,Dx:hE,toString:cE,Aw:fE,update:bE};var AE,_E=xE,ME=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new _E({o1:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(AE=fs("div"));var UE=function(t,e){this.o1=t,this.root=t.root,this.NU=t.NU,this.attributes=[],this.sU=new gy({root:t.root,JV:this,Sf:[e]})};UE.prototype={i0:function(){this.cw&&this.update(),this.o1.i0()},s0:function(t,e){this.sU.s0(t,e)},Dx:function(t){this.cw=t,this.R1=t.namespaceURI===rs.mU,this.update()},Aw:function(){this.sU.Aw()},update:function(){var t,e,n=this;t=this.sU.toString(),e=er(t,this.R1),this.attributes.filter(function(t){return nr(e,t)}).forEach(function(t){n.cw.removeAttribute(t.name)}),e.forEach(function(t){n.cw.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.sU.toString()}};var OE=UE,SE=function(t,e){return e?e.map(function(e){return new OE(t,e)}):[]},DE=function(t){var e,n,i,r;if(this.o1=t,this.root=t.root,this.S1=t.attributes[this.name||"value"],e=this.S1.wV,e.T0=this,n=e.OU){if("}"===n.vU.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.p0.G0,t.name,{qU:this.root}),!1;if(n.wU)return v("Two-way binding does not work with %s",e.p0.uV,{qU:this.root}),!1}else{var o=e.Sf.r?"'"+e.Sf.r+"' reference":"expression";E("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",o,{qU:this.root}),e.p0.r0(),n=e.OU}this.S1.M1=!0,this.OU=n,i=this.root.EU.get(n),void 0===i&&this.T1&&(i=this.T1(),void 0!==i&&this.root.EU.set(n,i)),(r=ir(t))&&(this.U1=i,r.V1.push(this))};DE.prototype={P1:function(){var t=this;dh.start(this.root),this.S1.N1=!0,this.root.EU.set(this.OU,this.ew()),dh.sV(function(){return t.S1.N1=!1}),dh.end()},U0:function(){var t,e,n;e=this.OU,n=this.S1.wV.OU,e!==n&&(I(this.root.W1[e.vU],this),this.OU=n,t=this.root.W1[n.vU]||(this.root.W1[n.vU]=[]),t.push(this))},Aw:function(){}},DE.extend=function(t){var e,n=this;return e=function(t){DE.call(this,t),this.init&&this.init()},e.prototype=Ts(n.prototype),i(e.prototype,t),e.extend=DE.extend,e};var CE,LE=DE,PE=rr;CE=LE.extend({T1:function(){return""},ew:function(){return this.o1.cw.value},Dx:function(){var t,e=this.o1.cw,n=!1;this.tU=!0,t=this.root.bU,this.o1.bU===!0?t=!0:this.o1.bU===!1?t=!1:h(this.o1.bU)?(t=!1,n=+this.o1.bU):h(t||"")&&(n=+t,t=!1,this.o1.bU=n),this.X1=n?ar:PE,e.addEventListener("change",PE,!1),t||(e.addEventListener("input",this.X1,!1),e.attachEvent&&e.addEventListener("keyup",this.X1,!1)),e.addEventListener("blur",or,!1)},QU:function(){var t=this.o1.cw;this.tU=!1,t.removeEventListener("change",PE,!1),t.removeEventListener("input",this.X1,!1),t.removeEventListener("keyup",this.X1,!1),t.removeEventListener("blur",or,!1)}});var NE=CE,IE=NE.extend({T1:function(){return this.o1.sU?this.o1.sU.toString():""},ew:function(){return this.o1.cw.innerHTML}}),zE=IE,BE=sr,jE={},qE=LE.extend({name:"checked",init:function(){this.O1=BE(this.root.l0,"radio",this.o1.getAttribute("name")),this.O1.push(this)},Dx:function(){var t=this.o1.cw;t.addEventListener("change",PE,!1),t.attachEvent&&t.addEventListener("click",PE,!1)},QU:function(){var t=this.o1.cw;t.removeEventListener("change",PE,!1),t.removeEventListener("click",PE,!1)},P1:function(){dh.start(this.root),this.O1.forEach(function(t){t.root.EU.set(t.OU,t.ew())}),dh.end()},ew:function(){return this.o1.cw.checked},Aw:function(){I(this.O1,this)}}),GE=qE,FE=LE.extend({name:"name",init:function(){this.O1=BE(this.root.l0,"radioname",this.OU.vU),this.O1.push(this),this.Z1=!0},T1:function(){if(this.o1.getAttribute("checked"))return this.o1.getAttribute("value")},Dx:function(){var t=this.o1.cw;t.name="{{"+this.OU.vU+"}}",t.checked=this.root.EU.get(this.OU)==this.o1.getAttribute("value"),t.addEventListener("change",PE,!1),t.attachEvent&&t.addEventListener("click",PE,!1)},QU:function(){var t=this.o1.cw;t.removeEventListener("change",PE,!1),t.removeEventListener("click",PE,!1)},ew:function(){var t=this.o1.cw;return t.GV?t.GV.value:t.value},P1:function(){this.o1.cw.checked&&LE.prototype.P1.call(this)},U0:function(t,e){var n;LE.prototype.U0.call(this,t,e),(n=this.o1.cw)&&(n.name="{{"+this.OU.vU+"}}")},Aw:function(){I(this.O1,this)}}),kE=FE,VE=LE.extend({name:"name",T1:function(){return this._1=!0,[]},init:function(){var t,e;this.a2=!0,this.O1=BE(this.root.l0,"checkboxes",this.OU.vU),this.O1.push(this),this._1&&(this.O1._1=!0),this.O1._1&&this.o1.getAttribute("checked")&&(t=this.root.EU.get(this.OU),e=this.o1.getAttribute("value"),t.push(e))},Aw:function(){I(this.O1,this)},Dx:function(){var t,e,n=this.o1.cw;t=this.root.EU.get(this.OU),e=this.o1.getAttribute("value"),o(t)?this.Q1=C(t,e):this.Q1=t==e,n.name="{{"+this.OU.vU+"}}",n.checked=this.Q1,n.addEventListener("change",PE,!1),n.attachEvent&&n.addEventListener("click",PE,!1)},QU:function(){var t=this.o1.cw;t.removeEventListener("change",PE,!1),t.removeEventListener("click",PE,!1)},b2:function(){var t=!!this.Q1;return this.Q1=this.o1.cw.checked,this.Q1===t},P1:function(){this.Q1=this.o1.cw.checked,LE.prototype.P1.call(this)},ew:function(){return this.O1.filter(hr).map(ur)}}),KE=VE,WE=LE.extend({name:"checked",Dx:function(){var t=this.o1.cw;t.addEventListener("change",PE,!1),t.attachEvent&&t.addEventListener("click",PE,!1)},QU:function(){var t=this.o1.cw;t.removeEventListener("change",PE,!1),t.removeEventListener("click",PE,!1)},ew:function(){return this.o1.cw.checked}}),ZE=WE,XE=LE.extend({T1:function(){var t,e,n,i,r=this.o1.options;if(void 0===this.o1.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.o1.attributes.value.value=n),n}},Dx:function(){this.o1.cw.addEventListener("change",PE,!1)},QU:function(){this.o1.cw.removeEventListener("change",PE,!1)},fw:function(t){this.root.EU.set(this.OU,t)},ew:function(){var t,e,n,i,r;for(t=this.o1.cw.options,n=t.length,e=0;e<n;e+=1)if(i=t[e],t[e].selected)return r=i.GV?i.GV.value:i.value},c2:function(){var t=this,e=this.ew();void 0!==e&&(this.S1.N1=!0,dh.sV(function(){return t.S1.N1=!1}),this.root.EU.set(this.OU,e))}}),YE=XE,JE=YE.extend({T1:function(){return this.o1.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},Dx:function(){var t;this.o1.cw.addEventListener("change",PE,!1),t=this.root.EU.get(this.OU),void 0===t&&this.P1()},QU:function(){this.o1.cw.removeEventListener("change",PE,!1)},fw:function(){throw new Error("TODO not implemented yet")},ew:function(){var t,e,n,i,r,o;for(t=[],e=this.o1.cw.options,i=e.length,n=0;n<i;n+=1)r=e[n],r.selected&&(o=r.GV?r.GV.value:r.value,t.push(o));return t},P1:function(){var t,e,n;return t=this.S1,e=t.value,n=this.ew(),void 0!==e&&L(n,e)||YE.prototype.P1.call(this),this},c2:function(){var t=this,e=this.ew();void 0!==e&&(this.S1.N1=!0,dh.sV(function(){return t.S1.N1=!1}),this.root.EU.set(this.OU,e))},d2:function(){void 0!==this.S1.value&&this.S1.value.length||this.root.EU.set(this.OU,this.e2)}}),QE=JE,$E=LE.extend({Dx:function(){this.o1.cw.addEventListener("change",PE,!1)},QU:function(){this.o1.cw.removeEventListener("change",PE,!1)},ew:function(){return this.o1.cw.files}}),tv=$E,ev=NE.extend({T1:function(){},ew:function(){var t=parseFloat(this.o1.cw.value);return isNaN(t)?void 0:t}}),nv=cr,iv=lr,rv=pr,ov=dr,av=Er,sv=/^event(?:\.(.+))?/,hv=yr,uv=Tr,cv={},fv={q2:!0,s2:!0,t2:!0,u2:!0,v2:!0},lv=wr,pv=Hr,dv=br,Ev=xr,vv=Ar,gv=function(t,e,n){this.init(t,e,n)};gv.prototype={i0:iv,MU:rv,f2:ov,init:av,h2:uv,s0:lv,Dx:pv,resolve:dv,Aw:Ev,QU:vv};var mv=gv,yv=function(t,e){var n,i,r,o,a=[];for(i in e)if(e.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)o=new mv(t,r[n],e[i]),a.push(o);return a},Tv=function(t,e){var n,i,r,o=this;this.o1=t,this.root=n=t.root,i=e.n||e,"string"!=typeof i&&(r=new gy({Sf:i,root:n,JV:t}),i=r.toString(),r.Aw(),""===i)||(e.a?this.iq=e.a:e.d&&(this.sU=new gy({Sf:e.d,root:n,JV:t}),this.iq=this.sU.n2(),this.sU.i0=function(){this.h0=this.g0=!0,o.iq=this.n2(),o.gR&&o.update()}),this.fR=g("decorators",n,i),this.fR||f(Ls(i,"decorator")))};Tv.prototype={init:function(){var t,e,n;if(t=this.o1.cw,this.iq?(n=[t].concat(this.iq),e=this.fR.apply(this.root,n)):e=this.fR.call(this.root,t),!e||!e.PU)throw new Error("Decorator definition must return an object with a teardown method");this.z2=e,this.gR=!0},update:function(){this.z2.update?this.z2.update.apply(this.root,this.iq):(this.z2.PU(!0),this.init())},s0:function(t,e){this.sU&&this.sU.s0(t,e)},PU:function(t){this.A2=!0,this.gR&&this.z2.PU(),!t&&this.sU&&this.sU.Aw()}};var Rv,wv,Hv,bv=Tv,xv=Cr,Av=Lr,_v=jr,Mv=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};ts?(wv={},Hv=fs("div").style,Rv=function(t){var e,n,i;if(t=Mv(t),!wv[t])if(void 0!==Hv[t])wv[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=as.length;e--;)if(n=as[e],void 0!==Hv[n+i]){wv[t]=n+i;break}return wv[t]}):Rv=null;var Uv,Ov,Sv=Rv;ts?(Ov=window.getComputedStyle||Hs.getComputedStyle,Uv=function(t){var e,n,i,r,a;if(e=Ov(this.cw),"string"==typeof t)return a=e[Sv(t)],"0px"===a&&(a=0),a;if(!o(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],a=e[Sv(r)],"0px"===a&&(a=0),n[r]=a;return n}):Uv=null;var Dv=Uv,Cv=function(t,e){var n;if("string"==typeof t)this.cw.style[Sv(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.cw.style[Sv(n)]=t[n]);return this},Lv=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.yV?(e=t.root.yV[t.yV],e||(v(Ls(t.yV,"easing")),e=qr)):e="function"==typeof t.yV?t.yV:qr,this.yV=e,this.start=Qs(),this.end=this.start+this.duration,this.$p=!0,gh.add(this)};Lv.prototype={vV:function(t){var e,n;return!!this.$p&&(t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.yV(e/this.duration),this.step&&this.step(n),!0))},stop:function(){this.abort&&this.abort(),this.$p=!1}};var Pv,Nv,Iv,zv,Bv,jv,qv,Gv,Fv=Lv,kv=new RegExp("^-(?:"+as.join("|")+")-"),Vv=function(t){return t.replace(kv,"")},Kv=new RegExp("^(?:"+as.join("|")+")([A-Z])"),Wv=function(t){var e;return t?(Kv.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},Zv={},Xv={};ts?(Nv=fs("div").style,function(){void 0!==Nv.transition?(Iv="transition",zv="transitionend",Bv=!0):void 0!==Nv.webkitTransition?(Iv="webkitTransition",zv="webkitTransitionEnd",Bv=!0):Bv=!1}(),Iv&&(jv=Iv+"Duration",qv=Iv+"Property",Gv=Iv+"TimingFunction"),Pv=function(t,e,n,i,r){setTimeout(function(){var o,a,s,h,u;h=function(){a&&s&&(t.root.MU(t.name+":end",t.cw,t.aV),r())},o=(t.cw.namespaceURI||"")+t.cw.tagName,t.cw.style[qv]=i.map(Sv).map(Wv).join(","),t.cw.style[Gv]=Wv(n.yV||"linear"),t.cw.style[jv]=n.duration/1e3+"s",u=function(e){var n;n=i.indexOf(Mv(Vv(e.propertyName))),n!==-1&&i.splice(n,1),i.length||(t.cw.removeEventListener(zv,u,!1),s=!0,h())},t.cw.addEventListener(zv,u,!1),setTimeout(function(){for(var r,c,f,l,p,d=i.length,v=[];d--;)l=i[d],r=o+l,Bv&&!Xv[r]&&(t.cw.style[Sv(l)]=e[l],Zv[r]||(c=t.Ti(l),Zv[r]=t.Ti(l)!=e[l],Xv[r]=!Zv[r],Xv[r]&&(t.cw.style[Sv(l)]=c))),Bv&&!Xv[r]||(void 0===c&&(c=t.Ti(l)),f=i.indexOf(l),f===-1?E("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{cw:t.cw}):i.splice(f,1),p=/[^\d]*$/.exec(e[l])[0],v.push({name:Sv(l),wV:Ns(parseFloat(c),parseFloat(e[l])),suffix:p}));v.length?new Fv({root:t.root,duration:n.duration,yV:Mv(n.yV||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.cw.style[n.name]=n.wV(e)+n.suffix},complete:function(){a=!0,h()}}):a=!0,i.length||(t.cw.removeEventListener(zv,u,!1),s=!0,h())},0)},n.Kc||0)}):Pv=null;var Yv,Jv,Qv,$v,tg,eg=Pv;if("undefined"!=typeof document){if(Yv="hidden",tg={},Yv in document)Qv="";else for($v=as.length;$v--;)Jv=as[$v],Yv=Jv+"Hidden",Yv in document&&(Qv=Jv);void 0!==Qv?(document.addEventListener(Qv+"visibilitychange",Gr),Gr()):("onfocusout"in document?(document.addEventListener("focusout",Fr),document.addEventListener("focusin",kr)):(window.addEventListener("pagehide",Fr),window.addEventListener("blur",Fr),window.addEventListener("pageshow",kr),window.addEventListener("focus",kr)),tg.hidden=!1)}var ng,ig,rg,og=tg;ts?(ig=window.getComputedStyle||Hs.getComputedStyle,ng=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(og.hidden)return this.Fi(t,e),rg||(rg=oh.resolve());"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new oh(function(t){var e,o,a,s,h,u,c;if(!n.duration)return r.Fi(i),void t();for(e=Object.keys(i),o=[],a=ig(r.cw),h={},u=e.length;u--;)c=e[u],s=a[Sv(c)],"0px"===s&&(s=0),s!=i[c]&&(o.push(c),r.cw.style[Sv(c)]=s);return o.length?void eg(r,i,n,o,t):void t()});return o}):ng=null;var ag=ng,sg=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},hg=Vr,ug=function(t,e,n){this.init(t,e,n)};ug.prototype={init:_v,start:hg,Ti:Dv,Fi:Cv,I2:ag,J2:sg};var cg,fg,lg=ug,pg=Wr;cg=function(){var t=this.cw,e=this.sU.toString(!1);if(window&&window.K2&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},fg=function(){this.cw.type&&"text/javascript"!==this.cw.type||E("Script tag was updated. This does not cause the code to be re-evaluated!",{qU:this.root}),this.cw.text=this.sU.toString(!1)};var dg=function(){var t,e;return this.Sf.y?"<!DOCTYPE"+this.Sf.z_+">":(t="<"+this.Sf.e,t+=this.attributes.map($r).join("")+this.C2.map($r).join(""),"option"===this.name&&Jr(this)&&(t+=" selected"),"input"===this.name&&Qr(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=_e(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.sU&&(e="script"!==this.name&&"style"!==this.name,t+=this.sU.toString(e)),yf.test(this.Sf.e)||(t+="</"+this.Sf.e+">"),t)},Eg=to,vg=eo,gg=function(t){this.init(t)};gg.prototype={i0:kd,detach:Vd,find:Kd,RV:Wd,TV:Zd,UV:Xd,k0:Yd,j0:Jd,getAttribute:Qd,init:xv,s0:Av,Dx:pg,toString:dg,Aw:Eg,QU:vg};var mg=gg,yg=/^\s*$/,Tg=/^\s*/,Rg=function(t){var e,n,i,r;return e=t.split("\n"),n=e[0],void 0!==n&&yg.test(n)&&e.shift(),i=N(e),void 0!==i&&yg.test(i)&&e.pop(),r=e.reduce(io,null),r&&(t=e.map(function(t){return t.replace(r,"")}).join("\n")),t},wg=ro,Hg=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},bg='Could not find template for partial "%s"',xg=function(t){var e,n;e=this.NU=t.NU,this.root=e.root,this.type=$u,this.index=t.index,this.name=t.Sf.r,this.tU=!1,this.sU=this.M2=this.N2=null,id.init(this,t),this.OU||((n=wg(this.root,this.name,e))?(Lp.call(this),this.O2=!0,this.P2(n)):v(bg,this.name))};xg.prototype={i0:function(){this.NU.i0()},detach:function(){return this.sU.detach()},find:function(t){return this.sU.find(t)},RV:function(t,e){return this.sU.RV(t,e)},UV:function(t){return this.sU.UV(t)},TV:function(t,e){return this.sU.TV(t,e)},j0:function(){return this.sU.j0()},k0:function(){return this.NU.k0(this)},Q2:function(){return this.O2&&this.name?this.name:void 0===this.value?this.name:this.value},ew:function(){return this.sU.ew()},s0:function(t,e){this.O2||nd.call(this,t,e),this.sU&&this.sU.s0(t,e)},Dx:function(){return this.$0=document.createDocumentFragment(),this.update(),this.tU=!0,this.$0},resolve:id.resolve,fw:function(t){var e;void 0!==t&&t===this.value||(void 0!==t&&(e=wg(this.root,""+t,this.NU)),!e&&this.name&&(e=wg(this.root,this.name,this.NU))&&(Lp.call(this),this.O2=!0),e||v(bg,this.name,{qU:this.root}),this.value=t,this.P2(e||[]),this.i0(),this.tU&&dh.oV(this))},P2:function(t){this.sU&&(this.sU.Aw(),this.tU&&(this.N2=this.sU)),this.sU=new gy({Sf:t,root:this.root,JV:this,n0:this.NU.n0}),this.M2=this.sU},toString:function(t){var e,n,i,r;return e=this.sU.toString(t),n=this.NU.HV[this.index-1],n&&n.type===Ku?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?Hg(e,r[0]):e):e},Aw:function(){this.O2||Lp.call(this),this.sU&&this.sU.Aw()},QU:function(t){this.tU&&(this.sU&&this.sU.QU(t),this.tU=!1)},update:function(){var t,e;this.N2&&(this.N2.QU(!0),this.N2=null),this.M2&&(this.$0.appendChild(this.M2.Dx()),this.M2=null),this.tU&&(t=this.NU.d1(),e=this.NU.k0(this),t.insertBefore(this.$0,e))}};var Ag,_g,Mg,Ug=xg,Og=uo,Sg=co,Dg=new eh("detach"),Cg=fo,Lg=lo,Pg=po,Ng=Eo,Ig=vo,zg=go,Bg=function(t,e,n,i){var r=t.root,o=t.OU;i?r.EU.oW(o,e,i):r.EU.mark(o)},jg=[],qg=["pop","push","reverse","shift","sort","splice","unshift"];qg.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,o,a,s;for(r=du(this,t,n),o=Array.prototype[t].apply(this,arguments),dh.start(),this.GV.S2=!0,s=this.GV.T2.length;s--;)a=this.GV.T2[s],dh.kV(a.root),Bg(a,this,t,r);return dh.end(),this.GV.S2=!1,o};Rs(jg,t,{value:e})}),Ag={},Ag.__proto__?(_g=function(t){t.__proto__=jg},Mg=function(t){t.__proto__=Array.prototype}):(_g=function(t){var e,n;for(e=qg.length;e--;)n=qg[e],Rs(t,n,{value:jg[n],ZR:!0})},Mg=function(t){var e;for(e=qg.length;e--;)delete t[qg[e]]}),_g.U2=Mg;var Gg,Fg,kg,Vg=_g;Gg={filter:function(t){return o(t)&&(!t.GV||!t.GV.S2)},wrap:function(t,e,n){return new Fg(t,e,n)}},Fg=function(t,e,n){this.root=t,this.value=e,this.OU=b(n),e.GV||(Rs(e,"_ractive",{value:{T2:[],ft:[],S2:!1},ZR:!0}),Vg(e)),e.GV.ft[t.l0]||(e.GV.ft[t.l0]=0,e.GV.ft.push(t)),e.GV.ft[t.l0]+=1,e.GV.T2.push(this)},Fg.prototype={get:function(){return this.value},PU:function(){var t,e,n,i,r;if(t=this.value,e=t.GV,n=e.T2,i=e.ft,e.S2)return!1;if(r=n.indexOf(this),r===-1)throw new Error(kg);if(n.splice(r,1),n.length){if(i[this.root.l0]-=1,!i[this.root.l0]){if(r=i.indexOf(this.root),r===-1)throw new Error(kg);i.splice(r,1)}}else delete t.GV,Vg.U2(this.value)}},kg="Something went wrong in a rather interesting way";var Kg,Wg,Zg=Gg,Xg=/^\s*[0-9]+\s*$/,Yg=function(t){return Xg.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Kg={filter:function(t,e,n){var i,r;return!!e&&(e=b(e),!((i=n.EU.HU[e.parent.vU])&&!i.YT)&&(r=n.EU.get(e.parent),(!o(r)||!/^[0-9]+$/.test(e.yU))&&(r&&("object"==typeof r||"function"==typeof r))))},wrap:function(t,e,n){return new Wg(t,e,n)}},Wg=function(t,e,n){var i,r,o;return n=b(n),this.YT=!0,this.qU=t,this.OU=n,this.value=e,this.K$=n.yU,i=n.parent,this.V2=i.AU?t.EU.data:t.EU.get(i),
r=this.W2=Object.getOwnPropertyDescriptor(this.V2,this.K$),r&&r.set&&(o=r.set.X2)?void(o.indexOf(this)===-1&&o.push(this)):void mo(this,e,r)},Wg.prototype={get:function(){return this.value},reset:function(t){if(!this.updating)return this.updating=!0,this.V2[this.K$]=t,dh.kV(this.qU),this.qU.EU.mark(this.OU,{Y2:!0}),this.updating=!1,!0},set:function(t,e){this.updating||(this.V2[this.K$]||(this.updating=!0,this.V2[this.K$]=Yg(t),this.updating=!1),this.V2[this.K$][t]=e)},PU:function(){var t,e,n,i,r;return!this.updating&&(t=Object.getOwnPropertyDescriptor(this.V2,this.K$),e=t&&t.set,void(e&&(i=e.X2,r=i.indexOf(this),r!==-1&&i.splice(r,1),i.length||(n=this.V2[this.K$],Object.defineProperty(this.V2,this.K$,this.W2||{PV:!0,Bq:!0,ZR:!0}),this.V2[this.K$]=n))))}}}catch(t){Kg=!1}var Jg,Qg,$g=Kg;$g&&(Jg={filter:function(t,e,n){return $g.filter(t,e,n)&&Zg.filter(t)},wrap:function(t,e,n){return new Qg(t,e,n)}},Qg=function(t,e,n){this.value=e,this.YT=!0,this.Z2=$g.wrap(t,e,n),this._2=Zg.wrap(t,e,n)},Qg.prototype={get:function(){return this.value},PU:function(){this._2.PU(),this.Z2.PU()},reset:function(t){return this.Z2.reset(t)}});var tm=Jg,em=yo,nm={},im=wo,rm=Ho,om=Ao,am=So,sm=Do,hm=function(t,e){this.i3=t,this.EU=t.EU,this.uV=e,this.root=this.EU.qU,this.NU=this.root.rU&&this.root.rU.NU};hm.prototype={resolve:function(t){this.i3.j3.push(t),this.i3.l3[t.vU]=null,this.EU.register(t,this.i3,"computed")}};var um=hm,cm=function(t,e){this.key=t,this.J0=e.J0,this.m3=e.m3,this.n3=e.I0||[],this.j3=[],this.l3={},this.o3={},this.KV=this.q3=!0};cm.prototype={constructor:cm,init:function(t){var e,n=this;this.EU=t,this.r3=!0,e=t.get(this.key),t.b3(this.key.vU),this.r3=!1,this.m3&&void 0!==e&&this.set(e),this.n3&&this.n3.forEach(function(e){return t.register(e,n,"computed")})},c3:function(){this.KV=!0},get:function(){var t,e,n=this,i=!1;if(this.s3){var r="The "+this.key.vU+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return d(r),this.value}if(this.s3=!0,this.KV){if(this.q3||!this.n3.length&&!this.j3.length?i=!0:[this.n3,this.j3].forEach(function(t){var e,r,o;if(!i)for(o=t.length;o--;)if(e=t[o],r=n.EU.get(e),!s(r,n.o3[e.vU]))return n.o3[e.vU]=r,void(i=!0)}),i){this.EU.cW();try{this.value=this.J0()}catch(t){E('Failed to compute "%s"',this.key.vU),l(t.stack||t),this.value=void 0}t=this.EU.release(),e=this.t3(t),e&&[this.n3,this.j3].forEach(function(t){t.forEach(function(t){n.o3[t.vU]=n.EU.get(t)})})}this.KV=!1}return this.s3=this.q3=!1,this.value},set:function(t){if(this.S2)return void(this.value=t);if(!this.m3)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.m3(t)},t3:function(t){var e,n,i,r,o;for(n=this.j3,e=n.length;e--;)i=n[e],t.indexOf(i)===-1&&(r=!0,this.EU.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],n.indexOf(i)!==-1||this.n3&&this.n3.indexOf(i)!==-1||(r=!0,Co(this.EU,i)&&!this.l3[i.vU]?(o=new um(this,i.vU),t.splice(e,1),this.l3[i.vU]=o,dh.pV(o)):this.EU.register(i,this,"computed"));return r&&(this.j3=t.slice()),r}};var fm=cm,lm=Lo,pm={u3:!0},dm=Po,Em={},vm=Io,gm=zo,mm=function(t,e){this.w3=t,this.OU=e.OU,this.origin=e.origin,this.I0=[],this.P0=[],this.q0=!1};mm.prototype={r0:function(){this.OU=this.w3,this.x3()},get:function(t,e){if(this.q0)return this.origin.get(this.map(t),e)},ew:function(){if(this.OU)return this.origin.get(this.OU)},v3:function(t){this.y3=t,this.x3()},map:function(t){return void 0===typeof this.OU?this.w3:t.replace(this.w3,this.OU)},register:function(t,e,n){this.I0.push({OU:t,z3:e,group:n}),this.q0&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.OU&&this.Aw(!0),this.OU=t,this.x3()},set:function(t,e){this.q0||this.r0(),this.origin.set(this.map(t),e)},x3:function(){var t=this;void 0!==this.OU&&(this.q0=!0,this.I0.length&&(this.I0.forEach(function(e){var n=t.map(e.OU);if(t.origin.register(n,e.z3,e.group),e.z3.fw)e.z3.fw(t.origin.get(n));else{if(!e.z3.c3)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.z3.c3()}}),this.origin.mark(this.OU)))},fw:function(t){if(!this.OU)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.OU,t)},Aw:function(t){var e=this;t||delete this.y3.FU[this.w3],this.q0&&(this.I0.forEach(function(t){e.origin.unregister(e.map(t.OU),t.z3,t.group)}),this.A3&&this.origin.unregister(this.OU,this.A3))},unregister:function(t,e,n){var i,r;if(this.q0){for(i=this.I0,r=i.length;r--;)if(i[r].z3===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var ym=Bo,Tm=function(t,e){var n,i,r,o;return n={},i=0,r=t.map(function(t,r){var a,s,h;s=i,h=e.length;do{if(a=e.indexOf(t,s),a===-1)return o=!0,-1;s=a+1}while(n[a]&&s<h);return a===i&&(i+=1),a!==r&&(o=!0),n[a]=!0,a})},Rm=jo,wm={},Hm=Fo,bm=Vo,xm=Ko,Am=Wo,_m=Xo,Mm={B3:!0},Um={d3:!0},Om=Jo,Sm=Qo,Dm=function(t){var e,n,i=t.$T,r=t.data,o=t.qU,a=t.XT,s=t.FU;this.qU=o,this.f0=i,this.onchange=t.onchange,this.oc={},this.h3=Ts(null),this.I0={XT:Ts(null),default:Ts(null)},this.a3={XT:Ts(null),default:Ts(null)},this.kW=[],this.F3=Ts(null),this.HU=Ts(null),this.GU=Ts(null),this.g3=[],this.E3=[],this.jV=[],this.hW={},this.d3={},this.data=r,this.FU=Ts(null);for(e in s)this.map(b(e),s[e]);if(r)for(e in r)(n=this.FU[e])&&void 0===n.ew()&&n.fw(r[e]);for(e in a)s&&e in s&&f("Cannot map to a computed property ('%s')",e),this.K0(b(e),a[e]);this.gR=!0};Dm.prototype={$T:em,tV:om,cW:am,b3:sm,K0:lm,get:dm,init:vm,map:gm,mark:ym,nd:Rm,register:Hm,release:bm,reset:xm,set:Am,oW:_m,PU:Om,unregister:Sm};var Cm=Dm;ta.prototype={constructor:ta,J3:function(t){this.H3[t.l0]=!0},end:function(t){var e=t.parent;e&&this.H3[e.l0]?ea(this.I3,e).push(t):na(this,t),delete this.H3[t.l0]}};var Lm=ta,Pm=ia,Nm=/\$\{([^\}]+)\}/g,Im=new eh("construct"),zm=new eh("config"),Bm=new Lm("init"),jm=0,qm=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Gm=sa,Fm=la;la.prototype={i0:function(){this.B2||(this.B2=!0,dh.oV(this))},update:function(){this.RU(this.sU.ew()),this.B2=!1},s0:function(t,e){this.sU.s0(t,e)},Aw:function(){this.sU.Aw()}};var km=function(t,e,n,r,a){var s,h,u,c,f,l,p={},d={},v={},g=[];for(h=t.NU,u=t.root,a=a||{},i(p,a),a.content=r||[],p.N3=a.content,e.Mb.PT&&E("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=h;c;){if(c.JV.type===oc){f=c.JV.VV;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var i,r,a=n[e];if("string"==typeof a)i=bl(a),d[e]=i?i.value:a;else if(0===a)d[e]=!0;else{if(!o(a))throw new Error("erm wut");da(a)?(v[e]={origin:t.root.EU,OU:void 0},r=pa(t,a[0],function(t){t.wU?l?s.set(e,t.value):(d[e]=t.value,delete v[e]):l?s.EU.FU[e].resolve(t):v[e].OU=t})):r=new Fm(t,a,function(t){l?s.set(e,t):d[e]=t}),g.push(r)}}),s=Ts(e.prototype),Gm(s,{PT:null,append:!0,data:d,Y_:a,YT:u.YT||e.Mb.YT,ZT:u.ZT,$T:u.$T},{parent:u,rU:t,VV:f,FU:v,M3:p,D2:h.D2}),l=!0,t.O3=g,s},Vm=Ea,Km=function(t){var e,n;for(e=t.root;e;)(n=e.SV["_"+t.name])&&n.push(t.iV),e=e.parent},Wm=ga,Zm=ma,Xm=ya,Ym=Ta,Jm=Ra,Qm=new eh("teardown"),$m=Ha,ty=function(t,e){this.init(t,e)};ty.prototype={detach:Sg,find:Cg,RV:Lg,TV:Pg,UV:Ng,k0:Ig,j0:zg,init:Wm,s0:Zm,Dx:Xm,toString:Ym,Aw:Jm,QU:$m};var ey=ty,ny=function(t){this.type=tc,this.value=t.Sf.c};ny.prototype={detach:Sp,j0:function(){return this.cw},Dx:function(){return this.cw||(this.cw=document.createComment(this.value)),this.cw},toString:function(){return"<!--"+this.value+"-->"},QU:function(t){t&&this.cw.parentNode.removeChild(this.cw)}};var iy=ny,ry=function(t){var e,n;this.type=oc,this.VV=e=t.NU.root,this.rU=n=e.rU,this.VV=e,this.S3=t.NU,this.NU=n.NU;var i=this.name=t.Sf.n||"",r=e.L3[i];r||(E('Could not find template for partial "'+i+'"',{qU:t.root}),r=[]),this.sU=new gy({JV:this,root:e.parent,Sf:r,n0:this.S3.n0}),o(n.Q3[i])?n.Q3[i].push(this):n.Q3[i]=[this],dh.sV(function(){if(n.Q3[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};ry.prototype={detach:function(){return this.sU.detach()},find:function(t){return this.sU.find(t)},RV:function(t,e){return this.sU.RV(t,e)},UV:function(t){return this.sU.UV(t)},TV:function(t,e){return this.sU.TV(t,e)},k0:function(){return this.S3.k0(this)},j0:function(){return this.sU.j0()},ew:function(t){return this.sU.ew(t)},Dx:function(){return this.sU.Dx()},Aw:function(){this.sU.Aw()},QU:function(t){this.sU.QU(t),I(this.rU.Q3[this.name],this)},s0:function(t,e){this.sU.s0(t,e)},toString:function(){return this.sU.toString()}};var oy=ry,ay=function(t){this.T3=t.Sf.a};ay.prototype={init:Os,Dx:Os,QU:Os,PU:Os,toString:function(){return"<!DOCTYPE"+this.T3+">"}};var sy=ay,hy=ba,uy=Aa,cy=_a,fy=Ma,ly=Sa,py=Ca,dy=function(t){this.init(t)};dy.prototype={i0:yp,detach:Tp,find:Rp,RV:wp,TV:Hp,UV:bp,k0:xp,j0:Ap,n2:Mp,d1:Up,ew:Op,init:hy,s0:uy,y0:function(t){var e=this.Y0;e.indexOf(t)===-1&&e.push(t)},Dx:cy,toString:fy,Aw:ly,z0:function(t){var e=this.Y0;e.splice(e.indexOf(t),1)},QU:py};var Ey,vy,gy=dy,my=La,yy=["template","partials","components","decorators","events"],Ty=new eh("reset"),Ry=function(t,e){function n(e,i,r){r&&r.Y_[t]||e.forEach(function(e){e.type===$u&&e.Q2()===t&&i.push(e),e.sU&&n(e.sU.HV,i,r),o(e.IV)?n(e.IV,i,r):o(e.HV)?n(e.HV,i,r):e.type===rc&&e.iV&&n(e.iV.sU.HV,i,e.iV),e.type===Qu&&(o(e.attributes)&&n(e.attributes,i,r),o(e.C2)&&n(e.C2,i,r))})}var i,r=[];return n(this.sU.HV,r),this.Y_[t]=e,i=dh.start(this,!0),r.forEach(function(e){e.value=void 0,e.fw(t)}),dh.end(),i},wy=Pa,Hy=vu("reverse"),by=Na,xy=vu("shift"),Ay=vu("sort"),_y=vu("splice"),My=za,Uy=Ba,Oy=new eh("teardown"),Sy=qa,Dy=Ga,Cy=Fa,Ly=new eh("unrender"),Py=vu("unshift"),Ny=ka,Iy=new eh("update"),zy=Va,By={add:Xs,animate:Th,detach:wh,find:bh,RV:Ch,TV:Lh,UV:Ph,WV:Nh,XV:Ih,MU:qh,get:Gh,U3:kh,nd:Kh,observe:su,V3:hu,mW:fu,ET:lu,vd:pu,pop:gu,push:mu,Dx:xu,reset:my,W3:Ry,X3:wy,reverse:Hy,set:by,shift:xy,sort:Ay,splice:_y,Pf:My,PU:Uy,toggle:Sy,Y3:Dy,Z3:Dy,QU:Cy,unshift:Py,update:Ny,d2:zy},jy=function(t,e,n){return n||Wa(t,e)?function(){var n,i="_super"in this,r=this.d0;return this.d0=e,n=t.apply(this,arguments),i&&(this.d0=r),n}:t},qy=Za,Gy=Qa,Fy=function(t){var e,n,i={};return t&&(e=t.GV)?(i.qU=e.root,i.OU=e.OU.vU,i.index={},(n=Fp(e.FV.NU))&&(i.index=Fp.resolve(n)),i):i};Ey=function(t){return this instanceof Ey?void Gm(this,t):new Ey(t)},vy={uU:{PV:!0,value:!0},K3:{PV:!0,value:!0},extend:{value:Gy},_3:{value:Fy},parse:{value:Zl},Promise:{value:oh},mU:{value:os},YT:{value:is},VERSION:{value:"0.7.3"},f0:{PV:!0,value:{}},R2:{PV:!0,value:{}},a4:{PV:!0,value:{}},yV:{PV:!0,value:cs},o2:{PV:!0,value:{}},b4:{PV:!0,value:zs},Y_:{PV:!0,value:{}},c4:{PV:!0,value:{}}},ws(Ey,vy),Ey.prototype=i(By,us),Ey.prototype.constructor=Ey,Ey.Mb=Ey.prototype;var ky="function";if(typeof Date.now!==ky||typeof String.prototype.trim!==ky||typeof Object.keys!==ky||typeof Array.prototype.indexOf!==ky||typeof Array.prototype.forEach!==ky||typeof Array.prototype.map!==ky||typeof Array.prototype.filter!==ky||"undefined"!=typeof window&&typeof window.addEventListener!==ky)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Vy=Ey;return Vy});var SPE={R:{d4:1,P:2,e4:3},f4:4};"function"==typeof define&&define.hg?define("spe",SPE):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.Kb=SPE),SPE.g4=function(t,e,n,i){"use strict";this.h4=n||1,this.size=e||1,this.i4=t||Float32Array,this.ec=new t(e*this.h4),this.j4=i||0},SPE.g4.constructor=SPE.g4,SPE.g4.prototype.eH=function(t,e){"use strict";var n=this.ec.length;return e||(t*=this.h4),t<n?this.l4(t):t>n?this.m4(t):void console.info("TypedArray is already of size:",t+".","Will not resize.")},SPE.g4.prototype.l4=function(t){"use strict";return this.ec=this.ec.subarray(0,t),this.size=t,this},SPE.g4.prototype.m4=function(t){"use strict";var e=this.ec,n=new this.i4(t);return n.set(e),this.ec=n,this.size=t,this},SPE.g4.prototype.splice=function(t,e){"use strict";t*=this.h4,e*=this.h4;for(var n=[],i=this.ec,r=i.length,o=0;o<r;++o)(o<t||o>=e)&&n.push(i[o]);return this.Cn(0,n),this},SPE.g4.prototype.Cn=function(t,e){"use strict";var n=e.length,i=t+n;return i>this.ec.length?this.m4(i):i<this.ec.length&&this.l4(i),this.ec.set(e,this.j4+t),this},SPE.g4.prototype.n4=function(t,e){"use strict";return this.o4(t,e.x,e.y)},SPE.g4.prototype.o4=function(t,e,n){"use strict";var i=this.ec,r=this.j4+t*this.h4;return i[r]=e,i[r+1]=n,this},SPE.g4.prototype.q4=function(t,e){"use strict";return this.r4(t,e.x,e.y,e.z)},SPE.g4.prototype.r4=function(t,e,n,i){"use strict";var r=this.ec,o=this.j4+t*this.h4;return r[o]=e,r[o+1]=n,r[o+2]=i,this},SPE.g4.prototype.s4=function(t,e){"use strict";return this.t4(t,e.x,e.y,e.z,e.w)},SPE.g4.prototype.t4=function(t,e,n,i,r){"use strict";var o=this.ec,a=this.j4+t*this.h4;return o[a]=e,o[a+1]=n,o[a+2]=i,o[a+3]=r,this},SPE.g4.prototype.u4=function(t,e){"use strict";return this.Cn(this.j4+t*this.h4,e.elements)},SPE.g4.prototype.v4=function(t,e){"use strict";return this.Cn(this.j4+t*this.h4,e.elements)},SPE.g4.prototype.setColor=function(t,e){"use strict";return this.r4(t,e.r,e.Ci,e.b)},SPE.g4.prototype.w4=function(t,e){"use strict";return this.ec[this.j4+t*this.h4]=e,this},SPE.g4.prototype.x4=function(t){"use strict";return this.ec[this.j4+t]},SPE.g4.prototype.y4=function(t){"use strict";return this.ec.subarray(this.j4+t*this.h4)},SPE.z4=function(t,e,n){"use strict";var i=SPE.z4.A4;this.type="string"==typeof t&&i.hasOwnProperty(t)?t:"f",this.h4=i[this.type],this.B4=n||Float32Array,this.C4=null,this.D4=null,this.E4=!!e,this.F4=0,this.G4=0},SPE.z4.constructor=SPE.z4,SPE.z4.A4={f:1,SM:2,UM:3,H4:4,c:3,I4:9,J4:16},SPE.z4.prototype.K4=function(t,e){"use strict";this.F4=Math.min(t*this.h4,this.F4*this.h4),this.G4=Math.max(e*this.h4,this.G4*this.h4)},SPE.z4.prototype.L4=function(){"use strict";var t=this.D4,e=t.yr;e.offset=this.F4,e.count=Math.min(this.G4-this.F4+this.h4,this.C4.ec.length),t.Ar=!0},SPE.z4.prototype.M4=function(){"use strict";this.F4=0,this.G4=0},SPE.z4.prototype.N4=function(){"use strict";this.D4.xr=this.E4},SPE.z4.prototype.splice=function(t,e){"use strict";this.C4.splice(t,e),this.O4()},SPE.z4.prototype.O4=function(){"use strict";this.D4.ec=this.C4.ec,this.D4.yr.offset=0,this.D4.yr.count=-1,this.D4.xr=!1,this.D4.Ar=!0},SPE.z4.prototype.P4=function(t){"use strict";null!==this.C4&&this.C4.size===t*this.h4||(null!==this.C4&&this.C4.size!==t?this.C4.eH(t):null===this.C4&&(this.C4=new SPE.g4(this.B4,t,this.h4)))},SPE.z4.prototype.Q4=function(t){"use strict";return this.P4(t),null!==this.D4?(this.D4.ec=this.C4.ec,void(this.D4.Ar=!0)):(this.D4=new THREE.wr(this.C4.ec,this.h4),void(this.D4.xr=this.E4))},SPE.z4.prototype.qp=function(){"use strict";return null===this.C4?0:this.C4.ec.length},SPE.R4={XB:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),l:["uniform float deltaTime;","uniform float runTime;","uniform sampler2D texture;","uniform vec4 textureAnimation;","uniform float scale;"].join("\n"),attributes:["attribute vec4 acceleration;","attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"].join("\n"),S4:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"].join("\n"),T4:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),U4:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"].join("\n"),V4:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","   return c;","}"].join("\n"),W4:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"].join("\n"),X4:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"].join("\n"),Y4:["float getAlive() {","   return params.x;","}","float getAge() {","   return params.y;","}","float getMaxAge() {","   return params.z;","}","float getWiggle() {","   return params.w;","}"].join("\n"),Z4:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"].join("\n"),_4:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;","      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"].join("\n"),a5:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #endif","","    vec4 rotatedTexture = texture2D( texture, vUv );"].join("\n")},SPE.b5={eK:[SPE.R4.XB,SPE.R4.l,SPE.R4.attributes,SPE.R4.S4,THREE.sC.KD,THREE.sC.iE,SPE.R4.T4,SPE.R4.U4,SPE.R4.V4,SPE.R4.W4,SPE.R4.X4,SPE.R4.Y4,SPE.R4.Z4,SPE.R4._4,"void main() {","    highp float age = getAge();","    highp float alive = getAlive();","    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPos = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPos.xyz );","    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,","           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),","           unpackColor( color.w )","       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPos;",THREE.sC.jE,"}"].join("\n"),sU:[SPE.R4.l,THREE.sC.KD,THREE.sC.YD,THREE.sC.hE,SPE.R4.S4,SPE.R4.T4,"void main() {","    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",SPE.R4.a5,THREE.sC.gE,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",THREE.sC.XD,"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","}"].join("\n")},SPE.c5={types:{d5:"boolean",e5:"string",f5:"number",g5:"object"},h5:function(t,e,n){"use strict";return typeof t===e?t:n},i5:function(t,e,n){"use strict";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i)if(typeof t[i]!==e)return n;return t}return this.h5(t,e,n)},j5:function(t,e,n){"use strict";return void 0!==e&&t instanceof e?t:n},k5:function(t,e,n){"use strict";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i)if(void 0!==e&&t[i]instanceof e==!1)return n;return t}return this.j5(t,e,n)},l5:function(t,e,n){"use strict";e=e||3,n=n||3,Array.isArray(t.m5)===!1&&(t.m5=[t.m5]),Array.isArray(t.n5)===!1&&(t.n5=[t.n5]);var i=this.Ae(t.m5.length,e,n),r=this.Ae(t.n5.length,e,n),o=Math.max(i,r);t.m5.length!==o&&(t.m5=this.o5(t.m5,o)),t.n5.length!==o&&(t.n5=this.o5(t.n5,o))},o5:function(t,e){"use strict";for(var n=t.length,i=["function"==typeof t[0].clone?t[0].clone():t[0]],r=(n-1)/(e-1),o=1;o<e-1;++o){var a=o*r,s=Math.floor(a),h=Math.ceil(a),u=a-s;i[o]=this.p5(t[s],t[h],u)}return i.push("function"==typeof t[n-1].clone?t[n-1].clone():t[n-1]),i},Ae:function(t,e,n){"use strict";return Math.max(e,Math.min(t,n))},q5:function(t,e){"use strict";var n=1e-5,i=t;return i=e?Math.random()*n*10:n,t<0&&t>-n&&(i=-i),i},p5:function(t,e,n){"use strict";var i,r=this.types;return typeof t===r.f5&&typeof e===r.f5?t+(e-t)*n:t instanceof THREE.ea&&e instanceof THREE.ea?(i=t.clone(),i.x=this.Yi(t.x,e.x,n),i.y=this.Yi(t.y,e.y,n),i):t instanceof THREE.K&&e instanceof THREE.K?(i=t.clone(),i.x=this.Yi(t.x,e.x,n),i.y=this.Yi(t.y,e.y,n),i.z=this.Yi(t.z,e.z,n),i):t instanceof THREE.Ym&&e instanceof THREE.Ym?(i=t.clone(),i.x=this.Yi(t.x,e.x,n),i.y=this.Yi(t.y,e.y,n),i.z=this.Yi(t.z,e.z,n),i.w=this.Yi(t.w,e.w,n),i):t instanceof THREE.T&&e instanceof THREE.T?(i=t.clone(),i.r=this.Yi(t.r,e.r,n),i.Ci=this.Yi(t.Ci,e.Ci,n),i.b=this.Yi(t.b,e.b,n),i):void console.warn("Invalid argument types, or argument types do not match:",t,e)},Yi:function(t,e,n){"use strict";return t+(e-t)*n},r5:function(t,e){"use strict";var n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math.abs(t)-n):t+e-n)},s5:function(t){"use strict";for(var e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},t5:function(t,e){"use strict";return t+e*(Math.random()-.5)},u5:function(t,e,n,i,r){"use strict";var o=n.x+(Math.random()*i.x-.5*i.x),a=n.y+(Math.random()*i.y-.5*i.y),s=n.z+(Math.random()*i.z-.5*i.z);r&&(o=.5*-r.x+this.r5(o,r.x),a=.5*-r.y+this.r5(a,r.y),s=.5*-r.z+this.r5(s,r.z)),t.C4.r4(e,o,a,s)},v5:function(t,e,n,i){"use strict";var r=n.r+Math.random()*i.x,o=n.Ci+Math.random()*i.y,a=n.b+Math.random()*i.z;r=this.Ae(r,0,1),o=this.Ae(o,0,1),a=this.Ae(a,0,1),t.C4.r4(e,r,o,a)},w5:function(){"use strict";var t=new THREE.T;return function(e,n,i,r){for(var o=i.length,a=[],s=0;s<o;++s){var h=r[s];t.Di(i[s]),t.r+=Math.random()*h.x-.5*h.x,t.Ci+=Math.random()*h.y-.5*h.y,t.b+=Math.random()*h.z-.5*h.z,t.r=this.Ae(t.r,0,1),t.Ci=this.Ae(t.Ci,0,1),t.b=this.Ae(t.b,0,1),a.push(t.Oi())}e.C4.t4(n,a[0],a[1],a[2],a[3])}}(),x5:function(t,e,n,i,r,o,a,s){"use strict";var h=2*Math.random()-1,u=6.2832*Math.random(),c=Math.sqrt(1-h*h),f=this.t5(i,r),l=0,p=0,d=0;a&&(f=Math.round(f/a)*a),l=c*Math.cos(u)*f,p=c*Math.sin(u)*f,d=h*f,l*=o.x,p*=o.y,d*=o.z,l+=n.x,p+=n.y,d+=n.z,t.C4.r4(e,l,p,d)},y5:function(t){var e=1e4*Math.sin(t);return e-(0|e)},z5:function(t,e,n,i,r,o,a){"use strict";var s=6.2832*Math.random(),h=Math.abs(this.t5(i,r)),u=0,c=0,f=0;a&&(h=Math.round(h/a)*a),u=Math.cos(s)*h,c=Math.sin(s)*h,u*=o.x,c*=o.y,u+=n.x,c+=n.y,f+=n.z,t.C4.r4(e,u,c,f)},A5:function(){"use strict";var t=new THREE.K;return function(e,n,i,r,o,a,s,h){t.Di(a),t.x-=i,t.y-=r,t.z-=o,t.normalize().Xi(-this.t5(s,h)),e.C4.r4(n,t.x,t.y,t.z)}}(),B5:function(){"use strict";var t=new THREE.K;return function(e,n,i,r,o,a,s,h){t.Di(a),t.x-=i,t.y-=r,t.z-=o,t.normalize().Xi(-this.t5(s,h)),e.C4.r4(n,t.x,t.y,0)}}(),C5:function(){"use strict";var t=new THREE.K,e=new THREE.K,n=new THREE.T,i=new THREE.K(1,1,1);return function(r,o){return t.Di(r).normalize(),e.Di(o).normalize(),t.x+=.5*-o.x+Math.random()*o.x,t.y+=.5*-o.y+Math.random()*o.y,t.z+=.5*-o.z+Math.random()*o.z,t.normalize().add(i).Xi(.5),n.Bi(t.x,t.y,t.z),n.Oi()}}()},SPE.aB=function(t){"use strict";var e=SPE.c5,n=e.types;t=e.h5(t,n.g5,{}),t.G=e.h5(t.G,n.g5,{}),this.yq=THREE.Math._o(),this.D5=e.h5(t.D5,n.f5,.016),this.G=e.j5(t.G.value,THREE.ZA,null),this.E5=e.j5(t.G.frames,THREE.ea,new THREE.ea(1,1)),this.F5=e.h5(t.G.G5,n.f5,this.E5.x*this.E5.y),this.H5=e.h5(t.G.loop,n.f5,1),this.E5.max(new THREE.ea(1,1)),this.I5=e.h5(t.I5,n.d5,!0),this.J5=e.h5(t.J5,n.d5,!0),this.H=e.h5(t.H,n.f5,null),this.Gy=e.h5(t.Gy,n.f5,THREE.Gg),this.D=e.h5(t.D,n.d5,!0),this.hA=parseFloat(e.h5(t.hA,n.f5,0)),this.jA=e.h5(t.jA,n.d5,!1),this.iA=e.h5(t.iA,n.d5,!0),this.qB=e.h5(t.qB,n.d5,!0),this.scale=e.h5(t.scale,n.f5,300),this.K5=[],this.L5=[],this.M5=[],this.N5=null,this.O5=0,this.P5=!1,this.Q5=!1,this.U=0,this.l={G:{type:"t",value:this.G},R5:{type:"v4",value:new THREE.Ym(this.E5.x,this.E5.y,this.F5,Math.max(Math.abs(this.H5),1))},gF:{type:"c",value:null},eF:{type:"f",value:10},fF:{type:"f",value:200},dF:{type:"f",value:.5},S5:{type:"f",value:0},T5:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.XB={U5:this.I5,V5:this.J5,W5:SPE.f4,X5:!1,Y5:!1,Z5:!1,_5:this.E5.x>1||this.E5.y>1},this.attributes={position:new SPE.z4("v3",!0),acceleration:new SPE.z4("v4",!0),a6:new SPE.z4("v3",!0),rotation:new SPE.z4("v4",!0),b6:new SPE.z4("v3",!0),iq:new SPE.z4("v4",!0),size:new SPE.z4("v4",!0),angle:new SPE.z4("v4",!0),color:new SPE.z4("v4",!0),opacity:new SPE.z4("v4",!0)},this.c6=Object.keys(this.attributes),this.d6=this.c6.length,this.k=new THREE.eC({l:this.l,B:SPE.b5.eK,C:SPE.b5.sU,Gy:this.Gy,D:this.D,hA:this.hA,jA:this.jA,iA:this.iA,XB:this.XB,qB:this.qB}),this.j=new THREE.In,this.e6=new THREE.mq(this.j,this.k),null===this.H&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},SPE.aB.constructor=SPE.aB,SPE.aB.prototype.f6=function(){"use strict";var t,e=this.K5,n=e.length-1,i=this.XB;for(n;n>=0;--n)t=e[n],i._5||(i.X5=i.X5||!!Math.max(Math.max.apply(null,t.angle.value),Math.max.apply(null,t.angle.L))),i.Y5=i.Y5||!!Math.max(t.rotation.angle,t.rotation.g6),i.Z5=i.Z5||!!Math.max(t.h6.value,t.h6.L);this.k.Ar=!0},SPE.aB.prototype.i6=function(){"use strict";var t,e,n=this.attributes,i=this.j,r=i.attributes;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],e=r[o],e?e.ec=t.C4.ec:i.Us(o,t.D4),t.D4.Ar=!0);this.j.Xs(0,this.U)},SPE.aB.prototype.j6=function(t){"use strict";if(t instanceof SPE.k6==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this.L5.indexOf(t.yq)>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console.error("Emitter already belongs to another group. Will not add to requested group.");var e=this.attributes,n=this.U,i=n+t.U;this.U=i,null!==this.H&&this.U>this.H&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this.U,"particles, can support only",this.H),t.l6(t.J.m5+t.J.n5),t.m6(this.c6),t.n6(n),t.group=this,t.attributes=this.attributes;for(var r in e)e.hasOwnProperty(r)&&e[r].Q4(null!==this.H?this.H:this.U);for(var o=n;o<i;++o)t.o6(o),t.p6(o,"velocity"),t.p6(o,"acceleration"),t.q6(o,"opacity"),t.q6(o,"size"),t.r6(o),t.s6(o),t.t6(o),t.u6(o);return this.i6(),this.K5.push(t),this.L5.push(t.yq),this.f6(t),this.k.Ar=!0,this.j.Ar=!0,this.P5=!0,this},SPE.aB.prototype.v6=function(t){"use strict";var e=this.L5.indexOf(t.yq);if(t instanceof SPE.k6==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(e===-1)return void console.error("Emitter does not exist in this group. Will not remove.");
for(var n=t.w6,i=n+t.U,r=this.attributes.iq.C4,o=n;o<i;++o)r.ec[4*o]=0,r.ec[4*o+1]=0;this.K5.splice(e,1),this.L5.splice(e,1);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&this.attributes[a].splice(n,i);this.U-=t.U,t.x6(),this.P5=!0},SPE.aB.prototype.y6=function(){"use strict";var t=this.M5,e=this.O5;return t.length?t.pop():e?new SPE.k6(this.N5):null},SPE.aB.prototype.z6=function(t){"use strict";return t instanceof SPE.k6==!1?void console.error("Argument is not instanceof SPE.Emitter:",t):(t.reset(),this.M5.unshift(t),this)},SPE.aB.prototype.A6=function(){"use strict";return this.M5},SPE.aB.prototype.B6=function(t,e,n){"use strict";var i;this.N5=e,this.O5=!!n;for(var r=0;r<t;++r)i=Array.isArray(e)?new SPE.k6(e[r]):new SPE.k6(e),this.j6(i),this.z6(i);return this},SPE.aB.prototype.C6=function(t){"use strict";var e=this.y6(),n=this;return null===e?void console.log("SPE.Group pool ran out."):(t instanceof THREE.K&&(e.position.value.Di(t),e.position.value=e.position.value),e.enable(),setTimeout(function(){e.disable(),n.z6(e)},1e3*Math.max(e.duration,e.J.value+e.J.L)),this)},SPE.aB.prototype.D6=function(t,e){"use strict";if("number"==typeof t&&t>1)for(var n=0;n<t;++n)this.C6(e);else this.C6(e);return this},SPE.aB.prototype.E6=function(t){"use strict";this.l.T5.value+=t,this.l.S5.value=t},SPE.aB.prototype.F6=function(){"use strict";var t=this.c6,e=this.d6-1,n=this.attributes;for(e;e>=0;--e)n[t[e]].M4()},SPE.aB.prototype.G6=function(t){"use strict";var e,n,i,r=this.c6,o=this.d6-1,a=this.attributes,s=t.H6;for(o;o>=0;--o)e=r[o],n=s[e],i=a[e],i.K4(n.min,n.max),i.L4()},SPE.aB.prototype.vV=function(t){"use strict";var e,n=this.K5,i=n.length,r=t||this.D5,o=this.c6,a=this.attributes;if(this.E6(r),this.F6(),0!==i||this.P5!==!1||this.Q5!==!1){for(var s,e=0;e<i;++e)s=n[e],s.vV(r),this.G6(s);if(this.Q5===!0){for(e=this.d6-1;e>=0;--e)a[o[e]].N4();this.Q5=!1}if(this.P5===!0){for(e=this.d6-1;e>=0;--e)a[o[e]].O4();this.P5=!1,this.Q5=!0}}},SPE.aB.prototype.Ks=function(){"use strict";return this.j.Ks(),this.k.Ks(),this},SPE.k6=function(t){"use strict";var e=SPE.c5,n=e.types,i=SPE.f4;t=e.h5(t,n.g5,{}),t.position=e.h5(t.position,n.g5,{}),t.a6=e.h5(t.a6,n.g5,{}),t.acceleration=e.h5(t.acceleration,n.g5,{}),t.N=e.h5(t.N,n.g5,{}),t.S=e.h5(t.S,n.g5,{}),t.rotation=e.h5(t.rotation,n.g5,{}),t.color=e.h5(t.color,n.g5,{}),t.opacity=e.h5(t.opacity,n.g5,{}),t.size=e.h5(t.size,n.g5,{}),t.angle=e.h5(t.angle,n.g5,{}),t.h6=e.h5(t.h6,n.g5,{}),t.J=e.h5(t.J,n.g5,{}),t.I6&&console.warn("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.yq=THREE.Math._o(),this.type=e.h5(t.type,n.f5,SPE.R.d4),this.position={m5:e.j5(t.position.value,THREE.K,new THREE.K),n5:e.j5(t.position.L,THREE.K,new THREE.K),J6:e.j5(t.position.M,THREE.K,new THREE.K),K6:e.h5(t.position.O,n.f5,this.type),L6:e.h5(t.position.M6,n.d5,!1),N6:e.h5(t.position.N,n.f5,10),O6:e.j5(t.position.P6,THREE.K,new THREE.K(1,1,1)),Q6:e.h5(t.position.R6,n.f5,0)},this.a6={m5:e.j5(t.a6.value,THREE.K,new THREE.K),n5:e.j5(t.a6.L,THREE.K,new THREE.K),K6:e.h5(t.a6.O,n.f5,this.type),L6:e.h5(t.position.M6,n.d5,!1)},this.acceleration={m5:e.j5(t.acceleration.value,THREE.K,new THREE.K),n5:e.j5(t.acceleration.L,THREE.K,new THREE.K),K6:e.h5(t.acceleration.O,n.f5,this.type),L6:e.h5(t.position.M6,n.d5,!1)},this.S={m5:e.h5(t.S.value,n.f5,0),n5:e.h5(t.S.L,n.f5,0),L6:e.h5(t.position.M6,n.d5,!1)},this.h6={m5:e.h5(t.h6.value,n.f5,0),n5:e.h5(t.h6.L,n.f5,0)},this.rotation={S6:e.j5(t.rotation.axis,THREE.K,new THREE.K(0,1,0)),T6:e.j5(t.rotation.U6,THREE.K,new THREE.K),V6:e.h5(t.rotation.angle,n.f5,0),W6:e.h5(t.rotation.g6,n.f5,0),X6:e.h5(t.rotation.Y6,n.d5,!1),Z6:e.j5(t.rotation.jn,THREE.K,this.position.m5.clone()),L6:e.h5(t.position.M6,n.d5,!1)},this.J={m5:e.h5(t.J.value,n.f5,2),n5:e.h5(t.J.L,n.f5,0)},this.color={m5:e.k5(t.color.value,THREE.T,new THREE.T),n5:e.k5(t.color.L,THREE.K,new THREE.K),L6:e.h5(t.position.M6,n.d5,!1)},this.opacity={m5:e.i5(t.opacity.value,n.f5,1),n5:e.i5(t.opacity.L,n.f5,0),L6:e.h5(t.position.M6,n.d5,!1)},this.size={m5:e.i5(t.size.value,n.f5,1),n5:e.i5(t.size.L,n.f5,0),L6:e.h5(t.position.M6,n.d5,!1)},this.angle={m5:e.i5(t.angle.value,n.f5,0),n5:e.i5(t.angle.L,n.f5,0),L6:e.h5(t.position.M6,n.d5,!1)},this.U=e.h5(t.U,n.f5,100),this.duration=e.h5(t.duration,n.f5,null),this.LW=e.h5(t.LW,n.d5,!1),this.V=e.h5(t.V,n.f5,1),this.direction=e.h5(t.direction,n.f5,1),this._6=e.h5(t._6,n.d5,!0),this.a7=0,this.b7=0,this.w6=0,this.c7=0,this.d7=0,this.e7=0,this.group=null,this.attributes=null,this.f7=null,this.g7={position:e.h5(t.position.M6,n.d5,!1)||e.h5(t.N.M6,n.d5,!1),a6:e.h5(t.a6.M6,n.d5,!1),acceleration:e.h5(t.acceleration.M6,n.d5,!1)||e.h5(t.S.M6,n.d5,!1),rotation:e.h5(t.rotation.M6,n.d5,!1),b6:e.h5(t.rotation.M6,n.d5,!1),size:e.h5(t.size.M6,n.d5,!1),color:e.h5(t.color.M6,n.d5,!1),opacity:e.h5(t.opacity.M6,n.d5,!1),angle:e.h5(t.angle.M6,n.d5,!1)},this.h7={},this.i7={},this.j7={J:"params",position:"position",a6:"velocity",acceleration:"acceleration",S:"acceleration",h6:"params",rotation:"rotation",size:"size",color:"color",opacity:"opacity",angle:"angle"};for(var r in this.j7)this.j7.hasOwnProperty(r)&&(this.i7[this.j7[r]]=0,this.h7[this.j7[r]]=!1,this.k7(this[r],r));this.H6={},this.c6=null,this.d6=0,e.l5(this.color,i,i),e.l5(this.opacity,i,i),e.l5(this.size,i,i),e.l5(this.angle,i,i)},SPE.k6.constructor=SPE.k6,SPE.k6.prototype.k7=function(t,e){"use strict";var n=this;for(var i in t)if(t.hasOwnProperty(i)){var r=i.replace("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t]}}(i),set:function(t){return function(i){var r=n.j7[e],o=this[t],a=SPE.f4;"_rotationCenter"===t?(n.h7.b6=!0,n.i7.b6=0):"_randomise"===t?n.g7[r]=i:(n.h7[r]=!0,n.i7[r]=0),n.group.f6(),this[t]=i,Array.isArray(o)&&SPE.c5.l5(n[e],a,a)}}(i)})}},SPE.k6.prototype.m6=function(t){"use strict";this.c6=t,this.d6=t.length;for(var e=this.d6-1;e>=0;--e)this.H6[t[e]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},SPE.k6.prototype.l6=function(t){"use strict";var e=this.U;this.duration?this.a7=e/(t<this.duration?t:this.duration):this.a7=e/t},SPE.k6.prototype.n6=function(t){this.w6=t,this.b7=t,this.l7=t+this.U},SPE.k6.prototype.m7=function(t,e){"use strict";switch(t){case"position":this.o6(e);break;case"velocity":case"acceleration":this.p6(e,t);break;case"size":case"opacity":this.q6(e,t);break;case"angle":this.r6(e);break;case"params":this.t6(e);break;case"rotation":this.s6(e);break;case"color":this.u6(e)}},SPE.k6.prototype.o6=function(t){"use strict";var e=SPE.R,n=SPE.c5,i=this.position,r=this.attributes.position,o=i.m5,a=i.n5,s=i.K6;switch(s){case e.d4:n.u5(r,t,o,a,i.J6);break;case e.P:n.x5(r,t,o,i.N6,i.n5.x,i.O6,i.J6.x,i.Q6||this.U);break;case e.e4:n.z5(r,t,o,i.N6,i.n5.x,i.O6,i.J6.x)}},SPE.k6.prototype.p6=function(t,e){"use strict";var n,i,r,o,a,s=SPE.R,h=SPE.c5,u=this[e],c=u.m5,f=u.n5,l=u.K6;switch(l){case s.d4:h.u5(this.attributes[e],t,c,f);break;case s.P:n=this.attributes.position.C4.ec,a=3*t,i=n[a],r=n[a+1],o=n[a+2],h.A5(this.attributes[e],t,i,r,o,this.position.m5,u.m5.x,u.n5.x);break;case s.e4:n=this.attributes.position.C4.ec,a=3*t,i=n[a],r=n[a+1],o=n[a+2],h.B5(this.attributes[e],t,i,r,o,this.position.m5,u.m5.x,u.n5.x)}if("acceleration"===e){var p=h.Ae(h.t5(this.S.m5,this.S.n5),0,1);this.attributes.acceleration.C4.ec[4*t+3]=p}},SPE.k6.prototype.q6=function(t,e){"use strict";var n,i=this.attributes[e].C4,r=this[e],o=SPE.c5;o.s5(r.m5)&&o.s5(r.n5)?(n=Math.abs(o.t5(r.m5[0],r.n5[0])),i.t4(t,n,n,n,n)):i.t4(t,Math.abs(o.t5(r.m5[0],r.n5[0])),Math.abs(o.t5(r.m5[1],r.n5[1])),Math.abs(o.t5(r.m5[2],r.n5[2])),Math.abs(o.t5(r.m5[3],r.n5[3])))},SPE.k6.prototype.r6=function(t){"use strict";var e,n=this.attributes.angle.C4,i=this.angle,r=SPE.c5;r.s5(i.m5)&&r.s5(i.n5)?(e=r.t5(i.m5[0],i.n5[0]),n.t4(t,e,e,e,e)):n.t4(t,r.t5(i.m5[0],i.n5[0]),r.t5(i.m5[1],i.n5[1]),r.t5(i.m5[2],i.n5[2]),r.t5(i.m5[3],i.n5[3]))},SPE.k6.prototype.t6=function(t){"use strict";this.attributes.iq.C4.t4(t,this.LW?1:0,0,Math.abs(SPE.c5.t5(this.J.m5,this.J.n5)),SPE.c5.t5(this.h6.m5,this.h6.n5))},SPE.k6.prototype.s6=function(t){"use strict";this.attributes.rotation.C4.r4(t,SPE.c5.C5(this.rotation.S6,this.rotation.T6),SPE.c5.t5(this.rotation.V6,this.rotation.W6),this.rotation.X6?0:1),this.attributes.b6.C4.q4(t,this.rotation.Z6)},SPE.k6.prototype.u6=function(t){"use strict";SPE.c5.w5(this.attributes.color,t,this.color.m5,this.color.n5)},SPE.k6.prototype.n7=function(t){"use strict";for(var e,n,i=this.g7,r=this.h7,o=this.i7,a=this.c6,s=this.d6-1;s>=0;--s)e=a[s],n=r[e],i[e]!==!0&&n!==!0||(this.m7(e,t),this.o7(e,t),n===!0&&o[e]===this.U?(r[e]=!1,o[e]=0):1==n&&++o[e])},SPE.k6.prototype.o7=function(t,e){"use strict";var n=this.H6[t];n.min=Math.min(e,n.min),n.max=Math.max(e,n.max)},SPE.k6.prototype.F6=function(){"use strict";var t,e=this.H6,n=this.p7,i=this.q7-1;for(i;i>=0;--i)t=n[i],e[t].min=Number.POSITIVE_INFINITY,e[t].max=Number.NEGATIVE_INFINITY},SPE.k6.prototype.x6=function(){"use strict";this.a7=0,this.w6=0,this.b7=0,this.e7=0,this.group=null,this.attributes=null,this.f7=null,this.d7=0},SPE.k6.prototype.r7=function(){"use strict";--this.e7},SPE.k6.prototype.s7=function(){"use strict";++this.e7},SPE.k6.prototype.t7=function(t,e,n,i){"use strict";for(var r,o,a,s,h=e-1;h>=t;--h)r=4*h,s=n[r],0!==s&&(a=n[r+1],o=n[r+2],1===this.direction?(a+=i,a>=o&&(a=0,s=0,this.r7())):(a-=i,a<=0&&(a=o,s=0,this.r7())),n[r]=s,n[r+1]=a,this.o7("params",h))},SPE.k6.prototype.u7=function(t,e,n,i){"use strict";for(var r,o,a=this.direction,s=t;s<e;++s)r=4*s,0!=n[r]&&1!==this.U||(this.s7(),n[r]=1,this.n7(s),o=i*(s-t),n[r+1]=a===-1?n[r+2]-o:o,this.o7("params",s))},SPE.k6.prototype.vV=function(t){"use strict";if(!this.LW){null===this.f7&&(this.f7=this.attributes.iq.C4.ec);var e=this.w6,n=e+this.U,i=this.f7,r=this.a7*this.V*t,o=this.b7;if(this.F6(),this.t7(e,n,i,t),this._6===!1)return void(this.d7=0);if(null!==this.duration&&this.d7>this.duration)return this._6=!1,void(this.d7=0);var a=1===this.U?o:0|o,s=Math.min(a+r,this.l7),h=s-this.b7|0,u=h>0?t/h:0;this.u7(a,s,i,u),this.b7+=r,this.b7>n&&(this.b7=e),this.d7+=t}},SPE.k6.prototype.reset=function(t){"use strict";if(this.d7=0,this._6=!1,t===!0){for(var e,n=this.w6,i=n+this.U,r=this.f7,o=this.attributes.iq.D4,a=i-1;a>=n;--a)e=4*a,r[e]=0,r[e+1]=0;o.yr.offset=0,o.yr.count=-1,o.Ar=!0}return this},SPE.k6.prototype.enable=function(){"use strict";return this._6=!0,this},SPE.k6.prototype.disable=function(){"use strict";return this._6=!1,this},SPE.k6.prototype.remove=function(){"use strict";return null!==this.group?this.group.v6(this):console.error("Emitter does not belong to a group, cannot remove."),this},function(THREE){"use strict";function t(t){return!isNaN(t)&&isFinite(t)}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t?e(t)!==!0?[t]:t:[]}function i(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function r(t,e,n){for(var i=0,r=t.length;i<r;i++)if(t[i][e]===n)return i;return-1}THREE.v7=function(e){e=e||{},e.w7=this,this.x7=0,this.y7=-1,this.z7=2,this.A7=t(e.A7)?e.A7:0,this.B7=t(e.B7)?e.B7:1,this.C7=t(e.C7)?e.C7:2,this.D7=t(e.D7)?e.D7:3,this.E7=t(e.E7)?e.E7:4,this.F7=t(e.F7)?e.F7:5,this.G7=[],this.G7[this.A7]={index:this.A7,count:0,x:1,y:0,z:0},this.G7[this.B7]={index:this.B7,count:0,x:-1,y:0,z:0},this.G7[this.C7]={index:this.C7,count:0,x:0,y:1,z:0},this.G7[this.D7]={index:this.D7,count:0,x:0,y:-1,z:0},this.G7[this.E7]={index:this.E7,count:0,x:0,y:0,z:1},this.G7[this.F7]={index:this.F7,count:0,x:0,y:0,z:-1},this.H7=1<<this.A7+1,this.I7=1<<this.B7+1,this.J7=1<<this.C7+1,this.K7=1<<this.D7+1,this.L7=1<<this.E7+1,this.M7=1<<this.F7+1,this.N7=new THREE.K,this.O7=new THREE.K,this.P7=e.P7,this.P7&&(this.Q7=new THREE.qN(1,1,1),this.R7=new THREE.MB({color:16711782,lA:!0,mA:1})),this.Iv=[],this.S7={},this.T7=[],this.U7=[],this.V7=t(e.V7)?e.V7:1/0,this.W7=t(e.W7)?e.W7:8,this.X7=t(e.X7)?e.X7:.15,this.Y7=e.Y7||!1,this.root=e.root instanceof THREE.Z7?e.root:new THREE.Z7(e)},THREE.v7.prototype={update:function(){if(this.U7.length>0){for(var t=0,e=this.U7.length;t<e;t++){var n=this.U7[t];this._7(n.object,n.options)}this.U7.length=0}},add:function(t,e){this.Y7?(this.a8(t),this._7(t,e)):this.U7.push({object:t,options:e})},_7:function(t,e){var n,i,r,o,a,s,h;if(t instanceof THREE.b8&&(t=t.object),t.yq||(t.yq=THREE.Math._o()),!this.S7[t.yq])if(this.Iv.push(t),this.S7[t.yq]=t,e&&(a=e.c8,h=e.d8),h===!0)for(r=t.j,s=r.Hn,n=0,i=s.length;n<i;n++)this.e8(t,s[n]);else if(a===!0)for(r=t.j,o=r.as,n=0,i=o.length;n<i;n++)this.e8(t,o[n]);else this.e8(t)},e8:function(t,e){var n=new THREE.b8(t,e);this.T7.push(n),this.root.f8(n)},remove:function(t){var e,n,o,a,s=t;if(t instanceof THREE.b8&&(t=t.object),this.S7[t.yq]){if(this.S7[t.yq]=void 0,o=i(this.Iv,t),o!==-1)for(this.Iv.splice(o,1),a=this.root.g8(s),e=0,n=a.length;e<n;e++)s=a[e],o=i(this.T7,s),o!==-1&&this.T7.splice(o,1)}else this.U7.length>0&&(o=r(this.U7,"object",t),o!==-1&&this.U7.splice(o,1))},extend:function(t){var e,n,i,r;if(t instanceof THREE.v7)for(i=t.T7,e=0,n=i.length;e<n;e++)r=i[e],this.add(r,{c8:r.as,d8:r.Hn})},h8:function(){var t,e,n,i,r,o,a=[];for(t=0,e=this.T7.length;t<e;t++)i=this.T7[t],n=i.cw,i.update(),n instanceof THREE.Z7&&!i.i8.Zi(i.position)&&(o=i.j8,r=n.k8(i),r!==o&&a.push(i));for(t=0,e=a.length;t<e;t++)i=a[t],i.cw.g8(i),this.root.f8(i)},a8:function(t){var e,n,i,r,o=[t];for(i=t.parent;i;)o.push(i),i=i.parent;for(e=0,n=o.length;e<n;e++)i=o[e],i.Hq===!0&&(r=i);"undefined"!=typeof r&&r.En()},search:function(t,e,n,r){var o,a,s,h,u,c,f,l,p,d,E;for(h=[].concat(this.root.Iv),e>0||(e=Number.MAX_VALUE),r instanceof THREE.K&&(r=this.N7.Di(r).normalize(),E=this.O7.set(1,1,1).jm(r)),o=0,a=this.root.l8.length;o<a;o++)s=this.root.m8[this.root.l8[o]],h=s.search(t,e,h,r,E);if(n===!0)for(f=[],p=[],o=0,a=h.length;o<a;o++)u=h[o],c=u.object,d=i(p,c),d===-1?(l={object:c,as:[],Hn:[]},f.push(l),p.push(c)):l=f[d],u.as?l.as.push(u.as):u.Hn&&l.Hn.push(u.Hn);else f=h;return f},n8:function(t){t instanceof THREE.Z7&&(this.root=t,this.root.o8())},p8:function(){return this.root.p8()},q8:function(){return this.root.q8()},r8:function(){return this.root.r8()},s8:function(){this.root.s8()}},THREE.b8=function(t,e){this.object=t,e instanceof THREE.sr?(this.as=e,this.t8=!0,this.u8=new THREE.K):e instanceof THREE.K&&(this.Hn=e),this.N=0,this.position=new THREE.K,this.object instanceof THREE.wq?this.update():(this.position.set(t.x,t.y,t.z),this.N=t.N),this.i8=this.position.clone()},THREE.b8.prototype={update:function(){this.t8?(this.N=this.v8(this.object,this.as),this.position.Di(this.as.w8).Dm(this.object.Km)):this.Hn?(this.N=this.object.k.size||1,this.position.Di(this.Hn).Dm(this.object.Km)):this.object.j?(null===this.object.j.No&&this.object.j.Oo(),this.N=this.object.j.No.N,this.position.Di(this.object.j.No.jn).Dm(this.object.Km)):(this.N=this.object.x8,this.position.Vm(this.object.Km)),this.N=this.N*Math.max(this.object.scale.x,this.object.scale.y,this.object.scale.z)},v8:function(t,e){void 0===e.w8&&(e.w8=new THREE.K);var n,i=t.j||t,r=i.Hn,o=e.w8,a=r[e.a],s=r[e.b],h=r[e.c],u=this.u8;return o.fm(a,s).add(h).km(3),n=Math.max(u.hm(o,a).length(),u.hm(o,s).length(),u.hm(o,h).length())}},THREE.Z7=function(t){this.y8=new THREE.K,this.z8=new THREE.K,this.A8=new THREE.K,t=t||{},t.w7 instanceof THREE.v7?this.w7=t.w7:t.parent instanceof THREE.Z7!=!0&&(t.root=this,this.w7=new THREE.v7(t)),this.id=this.w7.x7++,this.position=t.position instanceof THREE.K?t.position:new THREE.K,this.N=t.N>0?t.N:1,this.j8=t.j8,this.GA=0,this.reset(),this.B8(t.parent),this.C8=this.N*this.w7.X7,this.D8=this.N+this.C8,this.left=this.position.x-this.D8,this.right=this.position.x+this.D8,this.bottom=this.position.y-this.D8,this.top=this.position.y+this.D8,this.back=this.position.z-this.D8,this.E8=this.position.z+this.D8,this.w7.P7&&(this.F8=new THREE.jq(this.w7.Q7,this.w7.R7),this.F8.scale.set(2*this.D8,2*this.D8,2*this.D8),this.F8.position.Di(this.position),this.w7.P7.add(this.F8))},THREE.Z7.prototype={B8:function(t){t!==this&&this.parent!==t&&(this.parent=t,this.o8())},o8:function(){var t,e;for(this.parent instanceof THREE.Z7?(this.w7=this.parent.w7,this.GA=this.parent.GA+1):this.GA=0,t=0,e=this.l8.length;t<e;t++)this.m8[this.l8[t]].o8()},reset:function(t,e){var n,i,r,o=this.l8||[],a=this.m8;for(this.Iv=[],this.l8=[],this.m8={},n=0,i=o.length;n<i;n++)r=a[o[n]],r.B8(void 0),t===!0&&r.reset(t,e);e===!0&&this.F8&&this.F8.parent&&this.F8.parent.remove(this.F8)},G8:function(t,e){t.j8=e,i(this.l8,e)===-1&&this.l8.push(e),this.m8[e]=t,t.parent!==this&&t.B8(this)},removeNode:function(t){var e,n;e=i(this.l8,t),this.l8.splice(e,1),n=n||this.m8[t],delete this.m8[t],n.parent===this&&n.B8(void 0)},f8:function(t){var e,n,r;n=this.k8(t),n>-1&&this.l8.length>0?(r=this.H8(n),r.f8(t)):n<-1&&this.parent instanceof THREE.Z7?this.parent.f8(t):(e=i(this.Iv,t),e===-1&&this.Iv.push(t),t.cw=this,this.I8())},J8:function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],this.Iv.push(i),i.cw=this},g8:function(t){var e,n,i,r;if(r=this.K8(t,{L8:!1,M8:[],N8:[]}),i=r.M8,i.length>0)for(e=0,n=i.length;e<n;e++)i[e].l4();return r.N8},K8:function(t,e){var n,r,o,a,s,h=-1;if(t instanceof THREE.b8)h=i(this.Iv,t),h!==-1&&(this.Iv.splice(h,1),t.cw=void 0,e.N8.push(t),e.L8=s=!0);else for(n=this.Iv.length-1;n>=0;n--)if(o=this.Iv[n],o.object===t&&(this.Iv.splice(n,1),o.cw=void 0,e.N8.push(o),s=!0,!o.as&&!o.Hn)){e.L8=!0;break}if(s===!0&&e.M8.push(this),e.L8!==!0)for(n=0,r=this.l8.length;n<r&&(a=this.m8[this.l8[n]],e=a.K8(t,e),e.L8!==!0);n++);return e},I8:function(){this.Iv.length>this.w7.W7&&this.w7.W7>0&&this.m4()},m4:function(){var t,e,n,i,r=[],o=[],a=[],s=[],h=[];for(n=0,i=this.Iv.length;n<i;n++)e=this.Iv[n],t=this.k8(e),t>-1?(a.push(e),s.push(t)):t<-1?(r.push(e),o.push(t)):h.push(e);a.length>0&&(h=h.concat(this.split(a,s))),r.length>0&&(h=h.concat(this.expand(r,o))),this.Iv=h,this.O8()},split:function(t,e){var n,i,r,o,a,s;if(this.GA<this.w7.V7){for(t=t||this.Iv,e=e||[],s=[],n=0,i=t.length;n<i;n++)o=t[n],r=e[n],r>-1?(a=this.H8(r),a.f8(o)):s.push(o);t===this.Iv&&(this.Iv=s)}else s=this.Iv;return s},H8:function(t){var e,n,i,r,o,a;return this.m8[t]instanceof THREE.Z7?e=this.m8[t]:(i=.5*this.D8,n=i*this.w7.X7,r=i-n,o=this.y8.set(1&t?r:-r,2&t?r:-r,4&t?r:-r),a=(new THREE.K).fm(this.position,o),e=new THREE.Z7({w7:this.w7,parent:this,position:a,N:i,j8:t}),this.G8(e,t)),e},expand:function(t,e){var n,i,r,o,a,s,h,u,c,f,l,p,d,E,v,g,m,y,T,R,w,H,b,x,A,M,U,O,S,D=this.w7.G7,C=this.z8;if(this.w7.root.p8()<this.w7.V7){for(t=t||this.Iv,e=e||[],o=[],a=[],n=0,i=D.length;n<i;n++)D[n].count=0;for(n=0,i=t.length;n<i;n++)r=t[n],s=e[n],s<-1?(h=-s-this.w7.z7,h&this.w7.H7?D[this.w7.A7].count++:h&this.w7.I7&&D[this.w7.B7].count++,h&this.w7.J7?D[this.w7.C7].count++:h&this.w7.K7&&D[this.w7.D7].count++,h&this.w7.L7?D[this.w7.E7].count++:h&this.w7.M7&&D[this.w7.F7].count++,a.push(r)):o.push(r);if(a.length>0)for(c=D.slice(0),c.sort(function(t,e){return e.count-t.count}),f=c[0],d=1|f.index,v=c[1],g=c[2],l=(1|v.index)!==d?v:g,E=1|l.index,v=c[2],g=c[3],m=c[4],y=1|v.index,T=1|g.index,p=y!==d&&y!==E?v:T!==d&&T!==E?g:m,R=f.x+l.x+p.x,w=f.y+l.y+p.y,H=f.z+l.z+p.z,s=this.P8(R,w,H),u=this.P8(-R,-w,-H),b=this.C8,x=this.N,M=this.w7.X7>0?b/(.5*this.w7.X7*(1+this.w7.X7)):2*x,U=M*this.w7.X7,A=M+U-(x+b),C.set(1&s?A:-A,2&s?A:-A,4&s?A:-A),O=(new THREE.K).fm(this.position,C),S=new THREE.Z7({w7:this.w7,position:O,N:M}),S.G8(this,u),this.w7.n8(S),n=0,i=a.length;n<i;n++)this.w7.root.f8(a[n]);t===this.Iv&&(this.Iv=o)}else o=t;return o},l4:function(){this.O8(),this.w7.root.Q8()},O8:function(){for(var t,e=this;e.parent instanceof THREE.Z7&&e.r8()<this.w7.W7;)t=e,e=e.parent;e!==this&&e.nd(t)},nd:function(t){var e,i,r;for(t=n(t),e=0,i=t.length;e<i;e++)r=t[e],this.J8(r.R8()),r.reset(!0,!0),this.removeNode(r.j8,r);this.O8()},Q8:function(){var t,e,n,i,r,o,a;if(this.l8.length>0){for(o=0,a=this.Iv.length,t=0,e=this.l8.length;t<e;t++)n=this.m8[this.l8[t]],i=n.r8(),a+=i,(r instanceof THREE.Z7==!1||i>o)&&(r=n,o=i);a-=o,a<this.w7.W7&&r instanceof THREE.Z7&&this.S8(r)}},S8:function(t){var e,n,i;for(e=0,n=this.l8.length;e<n;e++)i=this.m8[this.l8[e]],i!==t&&(t.J8(i.R8()),i.reset(!0,!0));t.J8(this.Iv),this.reset(!1,!0),this.w7.n8(t),t.Q8()},k8:function(t){var e,n,i,r,o,a,s,h,u,c=this.position,f=this.D8,l=this.C8,p=0;if(t instanceof THREE.b8?(n=t.N,e=t.position,t.i8.Di(e)):t instanceof THREE.Z7&&(e=t.position,n=0),i=e.x-c.x,r=e.y-c.y,o=e.z-c.z,a=Math.abs(i),s=Math.abs(r),h=Math.abs(o),u=Math.max(a,s,h),u+n>f)return a+n>f&&(p^=i>0?this.w7.H7:this.w7.I7),s+n>f&&(p^=r>0?this.w7.J7:this.w7.K7),h+n>f&&(p^=o>0?this.w7.L7:this.w7.M7),t.j8=-p-this.w7.z7,t.j8;if(i-n>-l)p=1|p;else if(!(i+n<l))return t.j8=this.w7.y7,t.j8;if(r-n>-l)p=2|p;else if(!(r+n<l))return t.j8=this.w7.y7,t.j8;if(o-n>-l)p=4|p;else if(!(o+n<l))return t.j8=this.w7.y7,t.j8;return t.j8=p,t.j8},P8:function(t,e,n){var i=0;return t>0&&(i=1|i),e>0&&(i=2|i),n>0&&(i=4|i),i},search:function(t,e,n,i,r){var o,a,s,h;if(h=i?this.T8(t,i,e,r):this.Bo(t,e),h===!0)for(n=n.concat(this.Iv),o=0,a=this.l8.length;o<a;o++)s=this.m8[this.l8[o]],n=s.search(t,e,n,i);return n},Bo:function(t,e){var n=e*e,i=t.x,r=t.y,o=t.z;return i<this.left?n-=Math.pow(i-this.left,2):i>this.right&&(n-=Math.pow(i-this.right,2)),r<this.bottom?n-=Math.pow(r-this.bottom,2):r>this.top&&(n-=Math.pow(r-this.top,2)),o<this.back?n-=Math.pow(o-this.back,2):o>this.E8&&(n-=Math.pow(o-this.E8,2)),n>=0},T8:function(t,e,n,i){"undefined"==typeof i&&(i=this.A8.set(1,1,1).jm(e));var r,o=(this.left-t.x)*i.x,a=(this.right-t.x)*i.x,s=(this.bottom-t.y)*i.y,h=(this.top-t.y)*i.y,u=(this.back-t.z)*i.z,c=(this.E8-t.z)*i.z,f=Math.min(Math.min(Math.max(o,a),Math.max(s,h)),Math.max(u,c));return!(f<0)&&(r=Math.max(Math.max(Math.min(o,a),Math.min(s,h)),Math.min(u,c)),!(r>f||r>n))},p8:function(t){var e,n,i;if(this.l8.length>0)for(e=0,n=this.l8.length;e<n;e++)i=this.m8[this.l8[e]],t=i.p8(t);else t=!t||this.GA>t?this.GA:t;return t},q8:function(){return this.w7.root.U8()+1},U8:function(){var t,e,n=this.l8.length;for(t=0,e=this.l8.length;t<e;t++)n+=this.m8[this.l8[t]].U8();return n},R8:function(t){var e,n,i;for(t=(t||[]).concat(this.Iv),e=0,n=this.l8.length;e<n;e++)i=this.m8[this.l8[e]],t=i.R8(t);return t},r8:function(){var t,e,n=this.Iv.length;for(t=0,e=this.l8.length;t<e;t++)n+=this.m8[this.l8[t]].r8();return n},V8:function(){for(var t=this.Iv.length,e=this.parent;e instanceof THREE.Z7;)t+=e.Iv.length,e=e.parent;return t},s8:function(t){var e,n,i,r="   ";for(t="string"==typeof t?t:r,console.log(this.parent?t+" octree NODE > ":" octree ROOT > ",this," // id: ",this.id," // indexOctant: ",this.j8," // position: ",this.position.x,this.position.y,this.position.z," // radius: ",this.N," // depth: ",this.GA),console.log(this.parent?t+" ":" ","+ objects ( ",this.Iv.length," ) ",this.Iv),console.log(this.parent?t+" ":" ","+ children ( ",this.l8.length," )",this.l8,this.m8),e=0,n=this.l8.length;e<n;e++)i=this.m8[this.l8[e]],i.s8(t+r)}},THREE.fq.prototype.W8=function(t,e){var n,i,r,o;return t.object instanceof THREE.wq?(i=t,t=i.object,o=i.as,r=t.j.as,o.length>0&&(t.j.as=o),n=this.uq(t,e),o.length>0&&(t.j.as=r)):n=this.uq(t,e),n},THREE.fq.prototype.X8=function(t,e){var n,i,r=[];for(n=0,i=t.length;n<i;n++)r=r.concat(this.W8(t[n],e));return r}}(THREE),function(t){var e=/iPhone/i,n=/iPod/i,i=/iPad/i,r=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,o=/Android/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,s=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/IEMobile/i,u=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,f=/BB10/i,l=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,d=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,E=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),v=function(t,e){return t.test(e)},g=function(t){var g=t||navigator.userAgent,m=g.split("[FBAN");if("undefined"!=typeof m[1]&&(g=m[0]),this.Y8={Z8:v(e,g),_8:v(n,g),a9:!v(e,g)&&v(i,g),b9:v(e,g)||v(n,g)||v(i,g)},this.c9={Z8:v(a,g),a9:!v(a,g)&&v(s,g),b9:v(a,g)||v(s,g)},this.d9={Z8:v(a,g)||v(r,g),a9:!v(a,g)&&!v(r,g)&&(v(s,g)||v(o,g)),b9:v(a,g)||v(s,g)||v(r,g)||v(o,g)},this.e9={Z8:v(h,g),a9:v(u,g),b9:v(h,g)||v(u,g)},this.f9={g9:v(c,g),h9:v(f,g),opera:v(l,g),i9:v(d,g),chrome:v(p,g),b9:v(c,g)||v(f,g)||v(l,g)||v(d,g)||v(p,g)},this.j9=v(E,g),this.k9=this.Y8.b9||this.d9.b9||this.e9.b9||this.f9.b9||this.j9,this.Z8=this.Y8.Z8||this.d9.Z8||this.e9.Z8,this.a9=this.Y8.a9||this.d9.a9||this.e9.a9,"undefined"==typeof window)return this},m=function(){var t=new g;return t.l9=g,t};"undefined"!=typeof module&&module.Kb&&"undefined"==typeof window?module.Kb=g:"undefined"!=typeof module&&module.Kb&&"undefined"!=typeof window?module.Kb=m():"function"==typeof define&&define.hg?define("isMobile",[],t.m9=m()):t.m9=m()}(this),function(t,e){"use strict";"object"==typeof exports?module.Kb=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.hg?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.n9=e(t.o9,t.p9,t.q9,t)}(this,function(t,e,n,i){"use strict";function r(t,e){var n=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof r))return n?i?new r(t,e):new r(t):new r;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}return this.href(t),void 0!==e?this.r9(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function s(t){return"Array"===a(t)}function h(t,e){var n,i,r={};if("RegExp"===a(e))r=null;else if(s(e))for(n=0,i=e.length;n<i;n++)r[e[n]]=!0;else r[e]=!0;for(n=0,i=t.length;n<i;n++){var o=r&&void 0!==r[t[n]]||!r&&e.test(t[n]);o&&(t.splice(n,1),i--,n--)}return t}function u(t,e){var n,i;if(s(e)){for(n=0,i=e.length;n<i;n++)if(!u(t,e[n]))return!1;return!0}var r=a(e);for(n=0,i=t.length;n<i;n++)if("RegExp"===r){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function c(t,e){if(!s(t)||!s(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function f(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function l(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function d(t){return function(e,n){return void 0===e?this.s9[t]||"":(this.s9[t]=e||null,this.pT(!n),this)}}function E(t,e){return function(n,i){return void 0===n?this.s9[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this.s9[t]=n,this.pT(!i),this)}}var v=i&&i.n9;r.version="1.18.1";var g=r.prototype,m=Object.prototype.hasOwnProperty;r.s9=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,t9:null,sU:null,u9:r.u9,v9:r.v9}},r.u9=!1,r.v9=!0,r.w9=/^[a-z][a-z0-9.+-]*$/i,r.x9=/[^a-z0-9\.-]/i,r.y9=/(xn--)/i,r.z9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.A9=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.B9=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,r.C9={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/},r.D9={E9:"80",F9:"443",G9:"21",H9:"70",I9:"80",J9:"443"},r.K9=/[^a-zA-Z0-9\.-]/,r.L9={a:"href",M9:"cite",link:"href",rW:"href",Q_:"src",form:"action",N9:"src",wp:"href",O9:"src",P9:"src",source:"src",track:"src",input:"src",Q9:"src",R9:"src"},r.S9=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return r.L9[e]}},r.encode=p,r.decode=decodeURIComponent,r.T9=function(){r.encode=escape,r.decode=unescape},r.U9=function(){r.encode=p,r.decode=decodeURIComponent},r.V9={pathname:{encode:{W9:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{X9:"$",Y9:"&",Z9:"+",_9:",",aaa:";",baa:"=",caa:":",daa:"@"}},decode:{W9:/[\/\?#]/g,map:{eaa:"%2F",pM:"%3F",faa:"%23"}}},gaa:{encode:{W9:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{caa:":",haa:"/",iaa:"?",jaa:"#",kaa:"[",laa:"]",daa:"@",maa:"!",X9:"$",Y9:"&",naa:"'",oaa:"(",paa:")",qaa:"*",Z9:"+",_9:",",aaa:";",baa:"="}}},raa:{encode:{W9:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{maa:"!",X9:"$",naa:"'",oaa:"(",paa:")",qaa:"*",Z9:"+",_9:",",aaa:";",baa:"=",daa:"@"}},decode:{W9:/[\/\?#:]/g,map:{eaa:"%2F",pM:"%3F",faa:"%23",saa:"%3A"}}}},r.taa=function(t,e){var n=r.encode(t+"");return void 0===e&&(e=r.v9),e?n.replace(/%20/g,"+"):n},r.uaa=function(t,e){t+="",void 0===e&&(e=r.v9);try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var y,T={encode:"encode",decode:"decode"},R=function(t,e){return function(n){try{return r[e](n+"").replace(r.V9[t][e].W9,function(n){return r.V9[t][e].map[n]})}catch(t){return n}}};for(y in T)r[y+"PathSegment"]=R("pathname",T[y]),r[y+"UrnPathSegment"]=R("urnpath",T[y]);var w=function(t,e,n){return function(i){var o;o=n?function(t){return r[e](r[n](t))}:r[e];for(var a=(i+"").split(t),s=0,h=a.length;s<h;s++)a[s]=o(a[s]);return a.join(t)}};r.vaa=w("/","decodePathSegment"),r.waa=w(":","decodeUrnPathSegment"),r.xaa=w("/","encodePathSegment","decode"),r.yaa=w(":","encodeUrnPathSegment","decode"),r.zaa=R("reserved","encode"),r.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.sU=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.t9=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.Aaa(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(r.w9)?e.protocol=void 0:"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=r.Aaa(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},r.Baa=function(t,e){t=t.replace(/\\/g,"/");var n,i,r=t.indexOf("/");if(r===-1&&(r=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,r)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),a=t.indexOf("/"),s=t.indexOf(":",o+1);s!==-1&&(a===-1||s<a)?(e.hostname=t.substring(0,r)||null,e.port=null):(i=t.substring(0,r).split(":"),e.hostname=i[0]||null,e.port=i[1]||null)}return e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},r.Aaa=function(t,e){return t=r.Caa(t,e),r.Baa(t,e)},r.Caa=function(t,e){var n,i=t.indexOf("/"),o=t.lastIndexOf("@",i>-1?i:t.length-1);return o>-1&&(i===-1||o<i)?(n=t.substring(0,o).split(":"),e.username=n[0]?r.decode(n[0]):null,n.shift(),e.password=n[0]?r.decode(n.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},r.Daa=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,i,o,a={},s=t.split("&"),h=s.length,u=0;u<h;u++)n=s[u].split("="),i=r.uaa(n.shift(),e),o=n.length?r.uaa(n.join("="),e):null,m.call(a,i)?("string"!=typeof a[i]&&null!==a[i]||(a[i]=[a[i]]),a[i].push(o)):a[i]=o;return a},r.pT=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),
t.urn||!e&&!t.hostname||(e+="//"),e+=r.Eaa(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.t9&&t.t9&&(e+="?"+t.t9),"string"==typeof t.sU&&t.sU&&(e+="#"+t.sU),e},r.Faa=function(t){var e="";return t.hostname?(e+=r.A9.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},r.Eaa=function(t){return r.Gaa(t)+r.Faa(t)},r.Gaa=function(t){var e="";return t.username&&(e+=r.encode(t.username)),t.password&&(e+=":"+r.encode(t.password)),e&&(e+="@"),e},r.Haa=function(t,e,n){var i,o,a,h,u="";for(o in t)if(m.call(t,o)&&o)if(s(t[o]))for(i={},a=0,h=t[o].length;a<h;a++)void 0!==t[o][a]&&void 0===i[t[o][a]+""]&&(u+="&"+r.Iaa(o,t[o][a],n),e!==!0&&(i[t[o][a]+""]=!0));else void 0!==t[o]&&(u+="&"+r.Iaa(o,t[o],n));return u.substring(1)},r.Iaa=function(t,e,n){return r.taa(t,n)+(null!==e?"="+r.taa(e,n):"")},r.Jaa=function(t,e,n){if("object"==typeof e)for(var i in e)m.call(e,i)&&r.Jaa(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),s(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},r.Kaa=function(t,e,n){var i,o,u;if(s(e))for(i=0,o=e.length;i<o;i++)t[e[i]]=void 0;else if("RegExp"===a(e))for(u in t)e.test(u)&&(t[u]=void 0);else if("object"==typeof e)for(u in e)m.call(e,u)&&r.Kaa(t,u,e[u]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===a(n)?!s(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=h(t[e],n):t[e]!==String(n)||s(n)&&1!==n.length?s(t[e])&&(t[e]=h(t[e],n)):t[e]=void 0:t[e]=void 0}},r.Laa=function(t,e,n,i){switch(a(e)){case"String":break;case"RegExp":for(var o in t)if(m.call(t,o)&&e.test(o)&&(void 0===n||r.Laa(t,o,n)))return!0;return!1;case"Object":for(var h in e)if(m.call(e,h)&&!r.Laa(t,h,e[h]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(a(n)){case"Undefined":return e in t;case"Boolean":var f=Boolean(s(t[e])?t[e].length:t[e]);return n===f;case"Function":return!!n(t[e],e,t);case"Array":if(!s(t[e]))return!1;var l=i?u:c;return l(t[e],n);case"RegExp":return s(t[e])?!!i&&u(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return s(t[e])?!!i&&u(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.Maa=function(){for(var t=[],e=[],n=0,i=0;i<arguments.length;i++){var o=new r(arguments[i]);t.push(o);for(var a=o.Naa(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&n++}if(!e.length||!n)return new r("");var h=new r("").Naa(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||h.path("/"+h.path()),h.normalize()},r.Oaa=function(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},r.Paa=function(t,e,n){n||(n={});var i=n.start||r.C9.start,o=n.end||r.C9.end,a=n.trim||r.C9.trim,s=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var h=i.exec(t);if(!h)break;var u=h.index;if(n.Qaa){var c=t.slice(Math.max(u-3,0),u);if(c&&s.test(c))continue}var f=u+t.slice(u).search(o),l=t.slice(u,f).replace(a,"");if(!n.Raa||!n.Raa.test(l)){f=u+l.length;var p=e(l,u,f,t);t=t.slice(0,u)+p+t.slice(f),i.lastIndex=u+p.length}}return i.lastIndex=0,t},r.Saa=function(e){if(e.match(r.K9)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.Taa(e).match(r.K9))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},r.Bf=function(t){if(t){var e={n9:this.Bf()};return i.Uaa&&"function"==typeof i.Uaa.Bf&&(e.Uaa=i.Uaa.Bf()),i.p9&&"function"==typeof i.p9.Bf&&(e.p9=i.p9.Bf()),i.q9&&"function"==typeof i.q9.Bf&&(e.q9=i.q9.Bf()),e}return i.n9===this&&(i.n9=v),this},g.pT=function(t){return t===!0?this.Vaa=!0:(void 0===t||this.Vaa)&&(this.Waa=r.pT(this.s9),this.Vaa=!1),this},g.clone=function(){return new r(this)},g.valueOf=g.toString=function(){return this.pT(!1).Waa},g.protocol=d("protocol"),g.username=d("username"),g.password=d("password"),g.hostname=d("hostname"),g.port=d("port"),g.t9=E("query","?"),g.sU=E("fragment","#"),g.search=function(t,e){var n=this.t9(t,e);return"string"==typeof n&&n.length?"?"+n:n},g.hash=function(t,e){var n=this.sU(t,e);return"string"==typeof n&&n.length?"#"+n:n},g.pathname=function(t,e){if(void 0===t||t===!0){var n=this.s9.path||(this.s9.hostname?"/":"");return t?(this.s9.urn?r.waa:r.vaa)(n):n}return this.s9.urn?this.s9.path=t?r.yaa(t):"":this.s9.path=t?r.xaa(t):"/",this.pT(!e),this},g.path=g.pathname,g.href=function(t,e){var n;if(void 0===t)return this.toString();this.Waa="",this.s9=r.s9();var i=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var a=r.S9(t);t=t[a]||"",o=!1}if(!i&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this.s9=r.parse(String(t),this.s9);else{if(!i&&!o)throw new TypeError("invalid input");var s=i?t.s9:t;for(n in s)m.call(this.s9,n)&&(this.s9[n]=s[n])}return this.pT(!e),this},g.is=function(t){var e=!1,i=!1,o=!1,a=!1,s=!1,h=!1,u=!1,c=!this.s9.urn;switch(this.s9.hostname&&(c=!1,i=r.z9.test(this.s9.hostname),o=r.A9.test(this.s9.hostname),e=i||o,a=!e,s=a&&n&&n.has(this.s9.hostname),h=a&&r.x9.test(this.s9.hostname),u=a&&r.y9.test(this.s9.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return h;case"url":return!this.s9.urn;case"urn":return!!this.s9.urn;case"punycode":return u}return null};var H=g.protocol,b=g.port,x=g.hostname;g.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(r.w9)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return H.call(this,t,e)},g.scheme=g.protocol,g.port=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return b.call(this,t,e)},g.hostname=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0!==t){var n={},i=r.Baa(t,n);if("/"!==i)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname}return x.call(this,t,e)},g.origin=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol(),i=this.Xaa();return i?(n?n+"://":"")+this.Xaa():""}var o=r(t);return this.protocol(o.protocol()).Xaa(o.Xaa()).pT(!e),this},g.host=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t)return this.s9.hostname?r.Faa(this.s9):"";var n=r.Baa(t,this.s9);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.pT(!e),this},g.Xaa=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t)return this.s9.hostname?r.Eaa(this.s9):"";var n=r.Aaa(t,this.s9);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.pT(!e),this},g.Yaa=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t){var n=r.Gaa(this.s9);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),r.Caa(t,this.s9),this.pT(!e),this},g.Zaa=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=r.parse(t),this.s9.path=n.path,this.s9.t9=n.t9,this.s9.sU=n.sU,this.pT(!e),this)},g.$aa=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t){if(!this.s9.hostname||this.is("IP"))return"";var n=this.s9.hostname.length-this.domain().length-1;return this.s9.hostname.substring(0,n)||""}var i=this.s9.hostname.length-this.domain().length,a=this.s9.hostname.substring(0,i),s=new RegExp("^"+o(a));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.Saa(t),this.s9.hostname=this.s9.hostname.replace(s,t),this.pT(!e),this},g.domain=function(t,e){if(this.s9.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.s9.hostname||this.is("IP"))return"";var n=this.s9.hostname.match(/\./g);if(n&&n.length<2)return this.s9.hostname;var i=this.s9.hostname.length-this._aa(e).length-1;return i=this.s9.hostname.lastIndexOf(".",i-1)+1,this.s9.hostname.substring(i)||""}if(!t)throw new TypeError("cannot set domain empty");if(r.Saa(t),!this.s9.hostname||this.is("IP"))this.s9.hostname=t;else{var a=new RegExp(o(this.domain())+"$");this.s9.hostname=this.s9.hostname.replace(a,t)}return this.pT(!e),this},g._aa=function(t,e){if(this.s9.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.s9.hostname||this.is("IP"))return"";var i=this.s9.hostname.lastIndexOf("."),r=this.s9.hostname.substring(i+1);return e!==!0&&n&&n.list[r.toLowerCase()]?n.get(this.s9.hostname)||r:r}var a;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');a=new RegExp(o(this._aa())+"$"),this.s9.hostname=this.s9.hostname.replace(a,t)}else{if(!this.s9.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(o(this._aa())+"$"),this.s9.hostname=this.s9.hostname.replace(a,t)}return this.pT(!e),this},g.aba=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this.s9.path&&!this.s9.hostname)return"";if("/"===this.s9.path)return"/";var n=this.s9.path.length-this.filename().length-1,i=this.s9.path.substring(0,n)||(this.s9.hostname?"/":"");return t?r.vaa(i):i}var a=this.s9.path.length-this.filename().length,s=this.s9.path.substring(0,a),h=new RegExp("^"+o(s));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.xaa(t),this.s9.path=this.s9.path.replace(h,t),this.pT(!e),this},g.filename=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this.s9.path||"/"===this.s9.path)return"";var n=this.s9.path.lastIndexOf("/"),i=this.s9.path.substring(n+1);return t?r.bba(i):i}var a=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(a=!0);var s=new RegExp(o(this.filename())+"$");return t=r.xaa(t),this.s9.path=this.s9.path.replace(s,t),a?this.cba(e):this.pT(!e),this},g.suffix=function(t,e){if(this.s9.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this.s9.path||"/"===this.s9.path)return"";var n,i,a=this.filename(),s=a.lastIndexOf(".");return s===-1?"":(n=a.substring(s+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",t?r.bba(i):i)}"."===t.charAt(0)&&(t=t.substring(1));var h,u=this.suffix();if(u)h=t?new RegExp(o(u)+"$"):new RegExp(o("."+u)+"$");else{if(!t)return this;this.s9.path+="."+r.xaa(t)}return h&&(t=r.xaa(t),this.s9.path=this.s9.path.replace(h,t)),this.pT(!e),this},g.Naa=function(t,e,n){var i=this.s9.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),a=r.split(i);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(s(e)){a=[];for(var h=0,u=e.length;h<u;h++)(e[h].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(f(e[h])))}else(e||"string"==typeof e)&&(e=f(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=f(e):a.splice(t,1);return o&&a.unshift(""),this.path(a.join(i),n)},g.dba=function(t,e,n){var i,o,a;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(i=this.Naa(t,e,n),s(i))for(o=0,a=i.length;o<a;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(s(e))for(o=0,a=e.length;o<a;o++)e[o]=r.encode(e[o]);else e="string"==typeof e||e instanceof String?r.encode(e):e;return this.Naa(t,e,n)};var A=g.t9;return g.t9=function(t,e){if(t===!0)return r.Daa(this.s9.t9,this.s9.v9);if("function"==typeof t){var n=r.Daa(this.s9.t9,this.s9.v9),i=t.call(this,n);return this.s9.t9=r.Haa(i||n,this.s9.u9,this.s9.v9),this.pT(!e),this}return void 0!==t&&"string"!=typeof t?(this.s9.t9=r.Haa(t,this.s9.u9,this.s9.v9),this.pT(!e),this):A.call(this,t,e)},g.eba=function(t,e,n){var i=r.Daa(this.s9.t9,this.s9.v9);if("string"==typeof t||t instanceof String)i[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)m.call(t,o)&&(i[o]=t[o])}return this.s9.t9=r.Haa(i,this.s9.u9,this.s9.v9),"string"!=typeof t&&(n=e),this.pT(!n),this},g.Jaa=function(t,e,n){var i=r.Daa(this.s9.t9,this.s9.v9);return r.Jaa(i,t,void 0===e?null:e),this.s9.t9=r.Haa(i,this.s9.u9,this.s9.v9),"string"!=typeof t&&(n=e),this.pT(!n),this},g.Kaa=function(t,e,n){var i=r.Daa(this.s9.t9,this.s9.v9);return r.Kaa(i,t,e),this.s9.t9=r.Haa(i,this.s9.u9,this.s9.v9),"string"!=typeof t&&(n=e),this.pT(!n),this},g.Laa=function(t,e,n){var i=r.Daa(this.s9.t9,this.s9.v9);return r.Laa(i,t,e,n)},g.fba=g.eba,g.gba=g.Jaa,g.hba=g.Kaa,g.iba=g.Laa,g.normalize=function(){return this.s9.urn?this.lba(!1).cba(!1).kba(!1).jba(!1).pT():this.lba(!1).nba(!1).mba(!1).cba(!1).kba(!1).jba(!1).pT()},g.lba=function(t){return"string"==typeof this.s9.protocol&&(this.s9.protocol=this.s9.protocol.toLowerCase(),this.pT(!t)),this},g.nba=function(n){return this.s9.hostname&&(this.is("IDN")&&t?this.s9.hostname=t.Taa(this.s9.hostname):this.is("IPv6")&&e&&(this.s9.hostname=e.oba(this.s9.hostname)),this.s9.hostname=this.s9.hostname.toLowerCase(),this.pT(!n)),this},g.mba=function(t){return"string"==typeof this.s9.protocol&&this.s9.port===r.D9[this.s9.protocol]&&(this.s9.port=null,this.pT(!t)),this},g.cba=function(t){var e=this.s9.path;if(!e)return this;if(this.s9.urn)return this.s9.path=r.yaa(this.s9.path),this.pT(!t),this;if("/"===this.s9.path)return this;e=r.xaa(e);var n,i,o,a="";for("/"!==e.charAt(0)&&(n=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),n&&(a=e.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));;){if(i=e.search(/\/\.\.(\/|$)/),i===-1)break;0!==i?(o=e.substring(0,i).lastIndexOf("/"),o===-1&&(o=i),e=e.substring(0,o)+e.substring(i+3)):e=e.substring(3)}return n&&this.is("relative")&&(e=a+e.substring(1)),this.s9.path=e,this.pT(!t),this},g.pba=g.cba,g.kba=function(t){return"string"==typeof this.s9.t9&&(this.s9.t9.length?this.t9(r.Daa(this.s9.t9,this.s9.v9)):this.s9.t9=null,this.pT(!t)),this},g.jba=function(t){return this.s9.sU||(this.s9.sU=null,this.pT(!t)),this},g.qba=g.kba,g.rba=g.jba,g.T9=function(){var t=r.encode,e=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},g.U9=function(){var t=r.encode,e=r.decode;r.encode=p,r.decode=unescape;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},g.sba=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e.s9.protocol&&(n+=e.s9.protocol+"://"),e.s9.hostname&&(e.is("punycode")&&t?(n+=t.tba(e.s9.hostname),e.s9.port&&(n+=":"+e.s9.port)):n+=e.host()),e.s9.hostname&&e.s9.path&&"/"!==e.s9.path.charAt(0)&&(n+="/"),n+=e.path(!0),e.s9.t9){for(var i="",o=0,a=e.s9.t9.split("&"),s=a.length;o<s;o++){var h=(a[o]||"").split("=");i+="&"+r.uaa(h[0],this.s9.v9).replace(/&/g,"%26"),void 0!==h[1]&&(i+="="+r.uaa(h[1],this.s9.v9).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.uaa(e.hash(),!0)},g.r9=function(t){var e,n,i,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this.s9.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),o.s9.protocol||(o.s9.protocol=t.s9.protocol),this.s9.hostname)return o;for(n=0;i=a[n];n++)o.s9[i]=t.s9[i];return o.s9.path?".."===o.s9.path.substring(-2)&&(o.s9.path+="/"):(o.s9.path=t.s9.path,o.s9.t9||(o.s9.t9=t.s9.t9)),"/"!==o.path().charAt(0)&&(e=t.aba(),e=e?e:0===t.path().indexOf("/")?"/":"",o.s9.path=(e?e+"/":"")+o.s9.path,o.cba()),o.pT(),o},g.uba=function(t){var e,n,i,o,a,s=this.clone().normalize();if(s.s9.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=s.s9,n=t.s9,o=s.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return s.pT();if(null!==e.protocol||null!==e.username||null!==e.password)return s.pT();if(e.hostname!==n.hostname||e.port!==n.port)return s.pT();if(e.hostname=null,e.port=null,o===a)return e.path="",s.pT();if(i=r.Oaa(o,a),!i)return s.pT();var h=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=h+e.path.substring(i.length)||"./",s.pT()},g.Zi=function(t){var e,n,i,o=this.clone(),a=new r(t),h={},u={},f={};if(o.normalize(),a.normalize(),o.toString()===a.toString())return!0;if(e=o.t9(),n=a.t9(),o.t9(""),a.t9(""),o.toString()!==a.toString())return!1;if(e.length!==n.length)return!1;h=r.Daa(e,this.s9.v9),u=r.Daa(n,this.s9.v9);for(i in h)if(m.call(h,i)){if(s(h[i])){if(!c(h[i],u[i]))return!1}else if(h[i]!==u[i])return!1;f[i]=!0}for(i in u)if(m.call(u,i)&&!f[i])return!1;return!0},g.u9=function(t){return this.s9.u9=!!t,this},g.v9=function(t){return this.s9.v9=!!t,this},r}),function(){var t={},e=null,n=!0,i=!1;try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:n=!1}catch(t){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(t){i=!0}else i=!0;if(n){var r="undefined"==typeof e.createGain?e.createGainNode():e.createGain();r.gain.value=1,r.connect(e.destination)}var o=function(t){this.vba=1,this.wba=!1,this.xba=n,this.yba=e,this.zba=i,this.Aba=[],this.Bba=t,this.Cba=!0};o.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&t<=1){e.vba=t,n&&(r.gain.value=t);for(var i in e.Aba)if(e.Aba.hasOwnProperty(i)&&e.Aba[i].Dba===!1)for(var o=0;o<e.Aba[i].Eba.length;o++)e.Aba[i].Eba[o].volume=e.Aba[i].vba*e.vba;return e}return n?r.gain.value:e.vba},Fba:function(){return this.Gba(!0),this},Hba:function(){return this.Gba(!1),this},Gba:function(t){var e=this;e.wba=t,n&&(r.gain.value=t?0:e.vba);for(var i in e.Aba)if(e.Aba.hasOwnProperty(i)&&e.Aba[i].Dba===!1)for(var o=0;o<e.Aba[i].Eba.length;o++)e.Aba[i].Eba[o].muted=t},Iba:function(t){return this.Bba[t]},Jba:function(){var t=this;if(!e||!t.Kba&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t.Kba=!1;var n=function(){var i=e.createBuffer(1,1,22050),r=e.createBufferSource();r.buffer=i,r.connect(e.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){r.playbackState!==r.PLAYING_STATE&&r.playbackState!==r.FINISHED_STATE||(t.Kba=!0,t.Cba=!1,window.removeEventListener("touchend",n,!1))},0)};return window.addEventListener("touchend",n,!1),t}}};var a=null,s={};i||(a=new Audio,s={Lba:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),Mba:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),Nba:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),Oba:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),Pba:!!a.canPlayType("audio/aac;").replace(/^no$/,""),Qba:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),Rba:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),Sba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var h=new o(s),u=function(t){var i=this;i.Tba=t.autoplay||!1,i.Uba=t.buffer||!1,i.Vba=t.duration||0,i.Wba=t.format||null,i.Xba=t.loop||!1,i.Yba=!1,i.Zba=t.$ba||{},i._ba=t.src||"",i.aca=t.bca||[0,0,-.5],i.vba=void 0!==t.volume?t.volume:1,i.cca=t.dca||[],i.eca=t.rate||1,i.fca=t.q||null,i.gca=[t.onload||function(){}],i.hca=[t.ica||function(){}],i.jca=[t.onend||function(){}],i.kca=[t.onpause||function(){}],i.lca=[t.onplay||function(){}],i.mca=[],i.Dba=n&&!i.Uba,i.Eba=[],i.Dba&&i.nca(),"undefined"!=typeof e&&e&&h.Cba&&h.Jba(),h.Aba.push(i),i.load()};if(u.prototype={load:function(){var t=this,e=null;if(i)return void t.ET("loaderror",new Error("No audio support."));for(var n=0;n<t.cca.length;n++){var r,a;if(t.Wba)r=t.Wba;else{if(a=t.cca[n],r=/^data:audio\/([^;,]+);/i.exec(a),r||(r=/\.([^.]+)$/.exec(a.split("?",1)[0])),!r)return void t.ET("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));r=r[1].toLowerCase()}if(s[r]){e=t.cca[n];break}}if(!e)return void t.ET("loaderror",new Error("No codec support for selected audio sources."));if(t._ba=e,t.Dba)c(t,e);else{var u=new Audio;u.addEventListener("error",function(){u.error&&4===u.error.code&&(o.zba=!0),t.ET("loaderror",{type:u.error?u.error.code:0})},!1),t.Eba.push(u),u.src=e,u.oca=0,u.preload="auto",u.volume=h.wba?0:t.vba*h.volume();var f=function(){t.Vba=Math.ceil(10*u.duration)/10,0===Object.getOwnPropertyNames(t.Zba).length&&(t.Zba={pca:[0,1e3*t.Vba]}),t.Yba||(t.Yba=!0,t.ET("load")),t.Tba&&t.play(),u.removeEventListener("canplaythrough",f,!1)};u.addEventListener("canplaythrough",f,!1),u.load()}return t},dca:function(t){var e=this;return t?(e.stop(),e.cca="string"==typeof t?[t]:t,e.Yba=!1,e.load(),e):e.cca},play:function(t,n){var i=this;return"function"==typeof t&&(n=t),t&&"function"!=typeof t||(t="_default"),i.Yba?i.Zba[t]?(i.qca(function(r){r.Zba=t;var o=r.oca>0?r.oca:i.Zba[t][0]/1e3,a=0;i.Dba?(a=i.Zba[t][1]/1e3-r.oca,r.oca>0&&(o=i.Zba[t][0]/1e3+o)):a=i.Zba[t][1]/1e3-(o-i.Zba[t][0]/1e3);var s,u=!(!i.Xba&&!i.Zba[t][2]),c="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:c,$ba:t,loop:u};s=setTimeout(function(){!i.Dba&&u&&i.stop(e.id).play(t,e.id),i.Dba&&!u&&(i.rca(e.id).paused=!0,i.rca(e.id).oca=0,i.sca(e.id)),i.Dba||u||i.stop(e.id),i.ET("end",c)},a/i.eca*1e3),i.mca.push({tca:s,id:e.id})}(),i.Dba){var f=i.Zba[t][0]/1e3,l=i.Zba[t][1]/1e3;r.id=c,r.paused=!1,p(i,[u,f,l],c),i.uca=e.currentTime,r.gain.value=i.vba,"undefined"==typeof r.vca.start?u?r.vca.noteGrainOn(0,o,86400):r.vca.noteGrainOn(0,o,a):u?r.vca.start(0,o,86400):r.vca.start(0,o,a)}else{if(4!==r.readyState&&(r.readyState||!navigator.wca))return i.sca(c),function(){var e=i,o=t,a=n,s=r,h=function(){e.play(o,a),s.removeEventListener("canplaythrough",h,!1)};s.addEventListener("canplaythrough",h,!1)}(),i;r.readyState=4,r.id=c,r.currentTime=o,r.muted=h.wba||r.muted,r.volume=i.vba*h.volume(),setTimeout(function(){r.play()},0)}return i.ET("play"),"function"==typeof n&&n(c),i}),i):("function"==typeof n&&n(),i):(i.ET("load",function(){i.play(t,n)}),i)},pause:function(t){var e=this;if(!e.Yba)return e.ET("play",function(){e.pause(t)}),e;e.sca(t);var n=t?e.rca(t):e.xca();if(n)if(n.oca=e.cD(null,t),e.Dba){if(!n.vca||n.paused)return e;n.paused=!0,"undefined"==typeof n.vca.stop?n.vca.noteOff(0):n.vca.stop(0)}else n.pause();return e.ET("pause"),e},stop:function(t){var e=this;if(!e.Yba)return e.ET("play",function(){e.stop(t)}),e;e.sca(t);var n=t?e.rca(t):e.xca();if(n)if(n.oca=0,e.Dba){if(!n.vca||n.paused)return e;n.paused=!0,"undefined"==typeof n.vca.stop?n.vca.noteOff(0):n.vca.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return e},Fba:function(t){var e=this;if(!e.Yba)return e.ET("play",function(){e.Fba(t)}),e;var n=t?e.rca(t):e.xca();return n&&(e.Dba?n.gain.value=0:n.muted=!0),e},Hba:function(t){var e=this;if(!e.Yba)return e.ET("play",function(){e.Hba(t)}),e;var n=t?e.rca(t):e.xca();return n&&(e.Dba?n.gain.value=e.vba:n.muted=!1),e},volume:function(t,e){var n=this;if(t=parseFloat(t),t>=0&&t<=1){if(n.vba=t,!n.Yba)return n.ET("play",function(){n.volume(t,e)}),n;var i=e?n.rca(e):n.xca();return i&&(n.Dba?i.gain.value=t:i.volume=t*h.volume()),n}return n.vba},loop:function(t){var e=this;return"boolean"==typeof t?(e.Xba=t,e):e.Xba},$ba:function(t){var e=this;return"object"==typeof t?(e.Zba=t,e):e.Zba},cD:function(t,n){var i=this;if(!i.Yba)return i.ET("load",function(){i.cD(t)}),"number"==typeof t?i:i.oca||0;t=parseFloat(t);var r=n?i.rca(n):i.xca();if(r)return t>=0?(i.pause(n),r.oca=t,i.play(r.Zba,n),i):i.Dba?r.oca+(e.currentTime-i.uca):r.currentTime;if(t>=0)return i;for(var o=0;o<i.Eba.length;o++)if(i.Eba[o].paused&&4===i.Eba[o].readyState)return i.Dba?i.Eba[o].oca:i.Eba[o].currentTime},bca:function(t,e,n,i){var r=this;if(e="undefined"!=typeof e&&e?e:0,n="undefined"!=typeof n&&n?n:-.5,!r.Yba)return r.ET("play",function(){r.bca(t,e,n,i)}),r;if(!(t>=0||t<0))return r.aca;if(r.Dba){var o=i?r.rca(i):r.xca();o&&(r.aca=[t,e,n],o.hx.setPosition(t,e,n),o.hx.panningModel=r.fca||"HRTF")}return r},yca:function(t,e,n,i,r){var o=this,a=Math.abs(t-e),s=t>e?"down":"up",h=a/.01,u=n/h;if(!o.Yba)return o.ET("load",function(){o.yca(t,e,n,i,r)}),o;o.volume(t,r);for(var c=1;c<=h;c++)!function(){var t=o.vba+("up"===s?.01:-.01)*c,n=Math.round(1e3*t)/1e3,a=e;setTimeout(function(){o.volume(n,r),n===a&&i&&i()},u*c)}()},St:function(t,e,n){return this.volume(0).play().yca(0,t,e,n)},Ut:function(t,e,n,i){var r=this;return r.yca(r.vba,t,e,function(){n&&n(),r.pause(i),r.ET("end")},i)},rca:function(t){for(var e=this,n=e.Eba[0],i=0;i<e.Eba.length;i++)if(e.Eba[i].id===t){n=e.Eba[i];break}return n},xca:function(){for(var t=this,e=null,n=0;n<t.Eba.length;n++)if(!t.Eba[n].paused){e=t.Eba[n];break}return t.zca(),e},qca:function(t){for(var e=this,n=null,i=0;i<e.Eba.length;i++)if(e.Eba[i].paused&&4===e.Eba[i].readyState){t(e.Eba[i]),n=!0;break}if(e.zca(),!n){var r;if(e.Dba)r=e.nca(),t(r);else{e.load(),r=e.Eba[e.Eba.length-1];var o=navigator.wca?"canplaythrough":"loadedmetadata",a=function(){r.removeEventListener(o,a,!1),t(r)};r.addEventListener(o,a,!1)}}},zca:function(){var t,e=this,n=0;for(t=0;t<e.Eba.length;t++)e.Eba[t].paused&&n++;for(t=e.Eba.length-1;t>=0&&!(n<=5);t--)e.Eba[t].paused&&(e.Dba&&e.Eba[t].disconnect(0),n--,e.Eba.splice(t,1))},sca:function(t){for(var e=this,n=-1,i=0;i<e.mca.length;i++)if(e.mca[i].id===t){n=i;break}var r=e.mca[n];r&&(clearTimeout(r.tca),e.mca.splice(n,1))},nca:function(){var t=this,n=t.Eba,i=t.Eba.length;return n[i]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),n[i].gain.value=t.vba,n[i].paused=!0,n[i].oca=0,n[i].readyState=4,n[i].connect(r),n[i].hx=e.createPanner(),n[i].hx.panningModel=t.fca||"equalpower",n[i].hx.setPosition(t.aca[0],t.aca[1],t.aca[2]),n[i].hx.connect(n[i]),n[i]},ET:function(t,e){var n=this,i=n["_on"+t];if("function"==typeof e)i.push(e);else for(var r=0;r<i.length;r++)e?i[r].call(n,e):i[r].call(n);return n},mW:function(t,e){var n=this,i=n["_on"+t];if(e){for(var r=0;r<i.length;r++)if(e===i[r]){i.splice(r,1);break}}else n["_on"+t]=[];return n},Aca:function(){for(var e=this,n=e.Eba,i=0;i<e.Eba.length;i++)n[i].paused||(e.stop(n[i].id),e.ET("end",n[i].id)),e.Dba?n[i].disconnect(0):n[i].src="";for(i=0;i<e.mca.length;i++)clearTimeout(e.mca[i].tca);var r=h.Aba.indexOf(e);null!==r&&r>=0&&h.Aba.splice(r,1),delete t[e._ba],e=null}},n)var c=function(e,n){if(n in t)return e.Vba=t[n].duration,void l(e);if(/^data:[^;]+;base64,/.test(n)){for(var i=atob(n.split(",")[1]),r=new Uint8Array(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);f(r.buffer,e,n)}else{var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){f(a.response,e,n)},a.onerror=function(){e.Dba&&(e.Uba=!0,e.Dba=!1,e.Eba=[],delete e.Bca,delete t[n],e.load())};try{a.send()}catch(t){a.onerror()}}},f=function(n,i,r){e.decodeAudioData(n,function(e){e&&(t[r]=e,l(i,e))},function(t){i.ET("loaderror",t)})},l=function(t,e){t.Vba=e?e.duration:t.Vba,0===Object.getOwnPropertyNames(t.Zba).length&&(t.Zba={pca:[0,1e3*t.Vba]}),t.Yba||(t.Yba=!0,t.ET("load")),t.Tba&&t.play()},p=function(n,i,r){var o=n.rca(r);o.vca=e.createBufferSource(),o.vca.buffer=t[n._ba],o.vca.connect(o.hx),o.vca.loop=i[0],i[0]&&(o.vca.loopStart=i[1],o.vca.loopEnd=i[1]+i[2]),o.vca.playbackRate.value=n.eca};"function"==typeof define&&define.hg&&define(function(){return{Cca:h,Dca:u}}),"undefined"!=typeof exports&&(exports.Cca=h,exports.Dca=u),"undefined"!=typeof window&&(window.Cca=h,window.Dca=u)}(),function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function h(){return this.bodyUsed=!1,this.Fca=function(t){if(this.Gca=t,"string"==typeof t)this.Hca=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this.Ica=t;else if(d.Eca&&FormData.prototype.isPrototypeOf(t))this.Jca=t;else if(t){if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this.Hca="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this.Ica&&this.Ica.type&&this.headers.set("content-type",this.Ica.type))},d.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this.Ica)return Promise.resolve(this.Ica);if(this.Jca)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.Hca]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=r(this);if(t)return t;if(this.Ica)return s(this.Ica);if(this.Jca)throw new Error("could not read FormData body as text");return Promise.resolve(this.Hca)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this.Hca)},d.Eca&&(this.Eca=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return E.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var n=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.Kca=t.Kca,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t.Gca,t.bodyUsed=!0)}else this.url=t;if(this.Kca=e.Kca||this.Kca||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this.Fca(n)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function l(t){var e=new i,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();e.append(i,r)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof i?e.headers:new i(e.headers),this.url=e.url||"",this.Fca(t)}if(!t.fetch){i.prototype.append=function(t,i){t=e(t),i=n(i);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(i)},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},i.prototype.getAll=function(t){return this.map[e(t)]||[]},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t));
},i.prototype.set=function(t,i){this.map[e(t)]=[n(i)]},i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){t.call(e,i,n,this)},this)},this)};var d={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),Eca:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},h.call(c.prototype),h.call(p.prototype),p.prototype.clone=function(){return new p(this.Gca,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];p.Lca=function(t,e){if(v.indexOf(e)===-1)throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=c,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,i){function r(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var a=new XMLHttpRequest;a.onload=function(){var t=1223===a.status?204:a.status;if(t<100||t>599)return void i(new TypeError("Network request failed"));var e={status:t,statusText:a.statusText,headers:l(a),url:r()},o="response"in a?a.response:a.responseText;n(new p(o,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.Kca&&(a.withCredentials=!0),"responseType"in a&&d.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof o.Gca?null:o.Gca)})},t.fetch.Mca=!0}}("undefined"!=typeof self?self:this),function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function i(t){G=t}function r(t){K=t}function o(){return function(){process.Nca(c)}}function a(){return function(){q(c)}}function s(){var t=0,e=new X(c),n=document.createTextNode("");return e.observe(n,{Oca:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(c,1)}}function c(){for(var t=0;t<V;t+=2){var e=Q[t],n=Q[t+1];e(n),Q[t]=void 0,Q[t+1]=void 0}V=0}function f(){try{var t=require,e=t("vertx");return q=e.Pca||e.Qca,a()}catch(t){return u()}}function l(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function E(t){try{return t.then}catch(t){return nt.error=t,nt}}function v(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}function g(t,e,n){K(function(t){var i=!1,r=v(n,e,function(n){i||(i=!0,e!==n?T(t,n):w(t,n))},function(e){i||(i=!0,H(t,e))},"Settle: "+(t.Rca||" unknown promise"));!i&&r&&(i=!0,H(t,r))},t)}function m(t,e){e.Sca===tt?w(t,e.Tca):e.Sca===et?H(t,e.Tca):b(e,void 0,function(e){T(t,e)},function(e){H(t,e)})}function y(t,n){if(n.constructor===t.constructor)m(t,n);else{var i=E(n);i===nt?H(t,nt.error):void 0===i?w(t,n):e(i)?g(t,n,i):w(t,n)}}function T(e,n){e===n?H(e,p()):t(n)?y(e,n):w(e,n)}function R(t){t.Uca&&t.Uca(t.Tca),x(t)}function w(t,e){t.Sca===$&&(t.Tca=e,t.Sca=tt,0!==t.Vca.length&&K(x,t))}function H(t,e){t.Sca===$&&(t.Sca=et,t.Tca=e,K(R,t))}function b(t,e,n,i){var r=t.Vca,o=r.length;t.Uca=null,r[o]=e,r[o+tt]=n,r[o+et]=i,0===o&&t.Sca&&K(x,t)}function x(t){var e=t.Vca,n=t.Sca;if(0!==e.length){for(var i,r,o=t.Tca,a=0;a<e.length;a+=3)i=e[a],r=e[a+n],i?U(n,i,r,o):r(o);t.Vca.length=0}}function A(){this.error=null}function M(t,e){try{return t(e)}catch(t){return it.error=t,it}}function U(t,n,i,r){var o,a,s,h,u=e(i);if(u){if(o=M(i,r),o===it?(h=!0,a=o.error,o=null):s=!0,n===o)return void H(n,d())}else o=r,s=!0;n.Sca!==$||(u&&s?T(n,o):h?H(n,a):t===tt?w(n,o):t===et&&H(n,o))}function O(t,e){try{e(function(e){T(t,e)},function(e){H(t,e)})}catch(e){H(t,e)}}function S(t,e){var n=this;n.Wca=t,n.Xca=new t(l),n.Yca(e)?(n.Zca=e,n.length=e.length,n.$ca=e.length,n._ca(),0===n.length?w(n.Xca,n.Tca):(n.length=n.length||0,n.ada(),0===n.$ca&&w(n.Xca,n.Tca))):H(n.Xca,n.bda())}function D(t){return new rt(this,t).Xca}function C(t){function e(t){T(r,t)}function n(t){H(r,t)}var i=this,r=new i(l);if(!k(t))return H(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,a=0;r.Sca===$&&a<o;a++)b(i.resolve(t[a]),void 0,e,n);return r}function L(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(l);return T(n,t),n}function P(t){var e=this,n=new e(l);return H(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(t){this.Gs=ut++,this.Sca=void 0,this.Tca=void 0,this.Vca=[],l!==t&&(e(t)||N(),this instanceof z||I(),O(this,t))}function B(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=ct)}var j;j=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var q,G,F,k=j,V=0,K=({}.toString,function(t,e){Q[V]=t,Q[V+1]=e,V+=2,2===V&&(G?G(c):F())}),W="undefined"!=typeof window?window:void 0,Z=W||{},X=Z.MutationObserver||Z.WebKitMutationObserver,Y="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3);F=Y?o():X?s():J?h():void 0===W&&"function"==typeof require?f():u();var $=void 0,tt=1,et=2,nt=new A,it=new A;S.prototype.Yca=function(t){return k(t)},S.prototype.bda=function(){return new Error("Array Methods must be provided an Array")},S.prototype._ca=function(){this.Tca=new Array(this.length)};var rt=S;S.prototype.ada=function(){for(var t=this,e=t.length,n=t.Xca,i=t.Zca,r=0;n.Sca===$&&r<e;r++)t.cda(i[r],r)},S.prototype.cda=function(t,e){var i=this,r=i.Wca;n(t)?t.constructor===r&&t.Sca!==$?(t.Uca=null,i.dda(t.Sca,e,t.Tca)):i.eda(r.resolve(t),e):(i.$ca--,i.Tca[e]=t)},S.prototype.dda=function(t,e,n){var i=this,r=i.Xca;r.Sca===$&&(i.$ca--,t===et?H(r,n):i.Tca[e]=n),0===i.$ca&&w(r,i.Tca)},S.prototype.eda=function(t,e){var n=this;b(t,void 0,function(t){n.dda(tt,e,t)},function(t){n.dda(et,e,t)})};var ot=D,at=C,st=L,ht=P,ut=0,ct=z;z.all=ot,z.race=at,z.resolve=st,z.reject=ht,z.fda=i,z.gda=r,z.hda=K,z.prototype={constructor:z,then:function(t,e){var n=this,i=n.Sca;if(i===tt&&!t||i===et&&!e)return this;var r=new this.constructor(l),o=n.Tca;if(i){var a=arguments[i-1];K(function(){U(i,r,a,o)})}else b(n,r,t,e);return r},catch:function(t){return this.then(null,t)}};var ft=B,lt={Promise:ct,Mca:ft};"function"==typeof define&&define.hg?define(function(){return lt}):"undefined"!=typeof module&&module.Kb?module.Kb=lt:"undefined"!=typeof this&&(this.ida=lt),ft()}.call(this),function(t,e){"function"==typeof define&&define.hg?define([],function(){return t.jda=e()}):"object"==typeof exports?module.Kb=e():t.jda=e()}(this,function(){!function(t){var e="recorderWorker.js",n=function(t,n){var i=n||{},r=i.kda||4096,o=i.lda||2;this.context=t.context,this.cw=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,r,o,o);var a=new Worker(i.mda||e);a.postMessage({command:"init",XP:{sampleRate:this.context.sampleRate,lda:o}});var s,h=!1;this.cw.onaudioprocess=function(t){if(h){for(var e=[],n=0;n<o;n++)e.push(t.inputBuffer.getChannelData(n));a.postMessage({command:"record",buffer:e})}},this.__=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])},this.nda=function(){h=!0},this.stop=function(){h=!1},this.clear=function(){a.postMessage({command:"clear"})},this.oda=function(t){s=t||i.RU,a.postMessage({command:"getBuffer"})},this.pda=function(t,e){if(s=t||i.RU,e=e||i.type||"audio/wav",!s)throw new Error("Callback not set");a.postMessage({command:"exportWAV",type:e})},a.onmessage=function(t){var e=t.data;s(e)},t.connect(this.cw),this.cw.connect(this.context.destination)};n.qda=function(e,n){var i=(t.URL||t.webkitURL).createObjectURL(e),r=t.document.createElement("a");r.href=i,r.download=n||"output.wav";var o=document.createEvent("Event");o.initEvent("click",!0,!0),r.dispatchEvent(o)},t.rda=n}(window),function(t){function e(){return n}function n(e){if(!(this instanceof n))return new n(e);if(t.AudioContext||(t.AudioContext=t.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=t.AudioContext&&new t.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");i(e),u=e,c=this}function i(t){function e(){var t=arguments[0];return arguments[0]=l.isPrototypeOf?l.isPrototypeOf(t)?t.input:t:t.input||t,r.apply(this,arguments),t}if(t.Eda!==!0){var n=t.createGain(),i=Object.getPrototypeOf(Object.getPrototypeOf(n)),r=i.connect;i.connect=e,t.Eda=!0}}function r(t){return Math.max(0,Math.round(100*Math.pow(2,t/6))/100)}function o(t,e){var n,i,r=0,o=0,a=0,s=0;return n=t.toExponential().match(/^.\.?(.*)e(.+)$/),r=parseInt(n[2],10)-(n[1]+"").length,n=e.toExponential().match(/^.\.?(.*)e(.+)$/),o=parseInt(n[2],10)-(n[1]+"").length,o>r&&(r=o),i=t%e,r<-100||r>20?(a=Math.round(Math.log(i)/Math.log(10)),s=Math.pow(10,a),(i/s).toFixed(a-r)*s):parseFloat(i.toFixed(-r))}function a(t){return 0===t?1:Math.abs(t)/t}function s(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function h(t,e){return void 0===t?e:t}var u,c,f=function(t,e){t.value=e},l=Object.create(null,{sda:{PV:!0,value:function(t){t?(this.input.disconnect(),this.input.connect(this.tda),this.uda&&this.uda(t)):(this.input.disconnect(),this.input.connect(this.vda))}},r3:{get:function(){return this.wda},set:function(t){this.xda!==t&&(this.wda=t,this.sda(!t),this.xda=t)}},connect:{value:function(t){this.vda.connect(t)}},disconnect:{value:function(t){this.vda.disconnect(t)}},yda:{value:function(t){for(var e=t.length-1;e--;){if(!t[e].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",t[e]);t[e+1].input?t[e].connect(t[e+1].input):t[e].connect(t[e+1])}}},zda:{value:function(){var t={};for(var e in this.Mb)t[e]=this.Mb[e].value;return t}},Ada:{value:function(t,e,n,i){var r,o=i?~~(i/1e3):u.currentTime,a=n?~~(n/1e3):0,s=this.Mb[t],h=this[t];h?s.Bda?(n?(r="linearRampToValueAtTime",h.cancelScheduledValues(o),h.setValueAtTime(h.value,o)):r="setValueAtTime",h[r](e,a+o)):h=e:console.error("Invalid Property for "+this.name)}}}),p="float",d="boolean",E="string",v="int";"undefined"!=typeof module&&module.Kb?module.Kb=n:"function"==typeof define?t.Cda("Tuna",e):t.Dda=n,n.prototype.Fda=function(t){t||(t=this.zda()),this.bufferSize=t.bufferSize||this.Mb.bufferSize.value,this.input=u.createGain(),this.tda=u.createGain(),this.Gda=u.createScriptProcessor(this.bufferSize,1,1),this.vda=u.createGain(),this.tda.connect(this.Gda),this.Gda.connect(this.vda);var e,n,i,r,o,a=0,s=0;this.Gda.onaudioprocess=function(t){for(e=t.inputBuffer.getChannelData(0),n=t.outputBuffer.getChannelData(0),i=Math.pow(.5,this.Hda),o=e.length,r=0;r<o;r++)a+=this.Ida,a>=1&&(a-=1,s=i*Math.floor(e[r]/i+.5)),n[r]=s},this.Hda=t.Hda||this.Mb.Hda.value,this.Ida=h(t.Ida,this.Mb.Ida.value),this.r3=t.r3||!1},n.prototype.Fda.prototype=Object.create(l,{name:{value:"Bitcrusher"},Mb:{PV:!0,value:{Hda:{value:4,min:1,max:16,Bda:!1,type:v},bufferSize:{value:4096,min:256,max:16384,Bda:!1,type:v},r3:{value:!1,Bda:!1,type:d},Ida:{value:.1,min:1e-4,max:1,Bda:!1,type:p}}},Hda:{Bq:!0,get:function(){return this.Gda.Hda},set:function(t){this.Gda.Hda=t}},Ida:{Bq:!0,get:function(){return this.Gda.Ida},set:function(t){this.Gda.Ida=t}}}),n.prototype.Jda=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.Kda=this.Lda(t.Mda||"../impulses/impulse_guitar.wav"),this.Nda=u.createGain(),this.vda=u.createGain(),this.tda.connect(this.Kda.input),this.Kda.vda.connect(this.Nda),this.Nda.connect(this.vda),this.Oda=h(t.Oda,this.Mb.Oda),this.r3=t.r3||!1},n.prototype.Jda.prototype=Object.create(l,{name:{value:"Cabinet"},Mb:{PV:!0,value:{Oda:{value:1,min:0,max:20,Bda:!0,type:p},r3:{value:!1,Bda:!1,type:d}}},Oda:{Bq:!0,get:function(){return this.Nda.gain},set:function(t){this.Nda.gain.value=t}},Lda:{value:function(t){return new c.Pda({Qda:t,Rda:0,Sda:1})}}}),n.prototype.Tda=function(t){t||(t=this.zda()),this.input=u.createGain(),this.Uda=this.tda=u.createGain(),this.Vda=u.createChannelSplitter(2),this.Wda=u.createDelay(),this.Xda=u.createDelay(),this.Yda=u.createGain(),this.Zda=u.createGain(),this.$da=u.createChannelMerger(2),this.vda=u.createGain(),this._da=new c.aea({target:this.Wda.delayTime,RU:f}),this.bea=new c.aea({target:this.Xda.delayTime,RU:f}),this.input.connect(this.Uda),this.Uda.connect(this.vda),this.Uda.connect(this.Vda),this.Vda.connect(this.Wda,0),this.Vda.connect(this.Xda,1),this.Wda.connect(this.Yda),this.Xda.connect(this.Zda),this.Yda.connect(this.Xda),this.Zda.connect(this.Wda),this.Wda.connect(this.$da,0,0),this.Xda.connect(this.$da,0,1),this.$da.connect(this.vda),this.cea=h(t.cea,this.Mb.cea.value),this.rate=h(t.rate,this.Mb.rate.value),this.Kc=h(t.Kc,this.Mb.Kc.value),this.GA=h(t.GA,this.Mb.GA.value),this.bea.dea=Math.PI/2,this.Uda.gain.value=.6934,this._da.sda(!0),this.bea.sda(!0),this.r3=t.r3||!1},n.prototype.Tda.prototype=Object.create(l,{name:{value:"Chorus"},Mb:{PV:!0,value:{cea:{value:.4,min:0,max:.95,Bda:!1,type:p},Kc:{value:.0045,min:0,max:1,Bda:!1,type:p},GA:{value:.7,min:0,max:1,Bda:!1,type:p},rate:{value:1.5,min:0,max:8,Bda:!1,type:p},r3:{value:!1,Bda:!1,type:d}}},Kc:{Bq:!0,get:function(){return this.eea},set:function(t){this.eea=2e-4*(2*Math.pow(10,t)),this._da.offset=this.eea,this.bea.offset=this.eea,this.fea=this.fea}},GA:{Bq:!0,get:function(){return this.fea},set:function(t){this.fea=t,this._da.gea=this.fea*this.eea,this.bea.gea=this.fea*this.eea}},cea:{Bq:!0,get:function(){return this.hea},set:function(t){this.hea=t,this.Yda.gain.value=this.hea,this.Zda.gain.value=this.hea}},rate:{Bq:!0,get:function(){return this.eca},set:function(t){this.eca=t,this._da.frequency=this.eca,this.bea.frequency=this.eca}}}),n.prototype.iea=function(t){t||(t=this.zda()),this.input=u.createGain(),this.jea=this.tda=u.createDynamicsCompressor(),this.Nda=u.createGain(),this.vda=u.createGain(),this.jea.connect(this.Nda),this.Nda.connect(this.vda),this.kea=h(t.kea,this.Mb.kea.value),this.Oda=t.Oda||this.Mb.Oda.value,this.threshold=h(t.threshold,this.Mb.threshold.value),this.release=t.release||this.Mb.release.value,this.attack=h(t.attack,this.Mb.attack.value),this.ratio=t.ratio||this.Mb.ratio.value,this.knee=h(t.knee,this.Mb.knee.value),this.r3=t.r3||!1},n.prototype.iea.prototype=Object.create(l,{name:{value:"Compressor"},Mb:{PV:!0,value:{threshold:{value:-20,min:-60,max:0,Bda:!0,type:p},release:{value:250,min:10,max:2e3,Bda:!0,type:p},Oda:{value:1,min:1,max:100,Bda:!0,type:p},attack:{value:1,min:0,max:1e3,Bda:!0,type:p},ratio:{value:4,min:1,max:50,Bda:!0,type:p},knee:{value:5,min:0,max:40,Bda:!0,type:p},kea:{value:!1,Bda:!1,type:d},r3:{value:!1,Bda:!1,type:d}}},lea:{value:function(){var t=4,e=this.jea;return-(e.threshold.value-e.threshold.value/e.ratio.value)/t}},kea:{Bq:!0,get:function(){return this.mea},set:function(t){this.mea=t,this.mea&&(this.Oda=this.lea())}},threshold:{Bq:!0,get:function(){return this.jea.threshold},set:function(t){this.jea.threshold.value=t,this.mea&&(this.Oda=this.lea())}},ratio:{Bq:!0,get:function(){return this.jea.ratio},set:function(t){this.jea.ratio.value=t,this.mea&&(this.Oda=this.lea())}},knee:{Bq:!0,get:function(){return this.jea.knee},set:function(t){this.jea.knee.value=t,this.mea&&(this.Oda=this.lea())}},attack:{Bq:!0,get:function(){return this.jea.attack},set:function(t){this.jea.attack.value=t/1e3}},release:{Bq:!0,get:function(){return this.jea.release},set:function(t){this.jea.release=t/1e3}},Oda:{Bq:!0,get:function(){return this.Nda.gain},set:function(t){this.Nda.gain.value=r(t)}}}),n.prototype.Pda=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.Kda=u.createConvolver(),this.nea=u.createGain(),this.oea=u.createBiquadFilter(),this.pea=u.createBiquadFilter(),this.qea=u.createGain(),this.vda=u.createGain(),this.tda.connect(this.oea),this.tda.connect(this.nea),this.oea.connect(this.pea),this.pea.connect(this.Kda),this.Kda.connect(this.qea),this.qea.connect(this.vda),this.nea.connect(this.vda),this.Rda=h(t.Rda,this.Mb.Rda.value),this.Sda=h(t.Sda,this.Mb.Sda.value),this.rea=t.rea||this.Mb.rea.value,this.buffer=t.Qda||"../impulses/ir_rev_short.wav",this.sea=t.sea||this.Mb.sea.value,this.level=h(t.level,this.Mb.level.value),this.pea.type="lowpass",this.oea.type="highpass",this.r3=t.r3||!1},n.prototype.Pda.prototype=Object.create(l,{name:{value:"Convolver"},Mb:{PV:!0,value:{rea:{value:22050,min:20,max:22050,Bda:!0,type:p},sea:{value:20,min:20,max:22050,Bda:!0,type:p},Rda:{value:1,min:0,max:1,Bda:!0,type:p},Sda:{value:1,min:0,max:1,Bda:!0,type:p},level:{value:1,min:0,max:1,Bda:!0,type:p}}},sea:{get:function(){return this.oea.frequency},set:function(t){this.oea.frequency.value=t}},rea:{get:function(){return this.pea.frequency},set:function(t){this.pea.frequency.value=t}},level:{get:function(){return this.vda.gain},set:function(t){this.vda.gain.value=t}},Rda:{get:function(){return this.nea.gain},set:function(t){this.nea.gain.value=t}},Sda:{get:function(){return this.qea.gain},set:function(t){this.qea.gain.value=t}},buffer:{Bq:!1,get:function(){return this.Kda.buffer},set:function(t){var e=this.Kda,n=new XMLHttpRequest;return t?(n.open("GET",t,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status<300&&n.status>199||302===n.status)&&u.decodeAudioData(n.response,function(t){e.buffer=t},function(t){t&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+t)})},void n.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),n.prototype.tea=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.nea=u.createGain(),this.qea=u.createGain(),this.filter=u.createBiquadFilter(),this.Kc=u.createDelay(),this.uea=u.createGain(),this.vda=u.createGain(),this.tda.connect(this.Kc),this.tda.connect(this.nea),this.Kc.connect(this.filter),this.filter.connect(this.uea),this.uea.connect(this.Kc),this.uea.connect(this.qea),this.qea.connect(this.vda),this.nea.connect(this.vda),this.delayTime=t.delayTime||this.Mb.delayTime.value,this.cea=h(t.cea,this.Mb.cea.value),this.Sda=h(t.Sda,this.Mb.Sda.value),this.Rda=h(t.Rda,this.Mb.Rda.value),this.vea=t.vea||this.Mb.vea.value,this.filter.type="lowpass",this.r3=t.r3||!1},n.prototype.tea.prototype=Object.create(l,{name:{value:"Delay"},Mb:{PV:!0,value:{delayTime:{value:100,min:20,max:1e3,Bda:!1,type:p},cea:{value:.45,min:0,max:.9,Bda:!0,type:p},vea:{value:2e4,min:20,max:2e4,Bda:!0,type:p},Sda:{value:.5,min:0,max:1,Bda:!0,type:p},Rda:{value:1,min:0,max:1,Bda:!0,type:p}}},delayTime:{Bq:!0,get:function(){return this.Kc.delayTime},set:function(t){this.Kc.delayTime.value=t/1e3}},Sda:{Bq:!0,get:function(){return this.qea.gain},set:function(t){this.qea.gain.value=t}},Rda:{Bq:!0,get:function(){return this.nea.gain},set:function(t){this.nea.gain.value=t}},cea:{Bq:!0,get:function(){return this.uea.gain},set:function(t){this.uea.gain.value=t}},vea:{Bq:!0,get:function(){return this.filter.frequency},set:function(t){this.filter.frequency.value=t}}}),n.prototype.wea=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.filter=u.createBiquadFilter(),this.vda=u.createGain(),this.tda.connect(this.filter),this.filter.connect(this.vda),this.frequency=t.frequency||this.Mb.frequency.value,this.Q=t.xea||this.Mb.Q.value,this.yea=h(t.yea,this.Mb.yea.value),this.gain=h(t.gain,this.Mb.gain.value),this.r3=t.r3||!1},n.prototype.wea.prototype=Object.create(l,{name:{value:"Filter"},Mb:{PV:!0,value:{frequency:{value:800,min:20,max:22050,Bda:!0,type:p},Q:{value:1,min:.001,max:100,Bda:!0,type:p},gain:{value:0,min:-40,max:40,Bda:!0,type:p},r3:{value:!1,Bda:!1,type:d},yea:{value:"lowpass",Bda:!1,type:E}}},yea:{Bq:!0,get:function(){return this.filter.type},set:function(t){this.filter.type=t}},Q:{Bq:!0,get:function(){return this.filter.Q},set:function(t){this.filter.Q.value=t}},gain:{Bq:!0,get:function(){return this.filter.gain},set:function(t){this.filter.gain.value=t}},frequency:{Bq:!0,get:function(){return this.filter.frequency},set:function(t){this.filter.frequency.value=t}}}),n.prototype.zea=function(t){t||(t=this.zda()),this.bufferSize=t.bufferSize||this.Mb.bufferSize.value,this.input=u.createGain(),this.tda=u.createGain(),this.Gda=u.createScriptProcessor(this.bufferSize,1,1),this.vda=u.createGain(),this.tda.connect(this.Gda),this.Gda.connect(this.vda);var e,n,i,r,o,a,s,c;e=n=i=r=o=a=s=c=0;var f,l,p,d,E,v;this.Gda.onaudioprocess=function(t){for(f=t.inputBuffer.getChannelData(0),l=t.outputBuffer.getChannelData(0),p=1.16*this.vea,inputFactor=.35013*(p*p)*(p*p),d=this.xea*(1-.15*p*p),v=f.length,E=0;E<v;E++)f[E]-=c*d,f[E]*=inputFactor,o=f[E]+.3*e+(1-p)*o,e=f[E],a=o+.3*n+(1-p)*a,n=o,s=a+.3*i+(1-p)*s,i=a,c=s+.3*r+(1-p)*c,r=s,l[E]=c},this.vea=h(t.vea,this.Mb.vea.value),this.xea=h(t.xea,this.Mb.xea.value),this.r3=t.r3||!1},n.prototype.zea.prototype=Object.create(l,{name:{value:"MoogFilter"},Mb:{PV:!0,value:{bufferSize:{value:4096,min:256,max:16384,Bda:!1,type:v},r3:{value:!1,Bda:!1,type:d},vea:{value:.065,min:1e-4,max:1,Bda:!1,type:p},xea:{value:3.5,min:0,max:4,Bda:!1,type:p}}},vea:{Bq:!0,get:function(){return this.Gda.vea},set:function(t){this.Gda.vea=t}},xea:{Bq:!0,get:function(){return this.Gda.xea},set:function(t){this.Gda.xea=t}}}),n.prototype.Aea=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.Bea=u.createGain(),this.Cea=u.createWaveShaper(),this.Dea=u.createGain(),this.vda=u.createGain(),this.tda.connect(this.Bea),this.Bea.connect(this.Cea),this.Cea.connect(this.Dea),this.Dea.connect(this.vda),this.Eea=new Float32Array(this.Fea),this.Gea=h(t.Gea,this.Mb.Gea.value),this.Hea=h(t.Hea,this.Mb.Hea.value),this.Iea=h(t.Iea,this.Mb.Iea.value),this.Jea=h(t.Jea,this.Mb.Jea.value),this.r3=t.r3||!1},n.prototype.Aea.prototype=Object.create(l,{name:{value:"Overdrive"},Mb:{PV:!0,value:{Gea:{value:1,min:0,max:1,Bda:!0,type:p,Kea:!0},Hea:{value:1,min:0,max:1,Bda:!0,type:p,Kea:!0},Iea:{value:.725,min:0,max:1,Bda:!1,type:p},Jea:{value:0,min:0,max:5,Bda:!1,type:v}}},Fea:{value:8192},Gea:{get:function(){return this.Bea.gain},set:function(t){this.Lea=t}},Iea:{get:function(){return this.Mea},set:function(t){this.Mea=t,void 0===this.Nea&&(this.Nea=0),this.Oea[this.Nea](this.Mea,this.Fea,this.Eea),this.Cea.curve=this.Eea}},Hea:{get:function(){return this.Dea.gain},set:function(t){this.Pea=r(t)}},Jea:{get:function(){return this.Nea},set:function(t){this.Nea=t,this.Iea=this.Mea}},Oea:{value:[function(t,e,n){t=Math.min(t,.9999);var i,r,o=2*t/(1-t);for(i=0;i<e;i++)r=2*i/e-1,n[i]=(1+o)*r/(1+o*Math.abs(r))},function(t,e,n){var i,r,o;for(i=0;i<e;i++)r=2*i/e-1,o=(.5*Math.pow(r+1.4,2)-1)*o>=0?5.8:1.2,n[i]=s(o)},function(t,e,n){var i,r,o,a=1-t;for(i=0;i<e;i++)r=2*i/e-1,o=r<0?-Math.pow(Math.abs(r),a+.04):Math.pow(r,a),n[i]=s(2*o)},function(t,e,n){var i,r,o,s,h=1-t>.99?.99:1-t;for(i=0;i<e;i++)r=2*i/e-1,s=Math.abs(r),s<h?o=s:s>h?o=h+(s-h)/(1+Math.pow((s-h)/(1-h),2)):s>1&&(o=s),n[i]=a(r)*o*(1/((h+1)/2))},function(t,e,n){var i,r;for(i=0;i<e;i++)r=2*i/e-1,r<-.08905?n[i]=-.75*(1-Math.pow(1-(Math.abs(r)-.032857),12)+1/3*(Math.abs(r)-.032847))+.01:r>=-.08905&&r<.320018?n[i]=-6.153*(r*r)+3.9375*r:n[i]=.630035},function(t,e,n){var i,r,o=2+Math.round(14*t),a=Math.round(Math.pow(2,o-1));for(i=0;i<e;i++)r=2*i/e-1,n[i]=Math.round(r*a)/a}]}}),n.prototype.Qea=function(t){t||(t=this.zda()),this.input=u.createGain(),this.Vda=this.tda=u.createChannelSplitter(2),this.Rea=[],this.Sea=[],this.Tea=u.createGain(),this.Uea=u.createGain(),this.$da=u.createChannelMerger(2),this.Vea=u.createGain(),this.vda=u.createGain(),this._da=new c.aea({target:this.Rea,RU:this.RU}),this.bea=new c.aea({target:this.Sea,RU:this.RU});for(var e=this.Wea;e--;)this.Rea[e]=u.createBiquadFilter(),this.Sea[e]=u.createBiquadFilter(),this.Rea[e].type="allpass",this.Sea[e].type="allpass";this.input.connect(this.Vda),this.input.connect(this.vda),this.Vda.connect(this.Rea[0],0,0),this.Vda.connect(this.Sea[0],1,0),this.yda(this.Rea),this.yda(this.Sea),this.Rea[this.Wea-1].connect(this.Tea),this.Rea[this.Wea-1].connect(this.$da,0,0),this.Sea[this.Wea-1].connect(this.Uea),this.Sea[this.Wea-1].connect(this.$da,0,1),this.Tea.connect(this.Rea[0]),this.Uea.connect(this.Sea[0]),this.$da.connect(this.vda),this.rate=h(t.rate,this.Mb.rate.value),this.Xea=t.Xea||this.Mb.Xea.value,this.GA=h(t.GA,this.Mb.GA.value),this.cea=h(t.cea,this.Mb.cea.value),this.Yea=h(t.Yea,this.Mb.Yea.value),this._da.sda(!0),this.bea.sda(!0),this.r3=t.r3||!1},n.prototype.Qea.prototype=Object.create(l,{name:{value:"Phaser"},Wea:{value:4},Mb:{PV:!0,value:{rate:{value:.1,min:0,max:8,Bda:!1,type:p},GA:{value:.6,min:0,max:1,Bda:!1,type:p},cea:{value:.7,min:0,max:1,Bda:!1,type:p},Yea:{value:40,min:0,max:180,Bda:!1,type:p},Xea:{value:700,min:500,max:1500,Bda:!1,type:p}}},RU:{value:function(t,e){for(var n=0;n<4;n++)t[n].frequency.value=e}},GA:{get:function(){return this.fea},set:function(t){this.fea=t,this._da.gea=this.Zea*this.fea,this.bea.gea=this.Zea*this.fea}},rate:{get:function(){return this.eca},set:function(t){this.eca=t,this._da.frequency=this.eca,this.bea.frequency=this.eca}},Xea:{Bq:!0,get:function(){return this.Zea},set:function(t){this.Zea=t,this._da.offset=this.Zea,this.bea.offset=this.Zea,this.fea=this.fea}},cea:{get:function(){return this.hea},set:function(t){this.hea=t,this.Tea.gain.value=this.hea,this.Uea.gain.value=this.hea}},Yea:{get:function(){return this.$ea},set:function(t){this.$ea=t;var e=this._da._ea+this.$ea*Math.PI/180;e=o(e,2*Math.PI),this.bea._ea=e}}}),n.prototype.afa=function(t){t||(t=this.zda()),this.input=u.createGain(),this.Sda=u.createGain(),this.bfa=u.createGain(),this.cfa=u.createGain(),this.vda=u.createGain(),this.dfa=u.createDelay(),this.efa=u.createDelay(),this.tda=u.createGain(),this.Vda=u.createChannelSplitter(2),this.$da=u.createChannelMerger(2),this.tda.connect(this.Vda),this.Vda.connect(this.bfa,0,0),this.Vda.connect(this.bfa,1,0),this.bfa.gain.value=.5,this.bfa.connect(this.Sda),this.Sda.connect(this.dfa),this.cfa.connect(this.dfa),this.dfa.connect(this.efa),this.efa.connect(this.cfa),this.dfa.connect(this.$da,0,0),this.efa.connect(this.$da,0,1),this.$da.connect(this.vda),this.tda.connect(this.vda),this.ffa=void 0!==t.ffa?t.ffa:this.Mb.ffa.value,this.gfa=void 0!==t.gfa?t.gfa:this.Mb.gfa.value,this.cfa.gain.value=void 0!==t.cea?t.cea:this.Mb.cea.value,this.Sda.gain.value=void 0!==t.Sda?t.Sda:this.Mb.Sda.value,this.r3=t.r3||!1},n.prototype.afa.prototype=Object.create(l,{name:{value:"PingPongDelay"},ffa:{Bq:!0,get:function(){return this.hfa},set:function(t){this.hfa=t,this.dfa.delayTime.value=t/1e3}},gfa:{Bq:!0,get:function(){return this.ifa},set:function(t){this.ifa=t,this.efa.delayTime.value=t/1e3}},Mb:{PV:!0,value:{ffa:{value:200,min:1,max:1e4,Bda:!1,type:v},gfa:{value:400,min:1,max:1e4,Bda:!1,type:v},cea:{value:.3,min:0,max:1,Bda:!1,type:p},Sda:{value:.5,min:0,max:1,Bda:!1,type:p}}}}),n.prototype.jfa=function(t){t||(t=this.zda()),this.input=u.createGain(),this.Vda=this.tda=u.createChannelSplitter(2),this.kfa=u.createGain(),this.lfa=u.createGain(),this.$da=u.createChannelMerger(2),this.vda=u.createGain(),this._da=new c.aea({target:this.kfa.gain,RU:f}),this.bea=new c.aea({target:this.lfa.gain,RU:f}),this.input.connect(this.Vda),this.Vda.connect(this.kfa,0),this.Vda.connect(this.lfa,1),this.kfa.connect(this.$da,0,0),this.lfa.connect(this.$da,0,1),this.$da.connect(this.vda),this.rate=t.rate||this.Mb.rate.value,this.Xx=h(t.Xx,this.Mb.Xx.value),this.Yea=h(t.Yea,this.Mb.Yea.value),this._da.offset=1-this.Xx/2,this.bea.offset=1-this.Xx/2,this._da.dea=this.Yea*Math.PI/180,this._da.sda(!0),this.bea.sda(!0),this.r3=t.r3||!1},n.prototype.jfa.prototype=Object.create(l,{name:{value:"Tremolo"},Mb:{PV:!0,value:{Xx:{value:.3,min:0,max:1,Bda:!1,type:p},Yea:{value:0,min:0,max:180,Bda:!1,type:p},rate:{value:5,min:.1,max:11,Bda:!1,type:p}}},Xx:{Bq:!0,get:function(){return this.mfa},set:function(t){this.mfa=t,this._da.offset=1-this.mfa/2,this.bea.offset=1-this.mfa/2,this._da.gea=this.mfa,this.bea.gea=this.mfa}},rate:{Bq:!0,get:function(){return this.eca},set:function(t){this.eca=t,this._da.frequency=this.eca,this.bea.frequency=this.eca}},Yea:{Bq:!0,get:function(){return this.eca},set:function(t){this.$ea=t;var e=this._da._ea+this.$ea*Math.PI/180;e=o(e,2*Math.PI),this.bea.dea=e}}}),n.prototype.nfa=function(t){t||(t=this.zda()),this.input=u.createGain(),this.tda=u.createGain(),this.ofa=new c.pfa({target:this,RU:function(t,e){t.qfa=e}}),this.rfa=u.createBiquadFilter(),this.sfa=u.createBiquadFilter(),this.vda=u.createGain(),this.tda.connect(this.rfa),this.rfa.connect(this.sfa),this.sfa.connect(this.vda),this.init(),this.tfa=h(t.ufa,this.Mb.tfa.value),this.xea=t.xea||this.Mb.xea.value,this.vfa=h(t.vfa,this.Mb.vfa.value),this.wfa=h(t.wfa,this.Mb.wfa.value),this.xfa=t.xfa||this.Mb.xfa.value,this.qfa=h(t.qfa,this.Mb.qfa.value),this.tda.gain.value=2,this.ofa.sda(!0),this.r3=t.r3||!1},n.prototype.nfa.prototype=Object.create(l,{name:{value:"WahWah"},Mb:{PV:!0,value:{tfa:{value:!0,Bda:!1,type:d},wfa:{value:.5,min:0,max:1,Bda:!1,type:p},xfa:{value:2,min:1,max:6,Bda:!1,type:p},qfa:{value:.2,min:0,max:1,Bda:!1,type:p},xea:{value:10,min:1,max:100,Bda:!1,type:p},vfa:{value:.5,min:-1,max:1,Bda:!1,type:p}}},uda:{value:function(t){this.tfa=t}},tfa:{get:function(){return this.yfa},set:function(t){this.yfa=t,t?(this.tda.connect(this.ofa.input),this.ofa.sda(!0)):(this.ofa.sda(!1),this.tda.disconnect(),this.tda.connect(this.rfa))}},zfa:{value:0},Afa:{value:function(){try{this.rfa.frequency.value=this.Bfa+this.Cfa*this.Dfa,this.sfa.frequency.value=this.Bfa+this.Cfa*this.Dfa}catch(t){clearTimeout(this.zfa),this.zfa=setTimeout(function(){this.Afa()}.bind(this),0)}}},qfa:{Bq:!0,get:function(){return this.Dfa.value},set:function(t){this.Dfa=Math.pow(t>1?1:t<0?0:t,this.Efa),this.Afa()}},wfa:{Bq:!0,get:function(){return this.Bfa},set:function(t){this.Bfa=50*Math.pow(10,2*t),this.Cfa=Math.min(u.sampleRate/2,this.wfa*Math.pow(2,this.Ffa)),this.Afa()}},xfa:{Bq:!0,get:function(){return this.Ffa},set:function(t){this.Ffa=t,this.Cfa=Math.min(u.sampleRate/2,this.wfa*Math.pow(2,this.Ffa)),this.Afa()}},vfa:{Bq:!0,get:function(){return this.Efa},set:function(t){this.Efa=Math.pow(10,t)}},xea:{Bq:!0,get:function(){return this.Gfa},set:function(t){this.Gfa=t,this.sfa.Q=this.Gfa}},init:{value:function(){this.vda.gain.value=1,this.sfa.type="peaking",this.rfa.type="bandpass",this.sfa.frequency.value=100,this.sfa.gain.value=20,this.sfa.Q.value=5,this.rfa.frequency.value=100,this.rfa.Q.value=1}}}),n.prototype.pfa=function(t){t||(t=this.zda()),this.input=u.createGain(),this.Hfa=this.vda=u.createScriptProcessor(this.Ifa,1,1),this.input.connect(this.vda),this.Jfa=h(t.Jfa,this.Mb.Jfa.value),this.Kfa=h(t.Kfa,this.Mb.Kfa.value),this.Lfa=0,this.target=t.target||{},this.RU=t.RU||function(){}},n.prototype.pfa.prototype=Object.create(l,{name:{value:"EnvelopeFollower"},Mb:{value:{Jfa:{value:.003,min:0,max:.5,Bda:!1,type:p},Kfa:{value:.5,min:0,max:.5,Bda:!1,type:p}}},Ifa:{value:256},Mfa:{value:0},sampleRate:{value:44100},Jfa:{Bq:!0,get:function(){return this.Nfa},set:function(t){
this.Nfa=t,this.Ofa=Math.exp(-1/this.Nfa*this.sampleRate/this.Ifa)}},Kfa:{Bq:!0,get:function(){return this.Pfa},set:function(t){this.Pfa=t,this.Qfa=Math.exp(-1/this.Pfa*this.sampleRate/this.Ifa)}},RU:{get:function(){return this.Rfa},set:function(t){"function"==typeof t?this.Rfa=t:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this.Sfa},set:function(t){this.Sfa=t}},sda:{value:function(t){this.Tfa=t,t?(this.Hfa.connect(u.destination),this.Hfa.onaudioprocess=this.Ufa(this)):(this.Hfa.disconnect(),this.Hfa.onaudioprocess=null)}},Ufa:{value:function(t){return function(e){t.K0(e)}}},K0:{value:function(t){var e,n,i,r,o=t.inputBuffer.getChannelData(0).length,a=t.inputBuffer.numberOfChannels;if(n=i=r=0,a>1)for(r=0;r<o;++r)for(;n<a;++n)e=t.inputBuffer.getChannelData(n)[r],i+=e*e/a;else for(r=0;r<o;++r)e=t.inputBuffer.getChannelData(0)[r],i+=e*e;i=Math.sqrt(i),this.Lfa<i?(this.Lfa*=this.Ofa,this.Lfa+=(1-this.Ofa)*i):(this.Lfa*=this.Qfa,this.Lfa+=(1-this.Qfa)*i),this.Rfa(this.Sfa,this.Lfa)}}}),n.prototype.aea=function(t){this.vda=u.createScriptProcessor(256,1,1),this.tda=u.destination,this.frequency=h(t.frequency,this.Mb.frequency.value),this.offset=h(t.offset,this.Mb.offset.value),this.gea=h(t.gea,this.Mb.gea.value),this.dea=h(t.dea,this.Mb.dea.value),this.target=t.target||{},this.vda.onaudioprocess=this.RU(t.RU||function(){}),this.r3=t.r3||!1},n.prototype.aea.prototype=Object.create(l,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},Mb:{value:{frequency:{value:1,min:0,max:20,Bda:!1,type:p},offset:{value:.85,min:0,max:22049,Bda:!1,type:p},gea:{value:.3,min:-22050,max:22050,Bda:!1,type:p},dea:{value:0,min:0,max:2*Math.PI,Bda:!1,type:p}}},frequency:{get:function(){return this.Vfa},set:function(t){this.Vfa=t,this.Wfa=2*Math.PI*this.Vfa*this.bufferSize/this.sampleRate}},offset:{get:function(){return this.Xfa},set:function(t){this.Xfa=t}},gea:{get:function(){return this.Yfa},set:function(t){this.Yfa=t}},dea:{get:function(){return this._ea},set:function(t){this._ea=t}},target:{get:function(){return this.Sfa},set:function(t){this.Sfa=t}},sda:{value:function(t){t?this.vda.connect(u.destination):this.vda.disconnect(u.destination)}},RU:{value:function(t){var e=this;return function(){e._ea+=e.Wfa,e._ea>2*Math.PI&&(e._ea=0),t(e.Sfa,e.Xfa+e.Yfa*Math.sin(e._ea))}}}}),n.toString=n.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this);var t=window.AudioContext||window.webkitAudioContext,e=new t,n=function(t){if(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia)return t.navigator.mediaDevices.getUserMedia.bind(t.navigator.mediaDevices);var e=t.navigator.getUserMedia||t.navigator.webkitGetUserMedia||t.navigator.mozGetUserMedia;return e?function(n){return new Promise(function(i,r){e.call(t.navigator,n,i,r)})}:function(){throw"getUserMedia is unsupported"}}(window);n?console.log("Your browser supports getUserMedia."):console.log("Your browser does not support getUserMedia.");var Wad=function(){function t(t,e){var n=4,i=1e3,r=1e3,o=-1,a=0,s=0,h=!1;if(t.length<r+i-n)return-1;for(var u=0;u<r;u++){var c=(t[u]-128)/128;s+=c*c}if(s=Math.sqrt(s/r),s<.01)return-1;for(var f=1,l=n;l<=i;l++){for(var p=0,u=0;u<r;u++)p+=Math.abs((t[u]-128)/128-(t[u+l]-128)/128);if(p=1-p/r,p>.9&&p>f)h=!0;else if(h)return e/o;f=p,p>a&&(a=p,o=l)}return a>.01?e/o:-1}var i=function(){Math.seed=6,Math.y5=function(t,e){t=t||1,e=e||0,Math.seed=(9301*Math.seed+49297)%233280;var n=Math.seed/233280;return e+n*(t-e)};for(var t=2*e.sampleRate,n=e.createBuffer(1,t,e.sampleRate),i=n.getChannelData(0),r=0;r<t;r++)i[r]=2*Math.y5()-1;return n}(),r=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t,e){t.Zfa={attack:e.Zfa?C(e.Zfa.attack,1):0,Zx:e.Zfa?C(e.Zfa.Zx,0):0,$fa:e.Zfa?C(e.Zfa.$fa,1):1,_fa:e.Zfa?C(e.Zfa._fa,3.14159):3.14159,release:e.Zfa?C(e.Zfa.release,0):0},t.aga={attack:e.Zfa?C(e.Zfa.attack,1):0,Zx:e.Zfa?C(e.Zfa.Zx,0):0,$fa:e.Zfa?C(e.Zfa.$fa,1):1,_fa:e.Zfa?C(e.Zfa._fa,3.14159):3.14159,release:e.Zfa?C(e.Zfa.release,0):0}},a=function(t,e){e.filter?r(e.filter)?t.filter=e.filter.map(function(t){return{type:t.type||"lowpass",frequency:t.frequency||600,XA:t.XA||1,Zfa:t.Zfa||null}}):t.filter=[{type:e.filter.type||"lowpass",frequency:e.filter.frequency||600,XA:e.filter.XA||1,Zfa:e.filter.Zfa||null}]:e.filter=null},s=function(t,n){var i=new XMLHttpRequest;i.open("GET",t.source,!0),i.responseType="arraybuffer",t.bga--,i.onload=function(){e.decodeAudioData(i.response,function(e){t.cga=e,3.14159===t.Zfa._fa&&(t.Zfa._fa=t.cga.duration+1),n&&n(t),t.bga++,t.dga&&t.play(t.ega)})},i.send()},h=function(t,e){e.fga?t.fga={shape:C(e.fga.shape,"sine"),speed:C(e.fga.speed,1),gga:C(e.fga.gga,5),attack:C(e.fga.attack,0)}:t.fga=null},u=function(t,e){e.hga?t.hga={shape:C(e.hga.shape,"sine"),speed:C(e.hga.speed,1),gga:C(e.hga.gga,5),attack:C(e.hga.attack,1)}:t.hga=null},c=function(t,n){if(n.iga){t.iga={qea:C(n.iga.qea,1)};var i=n.iga.Qda||Wad.jga,r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="arraybuffer",t.bga--,r.onload=function(){e.decodeAudioData(r.response,function(e){t.iga.buffer=e,t.bga++,t.dga&&t.play(t.ega),t instanceof Wad.kga&&t.lga(n),"mic"===t.source&&t.iga&&t.iga.buffer&&t.iga.cw&&!t.iga.cw.buffer&&(t.iga.cw.Kda.buffer=t.iga.buffer)})},r.send()}else t.iga=null},f=function(t,n){"panning"in n?(t.mga={location:n.mga},"number"==typeof n.mga?t.mga.type="stereo":(t.mga.type="3d",t.mga.panningModel=n.panningModel||"equalpower")):t.mga={location:0,type:"stereo"},"stereo"!==t.mga.type||e.createStereoPanner||(console.log("Your browser does not support stereo panning. Falling back to 3D panning."),t.mga={location:[0,0,0],type:"3d",panningModel:"equalpower"})},l=function(t,e){e.Kc?t.Kc={delayTime:C(e.Kc.delayTime,.5),nga:C(e.Kc.nga,2),cea:C(e.Kc.cea,.25),qea:C(e.Kc.qea,.25)}:t.Kc=null},p=function(t,i){return t.f1=[],t.oga=null,t.gain=null,n({Q9:!0,R9:!1}).then(function(n){return t.oga=e.createMediaStreamSource(n),Wad.pga=!0,d(t,i),t}).catch(function(t){console.log("Error setting up microphone input: ",t)})},d=function(t,n){t.f1=[],t.gain=e.createGain(),t.gain.gain.value=C(n.volume,t.volume),t.f1.push(t.oga),t.f1.push(t.gain),(t.filter||n.filter)&&T(t,n),(t.iga||n.iga)&&w(t,n),f(t,n),H(t,n),(t.Kc||n.Kc)&&A(t,n),U(t,n),t.qga(n,e)},Wad=function(t){if(this.source=t.source,this.destination=t.destination||e.destination,this.volume=C(t.volume,1),this.rga=this.volume,this.bga=1,this.pitch=Wad.sga[t.pitch]||t.pitch||440,this.detune=t.detune||0,this.tga=t.tga||!1,this.gain=[],this.loop=t.loop||!1,this.uga=t.uga||null,o(this,t),a(this,t),h(this,t),u(this,t),c(this,t),this.vga(t,e),f(this,t),l(this,t),"noise"===this.source)this.cga=i;else if("mic"===this.source)p(this,t);else if("object"==typeof this.source){var n=e.createBuffer(2,this.source[0].length,e.sampleRate);n.getChannelData(0).set(this.source[0]),n.getChannelData(1).set(this.source[1]),this.cga=n}else this.source in{wga:0,xga:0,yga:0,zga:0}?t.RU&&t.RU(this):s(this,t.RU)};Wad.pga=!1,Wad.Aga=e,void 0!=window.Dda&&(Wad.uga=new Tuna(Wad.Aga));var E=function(t,e){t.filter.forEach(function(t,n){t.cw.frequency.linearRampToValueAtTime(t.frequency,e.Bga),t.cw.frequency.linearRampToValueAtTime(t.Zfa.frequency,e.Bga+t.Zfa.attack)})},v=function(t,e){t.gain[0].gain.linearRampToValueAtTime(1e-4,e.Bga),t.gain[0].gain.linearRampToValueAtTime(t.volume,e.Bga+t.Zfa.attack+1e-5),t.gain[0].gain.linearRampToValueAtTime(t.volume*t.Zfa.$fa,e.Bga+t.Zfa.attack+t.Zfa.Zx+2e-5),t.gain[0].gain.linearRampToValueAtTime(t.volume*t.Zfa.$fa,e.Bga+t.Zfa.attack+t.Zfa.Zx+t.Zfa._fa+3e-5),t.gain[0].gain.linearRampToValueAtTime(1e-4,e.Bga+t.Zfa.attack+t.Zfa.Zx+t.Zfa._fa+t.Zfa.release+4e-5),t.Cga.start(e.Bga),t.Cga.stop(e.Bga+t.Zfa.attack+t.Zfa.Zx+t.Zfa._fa+t.Zfa.release)},g=function(t,e){for(var n=e&&e.destination||t.destination,i=1;i<t.f1.length;i++){if("custom"===t.f1[i-1].Dga)var r=t.f1[i-1].vda;else var r=t.f1[i-1];if("custom"===t.f1[i].Dga)var o=t.f1[i].input;else var o=t.f1[i];r.connect(o)}if("custom"===t.f1[t.f1.length-1].Dga)var a=t.f1[t.f1.length-1].vda;else var a=t.f1[t.f1.length-1];a.connect(n),Wad.iga&&t.tga&&(t.f1[t.f1.length-1].connect(Wad.iga.cw),Wad.iga.cw.connect(Wad.iga.gain),Wad.iga.gain.connect(n))},m=function(t,n){n=n||{},t.Cga=e.createOscillator(),t.Cga.type=t.source,n.pitch?n.pitch in Wad.sga?t.Cga.frequency.value=Wad.sga[n.pitch]:t.Cga.frequency.value=n.pitch:t.Cga.frequency.value=t.pitch,t.Cga.detune.value=n.detune||t.detune},y=function(t,e){e&&e.Zfa?(t.Zfa.attack=C(e.Zfa.attack,t.aga.attack),t.Zfa.Zx=C(e.Zfa.Zx,t.aga.Zx),t.Zfa.$fa=C(e.Zfa.$fa,t.aga.$fa),t.Zfa._fa=C(e.Zfa._fa,t.aga._fa),t.Zfa.release=C(e.Zfa.release,t.aga.release)):t.Zfa={attack:t.aga.attack,Zx:t.aga.Zx,$fa:t.aga.$fa,_fa:t.aga._fa,release:t.aga.release}},T=function(t,n){n.filter&&!r(n.filter)&&(n.filter=[n.filter]),t.filter.forEach(function(i,r){i.cw=e.createBiquadFilter(),i.cw.type=i.type,i.cw.frequency.value=n.filter&&n.filter[r]?n.filter[r].frequency||i.frequency:i.frequency,i.cw.Q.value=n.filter&&n.filter[r]?n.filter[r].XA||i.XA:i.XA,(n.filter&&n.filter[r].Zfa||t.filter[r].Zfa)&&"mic"!==t.source&&(i.Zfa={attack:n.filter&&n.filter[r].Zfa&&n.filter[r].Zfa.attack||t.filter[r].Zfa.attack,frequency:n.filter&&n.filter[r].Zfa&&n.filter[r].Zfa.frequency||t.filter[r].Zfa.frequency}),t.f1.push(i.cw)})},R=function(t,e){e&&e.filter&&t.filter?(r(e.filter)||(e.filter=[e.filter]),T(t,e)):t.filter&&T(t,t)},w=function(t,n){var i={Dga:"custom",input:e.createGain(),Kda:e.createConvolver(),qea:e.createGain(),vda:e.createGain()};i.Kda.buffer=t.iga.buffer,i.qea.gain.value=t.iga.qea,i.input.connect(i.Kda),i.input.connect(i.vda),i.Kda.connect(i.qea),i.qea.connect(i.vda),t.iga.cw=i,t.f1.push(t.iga.cw)},H=function(t,n){var i=n&&n.mga;"undefined"==typeof i&&(i=t.mga.location),"number"==typeof i?(t.mga.cw=e.createStereoPanner(),t.mga.cw.Ega.value=i,t.mga.type="stereo"):(t.mga.cw=e.createPanner(),t.mga.cw.setPosition(i[0],i[1],i[2]),t.mga.cw.panningModel=n.panningModel||t.panningModel||"equalpower",t.mga.type="3d"),t.f1.push(t.mga.cw)},b=function(t,e){t.fga.Fga=new Wad({source:t.fga.shape,pitch:t.fga.speed,volume:t.fga.gga,Zfa:{attack:t.fga.attack},destination:t.Cga.frequency}),t.fga.Fga.play()},x=function(t,e){t.hga.Fga=new Wad({source:t.hga.shape,pitch:t.hga.speed,volume:t.hga.gga,Zfa:{attack:t.hga.attack,_fa:10},destination:t.gain[0].gain}),t.hga.Fga.play()},A=function(t,n){if(t.Kc){n.Kc||(n.Kc={});var i={Dga:"custom",input:e.createGain(),vda:e.createGain(),Gga:e.createDelay(t.Kc.nga),uea:e.createGain(),Hga:e.createGain()};i.Gga.delayTime.value=C(n.Kc.delayTime,t.Kc.delayTime),i.uea.gain.value=C(n.Kc.cea,t.Kc.cea),i.Hga.gain.value=C(n.Kc.qea,t.Kc.qea),i.input.connect(i.Gga),i.input.connect(i.vda),i.Gga.connect(i.uea),i.Gga.connect(i.Hga),i.uea.connect(i.Gga),i.Hga.connect(i.vda),t.Kc.Gga=i,t.f1.push(i)}},M=function(t,n){t.Iga=e.createDynamicsCompressor(),t.Iga.attack.value=C(n.Iga.attack,t.Iga.attack.value),t.Iga.knee.value=C(n.Iga.knee,t.Iga.knee.value),t.Iga.ratio.value=C(n.Iga.ratio,t.Iga.ratio.value),t.Iga.release.value=C(n.Iga.release,t.Iga.release.value),t.Iga.threshold.value=C(n.Iga.threshold,t.Iga.threshold.value),t.f1.push(t.Iga)},U=function(t,e){if(t.uga||e.uga){var n={};if(t.uga)for(var i in t.uga)n[i]=t.uga[i];if(e.uga)for(var i in e.uga)n[i]=e.uga[i];console.log("tunaconfig: ",n);for(var i in n){console.log(i);var r=new Wad.uga[i](n[i]);t.f1.push(r)}}};Wad.prototype.vga=function(t,e){},Wad.prototype.qga=function(t,e){},Wad.prototype.play=function(t){return t=t||{Jga:null},this.bga<1?(this.dga=!0,this.ega=t):"mic"===this.source?Wad.pga?null===t.Jga?g(this,t):(a(this,t),h(this,t),u(this,t),c(this,t),this.vga(t,e),f(this,t),l(this,t),d(this,t),g(this,t)):(console.log("You have not given your browser permission to use your microphone."),p(this,t).then(function(e){e.play(t)})):(this.f1=[],t.Kga||(t.Kga=0),t.volume?this.volume=t.volume:this.volume=this.rga,this.source in{wga:0,xga:0,yga:0,zga:0}?m(this,t):(this.Cga=e.createBufferSource(),this.Cga.buffer=this.cga,("noise"===this.source||this.loop||t.loop)&&(this.Cga.loop=!0)),void 0===t.Bga&&(t.Bga=e.currentTime+t.Kga),this.f1.push(this.Cga),y(this,t),R(this,t),U(this,t),this.qga(t,e),this.gain.unshift(e.createGain()),this.gain[0].label=t.label,this.f1.push(this.gain[0]),this.gain.length>15&&(this.gain.length=15),this.iga&&w(this,t),H(this,t),A(this,t),g(this,t),this.filter&&this.filter[0].Zfa&&E(this,t),v(this,t),this.fga&&b(this,t),this.hga&&x(this,t)),t.RU&&t.RU(this),this},Wad.prototype.$w=function(t){return this.rga=t,this.gain.length>0&&(this.gain[0].gain.value=t),this},Wad.prototype.Lga=function(t){var e;return e=t&&t>0?t:0,this.Cga?this.Cga.playbackRate.value=e:console.log("Sorry, but the wad does not contain a soundSource!"),this},Wad.prototype.Mga=function(t){return t in Wad.sga?this.Cga.frequency.value=Wad.sga[t]:this.Cga.frequency.value=t,this},Wad.prototype.Nga=function(t){return this.Cga.detune.value=t,this},Wad.prototype.Oga=function(t){return this.mga.location=t,r(t)&&"3d"===this.mga.type&&this.mga.cw?this.mga.cw.setPosition(t[0],t[1],t[2]):"number"==typeof t&&"stereo"===this.mga.type&&this.mga.cw&&(this.mga.cw.Ega.value=t),r(t)?this.mga.type="3d":"number"==typeof t&&(this.mga.type="stereo"),this},Wad.prototype.Pga=function(t){var e;return e=t&&t>0&&t<1?t:t>=1?1:0,this.iga?(this.iga.qea=e,this.iga.cw&&(this.iga.cw.qea.gain.value=e)):console.log("Sorry, but the wad does not contain Reverb!"),this},Wad.prototype.Qga=function(t,e,n){var i;i=t&&t>0?t:0;var r;r=e&&e>0&&e<1?e:e>=1?1:0;var o;return o=n&&n>0&&n<1?n:n>=1?1:0,this.Kc?(this.Kc.delayTime=i,this.Kc.qea=r,this.Kc.cea=o,this.Kc.Gga&&(this.Kc.Gga.Gga.delayTime.value=i,this.Kc.Gga.Hga.gain.value=r,this.Kc.Gga.uea.gain.value=o)):console.log("Sorry, but the wad does not contain delay!"),this},Wad.prototype.stop=function(t){if("mic"!==this.source){if(t)for(var n=0;n<this.gain.length;n++)this.gain[n].label===t&&(this.gain[n].gain.cancelScheduledValues(e.currentTime),this.gain[n].gain.setValueAtTime(this.gain[n].gain.value,e.currentTime),this.gain[n].gain.linearRampToValueAtTime(1e-4,e.currentTime+this.Zfa.release));t||(this.gain[0].gain.cancelScheduledValues(e.currentTime),this.gain[0].gain.setValueAtTime(this.gain[0].gain.value,e.currentTime),this.gain[0].gain.linearRampToValueAtTime(1e-4,e.currentTime+this.Zfa.release))}else Wad.pga?this.oga.disconnect(0):console.log("You have not given your browser permission to use your microphone.");this.hga&&this.hga.Fga.stop()};var O=2048,S=new Uint8Array(O),D=function(t){var e=12*(Math.log(t/440)/Math.log(2));return Math.round(e)+69};Wad.kga=function(t){t||(t={}),this.Rga=!1,this.bga=1,t.iga?c(this,t):this.lga(t)},Wad.kga.prototype.lga=function(t){if(this.Sga=[],this.input=e.createAnalyser(),this.input.fftSize=2048,this.f1=[this.input],this.destination=t.destination||e.destination,this.volume=t.volume||1,this.vda=e.createGain(),this.vda.gain.value=this.volume,this.uga=t.uga||null,"undefined"!=typeof Recorder&&t.Tga){this.Uga=new Recorder(this.vda,t.Tga),this.Uga.Vga=[];var n=this,i=function(t){n.Uga.Wga.source=t,n.Uga.Vga.unshift(new Wad(n.Uga.Wga))};this.Uga.Xga=function(t){this.Wga=t||{Zfa:{_fa:9001}},this.oda(i)}}this.tga=t.tga||!1,a(this,t),this.filter&&T(this,t),this.iga&&w(this,t),this.vga(t,e),f(this,t),H(this,t),t.Iga&&M(this,t),l(this,t),A(this,t),U(this,t),this.f1.push(this.vda),g(this,t),this.Rga=!0,t.RU&&t.RU(this)},Wad.kga.prototype.Yga=function(n){this.input.getByteTimeDomainData(S);var i=t(S,e.sampleRate);if(i!==-1&&11025!==i&&12e3!==i){var r=i;this.pitch=Math.floor(r);var o=D(r);this.Zga=Wad.$ga[o-12]}var a=this;a._ga=window.requestAnimationFrame(function(){a.Yga()})},Wad.kga.prototype.aha=function(){cancelAnimationFrame(this._ga)},Wad.kga.prototype.$w=function(t){return this.Rga?this.vda.gain.value=t:console.log("This PolyWad is not set up yet."),this},Wad.kga.prototype.play=function(t){if(this.Rga)if(this.bga<1)this.dga=!0,this.ega=t;else{t&&t.volume&&(this.vda.gain.value=t.volume,t.volume=void 0);for(var e=0;e<this.Sga.length;e++)this.Sga[e].play(t)}else console.log("This PolyWad is not set up yet.");return this},Wad.kga.prototype.stop=function(t){if(this.Rga)for(var e=0;e<this.Sga.length;e++)this.Sga[e].stop(t)},Wad.kga.prototype.add=function(t){return this.Rga?(t.destination=this.input,this.Sga.push(t),t instanceof Wad.kga&&(t.vda.disconnect(0),t.vda.connect(this.input))):console.log("This PolyWad is not set up yet."),this},Wad.kga.prototype.remove=function(t){if(this.Rga)for(var n=0;n<this.Sga.length;n++)this.Sga[n]===t&&(this.Sga[n].destination=e.destination,this.Sga.splice(n,1),t instanceof Wad.kga&&(t.vda.disconnect(0),t.vda.connect(e.destination)));return this},Wad.kga.prototype.vga=function(t,e){},Wad.jga="https://www.codecur.io/audio/widehall.wav",Wad.bha=function(t){Wad.iga={},Wad.iga.cw=e.createConvolver(),Wad.iga.gain=e.createGain(),Wad.iga.gain.gain.value=t.qea;var n=t.Qda||Wad.jga,i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,function(t){Wad.iga.cw.buffer=t})},i.send()};var C=function(t,e){var n=null==t?e:t;return n};Wad.sga={cha:27.5,dha:29.1352,eha:29.1352,fha:30.8677,gha:32.7032,hha:30.8677,iha:32.7032,jha:34.6478,kha:34.6478,lha:36.7081,mha:38.8909,nha:38.8909,oha:41.2034,pha:41.2034,qha:43.6535,rha:43.6535,sha:46.2493,tha:46.2493,uha:48.9994,vha:51.9131,wha:51.9131,xha:55,yha:58.2705,zha:58.2705,Aha:61.7354,Bha:61.7354,Cha:65.4064,Dha:65.4064,Eha:69.2957,Fha:69.2957,Gha:73.4162,Hha:77.7817,Iha:77.7817,Jha:82.4069,Kha:82.4069,Lha:87.3071,Mha:87.3071,Nha:92.4986,Oha:92.4986,Pha:97.9989,Qha:103.826,Rha:103.826,Sha:110,Tha:116.541,Uha:116.541,Vha:123.471,Wha:123.471,Xha:130.813,Yha:130.813,Zha:138.591,$ha:138.591,_ha:146.832,aia:155.563,bia:155.563,cia:164.814,dia:164.814,eia:174.614,fia:174.614,gia:184.997,hia:184.997,iia:195.998,jia:207.652,kia:207.652,lia:220,mia:233.082,nia:233.082,oia:246.942,pia:246.942,qia:261.626,ria:261.626,sia:277.183,tia:277.183,uia:293.665,via:311.127,wia:311.127,xia:329.628,yia:329.628,zia:349.228,Aia:349.228,Bia:369.994,Cia:369.994,Dia:391.995,Eia:415.305,Fia:415.305,Gia:440,Hia:466.164,Iia:466.164,Jia:493.883,Kia:493.883,Lia:523.251,Mia:523.251,Nia:554.365,Oia:554.365,Pia:587.33,Qia:622.254,Ria:622.254,Sia:659.255,Tia:659.255,Uia:698.456,Via:698.456,Wia:739.989,Xia:739.989,Yia:783.991,Zia:830.609,$ia:830.609,_ia:880,aja:932.328,bja:932.328,cja:987.767,dja:987.767,eja:1046.5,fja:1046.5,gja:1108.73,hja:1108.73,ija:1174.66,jja:1244.51,kja:1244.51,lja:1318.51,mja:1318.51,nja:1396.91,oja:1396.91,pja:1479.98,qja:1479.98,rja:1567.98,sja:1661.22,tja:1661.22,uja:1760,vja:1864.66,wja:1864.66,xja:1975.53,yja:1975.53,zja:2093,Aja:2093,Bja:2217.46,Cja:2217.46,Dja:2349.32,Eja:2489.02,Fja:2489.02,Gja:2637.02,Hja:2637.02,Ija:2793.83,Jja:2793.83,Kja:2959.96,Lja:2959.96,Mja:3135.96,Nja:3322.44,Oja:3322.44,Pja:3520,Qja:3729.31,Rja:3729.31,Sja:3951.07,Tja:3951.07,Uja:4186.01,Vja:4186.01},Wad.$ga=["C0","C#0","D0","D#0","E0","F0","F#0","G0","G#0","A0","A#0","B0","C1","C#1","D1","D#1","E1","F1","F#1","G1","G#1","A1","A#1","B1","C2","C#2","D2","D#2","E2","F2","F#2","G2","G#2","A2","A#2","B2","C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5","C#5","D5","D#5","E5","F5","F#5","G5","G#5","A5","A#5","B5","C6","C#6","D6","D#6","E6","F6","F#6","G6","G#6","A6","A#6","B6","C7","C#7","D7","D#7","E7","F7","F#7","G7","G#7","A7","A#7","B7","C8"],Wad.Wja={play:function(){console.log("playing midi")},stop:function(){console.log("stopping midi")}},Wad.Xja=[];var L=function(t){console.log(t.Yja,t.data),144===t.data[0]?0===t.data[2]?(console.log("|| stopping note: ",Wad.$ga[t.data[1]-12]),Wad.Wja.stop(Wad.$ga[t.data[1]-12])):t.data[2]>0&&(console.log("> playing note: ",Wad.$ga[t.data[1]-12]),Wad.Wja.play({pitch:Wad.$ga[t.data[1]-12],label:Wad.$ga[t.data[1]-12],RU:function(t){}})):176===t.data[0]?(console.log("controller"),46==t.data[1]&&(127==t.data[2]?Wad.Wja.Zja=!0:0==t.data[2]&&(Wad.Wja.Zja=!1))):224===t.data[0]&&console.log("pitch bend")},P=function(t){Wad.Xja=[];for(var e=t.$ja.values(),n=e.next();!n.done;n=e.next())Wad.Xja.push(n.value);console.log("MIDI inputs: ",Wad.Xja);for(var i=0;i<Wad.Xja.length;i++)Wad.Xja[i]._ja=L},N=function(t){console.log("uh-oh! Something went wrong!  Error code: "+t.code)};if(navigator&&navigator.aka)try{navigator.aka().then(P,N)}catch(t){var I="There was an error on this page.\n\n";I+="Error description: "+t.message+"\n\n",I+="Click OK to continue.\n\n",console.log(I)}return Wad.bka={cka:{source:"noise",Zfa:{attack:.001,Zx:.008,$fa:.2,_fa:.03,release:.01},filter:{type:"highpass",frequency:400,XA:1}},dka:{source:"noise",Zfa:{attack:.001,Zx:.01,$fa:.2,_fa:.03,release:.02},filter:{type:"bandpass",frequency:300,XA:.18}},eka:{source:"noise",Zfa:{attack:.001,Zx:.008,$fa:.2,_fa:.43,release:.01},filter:{type:"highpass",frequency:100,XA:.2}},fka:{source:"square",volume:.3,Zfa:{attack:.01,Zx:.002,$fa:.5,_fa:2.5,release:.3},filter:{type:"lowpass",frequency:600,XA:7,Zfa:{attack:.7,frequency:1600}},fga:{attack:8,speed:8,gga:100}},gka:{source:"square",volume:1.4,Zfa:{attack:.01,Zx:.005,$fa:.2,_fa:.015,release:.3},filter:{type:"lowpass",frequency:1200,XA:8.5,Zfa:{attack:.2,frequency:600}}}},Wad}();return"undefined"!=typeof module&&module.Kb&&(module.Kb=Wad),Wad}),!function(t,e){function n(t,e,n){return i.hka(e((n||i.ika)(t)))}e.jka=t,t.kka=function(){function t(t){return t=t.split(H,2),2===t.length&&t[0]?t[0]:null}function e(t,e,n,i){function r(t,n,r,a){return n?(n=Number(n[0]<="9"?n:"0"+n),i?M(n):128===n?"":130===n?"":131===n?"":132===n?"":133===n?"":134===n?"":135===n?"":136===n?"":137===n?"":138===n?"":139===n?"":140===n?"":142===n?"":145===n?"":146===n?"":147===n?"":148===n?"":149===n?"":150===n?"":151===n?"":152===n?"":153===n?"":154===n?"":155===n?"":156===n?"":158===n?"":159===n?"":n>=55296&&57343>=n||13===n?"":o.lka(n)):e[r||a]||t}return e=e||E,n=n||d,void 0===t?"undefined":null===t?"null":t.toString().replace(c,"").replace(n,r)}function n(t){return"\\"+t.charCodeAt(0).toString(16).toLowerCase()+" "}function i(t){return t.replace(y,function(t){return"-x-"+t})}function r(n){n=o.ika(e(n));var i=t(n);return i&&w[i.toLowerCase()]?"##"+n:n}var o,a=/</g,s=/"/g,h=/'/g,u=/&/g,c=/\x00/g,f=/(?:^$|[\x00\x09-\x0D "'`=<>])/g,l=/[&<>"'`]/g,p=/(?:\x00|^-*!?>|--!?>|--?!?$|\]>|\]$)/g,d=/&(?:#([xX][0-9A-Fa-f]+|\d+);?|(Tab|NewLine|colon|semi|lpar|rpar|apos|sol|comma|excl|ast|midast|ensp|emsp|thinsp);|(nbsp|amp|AMP|lt|LT|gt|GT|quot|QUOT);?)/g,E={mka:"\t",nka:"\n",oka:":",pka:";",qka:"(",rka:")",ZW:"'",ska:"/",tka:",",uka:"!",vka:"*",wka:"*",LZ:"",MZ:"",NZ:"",$W:"",YW:"&",wf:"<",Qe:">",XW:'"',xka:'"'},v=/^(?:(?!-*expression)#?[-\w]+|[+-]?(?:\d+|\d*\.\d+)(?:r?em|ex|ch|cm|mm|in|px|pt|pc|%|vh|vw|vmin|vmax)?|!important|)$/i,g=/[\x00-\x1F\x7F\[\]{}\\"]/g,m=/[\x00-\x1F\x7F\[\]{}\\']/g,y=/url[\(\u207D\u208D]+/g,T=/['\(\)]/g,R=/\/\/%5[Bb]([A-Fa-f0-9:]+)%5[Dd]/,w={yka:1,data:1,zka:1,Aka:1,Bka:1},H=/(?::|&#[xX]0*3[aA];?|&#0*58;?|&colon;)/,b=/(?:^[\x00-\x20]+|[\t\n\r\x00]+)/g,x={mka:"\t",nka:"\n"},A=function(t,e,n){return void 0===t?"undefined":null===t?"null":t.toString().replace(e,n)},M=String.fromCodePoint||function(t){return 0===arguments.length?"":65535>=t?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,t%1024+56320))};return o={lka:function(t){return void 0===t||null===t?"":!isFinite(t=Number(t))||0>=t||t>1114111||t>=1&&8>=t||t>=14&&31>=t||t>=127&&159>=t||t>=64976&&65007>=t||11===t||65535===(65535&t)||65534===(65535&t)?"":M(t)},d:e,Cka:function(n){return n=t(n.replace(c,"")),n?e(n,x,null,!0).replace(b,"").toLowerCase():null},y:function(t){return A(t,l,function(t){return"&"===t?"&amp;":"<"===t?"&lt;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#39;":"&#96;"})},Dka:function(t){return A(t,u,"&amp;")},Eka:function(t){return A(t,a,"&lt;")},Fka:function(t){return A(t,p,function(t){return"\0"===t?"":"--!"===t||"--"===t||"-"===t||"]"===t?t+" ":t.slice(0,-1)+" >"})},Gka:function(t){return A(t,s,"&quot;")},Hka:function(t){return A(t,h,"&#39;")},Ika:function(t){return A(t,f,function(t){return"\t"===t?"&#9;":"\n"===t?"&#10;":"\v"===t?"&#11;":"\f"===t?"&#12;":"\r"===t?"&#13;":" "===t?"&#32;":"="===t?"&#61;":"<"===t?"&lt;":">"===t?"&gt;":'"'===t?"&quot;":"'"===t?"&#39;":"`"===t?"&#96;":""})},Jka:encodeURI,Kka:encodeURIComponent,hka:function(t){return w[o.Cka(t)]?"x-"+t:t},ika:function(t){return o.Jka(t).replace(R,function(t,e){return"//["+e+"]"})},Lka:function(t){return o.hka(o.ika(t))},Mka:function(t){return t=e(t),v.test(t)?t:";-x:'"+i(t.replace(m,n))+"';-v:"},Nka:function(t){return i(e(t).replace(g,n))},Oka:function(t){return i(e(t).replace(m,n))},Pka:function(t){return r(t).replace(T,function(t){return"'"===t?"\\27 ":"("===t?"%28":"%29"})},Qka:function(t){return r(t)},Rka:function(t){return r(t).replace(h,"\\27 ")}}};var i=t.Ska=t.kka();t.Tka=i.Eka,t.Uka=i.Fka,t.Vka=i.Hka,t.Wka=i.Gka,t.Xka=i.Ika,t.Yka=function(t){return n(t,i.Hka)},t.Zka=function(t){return n(t,i.Gka)},t.$ka=function(t){return n(t,i.Ika)},t._ka=i.ika,t.ala=function(t){return i.Fka(i.ika(t))},t.bla=function(t){return n(t,i.Hka,i.Jka)},t.cla=function(t){return n(t,i.Gka,i.Jka)},t.dla=function(t){return n(t,i.Ika,i.Jka)},t.ela=i.Jka,t.fla=function(t){return i.Fka(i.Jka(t))},t.gla=t.bla,t.hla=t.cla,t.ila=t.dla,t.jla=t.ela,t.kla=t.fla,t.lla=function(t){return i.Hka(i.Kka(t))},t.mla=function(t){return i.Gka(i.Kka(t))},t.nla=function(t){return i.Ika(i.Kka(t))},t.ola=i.Kka,t.pla=function(t){return i.Fka(i.Kka(t))},t.qla=function(t){return i.hka(i.Hka(i.Kka(t)))},t.rla=function(t){return i.hka(i.Gka(i.Kka(t)))},t.sla=function(t){return i.hka(i.Ika(i.Kka(t)))},t.tla=t.ola,t.ula=t.pla}({},function(){return this}());var NODEJS="undefined"!=typeof module&&module.Kb,ZOR=ZOR||{};ZOR.vla={wla:1e3,xla:3,yla:9,zla:5,Ala:5,uU:!0,Bla:!1,Cla:"LOCAL",Dla:!1,Ela:!1,Fla:!1,Gla:!0,Hla:2},NODEJS&&(module.Kb=ZOR.vla);var NODEJS="undefined"!=typeof module&&module.Kb;if(NODEJS){global.self={},global.Ila=require("three");var _=require("lodash"),ZOR={vla:require("../common/environment.js")}}var config={};config.uU=!1,config.Jla=!1,config.Fla=!0,config.wla=1600,config.Kla=Math.sqrt(Math.pow(Math.sqrt(Math.pow(config.wla,2)+Math.pow(config.wla,2)),2)+Math.pow(config.wla,2)),config.xla=12,config.Lla=100,config.Mla=8080,config.Nla=31e3,config.Hla=4,config.Ola=25,config.Bla=!0,config.Pla=3e4,config.Qla=1e3,config.Rla=5e3,config.Sla=200,config.Tla=40,config.Ula=3e3,config.Ela=!0,config.Vla=6e4,config.Wla=10,config.Xla=29,config.Dla=!0,config.Yla=100,config.Zla=4e3,config.$la=1e4,NODEJS||(config._la=function(){var t=localStorage.getItem("balancer");if(t)return t;var e=linodeNearLocation();switch(console.log("Nearest linode location: ",e),e){case"london":case"frankfurt":case"singapore":case"fremont":case"newark":case"dallas":t="dallas";break;default:t="dallas"}return t},config.Cla=config._la()),config.ama=Object.freeze({bma:"localhost",cma:"uswest.zor.bio",dma:"uscentral.zor.bio",ema:"useast.zor.bio",fma:"uk.zor.bio",gma:"eu.zor.bio",hma:"apac.zor.bio",G$:"zor.bio"}),config.zla=5,config.ima=150,config.jma=2,config.kma=config.ima+25,config.lma=function(t){return t/2},config.mma=function(t){var e=config.jma;return e-t*e/config.kma},config.nma=function(t){return Math.floor(10*t)},config.Gla=!0,config.oma=Object.freeze({pma:{qma:"DRAG",rma:.2},sma:{qma:"FOLLOW",tma:.01,uma:10,rma:.3}}),config.vma=config.oma.sma,config.wma=1,config.xma=1,config.yma=500,config.zma=config.zla,config.Ama=1.75,config.Bma=.05,config.Cma=300,config.Dma=.4,config.Ema=65,config.yla=25,config.Ala=.5,config.Fma=3e4,config.Gma=60,config.Hma=1,config.Ima="random",config.Jma="hsl01",config.Kma=8,config.Lma=function(t){return config.Ala/(t-4)},config.Mma=!0,config.Nma=10,config.Oma=1,config.Pma=.08,config.Qma=.1,config.Rma=30,config.Sma=20,config.Tma=1,config.Uma=7,config.Vma=1,config.Wma=5,config.Xma=1e4,config.Yma=15,config.u=!0,config.Zma=100,config.t=1e3,config.$ma=THREE.Ji.gj,config._ma=50,config.ana=20,config.bna=50,config.cna=.2,config.dna=64,config.ena=!1,config.fna=!0,config.gna=["ANGLE_instanced_arrays"],config.hna=.001,config.ina=.0175,config.jna=100,config.kna=500,config.lna=.5,config.mna=(config.kna-config.jna)/(config.ima-config.zla),config.nna=function(t){return Math.floor(t*config.mna*config.ina)/config.ina+config.jna},config.ona={},generateCameraZoomSteps(),config.pna=["#e5353a","#e53570","#e535c4","#7135e5","#353de5","#3588e5","#35dde5","#35e5a3","#35e569","#36e535","#96e535","#e5bf35","#e57035","#e53f35","#e40000","#38FF4D","#38FFC3","#417AFF","#41ACFF","#5941FF","#99FF38","#A040FF","#E140FF","#F8FF38","#FF386A","#FF6B38","#FF6DD2","#FFB638","#FFF42E"],config.qna={default:"default",h:"earth",fa:"boing",ga:"reddit"},NODEJS||(config.rna=localStorage.sna||.45,config.tna=localStorage.una||1,config.vna=!1,config.wna=["D3","E3","G3","G4","A3","A4","D4","B3","B4","C3","E4","Gb3"],config.xna=.05),config.yna=[],_.assign(config,ZOR.vla),NODEJS?module.Kb=config:(config.Cla=config.ama[config.Cla],config.uU||(console.log=function(){})),config.uU||Raven.XP("https://5b9c66b633364e43bc97ec763be5d018@app.getsentry.com/94111").hQ(),function(){function t(t){var e=new THREE.Gm,n=t.Im.to.bind(t.Im);t.Im.to=function(t,i,r,o,a,s){return n(t,i,r,o,a,s).multiply(e)},t.zna=function(t){e.oo(t),this.Fx()}}function e(e){this.object=e,t(this.object),this.target=new THREE.wq,this.Ana=0,this.maxDistance=1/0,this.Bna=-(1/0),this.Cna=1/0,this.Dna=-(1/0),this.Ena=1/0,this.Fna=!1,this.Gna=.25,this.Hna=new THREE.K,this.Ina=0;var n,i,r=this,o=1e-6,a=0,s=0,h=1,u=!1;this.Jna=function(){return i},this.Kna=function(){return n},this.Lna=function(t){s-=t*config.xma},this.Mna=function(t){a-=t*config.wma},this.Nna=function(){var t=new THREE.K;return function(e){var n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.Xi(-e),r.Hna.add(t)}}(),this.Ona=function(){var t=new THREE.K;return function(e){var n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.Xi(e),r.Hna.add(t)}}(),this.Ega=function(t,e,n,i){var o=r.object.position,a=o.clone().sub(r.target.position),s=a.length(),h=r.Pna?1:-1;s*=Math.tan(r.object.Kx/2*Math.PI/180),r.Nna(2*h*t*s/i),r.Ona(2*h*e*s/i)},this.Qna=function(t){h/=t},this.Rna=function(t){h*=t},this.update=function(){var t=new THREE.K,c=(new THREE.Jl).Tl(e.zq,new THREE.K(0,1,0)),f=c.clone().inverse(),l=new THREE.K,p=new THREE.Jl;return r.Pna=!1,function(){var e=this.object.position;t.Di(e).sub(this.target.position),t.Am(c),n=Math.atan2(t.x,t.z),i=Math.atan2(Math.sqrt(Math.pow(t.x,2)+Math.pow(t.z,2)),t.y),r.Pna?(i-a>Math.PI||i-a<0)&&(n+=Math.PI,i%=Math.PI,r.Pna=!1,this.object.zna(0)):(i+a>Math.PI||i+a<0)&&(n+=Math.PI,i%=Math.PI,r.Pna=!0,this.object.zna(Math.PI)),r.Pna?(n-=s,i-=a):(n+=s,i+=a);var d=t.length()*h;return d=Math.max(this.Ana,Math.min(this.maxDistance,d)),t.x=d*Math.sin(i)*Math.sin(n),t.y=d*Math.cos(i),t.z=d*Math.sin(i)*Math.cos(n),t.Am(f),e.Di(this.target.position).add(t),this.object.ho(this.target.position),this.Fna===!0?(s*=1-this.Gna,a*=1-this.Gna):(s=0,a=0),h=1,!!(u||l.qm(this.object.position)>o||8*(1-p.Ul(this.object.Cq))>o)&&(l.Di(this.object.position),p.Di(this.object.Cq),u=!1,!0)}}()}THREE.Sna=function(t,n){function i(t,e){var n=g.lG===document?g.lG.body:g.lG;v.Ega(t,e,n.clientWidth,n.clientHeight)}function r(){return 2*Math.PI/60/60*g.$na}function o(){return Math.pow(.95,g.Una)}function a(t){if(g.enabled!==!1&&"DRAG"===config.vma.qma){if(t.preventDefault(),t.button===g.coa.doa){if(g.Vna===!1)return;S=M.goa,m.set(t.clientX,t.clientY)}else if(t.button===g.coa.foa){if(g.Xna===!1)return;S=M.foa,R.set(t.clientX,t.clientY)}S!==M.NONE&&(document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",u,!1),g.dispatchEvent(C))}}function s(t){return Math.min(0,-1*config.vma.uma*(t-config.vma.tma))}function h(t){if(U=t.clientX,O=t.clientY,g.enabled!==!1&&"DRAG"===config.vma.qma){t.preventDefault();var e=g.lG===document?g.lG.body:g.lG;
if(S===M.goa){if(g.Vna===!1)return;y.set(t.clientX,t.clientY),T.hm(y,m),v.Lna(2*Math.PI*T.x/e.clientWidth*g.Wna),v.Mna(2*Math.PI*T.y/e.clientHeight*g.Wna),m.Di(y)}else if(S===M.hoa){if(g.Tna===!1)return;x.set(t.clientX,t.clientY),A.hm(x,b),A.y>0?v.Qna(o()):A.y<0&&v.Rna(o()),b.Di(x)}else if(S===M.foa){if(g.Xna===!1)return;w.set(t.clientX,t.clientY),H.hm(w,R),i(H.x,H.y),R.Di(w)}S!==M.NONE&&g.update()}}function u(){g.enabled!==!1&&(document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",u,!1),g.dispatchEvent(L),S=M.NONE)}function c(t){if(g.enabled!==!1&&g.Tna!==!1&&S===M.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?v.Rna(o()):e<0&&v.Qna(o()),g.update(),g.dispatchEvent(C),g.dispatchEvent(L)}}function f(t){if(g.enabled!==!1&&g._na!==!1&&g.Xna!==!1)switch(t.keyCode){case g.keys.aoa:i(0,g.Yna),g.update();break;case g.keys.boa:i(0,-g.Yna),g.update();break;case g.keys.kg:i(g.Yna,0),g.update();break;case g.keys.mg:i(-g.Yna,0),g.update()}}function l(t){if(g.enabled!==!1){switch(t.touches.length){case 1:if(g.Vna===!1)return;S=M.ioa,m.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(g.Tna===!1)return;S=M.joa;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);b.set(0,i);break;case 3:if(g.Xna===!1)return;S=M.koa,R.set(t.touches[0].pageX,t.touches[0].pageY);break;default:S=M.NONE}S!==M.NONE&&g.dispatchEvent(C)}}function p(t){if(g.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=g.lG===document?g.lG.body:g.lG;switch(t.touches.length){case 1:if(g.Vna===!1)return;if(S!==M.ioa)return;y.set(t.touches[0].pageX,t.touches[0].pageY),T.hm(y,m),v.Lna(2*Math.PI*T.x/e.clientWidth*g.Wna),v.Mna(2*Math.PI*T.y/e.clientHeight*g.Wna),m.Di(y),g.update();break;case 2:if(g.Tna===!1)return;if(S!==M.joa)return;var n=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(n*n+r*r);x.set(0,a),A.hm(x,b),A.y>0?v.Rna(o()):A.y<0&&v.Qna(o()),b.Di(x),g.update();break;case 3:if(g.Xna===!1)return;if(S!==M.koa)return;w.set(t.touches[0].pageX,t.touches[0].pageY),H.hm(w,R),i(H.x,H.y),R.Di(w),g.update();break;default:S=M.NONE}}}function d(){g.enabled!==!1&&(g.dispatchEvent(L),S=M.NONE)}function E(t){t.preventDefault()}var v=new e(t);this.lG=void 0!==n?n:document,Object.defineProperty(this,"constraint",{get:function(){return v}}),this.Jna=function(){return v.Jna()},this.Kna=function(){return v.Kna()},this.enabled=!0,this.jn=this.target.position,this.Tna=!0,this.Una=1,this.Vna=!0,this.Wna=config.vma.rma,this.Xna=!0,this.Yna=7,this.Zna=!1,this.$na=2,this._na=!0,this.keys={kg:37,aoa:38,mg:39,boa:40},this.coa={doa:THREE.jg.kg,eoa:THREE.jg.lg,foa:THREE.jg.mg};var g=this,m=new THREE.ea,y=new THREE.ea,T=new THREE.ea,R=new THREE.ea,w=new THREE.ea,H=new THREE.ea,b=new THREE.ea,x=new THREE.ea,A=new THREE.ea,M={NONE:-1,goa:0,hoa:1,foa:2,ioa:3,joa:4,koa:5},U=0,O=0,S=M.NONE;this.loa=this.target.position.clone(),this.moa=this.object.position.clone(),this.noa=this.object.zoom;var D={type:"change"},C={type:"start"},L={type:"end"},P=new THREE.ea,N=g.lG===document?g.lG.body:g.lG;this.update=function(){if(this.Zna&&S===M.NONE&&v.Lna(r()),"FOLLOW"===config.vma.qma){if(g.Vna===!1)return;P.bm(N.clientWidth/2-U),P.cm(N.clientHeight/2-O);var t=P.length();P.normalize().Xi(s(t)),y.Di(P),T.hm(y,m),v.Lna(P.x),v.Mna(P.y),m.Di(y)}v.update()===!0&&this.dispatchEvent(D)},this.reset=function(){S=M.NONE,this.target.position.Di(this.loa),this.object.position.Di(this.moa),this.object.zoom=this.noa,this.object.Fx(),this.dispatchEvent(D),this.update()},this.Ks=function(){this.lG.removeEventListener("contextmenu",E,!1),this.lG.removeEventListener("mousedown",a,!1),this.lG.removeEventListener("mousewheel",c,!1),this.lG.removeEventListener("MozMousePixelScroll",c,!1),this.lG.removeEventListener("touchstart",l,!1),this.lG.removeEventListener("touchend",d,!1),this.lG.removeEventListener("touchmove",p,!1),document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",u,!1),window.removeEventListener("keydown",f,!1)},this.lG.addEventListener("contextmenu",E,!1),this.lG.addEventListener("mousedown",a,!1),this.lG.addEventListener("mousemove",h,!1),this.lG.addEventListener("mousewheel",c,!1),this.lG.addEventListener("MozMousePixelScroll",c,!1),this.lG.addEventListener("touchstart",l,!1),this.lG.addEventListener("touchend",d,!1),this.lG.addEventListener("touchmove",p,!1),window.addEventListener("keydown",f,!1),this.update()},THREE.Sna.prototype=Object.create(THREE.bq.prototype),THREE.Sna.prototype.constructor=THREE.Sna,Object.defineProperties(THREE.Sna.prototype,{object:{get:function(){return this.ooa.object}},Hna:{get:function(){return this.ooa.Hna}},target:{get:function(){return this.ooa.target},set:function(t){this.ooa.target=t}},Ana:{get:function(){return this.ooa.Ana},set:function(t){this.ooa.Ana=t}},maxDistance:{get:function(){return this.ooa.maxDistance},set:function(t){this.ooa.maxDistance=t}},poa:{get:function(){return this.ooa.poa},set:function(t){this.ooa.poa=t}},qoa:{get:function(){return this.ooa.qoa},set:function(t){this.ooa.qoa=t}},Bna:{get:function(){return this.ooa.Bna},set:function(t){this.ooa.Bna=t}},Cna:{get:function(){return this.ooa.Cna},set:function(t){this.ooa.Cna=t}},Dna:{get:function(){return this.ooa.Dna},set:function(t){this.ooa.Dna=t}},Ena:{get:function(){return this.ooa.Ena},set:function(t){this.ooa.Ena=t}},Fna:{get:function(){return this.ooa.Fna},set:function(t){this.ooa.Fna=t}},Gna:{get:function(){return this.ooa.Gna},set:function(t){this.ooa.Gna=t}},roa:{get:function(){return console.warn("THREE.FollowOrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.Tna},set:function(t){console.warn("THREE.FollowOrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.Tna=!t}},soa:{get:function(){return console.warn("THREE.FollowOrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.Vna},set:function(t){console.warn("THREE.FollowOrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.Vna=!t}},toa:{get:function(){return console.warn("THREE.FollowOrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.Xna},set:function(t){console.warn("THREE.FollowOrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.Xna=!t}},uoa:{get:function(){return console.warn("THREE.FollowOrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this._na},set:function(t){console.warn("THREE.FollowOrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this._na=!t}},voa:{get:function(){return console.warn("THREE.FollowOrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.ooa.Fna},set:function(t){console.warn("THREE.FollowOrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.ooa.Fna=!t}},woa:{get:function(){return console.warn("THREE.FollowOrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.ooa.Gna},set:function(t){console.warn("THREE.FollowOrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.ooa.Gna=t}}})}(),THREE.xoa=function(t,e){function n(t){l.enabled!==!1&&(window.removeEventListener("keydown",n),g=v,v===p.NONE&&(t.keyCode!==l.keys[p.goa]||l.soa?t.keyCode!==l.keys[p.eoa]||l.roa?t.keyCode!==l.keys[p.foa]||l.toa||(v=p.foa):v=p.eoa:v=p.goa))}function i(t){l.enabled!==!1&&(v=g,window.addEventListener("keydown",n,!1))}function r(t){l.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v===p.NONE&&(v=t.button),v!==p.goa||l.soa?v!==p.eoa||l.roa?v!==p.foa||l.toa||(M.Di(C(t.pageX,t.pageY)),U.Di(M)):(H.Di(C(t.pageX,t.pageY)),b.Di(H)):(T.Di(L(t.pageX,t.pageY)),y.Di(T)),l.Aoa||(document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",a,!1)),l.dispatchEvent(S))}function o(t){l.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v===p.goa&&!l.soa||l.Aoa?(y.Di(T),T.Di(L(t.pageX,t.pageY))):v!==p.eoa||l.roa?v!==p.foa||l.toa||U.Di(C(t.pageX,t.pageY)):b.Di(C(t.pageX,t.pageY)))}function a(t){l.enabled!==!1&&(t.preventDefault(),t.stopPropagation(),v=p.NONE,l.Aoa||(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)),l.dispatchEvent(D))}function s(t){if(l.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=0;t.wheelDelta?e=t.wheelDelta/40:t.detail&&(e=-t.detail/3),H.y+=.01*e,l.dispatchEvent(S),l.dispatchEvent(D)}}function h(t){if(l.enabled!==!1){switch(t.touches.length){case 1:v=p.ioa,T.Di(L(t.touches[0].pageX,t.touches[0].pageY)),y.Di(T);break;case 2:v=p.yoa;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;A=x=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;M.Di(C(i,r)),U.Di(M);break;default:v=p.NONE}l.dispatchEvent(S)}}function u(t){if(l.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:y.Di(T),T.Di(L(t.touches[0].pageX,t.touches[0].pageY));break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;A=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;U.Di(C(i,r));break;default:v=p.NONE}}function c(t){if(l.enabled!==!1){switch(t.touches.length){case 1:y.Di(T),T.Di(L(t.touches[0].pageX,t.touches[0].pageY));break;case 2:x=A=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;U.Di(C(e,n)),M.Di(U)}v=p.NONE,l.dispatchEvent(D)}}function f(t){t.preventDefault()}var l=this,p={NONE:-1,goa:0,eoa:1,foa:2,ioa:3,yoa:4};this.object=t,this.lG=void 0!==e?e:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.Wna=1,this.Una=1.2,this.zoa=.3,this.soa=!1,this.roa=!1,this.toa=!1,this.voa=!1,this.woa=0,this.Ana=0,this.maxDistance=1/0,this.keys=[65,83,68],this.Hna=new THREE.K,this.target=new THREE.K,this.Aoa="FOLLOW"===config.vma.qma;var d=1e-6,E=new THREE.K,v=p.NONE,g=p.NONE,m=new THREE.K,y=new THREE.ea,T=new THREE.ea,R=new THREE.K,w=0,H=new THREE.ea,b=new THREE.ea,x=0,A=0,M=new THREE.ea,U=new THREE.ea;this.loa=this.target.clone(),this.moa=this.object.position.clone(),this.Boa=this.object.zq.clone();var O={type:"change"},S={type:"start"},D={type:"end"};this.Coa=function(){if(this.lG===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.lG.getBoundingClientRect(),e=this.lG.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},this.cR=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var C=function(){var t=new THREE.ea;return function(e,n){return t.set(config.xma*(e-l.screen.left)/l.screen.width,config.wma*(n-l.screen.top)/l.screen.height),t}}(),L=function(){var t=new THREE.ea;return function(e,n){return t.set(config.xma*((e-.5*l.screen.width-l.screen.left)/(.5*l.screen.width)),config.wma*((l.screen.height+2*(l.screen.top-n))/l.screen.width)),t}}();this.Doa=function(){var t=new THREE.K,e=new THREE.Jl,n=new THREE.K,i=new THREE.K,r=new THREE.K,o=new THREE.K,a=new THREE.ea,s=0;return function(){if(l.Aoa){a.set(T.x,T.y);var h=a.length();a.normalize().Xi(UTIL.Eoa(h)),o.set(a.x,a.y,0),y.set(0,0),s+=o.length()*ZOR.Foa.get()}else o.set(T.x-y.x,T.y-y.y,0),s=o.length();s?(m.Di(l.object.position).sub(l.target),n.Di(m).normalize(),i.Di(l.object.zq).normalize(),r.Vl(i,n).normalize(),i.sm(T.y-y.y),r.sm(T.x-y.x),o.Di(i.add(r)),t.Vl(o,m).normalize(),s*=l.Wna,e.Rl(t,s),m.Am(e),l.object.zq.Am(e),R.Di(t),w=s):!l.voa&&w&&(w*=Math.sqrt(1-l.woa),m.Di(l.object.position).sub(l.target),e.Rl(R,w),m.Am(e),l.object.zq.Am(e)),y.Di(T)}}(),this.Goa=function(){var t;v===p.yoa?(t=x/A,x=A,m.Xi(t)):(t=1+(b.y-H.y)*l.Una,1!==t&&t>0&&(m.Xi(t),l.voa?H.Di(b):H.y+=(b.y-H.y)*this.woa))},this.Hoa=function(){var t=new THREE.ea,e=new THREE.K,n=new THREE.K;return function(){t.Di(U).sub(M),t.Xl()&&(t.Xi(m.length()*l.zoa),n.Di(m).Nm(l.object.zq).sm(t.x),n.add(e.Di(l.object.zq).sm(t.y)),l.object.position.add(n),l.target.add(n),l.voa?M.Di(U):M.add(t.hm(U,M).Xi(l.woa)))}}(),this.Ioa=function(){l.roa&&l.toa||(m.Xl()>l.maxDistance*l.maxDistance&&(l.object.position.fm(l.target,m.sm(l.maxDistance)),H.Di(b)),m.Xl()<l.Ana*l.Ana&&(l.object.position.fm(l.target,m.sm(l.Ana)),H.Di(b)))},this.update=function(){m.hm(l.object.position,l.target),l.soa||l.Doa(),l.roa||l.Goa(),l.toa||l.Hoa(),l.object.position.fm(l.target,m),l.Ioa(),l.object.ho(l.target),E.qm(l.object.position)>d&&(l.dispatchEvent(O),E.Di(l.object.position))},this.reset=function(){v=p.NONE,g=p.NONE,l.target.Di(l.loa),l.object.position.Di(l.moa),l.object.zq.Di(l.Boa),m.hm(l.object.position,l.target),l.object.ho(l.target),l.dispatchEvent(O),E.Di(l.object.position)},this.Ks=function(){this.lG.removeEventListener("contextmenu",f,!1),this.lG.removeEventListener("mousedown",r,!1),this.lG.removeEventListener("mousewheel",s,!1),this.lG.removeEventListener("MozMousePixelScroll",s,!1),this.lG.removeEventListener("touchstart",h,!1),this.lG.removeEventListener("touchend",c,!1),this.lG.removeEventListener("touchmove",u,!1),document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",a,!1),window.removeEventListener("keydown",n,!1),window.removeEventListener("keyup",i,!1)},this.lG.addEventListener("contextmenu",f,!1),this.Aoa||this.lG.addEventListener("mousedown",r,!1),this.lG.addEventListener("mousemove",o,!1),this.lG.addEventListener("mousewheel",s,!1),this.lG.addEventListener("MozMousePixelScroll",s,!1),this.lG.addEventListener("touchstart",h,!1),this.lG.addEventListener("touchend",c,!1),this.lG.addEventListener("touchmove",u,!1),window.addEventListener("keydown",n,!1),window.addEventListener("keyup",i,!1),window.addEventListener("resize",_.$d(this.Coa.bind(this),50)),this.Coa(),this.update()},THREE.xoa.prototype=Object.create(THREE.bq.prototype),THREE.xoa.prototype.constructor=THREE.xoa;var NODEJS="undefined"!=typeof module&&module.Kb;if(NODEJS)var config=require("./config.js");if(NODEJS)var _=require("lodash");if(NODEJS)var xssFilters=require("xss-filters");var UTIL={};UTIL.Joa=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},UTIL.Koa=function(t,e){return Math.random()*(e-t)+t},UTIL.Loa=function(t){var e=/^\w*$/;return null!==e.exec(t)},UTIL.Moa=function(t){var e=1*t/config.ima;return e},UTIL.hn=function(t,e){t[e]=(new THREE.K).Di(t[e])},UTIL.Noa=function(t,e,n,i){return hitxp(t,e,n,i)||hitxn(t,e,n,i)||hityp(t,e,n,i)||hityn(t,e,n,i)||hitzp(t,e,n,i)||hitzn(t,e,n,i)},UTIL.Ooa=function(t,e,n,i){var r=n.clone();return(hitxp(t,e,n,i)||hitxn(t,e,n,i))&&(r.x=0),(hityp(t,e,n,i)||hityn(t,e,n,i))&&(r.y=0),(hitzp(t,e,n,i)||hitzn(t,e,n,i))&&(r.z=0),r},UTIL.Eoa=function(t){return Math.max(0,(-config.vma.tma+t)/config.vma.uma)},UTIL.Poa=function(){var t=arguments[0]||Math.random(),e=config.wla-2*config.zla;return t*e-e/2},UTIL.Qoa=function(){var t=UTIL.Poa(),e=UTIL.Poa(),n=UTIL.Poa();return new THREE.K(t,e,n)},UTIL.Roa=function(t,e){return{x:+t.x.toFixed(e),y:+t.y.toFixed(e),z:+t.z.toFixed(e)}},UTIL.Soa=function(t){return t+(4-t%4)},UTIL.Toa=function(t,e){return+t.toFixed(e)},UTIL.Uoa=function(t,e,n){t.splice(_.Jf(t,e,n),0,e)},UTIL.Voa=function(t){return foodCrayons[t]};var foodCrayons={random:function(){return{r:UTIL.Joa(0,255)/255,Ci:UTIL.Joa(0,255)/255,b:UTIL.Joa(0,255)/255}},Woa:function(t,e,n){var i=(t+e+n)/(2*config.wla),r=1,o=.6,a=(new THREE.T).Hi(i,r,o);return{r:a.r,Ci:a.Ci,b:a.b}},Xoa:function(t,e,n){return{r:.5+t/config.wla,Ci:.5+e/config.wla,b:.5+n/config.wla}},Yoa:function(t,e,n){return{r:.5+t/config.wla+UTIL.Joa(-128,128)/512,Ci:.5+e/config.wla+UTIL.Joa(-128,128)/512,b:.5+n/config.wla+UTIL.Joa(-128,128)/512}},Zoa:function(t,e,n){var i,r,o;return t>=0&&e>=0&&n>=0?(i=1,r=0,o=0):t<0&&e>=0&&n>=0?(i=0,r=1,o=0):t<0&&e<0&&n>=0?(i=0,r=0,o=1):t>=0&&e<0&&n>=0?(i=1,r=1,o=0):t>=0&&e>=0&&n<0?(i=0,r=1,o=1):t<0&&e>=0&&n<0?(i=1,r=1,o=1):t<0&&e<0&&n<0?(i=1,r=0,o=1):t>=0&&e<0&&n<0&&(i=.5,r=0,o=.1),{r:i,Ci:r,b:o}},$oa:function(t,e,n){return{r:Math.sin(t/(config.wla/config.Kma))/2+.5,Ci:Math.sin(e/(config.wla/config.Kma))/2+.5,b:Math.sin(n/(config.wla/config.Kma))/2+.5}}};UTIL._oa=function(t){return foodMaps[t]};var foodMaps={random:function(t,e){for(var n=config.wla/2,i=config.wla/e,r=3,o=0,a=new Int16Array(3*t),s=1;s<e;++s)for(var h=1;h<e;++h)for(var u=1;u<e;++u){var c=n-s*i+UTIL.Joa(-i,i),f=n-h*i+UTIL.Joa(-i,i),l=n-u*i+UTIL.Joa(-i,i);a[o]=c,a[o+1]=f,a[o+2]=l,o+=r}return a},apa:function(t,e){for(var n=config.wla/2,i=config.wla/e,r=3,o=0,a=new Int16Array(3*t),s=1;s<e;++s)for(var h=1;h<e;++h)for(var u=1;u<e;++u){var c=n-s*i,f=n-h*i,l=n-u*i;a[o]=c,a[o+1]=f,a[o+2]=l,o+=r}return a}};UTIL.bpa=function(t,e){var n=0,i=Math.max(e,0);return function(){return n===i?(n=0,t.apply(this,arguments)):void n++}},UTIL.cpa=function(t){return!t||/^\s*$/.test(t)},UTIL.dpa=function(t,e,n){t.push(e),t.length>n&&t.shift()},UTIL.epa=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;++i)n[i]=t[i];return e},UTIL.fpa=function(t,e){return _.findIndex(t,function(t){return t.id==e})},UTIL.gpa=function(t){var e=new Uint8Array(t);return e[0]},UTIL.hpa=function(t,e,n){console.log(t,(n-e).toFixed(3))},UTIL.ipa=function(t){var e=xssFilters.Tka(t);return UTIL.cpa(e)?e="Guest":t.length>config.Yma&&(e=e.substr(0,config.Yma)),e},UTIL.Yi=function(t,e,n){return(1-n)*t+n*e},NODEJS&&(module.Kb=UTIL);var NODEJS="undefined"!=typeof module&&module.Kb;if(NODEJS)var THREE=require("three");if(NODEJS)var UTIL=require("./util.js");if(NODEJS)var config=require("./config.js");if(NODEJS)var _=require("lodash");var ZOR=ZOR||{};ZOR.jpa=function(){this.kpa=[],this.lpa=[],this.mpa=[]},ZOR.jpa.prototype.init=function(t,e){this.npa=new THREE.K(t,t,t),this.opa=e,e>0&&this.ppa()},ZOR.jpa.prototype.ppa=function(){this.qpa=Math.pow(this.opa-1,3),this.rpa=new Uint32Array(this.qpa),this.spa=[],this.tpa=[];var t=UTIL._oa(config.Ima);this.upa=t(this.qpa,this.opa)},ZOR.jpa.prototype.vpa=function(t){if(!t.id)throw"Actors must have an ID";this.kpa.push(t)},ZOR.jpa.prototype.reduce=function(){return{kpa:this.wpa(this.kpa),lpa:this.wpa(this.lpa),npa:this.npa,upa:this.upa,qpa:this.qpa,opa:this.opa,rpa:this.rpa,tpa:this.tpa,spa:this.spa}},ZOR.jpa.prototype.wpa=function(t,e){var n=[];return t.forEach(function(t){n.push(t.reduce(e))}),n},ZOR.jpa.prototype.xpa=function(t){return this.wpa(this.kpa,t)},ZOR.jpa.prototype.ypa=function(t){return this.kpa[UTIL.fpa(this.kpa,t)]},ZOR.jpa.prototype.zpa=function(t){return this.lpa[UTIL.fpa(this.lpa,t)]},ZOR.jpa.prototype.Apa=function(t){var e=UTIL.fpa(this.lpa,t),n=this.lpa[e],i=_.findIndex(this.kpa,function(e){return e.Bpa==t}),r=this.kpa[i];n&&(i=UTIL.fpa(this.kpa,n.p.id),r=this.kpa[i],this.lpa.splice(e,1)),r&&this.kpa.splice(i,1)},ZOR.Cpa=Object.freeze({Dpa:"UNDEFINED",Epa:"PLAYER_SPHERE",Fpa:"FOOD",Gpa:"PORTAL",Hpa:"OBSTACLE",Ipa:"SPECTATOR"}),ZOR.Jpa=function(){this.position=new THREE.K(0,0,0),this.a6=new THREE.K(0,0,0),this.scale=1,this.type=ZOR.Cpa.Dpa,this.Kpa=[]},ZOR.Jpa.prototype.reduce=function(){return this},ZOR.Jpa.prototype.Lpa=function(t){if(t.position=new THREE.K(t.position.x,t.position.y,t.position.z),0===this.Kpa.length)this.Kpa.push(t);else{var e=this.Kpa[this.Kpa.length-1].time,n=t.time;if(n>e)for(this.Kpa.push(t);this.Kpa.length>config.Rma;)this.Kpa.shift()}},ZOR.Mpa=function(t,e,n,i,r,o){ZOR.Jpa.call(this),this.type=ZOR.Cpa.Epa,n&&(this.position=new THREE.K(n.x,n.y,n.z)),i?(this.scale=i,this.Npa=i):(this.scale=config.zla,this.Npa=config.zla),r?(this.a6=r,UTIL.hn(this,"velocity")):this.a6={x:0,y:0,z:0},this.color=e,this.QC=o,this.Opa=0,this.Ppa=!1,this.Bpa=t,this.id=this.Bpa},ZOR.Mpa.prototype=Object.create(ZOR.Jpa.prototype),ZOR.Mpa.constructor=ZOR.Mpa,ZOR.Mpa.prototype.reduce=function(t){var e=t||!1,n={id:this.id,position:this.position,a6:this.a6,scale:this.scale,Opa:this.Opa,Ppa:this.Ppa};return e||(n.type=this.type,n.color=this.color,n.QC=this.QC,n.Bpa=this.Bpa),n},ZOR.Mpa.prototype.N=function(){return this.scale},ZOR.Mpa.prototype.Qpa=function(t){this.Npa+=t,this.Npa>config.ima?this.Npa=config.ima:this.Npa<config.zla&&(this.Npa=config.zla),this.scale=this.Npa},ZOR.Rpa=Object.freeze({Ipa:"SPECTATOR",Spa:"PLAYER",Tpa:"BOT"}),ZOR.Upa=function(t,e,n,i,r,o,a,s){var h=this;this.id=t,this.name=e,this.type=i,this.Vpa=this.Wpa=Date.now(),this.p=new ZOR.Mpa(this.id,n,r,o,a,s),this.Xpa={},this.Xpa.Ypa=new ZOR.Zpa(this.p),this.Xpa.Ypa.ET("deactivate",function(){h.p.Kpa=[]}),this.$pa=0,this._pa=0,this.aqa=0,this.bqa=0,this.cqa=0,this.dqa=0,this.eqa=0,this.fqa=0,this.gqa=0,this.hqa=new ZOR.iqa(100),this.jqa=new ZOR.iqa(20,!0),this.kqa=new ZOR.iqa(200),this.lqa=new ZOR.iqa(200),this.mqa=new ZOR.iqa(200),this.nqa=new ZOR.iqa(320)},ZOR.Upa.prototype.reduce=function(){return{id:this.id,name:this.name,type:this.type,p:this.p.reduce()}},ZOR.Upa.prototype.oqa=function(){return config.nma(this.p.scale)},ZOR.Upa.prototype.pqa=function(){var t=config.mma(this.p.scale);return this.Xpa.Ypa.qqa()&&(t*=config.Ama),t},ZOR.Upa.prototype.rqa=function(){return 3*this.pqa()+2*this.p.scale+10},ZOR.Upa.prototype.update=function(){for(var t=Object.getOwnPropertyNames(this.Xpa),e=0,n=t.length;e<n;e++){var i=this.Xpa[t[e]];i.update()}},ZOR.iqa=function(t,e){this.threshold=t,this.sqa=e||!1,this.tqa=Date.now(),this.uqa=[],this.zf=0,this.max=0,this.min=0,this.vqa=0},ZOR.iqa.prototype.add=function(t){t=+t,UTIL.dpa(this.uqa,t,config.Yla),this.zf=Math.round(_.zf(this.uqa)),this.max=_.max(this.uqa),this.min=_.min(this.uqa),this.sqa?t<this.threshold&&this.vqa++:t>this.threshold&&this.vqa++},ZOR.wqa=function(){var t=this;this.qqa=void 0,this.sda=void 0,this.xqa=void 0,this.yqa=void 0,this.update=void 0,t.o2={sda:[],xqa:[],update:[]},this.ET=function(e,n){t.o2[e].push(n)}},ZOR.Zpa=function(t){this.p=t,ZOR.wqa.call(this),this.active=!1,this.zqa=config.zma,this.Aqa=0,this.Bqa=void 0,this.Cqa=0,this.yqa=function(){return!this.active&&this.p.scale>this.zqa},this.qqa=function(){return this.active},this.sda=function(){if(!this.yqa())return!1;this.active=!0,this.Bqa=Date.now()-this.Aqa,this.p.Ppa=!0,this.Cqa=1e3;for(var t=0;t<this.o2.sda.length;t++)"function"==typeof this.o2.sda[t]&&this.o2.sda[t]();return!0},this.xqa=function(){this.active=!1,this.p.Ppa=!1,this.Bqa=void 0;for(var t=0;t<this.o2.xqa.length;t++)"function"==typeof this.o2.xqa[t]&&this.o2.xqa[t]()},this.update=function(){if(!this.active)return void(this.Cqa>0?this.Cqa=Math.max(this.Cqa-config.Tla,0):this.Aqa>0&&(this.Aqa=Math.max(this.Aqa-config.Tla,0)));this.Aqa=Date.now()-this.Bqa;for(var t=0;t<this.o2.update.length;t++)"function"==typeof this.o2.update[t]&&this.o2.update[t]()}},ZOR.Zpa.prototype=Object.create(ZOR.wqa.prototype),ZOR.Zpa.constructor=ZOR.Zpa,ZOR.lock={},ZOR.Dqa=function(){for(var t=Object.getOwnPropertyNames(ZOR.lock),e=0,n=t.length;e<n;e++){var i=t[e];ZOR.lock[i]>0?(console.log("Lock expiring in: ",i,ZOR.lock[i]),ZOR.lock[i]-=config.Sla):(console.log("lock expired:",i),delete ZOR.lock[i])}},ZOR.Eqa=function(){function t(){return++e}var e=0;return{Fqa:t}}(),NODEJS&&(module.Kb=ZOR);var NODEJS="undefined"!=typeof module&&module.Kb;if(NODEJS)var schemapack=require("schemapack");var ZOR=ZOR||{};ZOR.Gqa=function(){var t={x:"float32",y:"float32",z:"float32"},e={id:"varuint",position:t,a6:t,scale:"float32",Opa:"varuint",Ppa:"boolean",type:"string",color:"uint8",QC:"string",Bpa:"varuint"},n={id:"varuint",position:t,a6:t,scale:"float32",Opa:"varuint",Ppa:"boolean"},i={id:"varuint",name:"string",type:"string",p:e},r={kpa:[e],lpa:[i],npa:{x:"uint16",y:"uint16",z:"uint16"},upa:["int16"],qpa:"uint32",opa:"uint8",rpa:["varuint"],tpa:["varuint"],spa:["varuint"]},o={Hqa:"varuint",Iqa:"varuint"},a={fr:["varuint"],Jqa:"string",mpa:[o]},s={position:t,N:"float32",time:"varuint"},h={Kqa:"varuint",N:"float32"},u={0:"uint8",Lqa:"string",q:r},c={0:"uint8",Mqa:i},f={0:"uint8",kpa:[n]},l={0:"uint8",Hqa:"varuint",Nqa:"varuint",Oqa:"varuint",Pqa:"varuint",Qqa:"varuint",Rqa:s,Sqa:s,Tqa:s,Uqa:s,Vqa:s,Wqa:[h]},p={0:"uint8",Xqa:"varuint",Yqa:"varuint",Zqa:"varuint",$qa:"varuint",_qa:"varuint",Iqa:"varuint"},d={0:"uint8",ara:a},E={bra:1,cra:2,dra:3,era:4,fra:5,gra:6};return{hra:E,ira:schemapack.pT(u),jra:schemapack.pT(f),kra:schemapack.pT(l),lra:schemapack.pT(d),mra:schemapack.pT(p),nra:schemapack.pT(c)}}(),NODEJS&&(module.Kb=ZOR.Gqa);var ZOR=ZOR||{};ZOR.Foa=function(){function t(){return Date.now()}function e(){if(config.fna){var e=t(),n=e-o,i=1/(n/1e3);o=e,a=n/r,s=.2*i+.8*s}}function n(){return a}function i(){return s}var r=1/60*1e3,o=t(),a=1,s=r/1e3;return{update:e,get:n,ora:i}}();var ZOR=ZOR||{};ZOR.pra=function(){var t={qra:{rra:new Wad({source:"sine",volume:config.xna,Zfa:{attack:.001,Zx:.001,$fa:.9,_fa:.1,release:.5}}),sra:new Wad({source:"noise",volume:.35,Zfa:{attack:.5,Zx:.5,$fa:1,_fa:3600,release:.5},filter:{type:"lowpass",frequency:300,XA:1}}),tra:new Wad({source:"sine",volume:config.tna,pitch:config.wna[2],Zfa:{attack:.1,Zx:.001,$fa:.1,_fa:.1,release:.1}}),ura:new Wad({volume:config.tna,source:"sfx/player_capture.wav"})}};return config.vna||(t.vra={}),t}();var ZOR=ZOR||{};ZOR.wra=function(){function t(){R.target=void 0}function e(t){var e=t.id.replace("-template","");v.Y_[e]=t.textContent}function n(t){return _.includes(_.values(y),t)}function i(t){return t?(t!==i()&&ZOR.pra.qra.tra.play(),t!==R._ra&&(R._ra=R.state),"undefined"!=typeof t&&n(t)&&(console.log("entering state "+t),R.state=t,v.update()),ga("send",{msa:"event",nsa:"StateChange",osa:t}),R.state):R.state}function r(t,e){"init"===t?g?e.call(this):H.push(e.bind(this)):v.ET(t,e)}function o(){var t=_.chain(a()).keys().ee(config.yna).ad(m).value();_.assign(R.csa,t),t.length&&console.log("Missing browser feature(s): "+JSON.stringify(t)),t.length&&i(y.Gra)}function a(){return _.chain(Modernizr).Oe().ud().value()}function s(){v.set("screen_x",window.innerWidth),v.set("screen_y",window.innerHeight)}function h(){Ractive.uU=config.uU,v=new Ractive({PT:"#ui-overlay",Sf:"#ui-template",data:R}),w.psa=v,w.update=f(),o(),_.dg(document.querySelectorAll('script[type="text/ractive"]'),e),i(y.xra),c(),_.fd(H,_.call),v.PT.classList.add("active");for(var t=R.esa.length;t--;){var n=R.esa[t];n.W.ia&&n.W.ia!=window.location.search&&R.esa.splice(t,1)}g=!0,s(),window.addEventListener("resize",s,!1)}function u(t){return function(){i(t)}}function c(){function t(t){return function(e){var n="flip_"+t.toLowerCase(),i=t.toUpperCase()+"_AXIS_MULT";e.cw.checked?(config[i]=-1,R[n]=!0):(config[i]=1,R[n]=!1),localStorage[n]=R[n]}}localStorage.qsa&&v.set("alpha_key",localStorage.qsa),localStorage.rsa&&v.set("player_name",localStorage.rsa),r(T.Yra,function(){var t=this.get("volume.music");ZOR.pra.vra.background.volume(t),localStorage.sna=t}),r(T.Zra,function(){var t=this.get("volume.sfx");_.dg(ZOR.pra.qra,_.Bd(_.Te,_,"setVolume",t)),localStorage.una=t}),r(T.Tra,u(y.zra)),r(T.Ura,u(y.Ara)),r(T.Vra,u(y.Bra)),r(T.Ora,u(y.Ira)),r(T.Qra,u(y.Jra)),r(T.Rra,u(y.Dra)),r(T.Pra,u(y.yra)),r(T.Sra,function(){i(R._ra)}),r(T.$ra,function(t){v.set("selected_skin",t.cw.value),localStorage.setItem("skin",t.cw.value),ga("send",{msa:"event",nsa:"button",osa:"use_skin_button",ssa:t.cw.value}),startGame(ZOR.Rpa.Spa)}),r(T.Lra,function(){ga("send",{msa:"event",nsa:"button",osa:"play_button",ssa:"mouse_click"}),startGame(ZOR.Rpa.Spa)}),config.xma=JSON.parse(localStorage.jsa||"false")?-1:1,config.wma=JSON.parse(localStorage.ksa||"false")?-1:1,r(T.Wra,t("y")),r(T.Xra,t("x")),r(T.Nra,location.reload.bind(location)),r(T.Mra,function(){window.tsa&&(ga("send",{msa:"event",nsa:"buton",osa:"respawn_button"}),respawnPlayer())}),r(T.Kra,function(t){var e=t.bW.which||t.bW.keyCode,n=13;e===n&&window.usa&&(ga("send",{msa:"event",nsa:"button",osa:"play_button",ssa:"enter_key"}),startGame(ZOR.Rpa.Spa))}),isMobile.k9&&(config.vma=config.oma.pma),config.Jla&&v.MU(T.Lra)}function f(){return _.$d(v.update.bind(v),1e3)}function l(){var t=""===document.querySelector('script[type="text/ractive"]').innerHTML;if(t){var e=document.querySelectorAll('script[type="text/ractive"], script[type^=x-shader]');Promise.all(_.map(e,p)).then(h)}else h()}function p(t){return fetch(t.src).then(d).then(E(t))}function d(t){return t.text()}function E(t){return function(e){t.innerHTML=e}}var v,g=!1,m=["json","websockets","webgl","flexbox"],y={xra:"menu-game-screen",yra:"menu-game-screen",zra:"menu-game-screen",Ara:"menu-store-screen",Bra:"menu-config-screen",Cra:"playing",Dra:"playing-config",Era:"respawn-screen",Fra:"kicked-screen",Gra:"game-init-error",Hra:"server-msg-screen",Ira:"credits-screen",Jra:"tutorial-screen"},T={Kra:"player-login-keypress",Lra:"player-login",Mra:"player-respawn",Nra:"page-reload",Ora:"show-credits",Pra:"show-menu",Qra:"show-tutorial",Rra:"show-playing-config",Sra:"show-previous",Tra:"show-menu-game-screen ",Ura:"show-menu-store-screen ",Vra:"show-menu-config-screen ",Wra:"toggle-y-axis",Xra:"toggle-x-axis",Yra:"volume-music",Zra:"volume-sfx",$ra:"set-skin"},R={state:"",_ra:y.xra,asa:y,bsa:T,pna:config.pna,Fla:config.Fla,uU:config.uU,csa:[],dsa:["Michael Clayton","Jared Sprague"],esa:_(ZOR.g).map(_.Bd(_.Nb,_,"meta")).Rd("meta.sort").value(),fsa:localStorage.QC||"default",mpa:[],gsa:isMobile.k9,hsa:0,isa:0,jsa:JSON.parse(localStorage.jsa||"false"),ksa:JSON.parse(localStorage.ksa||"false"),lsa:config.vna,volume:{vra:config.rna,qra:config.tna}},w={asa:y,bsa:T,data:R,state:i,ET:r,nH:t},H=[];y.xra;return l(),w}();var ZOR=ZOR||{};ZOR.vsa={};var scene,canvas,camera,camera_controls,raycaster=new THREE.fq;config.u&&(raycaster.hq=config.t);var playerType,player,playerFogCenter=new THREE.K,gameStart=!1,disconnected=!1,foodController,zorbioModel=new ZOR.jpa;ZOR.vsa.lpa={},ZOR.vsa.wsa=[],ZOR.vsa.xsa=function(){var t=document.body;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},updateActors.Nsa=config.Tla,window.addEventListener("keydown",handleKeydown),window.addEventListener("keyup",handleKeyup),window.addEventListener("mousedown",handleMouseDown),window.addEventListener("mouseup",handleMouseUp),window.onload=function(){connectToServer()};var KeysDown={},KeyCodes={87:"w",83:"s",65:"a",68:"d",32:"space",16:"shift"},ListenForKeys=Object.keys(KeyCodes),ZOR=ZOR||{};ZOR.ata=function(t,e,n){this.q=t,this.P7=e,this.i=n||!1,this.Z=config.pna[t.p.color],this.bta=t.p.QC,this.cta=config.nna(t.p.scale),this.QC=ZOR.g[this.bta||"default"](this),this.j=new THREE.ZN(1,this.QC.j.ca||config.dna,this.QC.j.da||config.dna),playerFogCenter.Di(t.p.position),this.k=new THREE.eC(this.QC.k),config.ena&&(this.k.jA=!0),this.Csa=new THREE.jq(this.j,this.k),this.Csa.position.Di(t.p.position),this.dta=new ZOR.eta(this,e),this.setScale(t.p.scale),this.Csa.Hqa=this.q.id,ZOR.vsa.wsa.push(this.Csa),e.add(this.Csa),this.fta()},ZOR.ata.prototype.fta=function(){this.F=particleGroup=new SPE.aB(this.QC.F.group),this.gta=new SPE.k6(this.QC.F.I),this.hta=new THREE.Xp,this.F.e6.Mq=1,this.F.e6.Lq=!1,this.F.j6(this.gta),this.P7.add(this.F.e6)},ZOR.ata.prototype.ita=function(){var t=(this.gta.position.m5.clone(),this.Csa.position.clone());this.gta.position.m5.x=t.x,this.gta.position.m5.y=t.y,this.gta.position.m5.z=t.z;var e=this.Csa.scale.x*(this.QC.F.aa||1);this.gta.position.J6.bm(e),this.gta.position.n5.bm(e),this.gta.position.N6=e,this.gta.size.m5=[e/3,2*e/6,1*e/9,0];var n=this.q.Xpa.Ypa.qqa();n?this.gta.V=1:this.gta.V=.1,this.gta.h7.position=!0,this.gta.h7.a6=!0,this.gta.h7.size=!0,this.F.vV(this.hta.aq())},ZOR.ata.prototype.m4=function(t){this.Csa.scale.Wi(t),this.Csa.scale.lm(1,config.ima),this.Csa.j.Oo()},ZOR.ata.prototype.update=function(t){this.setScale(.1*t+.9*this.Csa.scale.x),this.ita()},ZOR.ata.prototype.Msa=function(t){this.dta.update(t)},ZOR.ata.prototype.setAlpha=function(t){this.k.D=!t},ZOR.ata.prototype.Ksa=function(t){
this.Csa.position.Yi(t,config.cna)},ZOR.ata.prototype.remove=function(t){this.dta.Ks(),this.F.K5.forEach(function(t){t.remove()}),this.F.Ks(),t.remove(this.Csa);for(var e=0;e<ZOR.vsa.wsa.length;e++){var n=ZOR.vsa.wsa[e];n&&n.Hqa===this.q.id&&(console.log("Removing mesh for player: ",this.q.id),ZOR.vsa.wsa.splice(e,1))}},ZOR.ata.prototype.setScale=function(t){this.Csa.scale.set(t,t,t),this.Csa.scale.lm(1,config.ima),this.Csa.j.Oo()},ZOR.ata.prototype.Gsa=function(t){this.jta=t},ZOR.ata.prototype.Hsa=function(t){var e=config.nna(t);this.jta.Ana=UTIL.Yi(this.jta.Ana,this.cta,.03),e!=this.cta&&this.kta(e)&&(console.log("New camera minDistance: ",e),this.cta=e)},ZOR.ata.prototype.kta=function(t){var e=this.cta,n=this.q.p.scale,i=config.ona[Math.floor(e)];if(e>t){if(i.min-n>=config.lna)return!0}else if(e<t&&n-i.max>=config.lna)return!0;return!1};var ZOR=ZOR||{};ZOR.Isa=function(t,e,n){this.q=new ZOR.Upa(t.id,t.name,t.p.color,t.type,t.p.position,t.p.scale,t.p.a6,t.p.QC),this.Bsa=!1,this.i=n||!1,this.lta=new THREE.K,this.mta=new THREE.K,this.Wqa=[],e&&this.Fsa(e),this.q.Xpa.Ypa.ET("activate",function(){ZOR.pra.qra.sra.play()}),this.q.Xpa.Ypa.ET("deactivate",function(){ZOR.pra.qra.sra.stop()})},ZOR.Isa.prototype.Ssa=function(t){this.Wqa.push({Kqa:t,N:this.N()})},ZOR.Isa.prototype.ysa=function(){return this.q.id},ZOR.Isa.prototype.Jsa=function(){return this.q.p.id},ZOR.Isa.prototype.jo=function(){return this.view.Csa.position},ZOR.Isa.prototype.pqa=function(){return this.q.pqa()},ZOR.Isa.prototype.oqa=function(){return this.q.oqa()},ZOR.Isa.prototype.setAlpha=function(t){this.view&&this.view.setAlpha(t)},ZOR.Isa.prototype.Fsa=function(t){this.view=new ZOR.ata(this.q,t,this.i,this.bta)},ZOR.Isa.prototype.Zsa=function(t){this.view.remove(t),this.view=void 0},ZOR.Isa.prototype.m4=function(t){this.q.p.scale+=t},ZOR.Isa.prototype.nta=function(t,e){this.ota=e,this.pta=t/e},ZOR.Isa.prototype.qta=function(){this.view&&this.q.p.position.Di(this.view.Csa.position)},ZOR.Isa.prototype.Lsa=function(t){this.setScale(t),this.view.update(t)},ZOR.Isa.prototype.Msa=function(t){this.q.p.Opa=t,this.view.Msa(t)},ZOR.Isa.prototype.Ksa=function(t){this.q.p.position.Di(t),this.view.Ksa(t)},ZOR.Isa.prototype.N=function(){return this.q.p.scale},ZOR.Isa.prototype.setScale=function(t){this.q.p.scale=t},ZOR.Isa.prototype.update=function(t,e,n,i){this.q.Xpa.Ypa.update(),config.Gla&&this.Wsa(e),this.rta(i,n),this.view.Hsa(this.N()),this.view.Msa(this.q.p.Opa),this.ota>0&&(this.view.m4(this.pta),this.ota--)},ZOR.Isa.prototype.rta=function(t,e){this.q.p.a6.sub(e.Hna),this.q.p.a6.normalize(),this.q.p.a6.Xi(player.pqa()*t),this.view.Csa.position.sub(UTIL.Ooa(this.view.Csa.position,0,this.q.p.a6,zorbioModel.npa)),this.q.p.position.Di(this.view.Csa.position),this.sta(),e.Hna.set(0,0,0)},ZOR.Isa.prototype.sta=function(){var t={x:this.view.Csa.position.x,y:this.view.Csa.position.y,z:this.view.Csa.position.z},e=Date.now()-this.q.Vpa;this.q.p.Kpa.push({position:t,N:this.N(),time:e}),this.q.p.Kpa.length>config.Rma&&this.q.p.Kpa.shift()},ZOR.Isa.prototype.Dsa=function(){this.q.p.a6.set(0,0,0)},ZOR.Isa.prototype.Wsa=function(t){var e=this.lta,n=this.view.Csa;e.Di(n.position),e.sub(t.position),e.Xi(-1),e.normalize(),e.Xi(this.pqa()),this.q.p.a6.add(e)},ZOR.Isa.prototype.Xsa=function(t){var e=this.mta,n=this.view.Csa;e.Di(n.position),e.sub(t.position),e.normalize(),e.Xi(this.pqa()),this.q.p.a6.add(e)},ZOR.Isa.prototype.Gsa=function(t){this.view.Gsa(t)},ZOR.Isa.prototype.tta=function(){this.q.Xpa.Ypa.sda()},ZOR.Isa.prototype.Vsa=function(){this.q.Xpa.Ypa.xqa()},ZOR.Isa.prototype.Ysa=function(){return this.q.Xpa.Ypa.qqa()},ZOR.Isa.prototype.Usa=function(){return this.q.Xpa.Ypa.yqa()},ZOR.Isa.prototype.uta=function(t){this.q.Xpa.Ypa.active=t},ZOR.Isa.prototype.Qsa=function(t){this.vta=t},ZOR.Isa.prototype.Psa=function(){return this.vta};var FoodController=function(t,e){this.q=t,this.view=new FoodView,this.wta=new THREE.K,this.wta.Di(e),this.xta=new THREE.v7({Y7:!0,V7:1/0,W7:8,X7:.15}),this.zsa=function(t){this.view.zsa(t,this.q.upa,this.q.qpa,this.wta,this.xta)},this.update=function(t){this.wta.Di(t),this.view.update()},this.yta=function(){return this.view.zta},this.Ata=function(t){return this.view.Ata(t)},this.Tsa=function(t){this.view.Tsa(t)},this.$sa=function(t){this.view.$sa(t)},this.Asa=function(t){this.view.Asa(t)},this.Esa=function(t,e){var n,i,r=0,o=t.view.Csa,a=t.N(),s=this.xta.search(o.position,a+25);for(n=0,i=s.length;n<i;n++){var h=s[n],u=s[n].object.Kqa;if(this.Ata(u)&&(r=h.position.pm(o.position),r<=a+config.Hma)){e(u);var c=_.Gf(config.wna),f=h.position.clone().Em(camera.ux).x/32;ZOR.pra.qra.rra.play({pitch:c,mga:f,volume:localStorage.una*config.xna,Zfa:{_fa:.3*Math.random()+.5}})}}}},FoodView=function(){this.zta=!1,this.zsa=function(t,e,n,i,r){this.translate=new Float32Array(3*n),this._r=new Float32Array(3*n),this.Bta=new Float32Array(n),this.j=new THREE.dt,this.j.Di(new THREE.TG(2,2));for(var o,a,s,h,u,c,f=UTIL.Voa(config.Jma),l=this.translate,p=this._r,d=this.Bta,E=0,v=0,g=n;v<g;v++){o=e[E],a=e[E+1],s=e[E+2];var m=f(o,a,s);h=m.r,u=m.Ci,c=m.b,d[v]=0,l[E]=o,l[E+1]=a,l[E+2]=s,p[E]=h,p[E+1]=u,p[E+2]=c;var y={x:o,y:a,z:s,N:1,Kqa:v};r.add(y),E+=3}this.j.Us("translate",new THREE.Wr(l,3,1)),this.j.Us("respawning",new THREE.Wr(d,1,1)),this.j.Us("color",new THREE.Wr(p,3,1)),this.k=new THREE.nC({l:{map:{type:"t",value:(new THREE.A).load("textures/soft-square.png")},s:{type:"v3",value:i},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u},Cta:{type:"f",value:~~config.ena},Gma:{type:"f",value:config.Gma}},B:document.getElementById("food-vertex-shader").textContent,C:document.getElementById("food-frag-shader").textContent,iA:!0,jA:!0}),this.e6=new THREE.jq(this.j,this.k),this.e6.Lq=!1,t.add(this.e6),this.zta=!0},this.update=function(){for(var t,e=this.Bta,n=e.length,i=config.Gma,r=ZOR.Foa.get;n--;)t=e[n],t<=i&&(e[n]=Math.max(0,t-Math.round(r())));this.e6.j.attributes.Bta.Ar=!0},this.Ata=function(t){return 0===this.Bta[t]},this.Tsa=function(t){this.Bta[t]=config.Gma+1},this.$sa=function(t){this.Bta[t]=config.Gma},this.Asa=function(t){_.dg(t,this.Tsa.bind(this))}},ZOR=ZOR||{};ZOR.eta=function(t,e){this.Dta=0,this.Eta=1,this.Fta=2,this.Gta=3,this.P7=e,this.Hta=t,this.time=.1,this.Ita=config.Cma,this.Jta=config.ima/2,this.j=new THREE.vN(this.Jta,this.Jta,this.Ita,16,12,!0),this.j.Uq(Math.PI/2),this.Kta(),this.Lta(),this.Mta(),this.Nta(this.Ita),this.k=new THREE.eC({l:{time:{type:"f",value:this.time},Ota:{type:"f",value:0},Pta:{type:"c",value:new THREE.T(this.Hta.Z)},Qta:{type:"c",value:0},Rta:{type:"f",value:0},s:{type:"v3",value:playerFogCenter},cD:{type:"v3",value:new THREE.K},t:{type:"f",value:config.t},u:{type:"f",value:~~config.u}},B:document.getElementById("drain-vertex-shader").textContent,C:document.getElementById("drain-frag-shader").textContent,Hz:THREE.yg,D:!0,opacity:.8,depthFunc:THREE.ah,iA:!1,jA:!0,Gy:THREE.Gg,hA:1,cs:!0}),this.e6=new THREE.jq(this.j,this.k),this.e6.Mq=10,this.e6.MC[this.Dta]=0,this.e6.MC[this.Eta]=0,this.e6.MC[this.Fta]=0,this.e6.MC[this.Gta]=.065,this.hide(),e.add(this.e6)},ZOR.eta.prototype.Sta=function(t,e){return Math.max(0,1-Math.pow(t-e/2,2)/Math.pow(e/2,2))},ZOR.eta.prototype.update=function(t){if(0===t)return void this.hide();var e=ZOR.vsa.lpa[t];if(e){var n=this.Hta.Csa.position,i=e.view.Csa.position,r=this.Hta.Csa.scale.x,o=e.view.Csa.scale.x,a=n.pm(i)-r-o;this.k.l.cD.value.Di(this.e6.position),e&&n&&i&&r&&o?this.Tta(a):this.hide(),this.Uta()&&(this.Vta(a),this.Wta(e,a),this.Xta(this.Hta.Csa.scale.x),this.Yta(e.q.p.scale),this.Ksa(n,i,r,o))}},ZOR.eta.prototype.hide=function(){this.e6.k.visible&&(this.e6.k.visible=!1)},ZOR.eta.prototype.show=function(){this.e6.k.visible||(this.e6.k.visible=!0)},ZOR.eta.prototype.Uta=function(){return this.k.visible},ZOR.eta.prototype.Tta=function(t){t>0?this.show():this.hide()},ZOR.eta.prototype.Ksa=function(t,e,n,i){var r=e.clone().sub(t).normalize().Xi(-i).add(t),o=t.clone().sub(e).normalize().Xi(-n).add(e);this.e6.position.Di(r.add(o).km(2)),this.e6.ho(t)},ZOR.eta.prototype.Wta=function(t,e){this.time+=ZOR.Foa.get()/config.Ema,this.k.l.time.value=this.time,this.k.l.Qta.value=new THREE.T(t.view.Z),this.k.l.Rta.value=e,this.k.l.Ota.value=1-e/config.Cma},ZOR.eta.prototype.Kta=function(){var t=this.Zta();this.j.cs.push({name:"stretch",Hn:t})},ZOR.eta.prototype.Zta=function(){for(var t=[],e=0;e<this.j.Hn.length;e++)t[e]=this.j.Hn[e].clone(),t[e].z=0;return t},ZOR.eta.prototype.Vta=function(t){this.e6.MC[this.Dta]=1-t/config.Cma},ZOR.eta.prototype.$ta=function(t,e){var n=.85-Math.pow(t/config.ima,2)/2;this.e6.MC[e]=n},ZOR.eta.prototype.Lta=function(){var t=this._ta();this.j.cs.push({name:"drainer_taper",Hn:t})},ZOR.eta.prototype._ta=function(){for(var t,e=[],n=0;n<this.j.Hn.length;n++)e[n]=this.j.Hn[n].clone(),t=1-(e[n].z+config.Cma/2)/this.Ita,e[n].x*=t,e[n].y*=t;return e},ZOR.eta.prototype.Xta=function(t){this.$ta(t,this.Eta)},ZOR.eta.prototype.Mta=function(){var t=this.aua();this.j.cs.push({name:"drainee_taper",Hn:t})},ZOR.eta.prototype.aua=function(){for(var t,e=[],n=0;n<this.j.Hn.length;n++)e[n]=this.j.Hn[n].clone(),t=(e[n].z+config.Cma/2)/this.Ita,e[n].x*=t,e[n].y*=t;return e},ZOR.eta.prototype.Yta=function(t){this.$ta(t,this.Fta)},ZOR.eta.prototype.Nta=function(t){var e=this.bua(t);this.j.cs.push({name:"pinch",Hn:e})},ZOR.eta.prototype.bua=function(t){for(var e=[],n=0;n<this.j.Hn.length;n++)e[n]=this.j.Hn[n].clone(),e[n].x*=-this.Sta(e[n].z+t/2,t),e[n].y*=-this.Sta(e[n].z+t/2,t);return e},ZOR.eta.prototype.Ks=function(){this.P7.remove(this.e6),this.j.Ks(),this.k.Ks()};var ws,zorPingStart,zorPingDuration=0,actorUpdateGap=0,NB_SRVID="",interval_id_heartbeat,throttledSendPlayerUpdate=_.$d(sendPlayerUpdate,config.Tla);
//# sourceMappingURL=bundle.min.map.js